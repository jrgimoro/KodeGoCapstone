(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"1/Z5":function(e,t,n){"use strict";var r=n("jqHE");n.d(t,"a",(function(){return r.a}))},"18PS":function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n("lSNA"),c=n.n(r),i=n("J4zp"),a=n.n(i),o=n("QILm"),s=n.n(o),l=n("q1tI"),u=n("kazx"),d=n("giaj"),j=n("Vbab"),b=n("hvkN"),p=n("2mZO"),O=n("DI5+"),f={userAvatar:"+syWHcL",roundedCorners:"JIaregA",xxsmall:"vY9C+ym",xsmall:"hea1DQ0",small:"AGpOHKn",medium:"nim+ugS",large:"_0J7x-Vo",xlarge:"Stn-47y"},h=n("nKUr"),m=["user","size","roundedCorners","exceptionallySetClassName","src"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={xxsmall:32,xsmall:36,small:50,medium:100,large:195,xlarge:195},x={xxsmall:"small",xsmall:"small",small:"small",medium:"medium",large:"big",xlarge:"big"};function w(e){var t=e.user,n=e.size,r=e.roundedCorners,c=void 0!==r&&r,i=e.exceptionallySetClassName,o=e.src,v=s()(e,m),w=Object(O.a)()===d.f,k=Object(l.useState)(!1),_=a()(k,2),S=_[0],C=_[1],P=[f.userAvatar,f[n],c?f.roundedCorners:null,i];if("everyone"===t)return Object(h.jsx)(u.a,g(g({className:P},v),{},{children:Object(h.jsx)(p.a,{className:f.userAvatar,"aria-hidden":!0})}));var D=null!=o?o:null==t||S?b.a:function(e){var t=e.user,n=e.size,r=e.darkTheme;if(t.image_id)return"".concat("https://dcff1xvirvpfp.cloudfront.net","/").concat(t.image_id,"_").concat(x[n],".jpg");var c=y[n],i=("email"in t?t.email:t.user_email)||"",a=$encode({fullName:t.full_name||i.split("@")[0],email:i,size:c,bg:r?"1f1f1f":"ffffff"});return"".concat("https://avatars.doist.com","?").concat(a)}({user:t,size:n,darkTheme:w});return Object(h.jsx)(u.a,g(g({className:P},v),{},{children:Object(h.jsx)("img",{src:D,alt:null!=t?t.full_name:Object(j.a)("Anonymous user"),onError:function(){S||C(!0)}})}))}},"2OfN":function(e,t,n){"use strict";n.d(t,"a",(function(){return B})),n.d(t,"b",(function(){return q}));var r=n("lSNA"),c=n.n(r),i=n("QILm"),a=n.n(i),o=n("q1tI"),s=n("kazx"),l=n("RsDw"),u=n("G3Y2"),d=n("4rNB"),j=n("Vbab"),b=n("gd9Y"),p=n("4eld"),O=n("ISxh"),f=n("++xj"),h=n("GpCm"),m=n("rcvD"),v="A-1+3VRDSVrGqFoUjyOVqA==",g="eYDM03d0TdWUmvQvarxM6w==",y="nyM4MbjjB+aCdYL9moVpWA==",x="FnFY2YlPR10DcnOkjvMMmA==",w="AuiqUdaGFITJcNpaWKvZFA==",k="q-PolHQBMEHmpVzKzPeWWA==",_="jKSmQzam-wzJi+SlAmeK4A==",S="DebMdpIqKcFRpFpVm5-wrA==",C="eubGKL5CZbRqMPNBJ3AgNA==",P="tbPt3rK1Y+-l+2KyGlnEKQ==",D="SGY5Hai3cSVOkObv+82+hQ==",I="bwinE4g8Ubo+bdRFBhZqsg==",T="mKhIUVyJYf3pexnRkJu3eA==",E="fgALZGUA6SZg9blSarq2hg==",A="_7DCqR7o3BYjme7edphDp8A==",N=n("nKUr"),R=["children","className"],L=["label","icon","color","count","overdue","isExpanded","onEdit","onToggleExpand","expandedElementId","linkTo","menuLabel","renderLegacyMenu","renderMenu","showExpandButton","showDragOverState","showTaskCount","tooltipContent","tooltipPosition","hideTooltip","children"];function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=Object(o.forwardRef)((function(e,t){var n=e.children,r=e.className,c=a()(e,R);return Object(N.jsx)(s.a,z(z({as:"ul"},c),{},{ref:t,className:[v,"focus-marker-enabled-within",r],children:n}))})),q=Object(o.forwardRef)((function(e,t){var n,r,i=e.label,v=e.icon,R=e.color,M=e.count,B=e.overdue,q=e.isExpanded,U=void 0!==q&&q,K=e.onEdit,F=e.onToggleExpand,V=e.expandedElementId,H=e.linkTo,Y=e.menuLabel,W=e.renderLegacyMenu,G=e.renderMenu,Q=e.showExpandButton,J=void 0!==Q&&Q,X=e.showDragOverState,Z=void 0!==X&&X,$=e.showTaskCount,ee=void 0===$||$,te=e.tooltipContent,ne=e.tooltipPosition,re=e.hideTooltip,ce=e.children,ie=a()(e,L),ae=!G&&W&&Boolean(Y),oe=Object(h.d)(),se=Object(b.i)(H),le=Object(o.useMemo)((function(){return Object(m.a)(i)}),[i]),ue=ee&&M?Object(N.jsx)(s.a,{as:"span",className:[w,c()({},T,B)],"aria-hidden":!0,children:M}):null,de=ae?Object(N.jsx)(p.a,{className:k,onClick:oe.openOnClick,"aria-label":Y,title:Y,"aria-expanded":oe.isOpen,children:Object(N.jsx)("span",{children:Object(N.jsx)(f.a,{})})}):null,je=G?Object(N.jsx)(s.a,{className:_,children:Object(N.jsx)(l.b,{as:u.a,size:"small",variant:"quaternary",icon:Object(N.jsx)(f.a,{"aria-hidden":!0}),"aria-label":Y})}):null,be=null!=M?"".concat(i,", ").concat(M||0," ").concat(1===M?Object(j.a)("task"):Object(j.a)("tasks")):i,pe=Object(N.jsxs)(b.a,{view:H,"aria-label":be,children:[Object(N.jsx)("span",{"aria-hidden":!0,className:y,style:R?{color:R}:void 0,children:v}),Object(N.jsx)("span",{className:x,children:le})]});return Object(N.jsxs)("li",z(z({},ie),{},{ref:t,onClick:function(e){e.altKey&&K&&(e.preventDefault(),K())},children:[Object(N.jsxs)(s.a,{"data-sidebar-list-item":!0,display:"flex",alignItems:"center",className:[g,(n={},c()(n,C,Z),c()(n,S,se),c()(n,P,oe.isOpen),n)],children:[J?Object(N.jsx)("button",{type:"button",onClick:F,className:D,"aria-label":Object(j.a)("Show/hide sub-projects"),"aria-expanded":U,"aria-controls":V,children:Object(N.jsx)(O.a,{})}):null,Object(N.jsxs)(s.a,{onContextMenu:ae?oe.openOnContextMenu:void 0,className:I,display:"flex",alignItems:"center",borderRadius:"standard",flexGrow:1,maxWidth:"full",children:[re?pe:Object(N.jsx)(d.a,{content:null!=te?te:le,position:null!=ne?ne:"bottom",children:pe}),Object(N.jsxs)(s.a,{position:"relative",className:[(r={},c()(r,E,null!=M||ae),c()(r,A,ae||Boolean(G)),r)],children:[ue,de,null==G?void 0:G(je)]}),ae&&oe.isOpen?Object(N.jsx)(h.c,z(z({},oe.props),{},{withArrow:!1,children:W(oe.close)})):null]})]}),ce]}))}))},"2Y1q":function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return O}));var r=n("lSNA"),c=n.n(r),i=n("Bcse"),a=n.n(i),o=n("3WX/"),s=n.n(o),l=n("TQFH"),u=n("dAW7");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e){var t=e.editorState,n=e.user,r=e.parentId,c=e.project,i=e.section,a=e.defaultAddFields,o=e.allowEmailAdd,s=e.allowWebsiteAdd,d=Object(l.n)(n);return r&&(d=j(j({},d),{},{parent_id:r})),c&&(d=j(j({},d),{},{project_id:c.id})),i&&(d=j(j({},d),{},{section_id:i.id})),d=j(j({},d),a),t&&t.mode===u.e&&s?d=j(j({},d),s.defaultFields):t&&t.mode===u.d&&o&&(d=j(j({},d),o.defaultFields)),d}function p(e){var t=e.editorIndent,n=e.editorState,r=e.rootParentId,c=void 0===r?null:r,i=e.hierarchy,a=e.tasksMap,o=e.siblings,s=e.indents,l=e.bottomTaskId;if(!a||n.mode===u.g&&n.taskId&&t===s[n.taskId])return null;var d,j,b=null,p=0,O=i[0];if(1===t&&(n.mode===u.f||O&&O.id===n.taskId))return 0===i.length?(b=c,p=1):(b=a[O.id].parent_id,p=n.mode===u.b?a[O.id].child_order+1:a[O.id].child_order),{parentId:b,childOrder:p};n.taskId?(d=n.mode===u.b?n.taskId:o[n.taskId].previousSiblingId,j=n.mode===u.a?n.taskId:o[n.taskId].nextSiblingId):d=l;var f=d?s[d]:1,h=j?s[j]:1;if(d){if(t>f)b=d,p=j&&h===t?a[j].child_order:1;else if(t===f)b=a[d].parent_id,p=j&&h===t?a[j].child_order:a[d].child_order+1;else if(t<f){for(;d&&f!==t;)f=(d=o[d].previousSiblingId)?s[d]:1;for(;j&&h!==t;)h=(j=o[j].nextSiblingId)?s[j]:1;var m=d?a[d]:null,v=j?a[j]:null;m?(b=m.parent_id,p=v?v.child_order:m.child_order+1):(b=null,p=v?v.child_order:1)}}else b=c,p=j?a[j].child_order:1;return{parentId:b,childOrder:p}}function O(e){var t=e.editorValue,n=e.editorIndent,r=e.editorState,c=e.task,i=e.tasksMap,o=e.hierarchy,l=e.siblings,u=e.indents,d=e.bottomTaskId,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},O=b.disableOrderChanges,f=void 0!==O&&O,h=s()(t,(function(e,t){return void 0===e||"note"===t||"reminders"===t}));if(!f){var m=p({editorIndent:n,editorState:r,hierarchy:o,tasksMap:i,siblings:l,indents:u,bottomTaskId:d,rootParentId:h.parent_id});m&&(h=j(j({},h),{},{parent_id:m.parentId,child_order:m.childOrder}))}return(void 0!==c.project_id&&c.project_id!==h.project_id||void 0!==c.section_id&&c.section_id!==h.section_id)&&(h=j(j({},h),{},{parent_id:null}),h=a()("child_order",h)),{fields:h,note:t.note,reminders:t.reminders}}},"4MLW":function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return l}));var r="overdue",c="day",i="filter",a="label",o="project",s="subtasks",l="search"},"5rmi":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r,c=n("q1tI");function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e){return c.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.8 6.8c0 1.495-.977 3.054-2.142 4.344A16.316 16.316 0 018 12.729a16.315 16.315 0 01-1.658-1.585C5.177 9.854 4.2 8.295 4.2 6.8a3.8 3.8 0 017.6 0zm1 0C12.8 10.571 8 14 8 14s-4.8-3.429-4.8-7.2a4.8 4.8 0 119.6 0zM8 8a1.25 1.25 0 100-2.5A1.25 1.25 0 008 8z",fill:"currentColor"})))}n.p},"5wkU":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n("Vbab"),c=n("OgjY"),i=n("j3q4"),a=n("4MLW");function o(e){return{key:"overdue",header:Object(r.a)("Overdue"),tasks:e,taskListType:a.d,disableAdd:!0}}function s(e,t,n){var r=n?n.toDate():Object(i.a)(e);return{key:e,header:r,tasks:t,taskListType:a.a,defaultFields:{due:n||c.a.fromDate(r)}}}},"6M/T":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n("J4zp"),c=n.n(r),i=n("q1tI"),a=n("/MKj"),o=n("nKUr"),s={hasSeenCompletedTasksToast:!1,showCompletedTasks:!1,viewCompletedTasksToast:function(){return{}},completedThreshold:1},l=Object(i.createContext)(s);function u(e){var t=e.children,n=Object(i.useState)(!1),r=c()(n,2),s=r[0],u=r[1],d=Object(a.h)((function(e){return e.stats.completed_count})),j=1===d&&!s,b=Object(i.useMemo)((function(){return{hasSeenCompletedTasksToast:s,showCompletedTasks:j,viewCompletedTasksToast:function(){return u(!0)},completedThreshold:1}}),[s,j]);return Object(o.jsx)(l.Provider,{value:b,children:t})}function d(){return Object(i.useContext)(l)}},"7BR2":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return b})),n.d(t,"g",(function(){return p}));var r=n("lDtu"),c=n("Vbab"),i=n("Ek05"),a=n("LYyr"),o="relativeTime",s="absoluteTime",l="location",u=null;function d(){return null!==u?u:u=new Promise((function(e){if(window.google&&window.google.maps)return e();var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?libraries=places&async=2&key=AIzaSyCXMDZI-DQwpQ72521KB_V45LXL1Zm_lHU",t.onload=e,document.body.appendChild(t)}))}function j(){return{0:Object(c.a)("0 min"),10:Object(c.a)("10 min"),30:Object(c.a)("30 min"),45:Object(c.a)("45 min"),60:Object(c.a)("1 hour"),120:Object(c.a)("2 hours"),180:Object(c.a)("3 hours"),1440:Object(c.a)("1 day"),2880:Object(c.a)("2 days"),4320:Object(c.a)("3 days"),10080:Object(c.a)("1 week")}}function b(e){if("absolute"===e.type){if(e.due.is_recurring)return[e.due.string];var t=e.due.toDate();return[i.a.humanizeDayDiff(r.b.day_diff(new Date,t),t)]}if("location"===e.type)return[e.name,"on_enter"===e.loc_trigger?Object(c.a)("When I arrive"):Object(c.a)("When I leave")];if("relative"===e.type){var n=j()[e.minute_offset];return void 0!==n?[Object(c.a)("%s before").replace("%s",n)]:[Object(a.a)(Object(c.c)("reminder","1 min before","{n} min before",e.minute_offset),{n:e.minute_offset})]}}function p(e){var t=i.a.parse(e);return""===e?{error:Object(c.a)("Date can't be empty")}:t.error||!t.due_date?{error:Object(c.a)("Invalid date")}:t.due_date&&!r.b.has_time(t.due_date)?{error:Object(c.a)('Add a time to set your reminder (like "at 2 PM")')}:t}},"7XGh":function(e,t,n){"use strict";var r=n("lwsE"),c=n.n(r),i=n("W8MJ"),a=n.n(i),o=n("PJYZ"),s=n.n(o),l=n("7W2i"),u=n.n(l),d=n("a1gu"),j=n.n(d),b=n("Nsbk"),p=n.n(b),O=n("lSNA"),f=n.n(O),h=n("q1tI"),m=n("i8i4"),v=n.n(m),g=n("P/G1"),y=n.n(g),x=n("Vbab"),w=n("x1yf"),k=n("it2E"),_=n("NLcT"),S=n("XM3Z"),C=n("oHMr"),P=n("3JOJ"),D=n("5QlP"),I=n("J4zp"),T=n.n(I),E=n("RIqP"),A=n.n(E),N=n("TYy9"),R=n.n(N),L=n("9UKM"),M=n.n(L),z=n("17x9"),B=n.n(z),q=n("TcCo"),U=n("nKUr");function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var c=p()(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return j()(this,n)}}var F=function(e){u()(n,e);var t=K(n);function n(e){var r;return c()(this,n),r=t.call(this,e),f()(s()(r),"handleReportExportClick",(function(){r.setState({reportExporting:!0}),r.props.onReportExportClick().then((function(e){r.setState({reportExporting:!1,reportExportLink:e})})).catch((function(e){r.setState({reportExporting:!1,reportExportError:e})}))})),f()(s()(r),"handleUnsyncExportClick",(function(){r.setState({unsyncExporting:!0}),r.props.onUnsyncExportClick().then((function(e){r.setState({unsyncExporting:!1,unsyncExportLink:e})})).catch((function(e){r.setState({unsyncExporting:!1,unsyncExportError:e})}))})),r.state={reportExporting:!1,reportExportError:null,reportExportLink:null,unsyncExporting:!1,unsyncExportError:null,unsyncExportLink:null},r}return a()(n,[{key:"renderSyncLogs",value:function(){var e=A()(this.props.logs);e.reverse();var t=e.map((function(e,t){return Object(U.jsxs)("tr",{className:"level_error",children:[Object(U.jsx)("td",{className:"time",children:e.isoTime}),Object(U.jsxs)("td",{children:["[ERROR] ",e.msg]})]},"".concat(e.timestamp,".").concat(t))}));return 0==t.length&&(t=Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{className:"time"}),Object(U.jsx)("td",{children:"No error events recorded"})]})),Object(U.jsxs)("div",{children:[Object(U.jsx)("h4",{children:"Sync error history logs (most recent on the top)"}),Object(U.jsx)("table",{className:"sync_logs",children:Object(U.jsx)("tbody",{children:t})})]})}},{key:"renderStatus",value:function(){var e,t=this.props,n=t.queueLength,r=t.firstRunCmdCount,c=t.failedCmdCount,i=t.lastSyncAt,a=t.unsync;i&&(e=i.toString());var o,s=R()(y()(a)).length;return s>0&&(o="("+(o=M()(a).map((function(e){var t=T()(e,2),n=t[0],r=t[1];return 0==r.length?null:"".concat(n,": ").concat(r.length)})).filter((function(e){return e})).join(" "))+")"),Object(U.jsxs)("div",{children:[Object(U.jsx)("h4",{children:"System summery"}),Object(U.jsx)("table",{className:"status_table",children:Object(U.jsxs)("tbody",{children:[Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:"Last sync"}),Object(U.jsx)("td",{children:e})]}),Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:"Sync queue length"}),Object(U.jsx)("td",{children:n})]}),Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:"First run commands count"}),Object(U.jsx)("td",{children:r})]}),Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:"Failed commands count"}),Object(U.jsx)("td",{children:c})]}),Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:"Unsynced objects count"}),Object(U.jsxs)("td",{children:[s," ",o]})]})]})})]})}},{key:"renderReportDownload",value:function(){return this.state.reportExportLink?Object(U.jsx)("section",{children:Object(U.jsx)("a",{href:this.state.reportExportLink,target:"_blank",rel:"noopener noreferrer",children:"Download"})}):Object(U.jsxs)("section",{children:[Object(U.jsx)("a",{className:"ist_button",onClick:this.handleReportExportClick,children:"Download Error Logs"}),this.state.reportExporting?Object(U.jsx)(q.b,{}):null]})}},{key:"renderUnsyncExport",value:function(){return 0===R()(y()(this.props.unsync)).length?null:this.state.unsyncExportLink?Object(U.jsx)("section",{children:Object(U.jsx)("a",{href:this.state.unsyncExportLink,target:"_blank",rel:"noopener noreferrer",children:"Download"})}):Object(U.jsxs)("section",{children:[Object(U.jsx)("a",{className:"ist_button",onClick:this.handleUnsyncExportClick,children:"Download Unsynced Datas"}),this.state.unsyncExporting?Object(U.jsx)(q.b,{}):null]})}},{key:"render",value:function(){return Object(U.jsxs)("div",{className:"debug_tool",children:[this.renderStatus(),this.renderSyncLogs(),this.renderReportDownload(),this.renderUnsyncExport()]})}}]),n}(h.Component);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var c=p()(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return j()(this,n)}}f()(F,"propTypes",{logs:B.a.array.isRequired,unsync:B.a.shape({items:B.a.array,projects:B.a.array,notes:B.a.array,reminders:B.a.array,labels:B.a.array}).isRequired,lastSyncAt:B.a.object,queueLength:B.a.number,firstRunCmdCount:B.a.number,failedCmdCount:B.a.number,onReportExportClick:B.a.func,onUnsyncExportClick:B.a.func}),$AEV(document,"keydown",(function(e){var t,n=window.event?event:e;68==n.keyCode&&n.ctrlKey&&e.altKey&&(t=DIV(),GB_showHTML(Object(x.a)("Sync debug console"),t,500,700,{close_validator_fn:function(){return v.a.unmountComponentAtNode(t),!0}}),v.a.render(Object(U.jsx)(G,{}),t))}));var W=function(e){return y()(e).filter((function(e){return Object(P.a)(e.id)}))},G=function(e){u()(n,e);var t=Y(n);function n(e){var r;c()(this,n),r=t.call(this,e),f()(s()(r),"handleUnsyncExport",(function(){var e=r.getAllUnsyncObject();e.user_id=window.User.id;var t=JSON.stringify(e);return Object(D.a)(t,"unsync_data.json")})),f()(s()(r),"handleReportExport",(function(){var e=S.c.getReport(),t=JSON.stringify(e);return Object(D.a)(t,"sync_report.json")}));var i=S.c.getReport(),a=r.getAllUnsyncObject();return r.state=H(H({},i),{},{unsync:a,onUnsyncExportClick:r.handleUnsyncExport,onReportExportClick:r.handleReportExport}),r}return a()(n,[{key:"getAllUnsyncObject",value:function(){return{projects:W(k.a.model_data),notes:W(C.default.getState().notes),reminders:W(_.a.model_data),labels:W(w.a.model_data)}}},{key:"render",value:function(){return Object(U.jsx)(F,H({},this.state))}}]),n}(h.Component)},"8U9V":function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var r=n("QILm"),c=n.n(r),i=n("lwsE"),a=n.n(i),o=n("W8MJ"),s=n.n(o),l=n("PJYZ"),u=n.n(l),d=n("7W2i"),j=n.n(d),b=n("a1gu"),p=n.n(b),O=n("Nsbk"),f=n.n(O),h=n("lSNA"),m=n.n(h),v=n("q1tI"),g=n("dRu9"),y=n("17x9"),x=n.n(y),w=n("t6YY"),k=n("i8i4"),_=n.n(k);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var c=f()(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return p()(this,n)}}var C=function(e){j()(n,e);var t=S(n);function n(){var e;a()(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return e=t.call.apply(t,[this].concat(c)),m()(u()(e),"layer",null),e}return s()(n,[{key:"componentDidMount",value:function(){_.a.createPortal||this.renderLayer()}},{key:"componentDidUpdate",value:function(){_.a.createPortal||this.renderLayer()}},{key:"componentWillUnmount",value:function(){this.unrenderLayer()}},{key:"getLayer",value:function(){return this.layer||(this.layer=document.createElement("div"),this.layer.setAttribute("data-mui-portal","true"),document.body&&this.layer&&document.body.appendChild(this.layer),this.props.className&&(this.layer.className=this.props.className)),this.layer}},{key:"unrenderLayer",value:function(){this.layer&&(_.a.createPortal||_.a.unmountComponentAtNode(this.layer),document.body&&document.body.removeChild(this.layer),this.layer=null)}},{key:"renderLayer",value:function(){var e=this.props,t=e.children;if(e.open){var n=v.Children.only(t);_.a.unstable_renderSubtreeIntoContainer(this,n,this.getLayer())}else this.unrenderLayer()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.open;if(!_.a.createPortal)return null;if(n){var r=this.getLayer();return _.a.createPortal(t,r)}return this.unrenderLayer(),null}}]),n}(v.Component);C.propTypes={children:x.a.node,open:x.a.bool,className:x.a.string},C.defaultProps={open:!1};var P=C,D=n("nKUr"),I=["open","autoHideDuration"];function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var c=f()(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return p()(this,n)}}var N={transition:"all ".concat(300,"ms ease-out"),top:"-10px",opacity:0},R={entering:{top:"20px",opacity:0},entered:{top:"50px",opacity:1}},L=function(e){j()(n,e);var t=A(n);function n(e){var r;return a()(this,n),r=t.call(this,e),m()(u()(r),"timerAutoHide",null),m()(u()(r),"handleTransitionExited",(function(){r.setState({exited:!0})})),m()(u()(r),"handleMouseEnter",(function(e){r.props.onMouseEnter&&r.props.onMouseEnter(e),r.handlePause()})),m()(u()(r),"handleMouseLeave",(function(e){r.props.onMouseLeave&&r.props.onMouseLeave(e),r.handleResume()})),m()(u()(r),"handlePause",(function(){clearTimeout(r.timerAutoHide)})),m()(u()(r),"handleResume",(function(){if(null!=r.props.autoHideDuration){if(void 0!==r.props.resumeHideDuration)return void r.setAutoHideTimer(r.props.resumeHideDuration);r.setAutoHideTimer(.5*(r.props.autoHideDuration||0))}})),m()(u()(r),"handleCloseClick",(function(e){r.props.onClose&&(r.props.onClose(e,"clickicon"),e.stopPropagation())})),r.state={exited:!1},r}return s()(n,[{key:"UNSAFE_componentWillMount",value:function(){this.props.open||this.setState({exited:!0})}},{key:"componentDidMount",value:function(){this.props.open&&this.setAutoHideTimer()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.open&&this.state.exited&&this.setState({exited:!1})}},{key:"componentDidUpdate",value:function(e){e.open!==this.props.open&&(this.props.open?this.setAutoHideTimer():clearTimeout(this.timerAutoHide))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerAutoHide)}},{key:"setAutoHideTimer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.props.onClose&&null!=this.props.autoHideDuration&&(clearTimeout(this.timerAutoHide),this.timerAutoHide=setTimeout((function(){e.props.onClose&&null!=e.props.autoHideDuration&&e.props.onClose(null,"timeout")}),t||this.props.autoHideDuration||0))}},{key:"render",value:function(){var e=this,t=this.props,n=t.open,r=(t.autoHideDuration,c()(t,I));if(!n&&this.state.exited)return null;var i={in:n,appear:!0,timeout:300,onExited:this.handleTransitionExited};return Object(D.jsx)(P,{open:!0,children:Object(D.jsx)(g.a,E(E({},i),{},{children:function(t){return Object(D.jsxs)("div",E(E({onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,className:"top_notifier",style:E(E({},N),R[t])},r),{},{children:[Object(D.jsx)(w.a,{small:!0,onClick:e.handleCloseClick}),e.props.children]}))}}))})}}]),n}(v.Component);m()(L,"propTypes",{open:x.a.bool,autoHideDuration:x.a.number,resumeHideDuration:x.a.number,onClose:x.a.func,onMouseEnter:x.a.func,onMouseLeave:x.a.func,children:x.a.node}),m()(L,"defaultProps",{autoHideDuration:null})},"8dZE":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("J4zp"),c=n.n(r),i=n("nKUr");function a(e){return[Math.cos(2*Math.PI*e),Math.sin(2*Math.PI*e)]}var o={transform:"rotate(-90deg)",width:"24px",height:"24px"};function s(e){var t=e.progress,n=a(0),r=c()(n,2),s=r[0],l=r[1],u=a(t),d=c()(u,2),j=d[0],b=d[1],p=t>.5?1:0,O=["M ".concat(s," ").concat(l),"A 1 1 0 ".concat(p," 1 ").concat(j," ").concat(b),"L 0 0"].join(" ");return Object(i.jsxs)("svg",{viewBox:"-2 -2 4 4",style:o,children:[Object(i.jsx)("circle",{cx:"0",cy:"0",r:"1.4",fill:"none",visibility:"visible",stroke:"currentColor",strokeWidth:"0.2"}),Object(i.jsx)("path",{fill:"currentColor",d:O})]})}function l(){return Object(i.jsx)("svg",{width:24,height:24,children:Object(i.jsx)("path",{fill:"currentColor",d:"M12.707 12.707l-1.414-1.414-2.117-2.117c3.646-3.484 7.75-4.978 9.188-3.54 1.438 1.438-.056 5.542-3.54 9.188l-2.117-2.117zM10.586 12L12 13.414l-4.95 4.95a1 1 0 0 1-1.414-1.414l4.95-4.95zm5.763-7.882c-2.254.192-5.208 1.79-7.88 4.35L5.635 5.636a9.004 9.004 0 0 1 10.713-1.518zm3.533 3.533a9.004 9.004 0 0 1-1.518 10.713l-2.832-2.832c2.56-2.673 4.158-5.627 4.35-7.88z"})})}function u(){return Object(i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(i.jsx)("defs",{}),Object(i.jsxs)("g",{fill:"none",fillRule:"evenodd",transform:"translate(3 3)",children:[Object(i.jsx)("mask",{id:"4ZtaWA",fill:"#fff",children:Object(i.jsx)("path",{id:"a",d:"M12.3 5L7 10.3 5.4 8.6a.5.5 0 0 0-.8 0l-3.9 4a9 9 0 1 1 .5.9L5 9.7l1.6 1.7a.5.5 0 0 0 .8 0L13 5.7v3.8a.5.5 0 1 0 1 0v-5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.8z"})}),Object(i.jsx)("g",{mask:"url(#4ZtaWA)",children:Object(i.jsx)("path",{fill:"currentColor",d:"M-3-3h24v24H-3z"})})]})]})}function d(){return Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(i.jsx)("g",{fill:"none",fillRule:"evenodd",children:Object(i.jsx)("g",{fill:"currentColor",fillRule:"nonzero",children:Object(i.jsx)("g",{children:Object(i.jsx)("g",{children:Object(i.jsx)("path",{d:"M12 3c4.97 0 9 4.03 9 9s-4.03 9-9 9-9-4.03-9-9 4.03-9 9-9zm0 1c-4.418 0-8 3.582-8 8 0 .702.09 1.383.26 2.031l2.886-2.885c.196-.195.512-.195.708 0l2.646 2.647 4.793-4.794L13 9c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h3.52l.052.005L16.5 8c.036 0 .071.004.105.011l.046.012.04.015c.014.005.027.012.04.019.013.006.025.013.036.02l.035.025c.014.01.027.02.04.033l.012.011.011.013c.012.012.023.025.033.039l-.044-.052c.026.027.05.056.069.087l.02.034.02.042.014.04c.005.015.009.03.012.046l.006.033.005.051V12c0 .276-.224.5-.5.5s-.5-.224-.5-.5V9.706l-5.146 5.148c-.196.195-.512.195-.708 0L7.5 12.207 4.618 15.09C5.827 17.974 8.677 20 12 20c4.418 0 8-3.582 8-8s-3.582-8-8-8z",transform:"translate(-564 -480) translate(528 444) translate(36 36)"})})})})})})}function j(){return Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(i.jsxs)("g",{fill:"none",fillRule:"evenodd",transform:"translate(3 3)",children:[Object(i.jsx)("mask",{id:"y8QpGa",fill:"#fff",children:Object(i.jsx)("path",{id:"a",d:"M9 18A9 9 0 1 1 9 0a9 9 0 0 1 0 18zm4.9-12.9l-6.7 6.7-3.1-3.2a.5.5 0 1 0-.7.8l3.5 3.5a.5.5 0 0 0 .7 0l7-7a.5.5 0 0 0-.7-.8z"})}),Object(i.jsx)("g",{mask:"url(#y8QpGa)",children:Object(i.jsx)("path",{fill:"currentColor",d:"M-3-3h24v24H-3z"})})]})})}function b(){return Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(i.jsx)("g",{fill:"none",fillRule:"evenodd",children:Object(i.jsx)("g",{fill:"currentColor",fillRule:"nonzero",children:Object(i.jsx)("g",{children:Object(i.jsx)("g",{children:Object(i.jsx)("path",{d:"M12 3c4.97 0 9 4.03 9 9s-4.03 9-9 9-9-4.03-9-9 4.03-9 9-9zm0 1c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zm3.646 4.896c.196-.195.512-.195.708 0 .195.196.195.512 0 .708l-5.5 5.5c-.196.195-.512.195-.708 0l-2.5-2.5c-.195-.196-.195-.512 0-.708.196-.195.512-.195.708 0l2.146 2.147z",transform:"translate(-684 -480) translate(648 444) translate(36 36)"})})})})})})}function p(e){var t=e.vacationMode,n=e.progress,r=e.outline;return t?Object(i.jsx)(l,{}):0===n?r?Object(i.jsx)(d,{}):Object(i.jsx)(u,{}):n<1?Object(i.jsx)(s,{progress:n}):r?Object(i.jsx)(b,{}):Object(i.jsx)(j,{})}},"9d0M":function(e,t,n){"use strict";var r=n("lSNA"),c=n.n(r),i=n("/MKj"),a=n("NLcT"),o=n("adfy"),s=n("S+H7"),l=n("p3jf"),u=n("ImH7"),d=n("A72/"),j=n("J4zp"),b=n.n(j),p=n("q1tI"),O=n("17x9"),f=n.n(O),h=n("VFEO"),m=n("GpCm"),v=n("X6fj"),g=n("oDV5"),y=n("sUUx"),x=n("kazx"),w=n("1zEf"),k=n("Vbab"),_=n("OgjY"),S=n("4eld"),C=n("UVeO"),P=n("7BR2");function D(e){var t=e.type,n=Object(p.useState)(null),r=b()(n,2),c=r[0],i=r[1],a=Object(p.useState)("on_enter"),o=b()(a,2),s=o[0],l=o[1],u=Object(p.useRef)(null),d=Object(p.useRef)(null),j=Object(p.useRef)(null);function O(e,t){return{name:e,loc_lat:"".concat(t.lat()),loc_long:"".concat(t.lng()),loc_trigger:s,radius:100}}return Object(p.useEffect)((function(){var e,n,r,c=!1;if("location"===t)return Object(P.f)().then((function(){n=new window.google.maps.places.Autocomplete(j.current),e=window.google.maps.event.addListener(n,"place_changed",a),r=window.google.maps.event.addDomListener(j.current,"keydown",(function(e){13===e.keyCode?c&&(e.preventDefault(),e.stopPropagation()):c=!0}))})),function(){e&&window.google&&window.google.maps.event.removeListener(e),r&&window.google&&window.google.maps.event.removeListener(r),u.current&&(u.current=null),i(null)};function a(){c=!1;var e=n.getPlace();i(e)}}),[t,j]),Object(p.useEffect)((function(){if(c){var e,t,n=c.geometry;if(c.geometry)u.current||(e=new window.google.maps.Map(d.current,{zoom:17,mapTypeControl:!1,zoomControl:!0,streetViewControl:!1}),t=new window.google.maps.Marker({map:e,anchorPoint:new window.google.maps.Point(0,-29),draggable:!0}),u.current={gmap:e,gmarker:t}),u.current.gmarker.setPosition(n.location),u.current.gmarker.setVisible(!0),u.current.startLocation=u.current.gmarker.getPosition(),n.viewport?u.current.gmap.fitBounds(n.viewport):(u.current.gmap.setCenter(n.location),u.current.gmap.setZoom(17))}}),[c]),{place:c,mapCanvasRef:d,googlePlacesRef:j,setPastLocation:function(e){var t=e.name,n=e.lat,r=e.lng;Object(P.f)().then((function(){var e={viewport:null,location:new window.google.maps.LatLng(n,r)};i({name:t,geometry:e}),j.current&&(j.current.value=t)}))},getPlace:function(){return new Promise((function(e,t){if(c&&u.current&&u.current.gmarker){var n=u.current,r=n.gmarker,i=n.startLocation,a=r.getPosition();if(i&&a.lat()===i.lat()&&a.lng()===i.lng())return e(O(c.name,a));!function(e,t){var n={location:new window.google.maps.LatLng(e.lat(),e.lng()),radius:"5"};new window.google.maps.places.PlacesService(u.current.gmap).nearbySearch(n,(function(e){return e&&e.length>0?t(e[0].name):t(null)}))}(a,(function(t){var n=t||c.name;e(O(n,a))}))}else t(new Error("Please select a location first"))}))},resetPlace:function(){i(null),j.current&&(j.current.value="",j.current.focus())},locationTriggerMoment:s,setLocationTriggerMoment:l}}var I=n("UOyc"),T=n("TSYQ"),E=n.n(T),A=n("zZLx"),N="_2nUuUSsv9gR5WTx-oXTX+g==",R="_06t+OekFfxO4akjwZSzksg==",L="SuV+2sX-UDnyp99zKzo6mQ==",M=n("nKUr");function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e){var t=e.locations,n=e.setPastLocation;return Object(M.jsxs)(A.g,{value:null,onChange:function(e){return function(e){"string"!=typeof e&&(e=e[0]);var t=e.split("/",3),r=b()(t,3),c=r[0],i=r[1],a=r[2];n({name:a,lat:parseFloat(c),lng:parseFloat(i)})}(e.target.value)},children:[Object(M.jsx)(A.h,{className:L,children:function(e){var t=e.buttonProps,n=e.toggleDropdown;return Object(M.jsxs)(S.a,B(B({className:"reminders_picker_locations",onClick:n},t),{},{children:[Object(M.jsx)(C.n,{}),Object(M.jsx)(C.lb,{})]}))}}),Object(M.jsxs)(A.e,{position:"bottom-end","aria-label":Object(k.a)("Recent locations"),className:N,children:[Object(M.jsx)(A.f,{placeholder:Object(k.a)("Recent locations")}),Object(M.jsx)(A.d,{"aria-label":Object(k.a)("Recent locations"),children:function(e){var n=e.searchText,r=function(e,t){return e.filter((function(e){return b()(e,1)[0].toLocaleLowerCase().includes(t)}))}(t,n);return 0===r.length?Object(M.jsx)(x.a,{padding:"small",children:Object(k.a)("No recent locations found")}):r.map((function(e){var t=b()(e,3),n=t[0],r=t[1],c=t[2];return Object(M.jsx)(A.b,{className:R,value:"".concat(r,"/").concat(c,"/").concat(n),label:n,children:n},"".concat(r,"/").concat(c,"/").concat(n))}))}})]})]})}function U(e){var t=e.value,n=e.onChange,r=Object(P.d)();return Object(M.jsx)("select",{"aria-label":Object(k.a)("Remind me"),value:t,onChange:function(e){return n(Number(e.currentTarget.value))},children:Object.keys(r).map((function(e){return Object(M.jsx)("option",{value:e,children:Object(k.a)("%s before").replace("%s",r[Number(e)])},e)}))})}var K=n("UDQ1"),F=n("18PS");function V(e){var t=e.projectId,n=e.whoToNotify,r=e.setWhoToNotify;return Object(M.jsxs)(K.a,{showUnassignedOption:!1,projectId:t,value:null==n?void 0:n.id,onChange:function(e){var t=e.target,n=Array.isArray(t.selectedUser)?t.selectedUser[0]:t.selectedUser;r(n)},className:"reminders_picker_collaborators",children:[Object(M.jsx)(F.a,{user:n,size:"xsmall"}),Object(M.jsx)(C.n,{})]})}function H(e){var t,n=e.reminderText,r=e.onReminderTextChange,c=e.reminderInterface,i=e.reminderTime,a=e.setReminderTime,o=e.whoToNotify,s=e.setWhoToNotify,l=e.type,u=e.onTypeChange,d=e.mapCanvasRef,j=e.googlePlacesRef,O=e.place,f=e.setPastLocation,h=e.isSharedProject,v=e.projectId,g=e.lastLocations,y=e.locationTriggerMoment,x=e.setLocationTriggerMoment,w=Object(p.useState)(!1),_=b()(w,2),D=_[0],I=_[1],T=Object(p.useState)(!0),A=b()(T,2),N=A[0],R=A[1],L=Object(p.useRef)(null),z=Object(p.useRef)(null);Object(p.useEffect)((function(){setTimeout((function(){l===P.a&&L.current?L.current.focus():l===P.b&&j.current&&j.current.focus()}),0)}),[l,j]);var B=l===P.a?Object(k.a)("today at 2pm"):Object(k.a)("Type location"),K=function(e){switch(e){case P.c:return Object(M.jsx)(C.S,{});case P.b:return Object(M.jsx)(C.lb,{});case P.a:default:return Object(M.jsx)(C.k,{})}}(l);function F(e,t){e.nativeEvent.stopImmediatePropagation(),e.stopPropagation(),u(t),r(""),I(!1)}var H=Object(M.jsx)(m.c,{renderReferenceElement:null!==(t=z.current)&&void 0!==t?t:void 0,isShown:D,withArrow:!1,onClose:function(){return I(!1)},children:Object(M.jsxs)("div",{className:"reminders_picker_options",children:[Object(M.jsxs)("div",{className:"reminders_picker_option",onClick:function(e){return F(e,P.a)},children:[Object(M.jsx)(C.k,{className:"reminders_picker_option__icon"}),Object(k.a)("Date and time")]}),"relative"===c?Object(M.jsxs)("div",{className:"reminders_picker_option",onClick:function(e){return F(e,P.c)},children:[Object(M.jsx)(C.S,{className:"reminders_picker_option__icon"}),Object(k.a)("Before task")]}):null,Object(M.jsxs)("div",{className:"reminders_picker_option",onClick:function(e){return F(e,P.b)},children:[Object(M.jsx)(C.lb,{className:"reminders_picker_option__icon"}),Object(k.a)("Location")]})]})}),Y=l===P.a?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("input",{ref:L,value:n,onChange:function(e){return r(e.target.value)},onFocus:function(){return R(!0)},onBlur:function(){return R(!1)},placeholder:B}),h?Object(M.jsx)(V,{projectId:v,whoToNotify:o,setWhoToNotify:s}):null]}):null,W=l===P.c?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(U,{value:i,onChange:a}),h?Object(M.jsx)(V,{projectId:v,whoToNotify:o,setWhoToNotify:s}):null]}):null,G=l===P.b?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("input",{ref:j,placeholder:B,onFocus:function(){return R(!0)},onBlur:function(){return R(!1)}}),Object(M.jsx)(q,{setPastLocation:f,locations:g})]}):null;return Object(M.jsxs)("div",{children:[Object(M.jsxs)("div",{className:E()("adder",{"adder--highlighted":N}),children:[Object(M.jsxs)(S.a,{ref:z,className:"switcher menu",onClick:function(){return I(!D)},children:[K,Object(M.jsx)(C.n,{className:"menu_icon"})]}),H,Object(M.jsxs)("div",{className:"absolute reminders_picker_input_container",children:[Y,W,G]})]}),Object(M.jsx)("div",{className:"adder_below",children:"location"===l?Object(M.jsxs)("div",{className:"map_holder",style:{display:O?"block":"none"},children:[Object(M.jsx)("div",{className:"map",ref:d}),Object(M.jsxs)("select",{value:y,onChange:function(e){x(e.target.value)},children:[Object(M.jsx)("option",{value:"on_enter",children:Object(k.a)("When I arrive")}),Object(M.jsx)("option",{value:"on_leave",children:Object(k.a)("When I leave")})]})]}):null})]})}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){var t=e.item,n=e.onClose,r=e.onAddReminder,i=e.onDeleteReminder,a=e.reminders,o=void 0===a?[]:a,s=e.user,l=e.isSharedProject,u=e.lastLocations,d=e.hideList,j=void 0!==d&&d,O=Object(p.useState)(""),f=b()(O,2),h=f[0],m=f[1],v=Object(p.useState)(null),T=b()(v,2),E=T[0],A=T[1],N=Object(p.useState)(s),R=b()(N,2),L=R[0],z=R[1],B=t.due&&t.due.with_time?"relative":"absolute";Object(p.useEffect)((function(){A(null)}),[h]);var q=Object(p.useState)("relative"===B?P.c:P.a),U=b()(q,2),K=U[0],F=U[1],V=Object(p.useState)(void 0===s.auto_reminder||-1===s.auto_reminder?30:s.auto_reminder),W=b()(V,2),G=W[0],Q=W[1],J=D({type:K}),X=J.mapCanvasRef,Z=J.place,$=J.googlePlacesRef,ee=J.getPlace,te=J.setPastLocation,ne=J.resetPlace,re=J.locationTriggerMoment,ce=J.setLocationTriggerMoment;Object(p.useEffect)((function(){K===P.c&&"absolute"===B&&F(P.a)}),[B,K]);return Object(M.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),K===P.b)ee().then((function(e){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({item_id:t.id,type:"location"},e);r(K,n),ne()})).catch((function(){A(Object(k.a)("Please select a location first"))}));else{var n={item_id:t.id};if(K===P.a){var i=Object(P.g)(h);if(i.error)return A(i.error),!1;n.due=_.a.fromDateist(i),n.type="absolute"}else n.minute_offset=G,n.type="relative";l&&L&&L.id&&(n.notify_uid=L.id),r(K,n),m("")}},children:[Object(M.jsxs)("div",{className:"reminders_picker_title_container",children:[Object(M.jsx)("h2",{children:Object(k.a)("Reminders")}),Object(M.jsx)(C.v,{onClick:n})]}),Object(M.jsxs)(g.a,{space:"medium",exceptionallySetClassName:"reminder_manager",children:[j?null:Object(M.jsx)(I.a,{item:t,reminders:o,onDeleteReminder:i}),Object(M.jsx)(H,{reminderInterface:B,reminderText:h,onReminderTextChange:m,locationTriggerMoment:re,setLocationTriggerMoment:ce,whoToNotify:L,setWhoToNotify:z,reminderTime:G,setReminderTime:Q,setPastLocation:te,type:K,mapCanvasRef:X,place:Z,googlePlacesRef:$,onTypeChange:F,isSharedProject:l,projectId:t.project_id,lastLocations:u}),E?Object(M.jsx)(y.a,{tone:"critical",children:Object(M.jsx)(x.a,{paddingY:"xsmall",children:E})}):null,Object(M.jsxs)("div",{children:[Object(M.jsx)("a",{className:"help",href:w.o,target:"_blank",rel:"noopener noreferrer","aria-label":Object(k.a)("Learn more"),children:Object(M.jsx)(C.R,{})}),Object(M.jsx)(S.a,{type:"submit",className:"ist_button ist_button_red",children:Object(k.a)("Add reminder")})]})]})]})}function G(e){var t=e.children,n=e.item,r=e.withArrow,c=void 0===r||r,i=e.reminders,a=e.user,o=e.canUseReminders,s=e.userPlanLimits,l=e.isSharedProject,u=e.collaborators,d=e.onAddReminder,j=e.onDeleteReminder,O=e.onCloseReminder,f=void 0===O?function(){}:O,g=e.lastLocations,y=e.hideList,x=Object(p.useState)(!1),w=b()(x,2),k=w[0],_=w[1],S=Object(p.useRef)(null);function C(){o?_(!k):Object(v.b)({type:"REMINDERS",userPlanLimits:s})}var P={ref:S,onClick:function(e){C(),null==e||e.preventDefault(),null==e||e.stopPropagation()},onKeyDown:function(e){e.code!==h.a.ARROW_DOWN&&e.code!==h.a.ENTER&&e.code!==h.a.SPACE||(C(),null==e||e.preventDefault(),null==e||e.stopPropagation())}};function D(){S.current.focus(),_(!1)}return Object(M.jsxs)(M.Fragment,{children:[t(P),Object(M.jsx)(m.c,{className:"reminders_picker",renderReferenceElement:S.current,isShown:k,withArrow:c,onClose:D,zIndex:!1,children:Object(M.jsx)(W,{item:n,reminders:i,onClose:function(){_(!1),f()},onAddReminder:function(){d.apply(void 0,arguments),y&&D()},onDeleteReminder:j,user:a,isSharedProject:l,collaborators:u,lastLocations:g,hideList:y})})]})}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}W.propTypes={item:f.a.object.isRequired,onClose:f.a.func.isRequired,onDeleteReminder:f.a.func.isRequired,onAddReminder:f.a.func.isRequired,reminders:f.a.array,user:f.a.object.isRequired,isSharedProject:f.a.bool.isRequired,collaborators:f.a.array,lastLocations:f.a.array.isRequired,hideList:f.a.bool},G.propTypes={children:f.a.func.isRequired,item:f.a.object.isRequired,withArrow:f.a.bool,reminders:f.a.array,user:f.a.object.isRequired,canUseReminders:f.a.bool.isRequired,userPlanLimits:f.a.object.isRequired,isSharedProject:f.a.bool.isRequired,collaborators:f.a.array,onAddReminder:f.a.func.isRequired,onDeleteReminder:f.a.func.isRequired,onCloseReminder:f.a.func,lastLocations:f.a.array.isRequired,hideList:f.a.bool};t.a=Object(i.c)((function(e,t){return{reminders:t.reminders||Object(l.f)(e)[t.item.id],isSharedProject:Object(s.q)(e,t.item.project_id),allCollaborators:Object(s.i)(e),user:Object(u.n)(e),lastLocations:o.a.getLastLocations(),canUseReminders:Object(d.q)(e),userPlanLimits:Object(d.s)(e),onDeleteReminder:function(e){t.onReminderDelete?t.onReminderDelete(e):t.item.id&&a.a.remove(e.id)},onCloseReminder:function(){t.onReminderClose&&t.onReminderClose()}}}),(function(e,t){return{onAddReminder:function(n,r){t.onReminderAdd?t.onReminderAdd(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:n},r)):t.item.id&&e("location"===n?Object(l.c)(r):Object(l.d)(r))}}}))(G)},"9l1k":function(e,t,n){"use strict";var r=n("lSNA"),c=n.n(r),i=n("QILm"),a=n.n(i),o=(n("zTeM"),n("TSYQ")),s=n.n(o),l=n("nKUr"),u=["className"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=e.className,n=a()(e,u);return Object(l.jsx)("svg",j(j({className:s()("ring_spinner",t),width:"24",height:"24",viewBox:"0 0 24 24"},n),{},{children:Object(l.jsxs)("g",{fill:"none",fillRule:"nonzero",children:[Object(l.jsx)("path",{className:"inner",d:"M17.945 3.958A9.955 9.955 0 0 0 12 2c-2.19 0-4.217.705-5.865 1.9L5.131 2.16A11.945 11.945 0 0 1 12 0c2.59 0 4.99.82 6.95 2.217l-1.005 1.741z"}),Object(l.jsx)("path",{className:"outter",d:"M5.13 2.16L6.136 3.9A9.987 9.987 0 0 0 2 12c0 5.523 4.477 10 10 10s10-4.477 10-10a9.986 9.986 0 0 0-4.055-8.042l1.006-1.741A11.985 11.985 0 0 1 24 12c0 6.627-5.373 12-12 12S0 18.627 0 12c0-4.073 2.029-7.671 5.13-9.84z"})]})}))}},"A/Zz":function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n("lSNA"),c=n.n(r),i=n("QILm"),a=n.n(i),o=n("/MKj"),s=n("kazx"),l=n("Vbab"),u=n("xvbm"),d=n("kbOS"),j=n("U5fO"),b=n("JQkX"),p=n("UVeO"),O=n("k9f2"),f=n("K6Df"),h=n("wOFH"),m=n("XOeF"),v=n("gd9Y"),g=n("mVlx"),y=n("/7zm"),x=n("VKB9"),w=n("4SOg"),k=n("F2vK"),_=n("TxzI"),S=n("V+rr"),C=n("Dvo2"),P=n("Tc49"),D=n("szTl"),I=n("nKUr");var T=Object(o.c)(null,(function(e,t){var n=t.project,r=t.onAfterDelete;return{onMarkAsFavorite:function(){e(Object(m.z)(n.id,{is_favorite:!0}))},onMarkAsUnfavorite:function(){e(Object(m.z)(n.id,{is_favorite:!1}))},onArchiveProject:function(){e(Object(m.g)(n.id))},onUnarchiveProject:function(){e(Object(m.y)(n))},onDeleteProject:function(){e(Object(m.x)(n.id)),r&&r(n)},onDuplicateProject:function(){e(Object(m.h)(n.id))}}}))((function(e){var t=e.project,n=e.close,r=e.onMarkAsFavorite,c=e.onMarkAsUnfavorite,i=e.onArchiveProject,a=e.onUnarchiveProject,o=e.onDeleteProject,s=e.onDuplicateProject,d=Object(v.i)({type:"project",projectId:t.id}),j=Object(v.k)(),O=Object(x.b)().copyToClipboard,m=Object(y.c)({confirmLabel:t.isShared?Object(l.a)("Archive for me"):Object(l.a)("Archive"),onConfirm:function(){i(),d&&j({view:{type:"inbox"},replace:!0})},title:Object(l.a)("Archive project?"),message:Object(I.jsx)(f.a,{string:t.isShared?Object(l.a)("Are you sure you want to archive {projectName}? It won\u2019t be archived for other project members."):Object(l.a)("Are you sure you want to archive {projectName}?"),mapping:{projectName:Object(I.jsx)("strong",{children:t.name})}})}),T=Object(y.c)({confirmLabel:t.isShared?Object(l.a)("Leave"):Object(l.a)("Delete"),title:t.isShared?Object(l.a)("Leave project?"):Object(l.a)("Delete project?"),onConfirm:function(){o(),d&&j({view:{type:"inbox"},replace:!0})},message:Object(I.jsx)(f.a,{string:t.isShared?Object(l.a)("Are you sure you want to leave {projectName}?"):Object(l.a)("Are you sure you want to delete {projectName}?"),mapping:{projectName:Object(I.jsx)("strong",{children:t.name})}})});if(t.is_archived)return Object(I.jsxs)(P.c,{className:"item_menu_list",onClick:function(){return n()},children:[Object(I.jsx)(P.a,{text:Object(l.a)("Unarchive project"),icon:Object(I.jsx)(C.a,{}),onClick:a}),Object(I.jsx)(P.a,{text:Object(l.a)("Delete project"),icon:Object(I.jsx)(p.C,{}),onClick:T})]});var E=!t.inbox_project&&!t.team_inbox;return Object(I.jsxs)(P.c,{className:"item_menu_list",onClick:function(){return n()},children:[Object(I.jsx)(P.a,{text:Object(l.a)("Add project above"),icon:Object(I.jsx)(p.a,{}),onClick:function(){return Object(b.a)({anchorProjectId:t.id,addAbove:!0,navigateTo:j})}}),Object(I.jsx)(P.a,{text:Object(l.a)("Add project below"),icon:Object(I.jsx)(p.b,{}),onClick:function(){return Object(b.a)({anchorProjectId:t.id,addAbove:!1,navigateTo:j})}}),Object(I.jsx)(P.e,{}),Object(I.jsx)(P.a,{text:Object(l.a)("Edit project"),icon:Object(I.jsx)(p.I,{}),onClick:function(){return Object(b.b)({projectId:t.id})}}),Object(I.jsx)(P.a,{text:Object(l.a)("Share project"),icon:Object(I.jsx)(S.a,{}),onClick:function(){return Object(D.c)(t.id,j)}}),t.is_favorite?Object(I.jsx)(P.a,{text:Object(l.a)("Remove from favorites"),icon:Object(I.jsx)(k.a,{}),onClick:c}):Object(I.jsx)(P.a,{text:Object(l.a)("Add to favorites"),icon:Object(I.jsx)(w.a,{}),onClick:r}),Object(u.c)("frontend.unique_links")?Object(I.jsx)(P.a,{text:Object(l.a)("Copy project link"),icon:Object(I.jsx)(_.a,{}),onClick:function(){O(Object(g.a)(t)),n()}}):null,Object(I.jsx)(P.e,{}),E?Object(I.jsx)(P.a,{text:Object(l.a)("Duplicate project"),icon:Object(I.jsx)(p.A,{}),onClick:s}):null,Object(I.jsx)(P.a,{text:Object(l.a)("Email tasks to this project"),icon:Object(I.jsx)(p.J,{}),onClick:function(){return h.a.showProjectEmail(t.id)}}),Object(I.jsx)(P.a,{text:Object(l.a)("Project calendar feed"),icon:Object(I.jsx)(p.kb,{}),onClick:function(){return h.a.showCalFeed(t.id)}}),Object(I.jsx)(P.e,{}),Object(I.jsx)(P.a,{text:Object(l.a)("Archive project"),icon:Object(I.jsx)(p.e,{}),onClick:m}),Object(I.jsx)(P.a,{text:t.isShared?Object(l.a)("Leave project"):Object(l.a)("Delete project"),icon:t.isShared?Object(I.jsx)(p.jb,{}):Object(I.jsx)(p.C,{}),onClick:T})]})})),E=["project","renderLegacyMenu","renderMenu","count","showTaskCount","isShared","isTaskDraggedOver","innerRef","supportDragAndDrop","onToggleExpand","onAfterDelete","hideTooltip"];function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){var t,n,r=e.project,i=e.renderLegacyMenu,f=e.renderMenu,h=e.count,m=e.showTaskCount,v=void 0===m||m,g=e.isShared,y=e.isTaskDraggedOver,x=e.innerRef,w=e.supportDragAndDrop,k=void 0!==w&&w,_=e.onToggleExpand,S=e.onAfterDelete,C=e.hideTooltip,P=a()(e,E),D={type:"project",projectId:r.id},N=null!=h?h:r.tasksCount;if(!Object(o.h)((function(e){return!_||!Object(d.p)(e,r.id)})))return Object(I.jsx)(s.a,{as:"li",display:"none",ref:x});var R=Object(u.c)("frontend.dnd_everywhere"),L=k?R?j.a:O.a:O.c;return Object(I.jsx)(L,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({label:r.name,linkTo:D,isExpanded:!r.collapsed,showExpandButton:r.hasChildren,showDragOverState:y,onToggleExpand:function(){return null==_?void 0:_(r)},menuLabel:Object(l.a)("More project actions"),renderLegacyMenu:f?void 0:null!=i?i:function(e){return Object(I.jsx)(T,{project:r,onAfterDelete:S,close:e})},renderMenu:f,icon:Object(I.jsx)(p.Vb,{project:r,isShared:null!==(t=null!==(n=null!=g?g:r.isShared)&&void 0!==n?n:null!=r.workspace_id)&&void 0!==t&&t,size:"medium"}),count:N,showTaskCount:v,"data-type":"project_list_item","data-id":r.id,ref:x,hideTooltip:C,onEdit:function(){Object(b.b)({projectId:r.id})},projectId:r.id},P))}},Ankm:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var r=n("dAW7");function c(e){return[r.a,r.b,r.c,r.e,r.d,r.f].includes(e)}function i(e){return[r.c,r.e,r.d].includes(e)}function a(e,t){return!!e&&(e.taskId===t[0].id&&[r.a,r.f,r.g].includes(e.mode))}},BDxM:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ce}));var r=n("lSNA"),c=n.n(r),i=n("QILm"),a=n.n(i),o=n("/MKj"),s=n("S+H7"),l=n("/uLG"),u=n("SoKn"),d=n("J4zp"),j=n.n(d),b=n("q1tI"),p=n("4rNB"),O=n("G3Y2"),f=n("kazx"),h=n("GIsW"),m=n("TSYQ"),v=n.n(m),g=n("vV6a"),y=n("Vbab"),x=n("xvbm"),w=n("awe3"),k=n("4eld"),_=n("piIF"),S=n("yYH5"),C=n("VKB9"),P=n("UVeO"),D=n("Tc49"),I=n("q1B5"),T=n("GpCm"),E=n("RIqP"),A=n.n(E),N=n("ImH7"),R=n("G5Ko"),L=n("HF2Q"),M=n("zZLx"),z=n("sAaR"),B=n("vzEX"),q="Xh7kuagrci+pbZIe89x82Q==",U="ztDrZ1s8iwYgPA5xjTDXCA==",K="fo6JWyT0wjybDRNRo7zSGw==",F="hbMVUQrrcmf9zbRb6qn-RQ==",V="uhRtMbV+GHyfDzSmK0z8DA==",H="CTqOyVN9MEjuRyJQugDTlg==",Y="g8EnpL1tT8hCW2CjzgwAOA==",W="v8Il0vnXjv2UhAAXlVcaZQ==",G=n("nKUr"),Q=["title"];function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e){var t=e.id,n=e.fieldLabel,r=e.icon;return function(e){var c=e.label;return function(e){var i=e.isDropdownOpen,o=e.toggleDropdown,s=e.buttonProps,l=(s.title,a()(s,Q));return Object(G.jsx)(D.a,{"aria-labelledby":t,className:i?"menu_item--active":void 0,text:Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("span",{id:t,className:"view_menu__label",children:n}),Object(G.jsxs)("span",X(X({},l),{},{children:[Object(G.jsx)("span",{className:K,children:c}),Object(G.jsx)(P.q,{"aria-hidden":"true"})]}))]}),icon:r,onClick:o})}}}var $=n("UTRX"),ee=n("R/7U"),te=n("18PS"),ne="TghGDKn",re="HsaUe2q",ce="wrNkDJR";function ie(e){var t=e.type,n=e.label,r=e.isSelected,c=e.logo,i=Object(o.h)(N.n),a="personal"===t||"workspace"===t;return Object(G.jsx)(f.a,{display:"flex",alignItems:"center",width:"full",className:ne,children:Object(G.jsxs)($.b,{paddingLeft:"small",maxWidth:"xsmall",width:"full",paddingY:"xsmall",alignY:"center",space:"xsmall",children:[a?Object(G.jsx)($.a,{width:"content",children:Object(G.jsx)(f.a,{display:"flex",justifyContent:"center",className:re,children:"personal"===t?Object(G.jsx)(te.a,{user:i,size:"xsmall","aria-hidden":!0,roundedCorners:!0}):Object(G.jsx)(ee.a,{src:c,size:"xsmall","aria-hidden":!0})})}):null,Object(G.jsx)($.a,{width:"auto",children:Object(G.jsx)(f.a,{marginLeft:a?void 0:"xsmall",children:Object(G.jsx)(h.a,{size:"copy",lineClamp:1,children:n})})}),Object(G.jsx)($.a,{width:"content",children:Object(G.jsx)(f.a,{marginRight:"small",className:ce,children:r?Object(G.jsx)(P.p,{"aria-hidden":!0}):null})})]})})}function ae(e,t){var n=Object.keys(t);return n.length===e.length+1||0===n.length?Object(y.a)("All (default)"):n.join(", ")}function oe(e){var t,n,r=e.viewOptions,c=e.viewInfo,i=e.onSetViewOptions,a=Object(o.h)(R.c),s=Object(o.h)(N.f),l=Object(b.useMemo)((function(){return a.reduce((function(e,t){return e[t.name]=t.logo_small,e}),{})}),[a]),u=Object(b.useRef)(null!==(t=null==r?void 0:r.filtered_by)&&void 0!==t?t:null);if(0===a.length||"project"===c.view||!s)return null;var d=Object(B.j)(null==r?void 0:r.filtered_by).selectedWorkspaces,j=Object.keys(d),p=[Object(y.a)("Personal")].concat(A()(a.map((function(e){return e.name}))));return Object(G.jsxs)(M.g,{value:0===j.length?p:j,availableOptions:p,onChange:function(e){var t,n=e.target.value.filter((function(e){return"all"!==e})),c=Object(B.j)(null==r?void 0:r.filtered_by).query,o=Object(B.g)(n);t=0===o.length||n.length===a.length+1?c||null:c?"(".concat(c,") & (").concat(o,")"):o||null;var s=Object(B.h)(t);s!==u.current&&(u.current=s,i({filterBy:s}))},multiple:!0,children:[Object(G.jsx)(M.h,{"aria-labelledby":"view_menu__workspaces",className:v()("form_field_control",U,L.a.checkmarkDropdownSelectToggle),children:null===(n=Z({id:"view_menu__workspaces",fieldLabel:Object(y.a)("Workspace"),icon:Object(G.jsx)(z.a,{"aria-hidden":"true"})}))||void 0===n?void 0:n({label:ae(a,d)})}),Object(G.jsx)(M.e,{className:L.a.checkmarkDropdownSelect,width:200,children:Object(G.jsxs)(M.d,{children:[Object(G.jsx)(M.b,{selectAll:!0,value:"all",label:Object(y.a)("All (default)"),children:function(e){var t=e.isSelected;return Object(G.jsx)(ie,{type:"all",label:Object(y.a)("All (default)"),isSelected:t})}}),Object(G.jsx)(M.b,{value:Object(y.a)("Personal"),children:function(e){var t=e.isSelected;return Object(G.jsx)(ie,{type:"personal",label:Object(y.a)("Personal"),isSelected:t})}}),a.map((function(e){return Object(G.jsx)(M.b,{value:e.name,children:function(t){var n=t.isSelected;return Object(G.jsx)(ie,{type:"workspace",label:e.name,isSelected:n,logo:l[e.name]})}},e.id)}))]})})]})}var se=n("t4uw"),le=n("SBal"),ue=n("dwEu"),de=n("h8yO");function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pe(e){var t,n,r,i=e.collaborators,a=e.viewCollaborators,o=e.viewOptions,s=e.viewInfo,l=e.user,u=e.onSetViewOptions,d=Object(b.useMemo)((function(){var e=["default",B.b,B.c];return a&&"today"!==s.view&&(e=[].concat(A()(e),[B.d])),e}),[a,s.view]),j=Object(B.i)(null!==(t=null==o?void 0:o.filtered_by)&&void 0!==t?t:null,i),p=Object(b.useMemo)((function(){if(!j.ids)return Object(y.a)("Choose assignees");switch(j.ids.length){case 0:return Object(y.a)("Choose assignees");case 1:return j.ids[0]===l.id?"".concat(Object(y.d)("task_assignment","Me")," (").concat(Object(se.a)(l.full_name),")"):Object(se.a)(i[j.ids[0]].full_name);case 2:return Object(G.jsx)(de.a,{text:Object(y.a)("{user_name_1} and {user_name_2}"),keyval:{user_name_1:j.ids[0]===l.id?"".concat(Object(y.d)("task_assignment","Me")," (").concat(Object(se.a)(l.full_name),")"):Object(se.a)(i[j.ids[0]].full_name),user_name_2:Object(se.a)(i[j.ids[1]].full_name)}});default:return Object(G.jsx)(de.a,{text:Object(y.b)("{user_name_1}, {user_name_2} +{remaining_users_count} more","{user_name_1}, {user_name_2} +{remaining_users_count} more",j.ids.length-2),keyval:{user_name_1:j.ids[0]===l.id?"".concat(Object(y.d)("task_assignment","Me")," (").concat(Object(se.a)(l.full_name),")"):Object(se.a)(i[j.ids[0]].full_name),user_name_2:Object(se.a)(i[j.ids[1]].full_name),remaining_users_count:j.ids.length-2}})}}),[i,j.ids,l.full_name,l.id]);var O=j.type===B.e?"default":null!==(n=j.type)&&void 0!==n?n:"default";return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(_.a,{"aria-labelledby":"view_menu__assigned",className:v()("form_field_control",U),labels:(r={default:Object(y.a)("Default")},c()(r,B.b,Object(y.a)("No one")),c()(r,B.c,Object(y.a)("Only me")),c()(r,B.d,Object(y.a)("Selected assignees\u2026")),r),options:d,value:O,width:200,onChange:function(e){var t=e.target.value;if(t!==B.d){var n=Object(B.f)("default"===t?B.a:t,[],i,null==o?void 0:o.filtered_by);u({filterBy:n})}else u({filterBy:"".concat(B.d," ")})},children:Z({id:"view_menu__assigned_to",fieldLabel:Object(y.a)("Assigned to"),icon:Object(G.jsx)(le.a,{"aria-hidden":"true"})})}),a&&j.type===B.d?Object(G.jsx)(ue.a,{className:U,showUnassignedOption:!1,value:j.ids,currentUser:l,users:a,onChange:function(e){var t,n="string"==typeof e.target.value||"number"==typeof e.target.value?[e.target.value]:null!==(t=e.target.value)&&void 0!==t?t:[];if(j.type!==B.d||0!==n.length){var r=Object(B.f)(j.type,n,i,null==o?void 0:o.filtered_by);u({filterBy:r})}else u({filterBy:"".concat(B.d," ")})},width:200,hasCurrentUserByDefault:!1,multiple:!0,children:function(e){var t=e.buttonProps;return Object(G.jsx)(D.a,{className:t["aria-expanded"]?"menu_item--active":void 0,"aria-labelledby":"view_menu__assignees",text:Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("span",{id:"view_menu__assignees",className:"view_menu__label",children:Object(y.a)("Assignees")}),Object(G.jsxs)("span",be(be({},t),{},{children:[Object(G.jsx)("span",{className:K,children:p}),Object(G.jsx)(P.q,{"aria-hidden":"true"})]}))]}),icon:Object(G.jsx)(P.Ib,{"aria-hidden":"true"}),onClick:t.onClick})}}):null]})}var Oe=n("CZSy"),fe=n("GmSi");function he(e){var t,n,r=e.viewCollaborators,i=e.viewOptions,a=e.viewInfo,s=e.onSetViewOptions,l=Object(o.h)(N.f),u=Object(b.useMemo)((function(){var e=["default",Oe.g,Oe.d,Oe.i,Oe.h];return("project"!==a.view||r)&&(e=[].concat(A()(e.slice(0,1)),[Oe.e],A()(e.slice(1)))),"project"!==a.view&&(e=[].concat(A()(e),[Oe.j])),"project"!==a.view&&l&&(e=[].concat(A()(e),[Oe.k])),e}),[r,a.view,l]);return Object(G.jsx)(_.a,{"aria-labelledby":"view_menu__group_by",className:v()("form_field_control",U),labels:(t={default:Object(y.a)("None (default)")},c()(t,Oe.e,Object(y.a)("Assignee")),c()(t,Oe.g,Object(y.a)("Due date")),c()(t,Oe.d,Object(y.a)("Date added")),c()(t,Oe.i,Object(y.a)("Priority")),c()(t,Oe.h,Object(y.a)("Label")),c()(t,Oe.j,Object(y.a)("Project")),c()(t,Oe.k,Object(y.a)("Workspace")),t),options:u,value:null!==(n=null==i?void 0:i.grouped_by)&&void 0!==n?n:"default",width:200,onChange:function(e){var t=e.target.value;s({groupBy:"default"===t?Oe.f:t})},children:Z({id:"view_menu__group_by",fieldLabel:Object(y.a)("Grouping"),icon:Object(G.jsx)(fe.a,{"aria-hidden":"true"})})})}var me=n("FDbN"),ve=n("dQwz");function ge(e){var t,n,r,i=e.viewCollaborators,a=e.viewOptions,s=e.viewInfo,l=e.onSetViewOptions,u=Object(o.h)(N.f),d=Object(b.useMemo)((function(){var e=["default",Oe.v,Oe.u,Oe.r,Oe.w];return("project"!==s.view||i)&&(e=[].concat(A()(e.slice(0,2)),[Oe.s],A()(e.slice(2)))),"project"!==s.view&&(e=[].concat(A()(e),[Oe.x])),"project"!==s.view&&u&&(e=[].concat(A()(e),[Oe.y])),e}),[i,s.view,u]);return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(_.a,{"aria-labelledby":"view_menu__sort_by",className:v()("form_field_control",U),labels:(t={default:Object(y.a)("Default")},c()(t,Oe.v,Object(y.a)("Name")),c()(t,Oe.s,Object(y.a)("Assignee")),c()(t,Oe.u,Object(y.a)("Due date")),c()(t,Oe.r,Object(y.a)("Date added")),c()(t,Oe.w,Object(y.a)("Priority")),c()(t,Oe.x,Object(y.a)("Project")),c()(t,Oe.y,Object(y.a)("Workspace")),t),options:d,value:null!==(n=null==a?void 0:a.sorted_by)&&void 0!==n?n:"default",width:200,onChange:function(e){var t=e.target.value;l({sortBy:"default"===t?Oe.t:t})},children:Z({id:"view_menu__sort_by",fieldLabel:Object(y.a)("Sorting"),icon:Object(G.jsx)(P.lc,{"aria-hidden":"true"})})}),a&&a.sorted_by!==Oe.t?Object(G.jsx)(_.a,{"aria-labelledby":"view_menu__order",className:v()("form_field_control",U),labels:(r={},c()(r,Oe.z,Object(y.a)("Ascending (default)")),c()(r,Oe.A,Object(y.a)("Descending")),r),options:[Oe.z,Oe.A],value:null==a?void 0:a.sort_order,width:200,onChange:function(e){var t=e.target.value;l({sortOrder:t})},children:Z({id:"view_menu__order",fieldLabel:Object(y.a)("Ordering"),icon:a.sort_order===Oe.z?Object(G.jsx)(me.a,{"data-testid":"view_menu__order_asc","aria-hidden":"true"}):Object(G.jsx)(ve.a,{"data-testid":"view_menu__order_desc","aria-hidden":"true"})})}):null]})}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we=Object(b.forwardRef)((function(e,t){var n=e.collaborators,r=e.collaboratorIds,c=e.viewInfo,i=e.viewOptions,a=e.user,s=e.isBoardViewActive,l=void 0!==s&&s,u=e.isMiniMode,d=void 0!==u&&u,m=e.withGroupControls,E=void 0===m||m,A=e.withSortControls,N=void 0===A||A,R=e.withFilterControls,L=void 0===R||R,M=e.onSetViewOptions,z=e.onResetViewOptions,B=e.onToggleViewStyle,K=Object(b.useRef)(null),Q=Object(T.d)(),J=Object(b.useState)(!0),X=j()(J,2),$=X[0],ee=X[1],te=Object(b.useMemo)((function(){return null!=r&&r.length?r.map((function(e){return n[e]})):null}),[n,r]),ne=Object(o.h)((function(e){return e.mainView.type===g.m})),re=Object(o.h)((function(e){return e.mainView.type===g.n})),ce=Object(C.g)(w.e),ie=ce.isTipScheduled,ae=ce.markTipSeen,se=Object(C.g)(w.f),le=se.isTipScheduled,ue=se.markTipSeen,de=ne&&ie,je=Object(x.c)("frontend.upcoming_view_boards")&&re&&le;Object(b.useEffect)((function(){setTimeout((function(){return ee(!Q.isOpen)}),0)}),[Q.isOpen]),Object(b.useImperativeHandle)(t,(function(){return{click:function(){var e;null===(e=K.current)||void 0===e||e.click()}}}));var be=B&&("project"===c.view||"today"===c.view||"upcoming"===c.view),Oe=L&&("project"!==c.view||Boolean(null==te?void 0:te.length)),fe=(null==i?void 0:i.filtered_by)||(null==i?void 0:i.grouped_by)||(null==i?void 0:i.sort_order);return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)(k.a,xe(xe({className:F,ref:K,onClick:function(e){Q.openOnClick(e),de&&ae(),je&&ue()},"aria-label":Object(y.d)("a11y","View options menu")},d&&{title:Object(y.a)("View")}),{},{children:[Object(G.jsx)(P.vc,{}),d?null:Object(G.jsx)("span",{className:"action_label",children:Object(y.a)("View")})]})),Q.isOpen?Object(G.jsx)(T.c,xe(xe({},Q.props),{},{withArrow:!1,modifiers:[T.b],zIndex:!1,children:Object(G.jsxs)(D.c,{className:q,"aria-label":Object(y.d)("a11y","View options menu"),tabIndex:$?0:-1,children:[be?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(I.a,{title:Object(y.a)("View"),actions:Object(G.jsx)(p.a,{content:Object(y.a)("View is synced between teammates in shared projects."),children:Object(G.jsx)("a",{className:H,href:"https://www.todoist.com/help/articles/4407240443282#enable-board-or-list-view",rel:"noopener noreferrer",target:"_blank",children:Object(G.jsx)(P.R,{})})}),children:Object(G.jsx)(_.a,{"aria-labelledby":"view_menu__view_as",className:v()("form_field_control",U),labels:{list:Object(y.a)("List"),board:Object(y.a)("Board")},options:["list","board"],value:l?"board":"list",width:200,onChange:B,children:Z({id:"view_menu__view_as",fieldLabel:Object(y.d)("view options view mode","Layout"),icon:l?Object(G.jsx)(P.tc,{}):Object(G.jsx)(P.uc,{})})})}),Object(G.jsx)(D.e,{fullWidth:!0})]}):null,Object(G.jsxs)(I.a,{title:Object(y.a)("Sort"),actions:Object(G.jsx)(p.a,{content:Object(y.a)("Sorting options are applied just for you."),children:Object(G.jsx)("a",{className:H,href:"https://todoist.com/help/articles/4407240443282#sort-your-tasks",rel:"noopener noreferrer",target:"_blank",children:Object(G.jsx)(P.R,{})})}),children:[E?Object(G.jsx)(he,{viewCollaborators:te,viewOptions:i,viewInfo:c,onSetViewOptions:M}):null,N?Object(G.jsx)(ge,{viewCollaborators:te,viewOptions:i,viewInfo:c,onSetViewOptions:M}):null]}),Oe?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(D.e,{fullWidth:!0}),Object(G.jsxs)(I.a,{title:Object(y.a)("Filter"),actions:Object(G.jsx)(p.a,{content:Object(y.a)("Filtering options are applied just for you."),children:Object(G.jsx)("a",{className:H,href:"https://todoist.com/help/articles/4407240443282#filter-your-tasks",rel:"noopener noreferrer",target:"_blank",children:Object(G.jsx)(P.R,{})})}),children:["project"!==c.view||te?Object(G.jsx)(pe,{collaborators:n,viewCollaborators:te,viewOptions:i,viewInfo:c,user:a,onSetViewOptions:M}):null,Object(G.jsx)(oe,{viewOptions:i,viewInfo:c,onSetViewOptions:M})]})]}):null,fe?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(D.e,{fullWidth:!0}),Object(G.jsx)(D.b,{className:V,children:Object(G.jsx)(O.a,{variant:"tertiary",tone:"destructive",width:"full",align:"start",onClick:z,children:Object(y.a)("Reset all")})})]}):null]})})):null,de&&K.current?Object(G.jsx)(S.b,{isShown:!0,placement:"bottom",variant:"clean",className:Y,referenceElement:K.current,children:Object(G.jsxs)(f.a,{display:"flex",flexDirection:"row",width:"full",justifyContent:"spaceBetween",className:W,children:[Object(G.jsx)(h.a,{tone:"secondary",children:Object(y.a)("\ud83c\udd95 See Today as Board view. Click here and select \u201cLayout\u201d.")}),Object(G.jsx)(S.a.TooltipDismissButton,{tooltip:w.e})]})}):null,je&&K.current?Object(G.jsx)(S.b,{isShown:!0,placement:"bottom",variant:"clean",className:Y,referenceElement:K.current,children:Object(G.jsxs)(f.a,{display:"flex",flexDirection:"row",width:"full",justifyContent:"spaceBetween",className:W,children:[Object(G.jsx)(h.a,{tone:"secondary",children:Object(y.a)("\u2728 New default: Upcoming is now set to Board view.")}),Object(G.jsx)(S.a.TooltipDismissButton,{tooltip:w.f})]})}):null]})})),ke=["viewOptions"];function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce=Object(o.c)((function(e,t){var n=t.viewInfo;return{viewOptions:Object(u.a)(e,n),collaborators:Object(s.m)(e),user:e.user}}),(function(e,t){var n=t.viewInfo;return{onSetViewOptions:function(t){var r=t.sortBy,c=t.sortOrder,i=t.groupBy,a=t.filterBy;if(null===r||null===c)return e(Object(l.c)(n,{sortedBy:null,sortOrder:null,groupedBy:i,filteredBy:a}));e(Object(l.c)(n,{sortedBy:r,sortOrder:c,groupedBy:i,filteredBy:a}))},onResetViewOptions:function(){e(Object(l.a)(n))}}}),(function(e,t,n){var r=e.viewOptions,c=a()(e,ke),i={onSetViewOptions:function(e){var n=e.sortBy,c=e.sortOrder,i=e.filterBy,a=e.groupBy;return t.onSetViewOptions({sortBy:n,sortOrder:c,groupBy:a,filterBy:i,viewOptions:r})},onResetViewOptions:function(){return t.onResetViewOptions()}};return Se(Se(Se({viewOptions:r},c),i),n)}),{forwardRef:!0})(we)},Ba5u:function(e,t,n){"use strict";var r=n("TSYQ"),c=n.n(r),i=n("rcvD"),a=n("nKUr");var o=function(e){var t=e.source,n=e.className;return Object(a.jsx)("span",{className:c()("simple_content",n),children:Object(i.a)(t)})};t.a=o},Cz95:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("J4zp"),c=n.n(r),i=n("q1tI"),a=n("/MKj"),o=n("TSYQ"),s=n.n(o),l=n("c32n"),u=n("Vbab"),d=n("c9wj"),j=n("gd9Y"),b=n("Wo0o"),p=n("UVeO"),O=n("jMFI"),f=n("nKUr"),h=Object(i.forwardRef)((function(e,t){var n,r=e.actions,o=e.header,h=e.children,m=e.isListItem,v=void 0!==m&&m,g=e.withCollapser,y=void 0!==g&&g,x=e.isOpen,w=void 0===x||x,k=e.className,_=Object(a.h)((function(e){return e.clock})),S=Object(i.useState)(!w),C=c()(S,2),P=C[0],D=C[1],I=s()("section",{section__collapsed:P},k),T=void 0;o instanceof Date&&(T=Object(l.a)(o,{representation:"date"}),o=Object(O.a)(T,_,!0));var E=Object(i.useMemo)((function(){return o?Object(d.a)("section-header"):void 0}),[o]);var A=Object(f.jsxs)(f.Fragment,{children:[o?Object(f.jsxs)("header",{id:E,children:[Object(f.jsx)("div",{className:"section_head__overflow_actions",children:y?Object(f.jsx)("div",{className:"collapser collapser_alone",onClick:function(){D(!P)},"data-testid":"section_collapser",children:Object(f.jsx)(p.n,{})}):null}),Object(f.jsx)("h2",{children:T?Object(f.jsx)(j.a,{view:{type:"search",searchQuery:T},children:o}):Object(f.jsx)(b.a,{text:o})}),r?Object(f.jsx)("div",{className:"section_head__actions",children:r}):null]}):null,h]});return v?Object(f.jsx)("li",{ref:t,className:I,"aria-labelledby":E,children:A}):Object(f.jsx)("section",{"aria-label":null!==(n=o)&&void 0!==n?n:Object(u.a)("Tasks without a section"),className:I,ref:t,children:A})}))},FUwg:function(e,t,n){"use strict";n.d(t,"a",(function(){return he}));var r=n("lSNA"),c=n.n(r),i=n("/MKj"),a=n("/uq8"),o=n("k0om"),s=n("ImH7"),l=n("FfTA"),u=n("J4zp"),d=n.n(u),j=n("q1tI"),b=n("17x9"),p=n.n(b),O=n("OgjY"),f=n("fF8A"),h=n("TSYQ"),m=n.n(h),v=n("Vbab"),g=n("4eld"),y=n("mSe5"),x=n("GpCm"),w=n("lwsE"),k=n.n(w),_=n("W8MJ"),S=n.n(_),C=n("PJYZ"),P=n.n(C),D=n("7W2i"),I=n.n(D),T=n("a1gu"),E=n.n(T),A=n("Nsbk"),N=n.n(A),R=n("4rNB"),L=n("Ek05"),M=n("1zEf"),z=n("nKUr");function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){return Object(z.jsx)("svg",q(q({width:24,height:24},e),{},{children:Object(z.jsx)("path",{d:"M14.243 12L9.646 7.404a.5.5 0 1 1 .708-.707l4.95 4.95a.5.5 0 0 1 0 .707l-4.95 4.95a.5.5 0 0 1-.708-.708L14.243 12z",fill:"currentColor",fillRule:"evenodd"})}))}function K(e){var t=e.value,n=e.isSelected,r=void 0!==n&&n,c=e.children,i=e.onClick,a=void 0===i?function(){}:i;var o=m()("scheduler-timezone-item",{"scheduler-timepicker-item--selected":r});return Object(z.jsx)(g.a,{className:o,onClick:function(e){e.nativeEvent.stopImmediatePropagation(),a(t)},children:c})}K.propTypes={value:p.a.string.isRequired,isSelected:p.a.bool,onClick:p.a.func,children:p.a.node};var F=K;function V(e){var t=e.timezone,n=e.userTimezoneInfo,r=e.onSelect,c=void 0===r?function(){}:r,i=Object(j.useRef)(),a=Object(j.useState)(!1),o=d()(a,2),s=o[0],l=o[1];function u(e){l(!1),c(e)}return Object(z.jsxs)("div",{className:"scheduler-timezone",children:[Object(z.jsxs)(g.a,{ref:i,className:"scheduler-timezone-label",onClick:function(){return l(!s)},"aria-haspopup":"true","aria-expanded":s,children:[Object(z.jsx)("span",{children:null!=t?t:Object(v.a)("Time Zone")}),Object(z.jsx)(U,{})]}),Object(z.jsxs)(x.c,{className:"scheduler-timezone-list",renderReferenceElement:i.current,isShown:s,withArrow:!1,onClose:function(){l(!1)},children:[Object(z.jsxs)(F,{value:"floating",isSelected:null===t,onClick:u,children:[Object(z.jsx)("div",{className:"scheduler-timezone-item-header",children:Object(v.a)("Floating Time")}),Object(z.jsx)("div",{className:"scheduler-timezone-item-description",children:Object(v.a)("Due time stays the same across time zones")})]}),Object(z.jsxs)(F,{value:"fixed",isSelected:t===n.timezone,onClick:u,children:[Object(z.jsx)("div",{className:"scheduler-timezone-item-header",children:n.timezone}),Object(z.jsx)("div",{className:"scheduler-timezone-item-description",children:Object(v.a)("Your current time zone")})]}),t&&t!==n.timezone?Object(z.jsxs)(F,{value:"task",isSelected:t&&t!==n.timezone,onClick:u,children:[Object(z.jsx)("div",{className:"scheduler-timezone-item-header",children:t}),Object(z.jsx)("div",{className:"scheduler-timezone-item-description",children:Object(v.a)("This task's current time zone")})]}):null,Object(z.jsx)("div",{className:"scheduler-timezone-help",children:Object(z.jsx)("a",{href:M.p,target:"_blank",rel:"noopener noreferrer",children:Object(v.a)("Time Zones Help")})})]})]})}V.propTypes={userTimezoneInfo:p.a.object.isRequired,timezone:p.a.string,onSelect:p.a.func};var H=V;function Y(){return Object(z.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(z.jsxs)("g",{fill:"#979797",fillRule:"evenodd",children:[Object(z.jsx)("path",{d:"M12 9a1 1 0 0 1 1 1v4a1 1 0 0 1-2 0v-4a1 1 0 0 1 1-1zm0 7a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"}),Object(z.jsx)("path",{d:"M13.73 4.96L20.75 17A2 2 0 0 1 19.02 20H4.98a2 2 0 0 1-1.73-3l7.02-12.04a2 2 0 0 1 3.46 0zm-.7.55a1.2 1.2 0 0 0-2.07 0L4.15 17.2A1.2 1.2 0 0 0 5.18 19h13.64a1.2 1.2 0 0 0 1.03-1.8L13.04 5.5z"})]})})}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N()(e);if(t){var c=N()(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return E()(this,n)}}var G=function(e){I()(n,e);var t=W(n);function n(e){var r;k()(this,n),r=t.call(this,e),c()(P()(r),"handleInputChange",(function(e){var t=e.target.value,n=r.props.selectedDate,c=L.a.parse(t),i=c.due_date,a=c.has_only_time;return""===t?(clearTimeout(r.errorTimeout),r.errorTimeout=null,r.setState({timeInputValue:t,selectedTime:null,isAddButtonDisabled:!(n&&n.with_time),isErrorShown:!1})):i&&a?(clearTimeout(r.errorTimeout),r.errorTimeout=null,void r.setState({timeInputValue:t,selectedTime:i,isAddButtonDisabled:!1,isErrorShown:!1})):(r.errorTimeout||(r.errorTimeout=setTimeout((function(){r.setState({isErrorShown:!0})}),500)),r.setState({timeInputValue:t,isAddButtonDisabled:!0}))})),c()(P()(r),"handleKeyDown",(function(e){"Escape"===e.key&&r.props.onCancel(e)})),c()(P()(r),"handleSubmit",(function(e){e.preventDefault();var t=r.state,n=t.selectedTime,c=t.timezone;t.isAddButtonDisabled||r.props.onSelect(e,n,c)})),c()(P()(r),"handleTimezoneSelect",(function(e){var t,n=r.props,c=n.selectedDate,i=n.userTimezoneInfo;switch(e){case"fixed":t=i.timezone;break;case"task":t=c.timezone;break;case"floating":default:t=null}r.setState({timezone:t})}));var i=r.props.selectedDate;if(i&&i.with_time){var a=new Date;a.setHours(i.getTimezoneHours(),i.getTimezoneMinutes(),i.getTimezoneSeconds()),r.state={selectedTime:a,timezone:i.timezone,timeInputValue:i.format({inTimezoneTime:!0,onlyTime:!0}),iisAddButtonDisabled:!1,isErrorShown:!1}}else r.state={selectedTime:null,timezone:null,timeInputValue:"",iisAddButtonDisabled:!0,isErrorShown:!1};return r}return S()(n,[{key:"render",value:function(){var e=this.props,t=e.selectedDate,n=e.userTimezoneInfo,r=e.timeFormat,c=e.onCancel,i=this.state,a=i.timeInputValue,o=i.timezone,s=i.isAddButtonDisabled,l=i.isErrorShown,u=t&&t.with_time;return Object(z.jsxs)("form",{className:"scheduler-timepicker",onSubmit:this.handleSubmit,onKeyDown:this.handleKeyDown,children:[Object(z.jsxs)("div",{className:"scheduler-timepicker-controls",children:[Object(z.jsxs)("div",{className:"scheduler-timepicker-input",children:[Object(z.jsxs)("div",{className:"scheduler-timepicker-input-label",children:[Object(z.jsx)("label",{htmlFor:"scheduler-timepicker-input-element",children:Object(v.a)("Time")}),l?Object(z.jsx)(R.a,{content:Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{children:Object(v.a)("Invalid Time")}),Object(z.jsx)("div",{children:Object(v.a)("Use 13:00 or 1PM format")})]}),position:"bottom",children:Object(z.jsx)("div",{role:"img",children:Object(z.jsx)(Y,{className:"tip_item"})})}):null]}),Object(z.jsxs)("div",{className:"scheduler-timepicker-input-controls",children:[Object(z.jsx)("input",{id:"scheduler-timepicker-input-element",placeholder:r?Object(v.a)("eg, 2pm"):Object(v.a)("eg, 14:00"),value:a,onChange:this.handleInputChange,"aria-describedby":l?"scheduler-timepicker-input-error-msg":null}),l?Object(z.jsxs)("span",{id:"scheduler-timepicker-input-error-msg",children:[Object(v.a)("Invalid Time"),Object(v.a)("Use 13:00 or 1PM format")]}):null]})]}),Object(z.jsx)(H,{timezone:o,userTimezoneInfo:n,onSelect:this.handleTimezoneSelect})]}),Object(z.jsxs)("div",{className:"scheduler-timepicker-actions",children:[Object(z.jsx)(g.a,{onClick:c,children:Object(v.a)("Cancel")}),Object(z.jsx)(g.a,{type:"submit",className:"scheduler-timepicker-actions-add",disabled:s,children:u?_x("scheduler_change_time_button","Change"):_x("scheduler_add_time_button","Add")})]})]})}}]),n}(j.PureComponent);G.propTypes={selectedDate:p.a.instanceOf(O.a),userTimezoneInfo:p.a.object.isRequired,timeFormat:p.a.number,onCancel:p.a.func,onSelect:p.a.func},G.defaultProps={timeFormat:0,onCancel:function(){},onSelect:function(){}};var Q=G;function J(e){var t=e.timeFormat,n=e.userTimezoneInfo,r=e.canAddTime,c=e.isTimePickerShown,i=void 0!==c&&c,a=e.selectedDate,o=e.onTimePickerToggle,s=void 0===o?function(){}:o,l=e.onTimeSelect,u=void 0===l?function(){}:l,d=e.onSave,b=void 0===d?function(){}:d,p=Object(j.useRef)(a),O=Object(j.useRef)(null);var f=m()("scheduler-actions-save",{"scheduler-actions-save--disabled":i}),h=Boolean(a&&a.with_time),w=Boolean(h||p.current&&p.current.with_time);return Object(z.jsxs)("div",{className:"scheduler-actions",children:[h?Object(z.jsxs)("span",{className:"scheduler-actions-time",children:[Object(z.jsx)(g.a,{ref:O,className:"scheduler-actions-time-label",onClick:function(){return s(!0)},"data-track":"scheduler|full_calendar_time",children:a.format({inTimezoneTime:!0,onlyTime:!0})}),Object(z.jsx)("span",{className:"scheduler-actions-time-separator"}),Object(z.jsx)(g.a,{className:"scheduler-actions-time-remove",onClick:function(e){e.stopPropagation(),u(e)},children:Object(z.jsx)(y.a,{})})]}):r?Object(z.jsxs)(g.a,{ref:O,className:"scheduler-actions-addtime",onClick:function(){return s(!0)},"data-track":"scheduler|full_calendar_time","aria-haspopup":"true","aria-expanded":i,children:["+ ",Object(v.a)("Add time")]}):null,w?Object(z.jsx)(g.a,{className:f,onClick:function(){b(a)},"data-track":"scheduler|full_calendar_save",children:Object(v.a)("Save")}):null,Object(z.jsx)(x.c,{renderReferenceElement:O.current,placement:"top",isShown:i,withArrow:!1,onClose:function(){return s(!1)},children:Object(z.jsx)(Q,{selectedDate:a,timeFormat:t,userTimezoneInfo:n,onCancel:function(){return s(!1)},onSelect:u})})]})}J.propTypes={timeFormat:p.a.number.isRequired,userTimezoneInfo:p.a.object.isRequired,isTimePickerShown:p.a.bool,selectedDate:p.a.instanceOf(O.a),onTimePickerToggle:p.a.func,onTimeSelect:p.a.func,onSave:p.a.func,canAddTime:p.a.bool},J.defaultProps={onTimePickerToggle:function(){},onTimeSelect:function(){},onSave:function(){}};var X=J;var Z=function(){return Object(z.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",children:Object(z.jsx)("path",{d:"M12 4c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm7 8.7v.3c0 .1 0 .3-.1.4 0 .1-.1.3-.1.4 0 .1 0 .2-.1.3 0 .1-.1.3-.1.4 0 .1 0 .1-.1.2-.1.2-.1.3-.2.5 0 0 0 .1-.1.1-.1.2-.2.3-.3.5v.1c-.1.2-.2.3-.3.5-.1.2-.3.3-.4.5-.2-.7-.9-1.2-1.7-1.2h-.9v-2.6c0-.5-.4-.9-.9-.9H8.5v-1.8h1.8c.5 0 .9-.4.9-.9V7.6H13c1 0 1.8-.8 1.8-1.8v-.3c.3.1.6.3.9.5.6.3 1.1.8 1.6 1.3.4.5.8 1 1.1 1.6 0 0 0 .1.1.1.3.6.5 1.2.6 1.8v.2c0 .3.1.6.1 1 0-.3 0-.6-.1-1 0 .3.1.6.1 1-.2.2-.2.5-.2.7zm0 0v.2c-.1 0 0-.1 0-.2zm-.1.7c0 .1 0 .2-.1.3 0-.1 0-.2.1-.3zm-.2.6c0 .1-.1.2-.1.3 0-.1.1-.2.1-.3zm-.2.6c0 .1-.1.2-.1.3 0-.1 0-.2.1-.3zm-.3.6c-.1.1-.1.2-.2.3.1-.1.1-.2.2-.3zm-.3.6c-.1.1-.1.2-.2.3 0-.1.1-.2.2-.3zm-.4.5c-.1.1-.1.2-.2.3 0-.1.1-.2.2-.3zM14.7 5.5c.3.1.6.3.8.4-.3-.1-.6-.3-.8-.4zM18.3 9c.1.3.2.5.3.8 0-.2-.1-.5-.3-.8zm.4.9c.1.3.2.6.2.9-.1-.3-.1-.6-.2-.9zm-1-1.9c-.2-.2-.3-.5-.5-.7.2.2.4.5.5.7zm.5.8c-.1-.3-.3-.5-.5-.8.3.3.4.6.5.8zm-1.1-1.6c-.2-.2-.4-.4-.7-.6.2.2.5.4.7.6zM15.6 6c.2.1.5.3.7.5-.2-.2-.4-.3-.7-.5zM5 11.2v.8c0-.5.1-1.1.2-1.6l4.2 4.2v.9c0 1 .8 1.8 1.8 1.8V19c-1-.1-2-.5-2.9-1 0 0-.1 0-.1-.1-.1-.1-.2-.2-.3-.2-.1 0-.1-.1-.2-.1-.1-.1-.2-.2-.3-.2l-.2-.2c-.1-.2-.2-.3-.3-.4-.1-.1-.1-.2-.2-.2-.1-.1-.1-.2-.2-.3-.1-.1-.1-.2-.2-.3-.1-.1-.1-.2-.2-.3-.1-.1-.1-.2-.2-.3-.1-.1-.1-.2-.2-.3-.1-.1-.1-.2-.1-.3 0-.1-.1-.2-.1-.3 0-.1-.1-.2-.1-.3 0-.1-.1-.2-.1-.3 0-.1-.1-.2-.1-.4 0-.1 0-.2-.1-.3 0-.1 0-.3-.1-.4V11.2zm.2-.7c0 .2-.1.3-.1.5 0-.2 0-.3.1-.5zm5.6 8.4h-.3.3zm-.7-.2c-.1 0-.2 0-.2-.1.1.1.2.1.2.1zm-.7-.2c-.1 0-.2-.1-.3-.1.1 0 .2 0 .3.1zm-.7-.3c-.1 0-.2-.1-.3-.2.1.1.2.1.3.2zm-.6-.4c-.1-.1-.2-.1-.3-.2.2.1.3.2.3.2zm-.5-.3c-.1-.1-.2-.1-.2-.2.1 0 .1.1.2.2zm-.9-.9c-.1-.1-.1-.2-.2-.2.1 0 .1.1.2.2zm-.4-.6c-.1-.1-.1-.2-.2-.2.1.1.1.2.2.2zm-.4-.5c0-.1-.1-.2-.1-.3 0 .1.1.2.1.3zm-.3-.6c0-.1-.1-.2-.1-.3.1.1.1.2.1.3zm-.2-.6c0-.1-.1-.2-.1-.3 0 .1.1.2.1.3zm-.2-.7c0-.1 0-.2-.1-.2.1 0 .1.1.1.2zm-.1-.7v-.2c-.1.1 0 .1 0 .2zm1.8 3.9l.2.2-.2-.2z",fill:"#b2b2b2"})})},$=n("LYyr"),ee=n("+E59"),te=n("UVeO"),ne=n("v2vH");function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N()(e);if(t){var c=N()(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return E()(this,n)}}var ce=function(e){I()(n,e);var t=re(n);function n(){return k()(this,n),t.apply(this,arguments)}return S()(n,[{key:"render",value:function(){var e,t,n;return this.props.isValid?(e=Object(v.a)("You can also type in recurring due dates like <b>every day</b>, <b>every 2 weeks</b>, and <b>every last Fri of the month</b>."),t=Object(v.a)("More about recurring due dates"),n="https://support.todoist.com/hc/articles/360000636289"):(e=Object(v.a)("Did you know you can type in due dates like <b>Jan 15 at 9am</b>, <b>2 months from now</b>, or <b>every Friday</b>?"),t=Object(v.a)("More about due dates"),n="https://support.todoist.com/hc/articles/205325931"),Object(z.jsxs)("div",{className:"scheduler-preview-help",children:[Object(z.jsx)("p",{dangerouslySetInnerHTML:{__html:e}}),Object(z.jsx)("p",{children:Object(z.jsx)("a",{href:n,rel:"noopener noreferrer",className:"scheduler-preview-help-link",target:"_blank",children:t})})]})}}]),n}(j.PureComponent);ce.propTypes={isValid:p.a.bool},ce.defaultProps={isValid:!0};var ie=ce;function ae(e){var t=e.dateResult,n=e.karma,r=e.items,c=void 0===r?[]:r,i=e.userTimezoneInfo,a=e.timezone,o=e.isSubmitted,s=void 0!==o&&o,l=e.user,u=e.collaboratorsByPID,d=e.onClick,j=void 0===d?function(){}:d,b=e.onTimezoneSelect,p=void 0===b?function(){}:b;if(s&&!t.due_date)return Object(z.jsx)("div",{className:"scheduler-preview scheduler-preview--invalid",children:Object(z.jsxs)("div",{className:"scheduler-preview-content",children:[Object(z.jsx)(ne.a,{size:"24"}),Object(z.jsxs)("div",{className:"scheduler-preview-date",children:[Object(v.a)("No results"),n<2500?Object(z.jsx)(ie,{isValid:!1}):null]})]})});if(t.due_date){var f,h,m,g,y=L.a.format(t.due_date,!1,{with_time:!1,with_weekday:!0}),x=Object(ee.e)(c,t.due_date,{user:l,collaboratorsByPID:u});return t.all_day||(m=t.due_date instanceof O.a?t.due_date.format({inTimezoneTime:!0,onlyTime:!0}):L.a.getHourAndMin(t.due_date)),x.length>0?(h=_n("1 task","{n} tasks",x.length),h=Object($.a)(h,{n:x.length})):h=Object(v.a)("No tasks"),t.is_recurring?(f=t.end_date?L.a.format(t.end_date,!1,{with_time:!1,with_weekday:!0}):Object(v.a)("Forever"),g=Object($.a)(Object(v.a)("Repeats {recurring_date_pattern}"),{recurring_date_pattern:t.start_string||t.date_string})):g=h,Object(z.jsxs)("div",{className:"scheduler-preview scheduler-preview--valid",children:[Object(z.jsxs)("button",{className:"scheduler-preview-content",onClick:function(e){e.stopPropagation(),j(e)},children:[t.is_recurring?Object(z.jsx)(te.Yb,{}):Object(z.jsx)(ne.a,{}),Object(z.jsxs)("div",{className:"scheduler-preview-date",children:[Object(z.jsxs)("div",{className:"scheduler-preview-date-info",children:[Object(z.jsx)("span",{children:y}),f?Object(z.jsx)("span",{children:" \u2192 ".concat(f)}):null,Object(z.jsx)("span",{className:"scheduler-preview-date-info-time",children:m})]}),Object(z.jsx)("span",{className:"scheduler-preview-date-tasks",children:g})]})]}),!t.all_day||a?Object(z.jsx)(H,{userTimezoneInfo:i,timezone:a,onSelect:p}):null,n<2500?Object(z.jsx)(ie,{}):null]})}return null}ae.propTypes={dateResult:p.a.object.isRequired,karma:p.a.number.isRequired,items:p.a.array,collaboratorsByPID:p.a.object.isRequired,user:p.a.object.isRequired,userTimezoneInfo:p.a.object.isRequired,selectedDate:p.a.instanceOf(O.a),isSubmitted:p.a.bool,onClick:p.a.func,onTimezoneSelect:p.a.func,timezone:p.a.string};var oe=ae,se=function(e){return e?e.is_recurring?e.string:e.format({inTimezoneTime:!0}):""};function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N()(e);if(t){var c=N()(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return E()(this,n)}}var ue=function(e){I()(n,e);var t=le(n);function n(e){var r;k()(this,n),r=t.call(this,e),c()(P()(r),"composingRef",Object(j.createRef)()),c()(P()(r),"handleFocus",(function(){window.requestAnimationFrame((function(){var e=P()(r).input;e&&e.select()}))})),c()(P()(r),"handleInputChange",(function(e){var t=e.target.value;if(""===t)return r.handleInputReset(e,!0);var n={dateResult:L.a.parse(t,r.parsingDate),inputValue:t};r.state.isSubmitted&&(n.isSubmitted=!1),r.state.dateResult||r.props.onActiveChange(!0),r.setState(n)})),c()(P()(r),"handleInputKeyDown",(function(e){r.composingRef.current||("Enter"===e.key?r.handleSubmit(e):"Escape"===e.key&&r.handleInputReset(e))})),c()(P()(r),"handleInputReset",(function(e,t){!t&&(!r.state.inputValue&&!r.state.dateResult||e.key&&"Enter"!==e.key&&"Escape"!==e.key)||(e.nativeEvent.stopImmediatePropagation(),r.setState({dateResult:null,inputValue:"",isSubmitted:!1,timezone:null}),r.input.focus(),r.props.onActiveChange(!1))})),c()(P()(r),"handleSubmit",(function(e){e.preventDefault();var t=r.state,n=t.dateResult,c=t.inputValue,i=t.timezone;if(r.setState({isSubmitted:!0}),!n||n.due_date){var a;if(n)if(n.due_date instanceof O.a)a=i!==n.due_date.timezone?n.due_date.changeTimezone(i):n.due_date;else{var o=n.all_day?{}:{timezone:i};a=O.a.fromDateist(n,o)}else a=c?r.props.selectedDate:null;track("scheduler","enter","type_a_date"),r.props.onDateSelect(a)}})),c()(P()(r),"handleTimezoneIconClick",(function(e){e.stopPropagation();var t=r.state.inputValue||se(r.props.selectedDate),n=L.a.parse(t,r.parsingDate);n.due_date=r.props.selectedDate,r.setState({dateResult:n}),r.input.focus(),r.props.onActiveChange(!0)})),c()(P()(r),"handleTimezoneSelect",(function(e){var t;switch(e){case"fixed":t=r.props.userTimezoneInfo.timezone;break;case"task":t=r.props.selectedDate.timezone;break;case"floating":default:t=null}r.setState({timezone:t}),r.input.focus()}));var i=e.currentDate,a=e.selectedDate;return r.state={dateResult:null,inputValue:se(a),timezone:a&&a.timezone,isSubmitted:!1},r.initialDate=e.selectedDate,r.parsingDate=e.selectedDate?e.selectedDate.inheritDate({year:i.getFullYear(),month:i.getMonth(),day:i.getDate()}):null,r}return S()(n,[{key:"componentDidUpdate",value:function(e){var t={};this.initialDate&&(!this.initialDate||this.initialDate.is_recurring)||this.props.selectedDate===e.selectedDate||(t.inputValue=se(this.props.selectedDate)),this.props.selectedDate!==e.selectedDate&&(t.timezone=this.props.selectedDate.timezone),this.setState(t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.dateResult,r=t.inputValue,c=t.timezone,i=t.isSubmitted,a=this.props,o=a.karma,s=a.items,l=a.selectedDate,u=a.userTimezoneInfo,d=a.collaboratorsByPID,j=a.user;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"scheduler-input",onKeyDown:this.handleInputKeyDown,children:[Object(z.jsx)("input",{ref:function(t){e.input=t},placeholder:Object(v.a)("Type a due date"),value:r,spellCheck:"false",onChange:this.handleInputChange,onFocus:this.handleFocus,onCompositionStart:function(){return e.composingRef.current=!0},onCompositionEnd:function(){return e.composingRef.current=!1}}),n?r.length>0&&Object(z.jsx)(g.a,{onClick:this.handleInputReset,"aria-label":Object(v.a)("Clear"),children:Object(z.jsx)(y.a,{"aria-hidden":!0})}):c&&Object(z.jsx)(g.a,{onClick:this.handleTimezoneIconClick,children:Object(z.jsx)(Z,{})})]}),n?Object(z.jsx)(oe,{dateResult:n,karma:o,items:s,user:j,collaboratorsByPID:d,selectedDate:l,userTimezoneInfo:u,timezone:c,isSubmitted:i,onClick:this.handleSubmit,onTimezoneSelect:this.handleTimezoneSelect}):null]})}}]),n}(j.PureComponent);ue.propTypes={currentDate:p.a.object.isRequired,karma:p.a.number.isRequired,items:p.a.array,collaboratorsByPID:p.a.object.isRequired,user:p.a.object.isRequired,selectedDate:p.a.instanceOf(O.a),userTimezoneInfo:p.a.object.isRequired,onActiveChange:p.a.func,onDateSelect:p.a.func},ue.defaultProps={items:[],onActiveChange:function(){},onDateSelect:function(){}};var de=ue,je=n("ihri");function be(e){var t=e.onClose,n=e.onDateSelect,r=e.selectedDate,c=e.selectedItems,i=e.suggestions,a=void 0===i?[]:i,o=e.currentDate,s=e.collaboratorsByPID,l=e.ignoredDays,u=void 0===l?[6,7]:l,b=e.items,p=void 0===b?[]:b,h=e.itemsByDate,m=void 0===h?{}:h,v=e.karma,g=e.timeFormat,y=void 0===g?0:g,x=e.user,w=e.userTimezoneInfo,k=void 0===w?{}:w,_=e.weekStartDay,S=void 0===_?7:_,C=Object(j.useState)(r),P=d()(C,2),D=P[0],I=P[1],T=Object(j.useState)(!1),E=d()(T,2),A=E[0],N=E[1],R=Object(j.useState)(!1),L=d()(R,2),M=L[0],B=L[1];var q=null==c?void 0:c.some((function(e){return(null==e?void 0:e.due)&&e.due.is_recurring}));return Object(z.jsxs)("div",{className:"scheduler",onKeyDown:function(e){"Escape"!==e.key||A||(e.stopPropagation(),t())},children:[Object(z.jsx)(de,{currentDate:o,items:p,collaboratorsByPID:s,user:x,karma:v,selectedDate:D,userTimezoneInfo:k,onActiveChange:N,onDateSelect:function(e,t){t||I(null),n(e)}}),Object(z.jsx)(je.c,{currentDate:o,suggestions:a,onSuggestionSelect:function(e,t){var r=c.map((function(n){return Object(je.d)({type:e,date:t},n,D)}));n(1===c.length?r[0]:r)}}),Object(z.jsx)(f.a,{currentDate:o,ignoredDays:u,itemsByDate:m,items:p,collaboratorsByPID:s,user:x,selectedDate:D,weekStartDay:S,onDateSelect:function(e){var t={year:e.getFullYear(),month:e.getMonth(),day:e.getDate()};if(c.length>1&&(!D||!D.with_time)){var r=c.map((function(n){return n.due?n.due.inheritDate(t):O.a.fromDate(e)}));return n(r)}if(!D){var i=c&&c[0].due?c[0].due.inheritDate(t):O.a.fromDate(e);return n(i)}if(!D.with_time)return n(D.inheritDate(t));I(D.inheritDate(t))}}),Object(z.jsx)(X,{canAddTime:1===(null==c?void 0:c.length)||(null==c?void 0:c.length)>1&&!q,selectedDate:D,timeFormat:y,userTimezoneInfo:k,isTimePickerShown:M,onTimePickerToggle:function(e){B(e)},onTimeSelect:function(e,t,n){var r=D;e.nativeEvent.stopImmediatePropagation(),t?r=r?r.changeTime(t.getHours(),t.getMinutes(),t.getSeconds(),{timezone:n}):O.a.fromDate(t,{timezone:n,withTime:!0}):r&&(r=r.inheritDate({year:r.getFullYear(),month:r.getMonth(),day:r.getDate(),hours:23,minutes:59,seconds:59},{withTime:!0})),I(r),B(!1)},onSave:n})]})}be.propTypes={onClose:p.a.func.isRequired,onDateSelect:p.a.func.isRequired,predictedDate:p.a.oneOfType([p.a.instanceOf(Promise),p.a.instanceOf(O.a),p.a.arrayOf(p.a.instanceOf(O.a))]),selectedDate:p.a.instanceOf(O.a),selectedItems:p.a.array,suggestions:p.a.array,currentDate:p.a.object.isRequired,collaboratorsByPID:p.a.object.isRequired,ignoredDays:p.a.array,items:p.a.array,itemsByDate:p.a.object,karma:p.a.number.isRequired,timeFormat:p.a.number,user:p.a.object.isRequired,userTimezoneInfo:p.a.object,weekStartDay:p.a.number};var pe=be;function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e){var t,n=Object(i.h)(Object(l.a)((function(e){return{currentDate:Object(a.b)(e),collaboratorsByPID:e.collaborators.byPID,ignoredDays:Object(s.b)(e),items:Object(o.m)(e),itemsByDate:Object(o.k)(e),karma:Object(s.h)(e),nextWeekDay:Object(s.j)(e),timeFormat:Object(s.k)(e),user:Object(s.n)(e),userTimezoneInfo:Object(s.l)(e),weekStartDay:Object(s.p)(e),weekendStartDay:Object(s.q)(e)}}))),r=(t=e.selectedItems).every((function(e){return e.due&&e.due.is_recurring}))?{date:1===t.length?t[0].due.nextRecurrence()[0]:t.map((function(e){return e.due.nextRecurrence()[0]})),type:"postpone"}:null,c=Object(je.b)({today:n.currentDate,items:e.selectedItems,nextWeekDay:n.nextWeekDay,weekStartDay:n.weekStartDay,weekendStartDay:n.weekendStartDay,selectedDate:e.selectedDate}),u=fe(fe(fe({},n),e),{},{suggestions:c,predictedDate:r?r.date:null});return Object(z.jsx)(pe,fe({},u))}},G3OE:function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var r=n("lSNA"),c=n.n(r),i=n("QILm"),a=n.n(i),o=n("J4zp"),s=n.n(o),l=n("RIqP"),u=n.n(l),d=n("q1tI"),j=n("/MKj"),b=n("MPi4"),p=n("LvDl"),O=n("peh1"),f=n("Vbab"),h=n("maC2"),m=n("ZnB/"),v=n("gVGk"),g=n("XOeF"),y=n("A72/"),x=n("FfTA"),w=n("KDcA"),k=n("EQPz"),_=n("k9f2"),S=n("ha8Y"),C=n("GnSW"),P=n("A/Zz"),D=n("idbf"),I=n("+ger"),T=n("UVeO");function E(e){return"sync_id"in e||"parent_id"in e?"project":"query"in e?"filter":"label"}var A=n("nKUr");function N(e){var t,n=e.menuTarget,r=e.renderMenu,c=e.count,i=e.showTaskCount,a=void 0===i||i,o=E(n),s="label"===o?Object(f.a)("More label actions"):Object(f.a)("More filter actions"),l="label"===o?{type:"label",labelId:n.id}:{type:"filter",filterId:n.id},u="label"===o?Object(A.jsx)(T.ab,{}):Object(A.jsx)(T.P,{}),d=null!==(t=n.color)&&void 0!==t?t:I.a;return Object(A.jsx)(_.c,{label:n.name,linkTo:l,menuLabel:s,renderLegacyMenu:r,icon:u,color:Object(I.d)(d),count:c,showTaskCount:a})}var R=n("F2vK"),L=n("Tc49");function M(e){var t=e.menuTarget,n=e.onProjectEdit,r=e.onUnfavorite,c=e.close,i=E(t),a=Object(d.useCallback)((function(){n&&t&&"sync_id"in t&&n(t)}),[n,t]),o=Object(d.useCallback)((function(){r&&t&&r({menu:E(t),item:{id:t.id}})}),[r,t]);return Object(A.jsxs)(L.c,{className:"item_menu_list",onClick:function(){return c()},children:[n&&"project"===i?Object(A.jsx)(L.a,{text:Object(f.a)("Edit project"),icon:Object(A.jsx)(T.I,{}),onClick:a}):null,r?Object(A.jsx)(L.a,{text:Object(f.a)("Remove from favorites"),icon:Object(A.jsx)(R.a,{}),onClick:o}):null]})}var z=["id"];function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=[],K=[];var F=Object(O.createSelector)(h.c,g.n,(function(e){return e.user}),Object(x.a)((function(e,t,n){var r=[].concat(u()(t.map((function(e){return e.id}))),[n.inbox_project_id]);return n.team_inbox_id&&r.push(n.team_inbox_id),Object(p.pick)(e,r)})));function V(){var e=Object(b.a)("SidebarFavoritesPanelExpanded",function(){try{return Boolean(JSON.parse(localStorage.left_menu_panels).favorite)}catch(e){return!0}}()),t=s()(e,2),n=t[0],r=t[1],c=Object(d.useState)(null),i=s()(c,2),o=i[0],l=i[1],u=Object(j.h)((function(e){return e.settings.navigation.counts_shown})),p=Object(j.h)((function(e){return e.collaborators.byPID})),O=Object(j.h)(g.n),x=Object(j.h)((function(e){return Object(y.p)(e)?Object(v.m)(e):U})),I=Object(j.h)((function(e){return Object(y.o)(e)?Object(m.f)(e):K})),T=O.length+x.length+I.length>0,E=Object(j.h)(h.b),R=Object(j.h)(h.a),L=Object(j.h)(F),B=Object(j.g)();function V(e){var t=e.menu,n=e.item;switch(t){case"project":B(Object(g.z)(n.id,{is_favorite:!1}));break;case"label":B(Object(v.s)(n.id,{is_favorite:!1}));break;case"filter":B(Object(m.i)(n.id,{is_favorite:!1}))}}return T?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(D.a,{id:"left-menu-favorites-panel",isExpanded:n,onToggleExpand:function(){return r((function(e){return!e}))},title:Object(f.a)("Favorites"),"data-track":"navigation|favorites_panel",children:Object(A.jsxs)(_.b,{"aria-label":Object(f.a)("Favorites"),children:[null!=O&&O.length?Object(A.jsx)(w.c,{type:"TASK_DROPAREA",droppableId:S.c,maxDepth:3,combineEnabledFor:"TASK",scrollAncestorDroppableId:"left-menu",forceRoot:!0,children:function(e){var t=e.innerRef,n=e.placeholder,r=e.droppableProps;return Object(A.jsxs)("div",q(q({id:"projects_list",ref:t},r),{},{children:[null==O?void 0:O.map((function(e,t){return Object(A.jsx)(w.b,{draggableId:"".concat(S.a).concat(e.id),index:t,type:"PROJECT",disableDrag:!0,children:function(t,n){var r,c=t.innerRef,i=t.draggableProps,a=n.combineTargetFor;return Object(A.jsx)(P.a,q({supportDragAndDrop:!0,project:e,innerRef:c,isTaskDraggedOver:Boolean(a),count:null!==(r=L[e.id])&&void 0!==r?r:0,showTaskCount:u,isShared:Boolean(p[e.id]),renderLegacyMenu:function(t){return Object(A.jsx)(M,{menuTarget:e,close:t,onProjectEdit:l,onUnfavorite:V})}},i),e.id)}},e.id)})),n(Object(A.jsx)(C.a,{}))]}))}}):null,null==x?void 0:x.map((function(e){var t;return Object(A.jsx)(N,{menuTarget:e,count:null!==(t=E[e.name])&&void 0!==t?t:0,showTaskCount:u,renderMenu:function(t){return Object(A.jsx)(M,{menuTarget:e,close:t,onUnfavorite:V})}},e.id)})),null==I?void 0:I.map((function(e){var t;return Object(A.jsx)(N,{menuTarget:e,count:null!==(t=R[e.id])&&void 0!==t?t:0,showTaskCount:u,renderMenu:function(t){return Object(A.jsx)(M,{menuTarget:e,close:t,onUnfavorite:V})}},e.id)}))]})}),null!=o?Object(A.jsx)(k.a,{project:o,onProjectUpdate:function(e){var t=e.id,n=a()(e,z);B(Object(g.z)(t,n)),Signals.sendSignal("refresh_interface")},onModalClose:function(){return l(null)}}):null]}):null}},GnSW:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r="wL+aNm2Y6l565fxP6wPqRA==",c=n("nKUr");function i(){return Object(c.jsx)("div",{className:r})}},GpCm:function(e,t,n){"use strict";n.d(t,"c",(function(){return r.a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return p}));var r=n("cppk"),c={name:"preventOverflow",options:{boundariesElement:"viewport",padding:20}},i={name:"flip",options:{fallbackPlacements:["top","left","right"]}},a=n("lSNA"),o=n.n(a),s=n("J4zp"),l=n.n(s),u=n("q1tI");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={referenceElement:void 0,virtualReferenceElement:void 0};function p(){var e=Object(u.useState)(b),t=l()(e,2),n=t[0],r=t[1],c=Object(u.useCallback)((function(){r(b)}),[]),i=Object(u.useCallback)((function(e){r(j(j({},b),{},{referenceElement:e}))}),[]),a=Object(u.useCallback)((function(e){e.stopPropagation(),i(e.currentTarget)}),[i]),o=Object(u.useCallback)((function(e){if(!e.shiftKey){e.stopPropagation(),e.preventDefault();var t=e.pageX,n=e.pageY,c=e.target;c.getBoundingClientRect=function(){var e=document.documentElement,r={x:t-e.scrollLeft,y:n-e.scrollTop};return{width:0,height:0,top:r.y,left:r.x,right:r.x,bottom:r.y}},r(j(j({},b),{},{virtualReferenceElement:c}))}}),[]);var s=Object(u.useCallback)((function(){if(0!==arguments.length){var e=arguments.length<=0?void 0:arguments[0];return"function"!=typeof e?function(){c()}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.apply(this,n),c()}}c()}),[c]),d=null!=n.referenceElement||null!=n.virtualReferenceElement;return Object(u.useMemo)((function(){return{props:{renderReferenceElement:n.referenceElement||n.virtualReferenceElement,placement:n.virtualReferenceElement?"right-start":void 0,onClose:c,isShown:d},isOpen:d,isOpenedByContextMenu:null!=n.virtualReferenceElement,isOpenedByAnchorClick:null!=n.referenceElement,openAnchoredToElement:i,openOnClick:a,openOnContextMenu:o,close:s}}),[n.referenceElement,n.virtualReferenceElement,c,d,i,a,o,s])}},IHJC:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("lSNA"),c=n.n(r),i=n("QILm"),a=n.n(i),o=n("J4zp"),s=n.n(o),l=n("q1tI"),u=n("TSYQ"),d=n.n(u),j=n("oVv/"),b=n("4eld"),p=n("nKUr"),O=["checked","priority","onChange","playSound","presentationOnly"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){var t=e.checked,n=e.priority,r=e.onChange,c=e.playSound,i=void 0===c||c,o=e.presentationOnly,u=void 0!==o&&o,f=a()(e,O),m=Object(l.useRef)(null),v=function(e,t){var n=Object(l.useState)(!1),r=s()(n,2),c=r[0],i=r[1];return[c,function(n){i(!0),window.setTimeout((function(){e.current&&(i(!1),n())}),t)}]}(m,250),g=s()(v,2),y=g[0],x=g[1];var w=d()("task_checkbox","priority_".concat(n),{checked:t,with_check_animation:y,presentation_only:u});return Object(p.jsx)(b.a,h(h({ref:m,className:w,onClick:u?void 0:function(e){e.stopPropagation(),e.persist(),x((function(){null==r||r(!t,e)})),!1===Boolean(t)&&i&&Object(j.a)().catch((function(){}))},role:u?"presentation":"checkbox","aria-hidden":u,"aria-checked":u?void 0:Boolean(t),as:u?"div":void 0},f),{},{children:Object(p.jsx)("div",{className:"task_checkbox__circle",children:Object(p.jsx)("svg",{width:"24",height:"24",children:Object(p.jsx)("path",{fill:"currentColor",d:"M11.23 13.7l-2.15-2a.55.55 0 0 0-.74-.01l.03-.03a.46.46 0 0 0 0 .68L11.24 15l5.4-5.01a.45.45 0 0 0 0-.68l.02.03a.55.55 0 0 0-.73 0l-4.7 4.35z"})})})}))}},"J3B+":function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return w}));var r=n("q1tI"),c=n("/MKj"),i=n("tfz/"),a=n("GgqS"),o=n("1zEf"),s=n("Vbab"),l=n("awe3"),u=n("nKUr");function d(){var e=Object(i.c)(),t=Object(c.g)(),n=Object(c.h)((function(e){return Object(l.v)(l.i,e)}));function d(){t(Object(l.w)(l.i))}var j=Object(r.useRef)(!1);return Object(r.useEffect)((function(){if(n&&!j.current){j.current=!0;var t=e({message:Object(s.a)("Your Google Assistant lists are now synced with Todoist projects. Any synced tasks will have the \u201cAssistant\u201d label."),autoDismissDelay:!1,action:Object(u.jsx)(a.a,{variant:"tertiary",onClick:function(){t(),d()},href:o.g,openInNewTab:!0,children:Object(s.a)("Learn more")}),onDismiss:d})}})),null}var j,b,p=n("ImH7"),O=n("AnGN");function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e){return r.createElement("svg",f({width:24,height:25,viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),j||(j=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.887 2.5c.114 1.054-.307 2.113-.936 2.875-.626.76-1.655 1.352-2.663 1.274-.137-1.034.372-2.112.953-2.785.649-.76 1.742-1.327 2.646-1.364zm3.258 6.144c-.156.095-1.953 1.19-1.933 3.42.026 2.68 2.312 3.602 2.408 3.64l.002.001-.004.014c-.046.152-.408 1.33-1.238 2.546-.749 1.098-1.525 2.19-2.75 2.212-.587.01-.98-.16-1.388-.336-.427-.185-.872-.378-1.575-.378-.736 0-1.202.199-1.65.39-.388.166-.764.326-1.292.346-1.183.045-2.081-1.186-2.836-2.278-1.542-2.235-2.72-6.315-1.138-9.07.786-1.366 2.19-2.232 3.716-2.254.658-.014 1.295.24 1.853.46.425.17.804.32 1.111.32.275 0 .644-.146 1.075-.316.677-.267 1.507-.595 2.362-.508.585.025 2.23.238 3.285 1.786a.374.374 0 01-.008.005z",fill:"currentColor"})),r.createElement("mask",{id:"apple-logo_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:5,y:2,width:15,height:19},b||(b=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.887 2.5c.114 1.054-.307 2.113-.936 2.875-.626.76-1.655 1.352-2.663 1.274-.137-1.034.372-2.112.953-2.785.649-.76 1.742-1.327 2.646-1.364zm3.258 6.144c-.156.095-1.953 1.19-1.933 3.42.026 2.68 2.312 3.602 2.408 3.64l.002.001-.004.014c-.046.152-.408 1.33-1.238 2.546-.749 1.098-1.525 2.19-2.75 2.212-.587.01-.98-.16-1.388-.336-.427-.185-.872-.378-1.575-.378-.736 0-1.202.199-1.65.39-.388.166-.764.326-1.292.346-1.183.045-2.081-1.186-2.836-2.278-1.542-2.235-2.72-6.315-1.138-9.07.786-1.366 2.19-2.232 3.716-2.254.658-.014 1.295.24 1.853.46.425.17.804.32 1.111.32.275 0 .644-.146 1.075-.316.677-.267 1.507-.595 2.362-.508.585.025 2.23.238 3.285 1.786a.374.374 0 01-.008.005z",fill:"currentColor"}))))}var m,v;n.p;function g(){var e=Object(i.c)(),t=Object(c.g)(),n=Object(c.h)((function(e){return Object(l.v)(l.q,e)})),o=Object(c.h)(Object(p.c)({days:1})),d=O.default.isMac&&!O.default.isMacApp&&!O.isElectron&&n&&o;return Object(r.useEffect)((function(){if(d)var n=e({icon:Object(u.jsx)(h,{}),message:Object(s.a)("Todoist for macOS"),description:Object(s.a)("Get desktop notifications and launch from the Dock."),action:Object(u.jsx)(a.a,{variant:"tertiary",size:"small",href:"https://geo.itunes.apple.com/us/app/todoist-to-do-list-task-manager/id585829637?mt=12","data-track":"promotion|macos|follow",openInNewTab:!0,onClick:function(){n(),r()},children:Object(s.a)("Download")}),onDismiss:r,autoDismissDelay:!1});function r(){t(Object(l.w)(l.q))}}),[t,e,d]),null}function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function x(e){return r.createElement("svg",y({width:24,height:25,viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),m||(m=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.667 5.667L4 6.5v5.334h6.667V5.667zm0 6.833H4v6l6.667.834V12.5zm.666 6.917V12.5H20v8l-8.667-1.083zm0-7.584v-6.25L20 4.5v7.334h-8.667z",fill:"currentColor"})),r.createElement("mask",{id:"windows-logo_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:4,y:4,width:16,height:17},v||(v=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.667 5.667L4 6.5v5.334h6.667V5.667zm0 6.833H4v6l6.667.834V12.5zm.666 6.917V12.5H20v8l-8.667-1.083zm0-7.583v-6.25L20 4.5v7.334h-8.667z",fill:"currentColor"}))))}n.p;function w(){var e=Object(i.c)(),t=Object(c.g)(),n=Object(c.h)((function(e){return Object(l.v)(l.r,e)})),o=Object(c.h)(Object(p.c)({days:1})),d=O.default.isWindows&&!O.default.isWindowApp&&!O.isElectron&&n&&o;return Object(r.useEffect)((function(){if(d)var n=e({icon:Object(u.jsx)(x,{}),message:Object(s.a)("Todoist for Windows"),description:Object(s.a)("Get desktop notifications and launch from the taskbar"),action:Object(u.jsx)(a.a,{variant:"tertiary",size:"small",href:"https://todoist.com/downloads/windows","data-track":"promotion|windows|follow",openInNewTab:!0,onClick:function(){n(),r()},children:Object(s.a)("Download")}),onDismiss:r,autoDismissDelay:!1});function r(){t(Object(l.w)(l.r))}}),[t,e,d]),null}},KRPs:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ke}));var r=n("lSNA"),c=n.n(r),i=n("q1tI"),a=n("/MKj"),o=n("Bcse"),s=n.n(o),l=n("Y+p1"),u=n.n(l),d=n("WgXA"),j=n("wV8l"),b=n("81N4"),p=n("TQFH"),O=n("TuXZ"),f=n("gVGk"),h=n("lzDQ"),m=n("XOeF"),v=n("p3jf"),g=n("A72/"),y=n("IZ74"),x=n("QILm"),w=n.n(x),k=n("n6bU"),_=n("JZM8"),S=n.n(_),C=n("xvbm"),P=n("Qi13"),D=n("/lEg"),I=n("c9wj"),T=n("3JOJ"),E=n("YDJs"),A=n("YMK/"),N=n("6O1D"),R=n("eYn1"),L=n("dAW7"),M=n("Ankm"),z=n("ImH7"),B=n("J4zp"),q=n.n(B),U=n("K6Df"),K=n("GgqS"),F=n("ibRB"),V=n("Vbab"),H=n("awe3"),Y=n("AnGN"),W=n("gd9Y"),G=n("yYH5"),Q=n("Ez++"),J=n("5alK"),X=n("wjpq"),Z=n("1/Z5"),$=n("2Y1q"),ee=n("nKUr");function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e){var t=e.editorState,n=e.listId,r=e.listType,c=e.hierarchy,a=e.indents,o=e.siblings,s=e.task,l=e.tasksMap,u=e.bottomTaskId,d=e.project,j=e.section,b=e.user,O=e.reminders,f=e.allowAdd,h=e.allowAddAbove,m=e.allowAddBelow,v=e.allowIndentChange,g=e.canAddComments,y=e.canUseLabels,x=e.isPremium,w=e.tasks,_=e.onAdd,S=e.onChange,C=e.onUpdate,P=Object(W.j)(),D=Object(L.i)(),I=D.onAddAbove,T=D.onAddBelow,E=D.onAddBottom,A=D.onAddTop,N=D.onEditItem,R=D.onChangeIndent,z=D.onResetEditorState,B=Object(i.useRef)(null),te=Object(i.useState)(null),re=q()(te,2),ce=re[0],ie=re[1],ae=Object(k.a)(w),oe=Object(i.useMemo)((function(){return t?null!=t.indent?t.indent:t.taskId&&a[t.taskId]||1:1}),[t,a]),se=Object(Q.a)(H.m).isTipScheduled,le=Object(i.useState)(!1),ue=q()(le,2),de=ue[0],je=ue[1],be=Object(i.useCallback)((function(e){e&&je(!0)}),[]),pe=se&&P&&!(null!=P&&P.subPath)&&de;Object(i.useEffect)((function(){pe&&Object(F.a)({event:"tooltip_view_natural_add"})}),[pe]),Object(i.useEffect)((function(){if((null==t?void 0:t.listId)===n){var e=Object(M.b)(null==t?void 0:t.mode);("project"===r&&null!=j&&j.collapsed||e&&!f)&&(null==z||z())}}),[t,n,z,j,f,r]),Object(i.useEffect)((function(){B.current&&t&&t.fromShortcut&&t.mode!==L.g&&B.current.scrollIntoView(!1)}),[t]),Object(i.useEffect)((function(){if(ce&&t){var e=ce.event,r=ce.taskId,c=ce.originField;return a[r]?"Enter"===e.key&&e.shiftKey&&m?T(n,r):"Enter"===e.key&&e.ctrlKey&&h&&"title"===c?I(n,r):t.mode===L.g?z():m?T(n,r):E(n):t.taskId&&m?T(n,t.taskId):E(n)}}),[h,m,t,a,ce,n,I,T,E,z,w,ae]),Object(i.useEffect)((function(){return function(){if("today"===(null==P?void 0:P.type)&&t.mode===L.g)return z()}}),[t.mode,null==P?void 0:P.type,z]);var Oe=Object(i.useCallback)((function(e,n,r){if(t){var i=Object($.c)({editorValue:e,editorIndent:oe,editorState:t,task:s,tasksMap:l,hierarchy:c,siblings:o,indents:a,bottomTaskId:u},{disableOrderChanges:!v}),j=i.fields,b=i.note,p=i.reminders;if(Object(X.b)(j)){if(n={key:n.key,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey},t.mode===L.g&&t.taskId){if(!j.id)return;var O=ne(ne({},j),{},{id:j.id});return C(O,p,null),void ie({event:n,originField:r,taskId:t.taskId})}var f=_({fields:j,note:b,reminders:p,project:d});f&&ie({event:n,originField:r,taskId:f.id})}}}),[v,u,t,c,oe,a,_,C,d,o,s,l]),fe=Object(X.a)({taskFields:ne(ne({},Object(p.n)(b)),s),onAddTask:function(e,n){if(n)e=ne(ne({},e),{},{parent_id:n.parent_id,child_order:n.child_order+1});else if(v){var r=Object($.a)({editorIndent:oe,editorState:t,hierarchy:c,tasksMap:l,siblings:o,indents:a,bottomTaskId:u,rootParentId:e.parent_id});r&&(e=ne(ne({},e),{},{parent_id:r.parentId,child_order:r.childOrder}))}return _({fields:e})},onAddedTasks:z,onCancel:function(){var e;null===(e=B.current)||void 0===e||e.focusContentInput()}});return t?Object(ee.jsxs)("li",{ref:be,className:"manager indent_".concat(oe),"data-item-indent":oe,children:[Object(ee.jsx)(Z.a,{forwardedRef:B,user:b,item:s,reminders:O,onCancel:z,canUseLabels:y,withQuickNote:t.mode!==L.g&&(x||g),onKeyDown:function(e){var r=e.key;if(t&&r&&(!["ArrowUp","ArrowDown","[","]"].includes(r)||c&&0!==c.length)){var i=Y.isMac?e.metaKey:e.ctrlKey;if(v&&"]"===r&&i&&!e.shiftKey&&!e.altKey){var s;if(e.preventDefault(),Object(M.a)(t,c))return;var l=u;t.taskId&&(l=t.mode===L.b?t.taskId:o[t.taskId].previousSiblingId);var d=a[null!==(s=l)&&void 0!==s?s:1];if(oe>d||oe>=5)return;return R(oe+1)}if(v&&"["===r&&i&&!e.shiftKey&&!e.altKey){if(e.preventDefault(),1===oe)return;if(Object(M.c)(t.mode))return R(oe-1);if(!t.taskId)return;var j=t.mode===L.a?t.taskId:o[t.taskId].nextSiblingId;if(j&&a[j]>=oe)return;return R(oe-1)}if("ArrowDown"===r&&(e.ctrlKey||e.metaKey)){if(e.preventDefault(),t.mode===L.f){var b=c[0];return N(n,b.id)}if(!t.taskId)return;if(t.mode===L.a)return N(n,t.taskId);var p=o[t.taskId].nextSiblingId;if(!p){if(!m&&!f)return;return E(n)}return N(n,p)}if("ArrowUp"===r&&(e.ctrlKey||e.metaKey)){if(e.preventDefault(),Object(M.c)(t.mode)&&u)return N(n,u);if(!t.taskId)return;if(t.mode===L.b)return N(n,t.taskId);var O=o[t.taskId].previousSiblingId;if(!O){if(!h)return;return A(n)}return N(n,O)}}},onSubmit:Oe,onChange:function(e){e&&S({editorValue:e,editorIndent:oe,editorState:t,task:s,tasksMap:l,hierarchy:c,siblings:o,indents:a,bottomTaskId:u})},onMultilinePaste:t.mode===L.g?void 0:fe}),pe?Object(ee.jsxs)(G.b,{isShown:!0,placement:"bottom",offset:[0,-40],referenceElement:null==B?void 0:B.current,children:[Object(ee.jsx)(G.a.TooltipHeader,{icon:Object(ee.jsx)("div",{className:"tooltip-lightbulb",children:Object(ee.jsx)(J.a,{"aria-hidden":!0})}),title:Object(V.a)("Use natural language")}),Object(ee.jsx)(G.a.TooltipBody,{children:Object(ee.jsx)(U.a,{string:Object(V.a)("Todoist recognizes due dates like {every_day}, {next_wednesday}, {every_other_saturday} (and much more!)."),mapping:{every_day:Object(ee.jsx)("i",{children:"every day"}),next_wednesday:Object(ee.jsx)("i",{children:"next Wednesday"}),every_other_saturday:Object(ee.jsx)("i",{children:"every other Saturday"})}})}),Object(ee.jsxs)(G.a.TooltipFooter,{children:[Object(ee.jsx)(G.a.TooltipConfirmButton,{tooltip:"onboarding_natural_add"}),Object(ee.jsx)(K.a,{href:"https://todoist.com/help/articles/due-dates-and-times",variant:"primary",openInNewTab:!0,onClick:function(){Object(F.a)({event:"tooltip_action_natural_add"})},children:Object(V.a)("Read article")})]})]}):null]},t.key):null}var ce=function(e){var t=Object(a.h)((function(e){return e.items}));return Object(ee.jsx)(re,ne(ne({},e),{},{tasks:t}))};var ie=Object(a.c)((function(e,t){var n,r,c=t.editorState,i=t.defaultAddFields,a=t.task,o=t.parentId,s=t.project,l=t.section,u=t.allowWebsiteAdd,d=t.allowEmailAdd;return null!==(n=a)&&void 0!==n&&n.id?r=Object(v.b)(a.id,e):a||(a=Object($.b)({editorState:c,parentId:o,project:s,section:l,defaultAddFields:i,allowEmailAdd:d,allowWebsiteAdd:u,user:e.user})),{task:a,user:e.user,reminders:r,isPremium:Object(z.e)(e)}}))(ce),ae=n("dbRB");function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=n("o5ZH"),ue=n("SoKn"),de=n("vYfw"),je=n("9nbe"),be=["task","subTasksIds","completedTasks","listId","showCompleted","showSubTasks","showSubTasksCount","project","section","showSectionOnly","allowAddAbove","allowAddBelow","allowIndentChange","isPremium","listType"];function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e){var t=e.task,n=e.subTasksIds,r=e.completedTasks,c=e.listId,o=e.showCompleted,s=e.showSubTasks,l=e.showSubTasksCount,u=e.project,d=e.section,j=e.showSectionOnly,b=e.allowAddAbove,p=e.allowAddBelow,O=e.allowIndentChange,f=(e.isPremium,e.listType),h=w()(e,be),m=Object(a.h)((function(e){return Object(ue.b)(e,{projectId:null==u?void 0:u.id})})),v=Object(L.i)(),g=v.onEditItem,y=v.onAddAbove,x=v.onAddBelow,k=v.onResetEditorState,_=o&&r&&r.items[t.id]&&r.items[t.id].completed_items>0,S=s&&(n&&n.length>0||_),P=null!=r&&r.items[t.id]?r.items[t.id].completed_items:0,D=l?((null==n?void 0:n.length)||0)+P:void 0,I=Object(i.useCallback)((function(){g(c,t.id)}),[c,g,t.id]),T=Object(i.useCallback)((function(){y(c,t.id)}),[c,y,t.id]),E=Object(i.useCallback)((function(){x(c,t.id)}),[c,x,t.id]);if(!u)return null;var A=Object(C.c)("frontend.dnd_everywhere")&&!Object(le.a)(m),N=A?de.a:i.Fragment,R=A?{task:t,listType:f}:null;return Object(ee.jsx)(N,Oe(Oe({},R),{},{children:Object(ee.jsx)(je.a,Oe(Oe({},h),{},{allowIndentChange:O,item:t,project:u,section:d,showSectionOnly:j,showSubTasksCount:l,subItemsCount:D,subItemsCompletedCount:P,isParentCollapsed:!1,showCollapser:S,listId:c,onEditClick:I,onSelectAddAbove:b?T:void 0,onSelectAddBelow:p?E:void 0,onResetEditorState:k,showDragHandle:h.showDragHandle}))}))}var he=Object(i.memo)(fe,(function(e,t){if(e.task===t.task){for(var n in t)if("task"!==n){var r=n;if(e[r]!==t[r])return!1}return!0}return!1})),me=n("TSYQ"),ve=n.n(me),ge=n("nqxI");function ye(e){var t=e.listId,n=e.addButtonLabel,r=e.allowWebsiteAdd,c=e.allowEmailAdd,i=Object(L.i)(),a=i.onAddBottom,o=i.onAddBottomWebsite,s=i.onAddBottomEmail;return Object(ee.jsxs)("li",{className:ve()("controller actions task_actions",{full_width_actions:!r&&!c}),children:[Object(ee.jsx)(ge.c,{onClick:function(){return a(t)},"data-add-task-navigation-element":!0,children:null!=n?n:Object(V.a)("Add task")}),r?Object(ee.jsx)(ge.c,{onClick:function(){return o(t)},children:Object(V.a)("Add website as task")}):null,c?Object(ee.jsx)(ge.c,{onClick:function(){return s(t)},children:Object(V.a)("Add email as task")}):null]})}var xe=n("bTbL");function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e=Object(a.c)((function(e){return{collaborators:e.collaborators,labels:e.labels,user:e.user}}))((function(e){var t=e.parentId,n=e.completedTasks,r=e.collaborators,c=e.indent,a=void 0===c?1:c,o=e.labels,s=e.project,l=e.section,u=e.user,d=e.isCollapsed,j=void 0!==d&&d,b=e.shouldPrefetch,p=void 0===b||b,O=e.onCheckedChange,f=e.onDelete,h=e.onLinkCopy,m=e.canUseLabels,v=Object(i.useMemo)((function(){return n&&s?t?{completedInfo:n.items[t]?n.items[t]:{item_id:t},itemId:t,key:"hint_for_".concat(t),prefetch:p,type:"items"}:l&&n.sections[l.id]?{completedInfo:n.sections[l.id],itemId:l.id,key:"hint_for_".concat(l.id),type:"sections"}:!l&&n.projects[s.id]?{completedInfo:n.projects[s.id],itemId:s.id,key:"hint_for_".concat(s.id),type:"projects"}:{}:null}),[n,t,s,l,p]);return v&&s&&o?Object(ee.jsx)(xe.a,ke(ke({itemId:""},v),{},{indent:a,isCollapsed:j,project:s,labels:o,user:u,collaborators:r,onCheckedChange:O,onDelete:f,onLinkCopy:h,updateHint:function(){return{}},fetchCompletedItems:function(){return{}},isComplete:!0,canUseLabels:m})):null})),Se=n("4MLW");var Ce=Object(a.c)((function(e){return{tempIdMap:Object(D.c)(e)}}))((function e(t){var n=t.listId,r=t.hierarchy,c=t.tasksMap,a=t.completedTasks,o=t.showCompleted,s=t.editorState,l=t.tempIdMap,u=t.editorRenderer,d=t.taskRenderer,j=t.completedListRenderer;return Object(ee.jsx)(ee.Fragment,{children:r.map((function(t){var r=t.id,b=t.subTasks,p=c&&c[r];if(!p)return null;var O=s&&P.b.getRealId(s.taskId)===P.b.getRealId(p.id)&&s.listId===n,f=(P.b.isTemporary(r)?r:l[r]||r)||"null";return Object(ee.jsxs)(i.Fragment,{children:[s&&O&&s.mode===L.a?u():null,s&&O&&s.mode===L.g?u(p):d(p),b?Object(ee.jsx)(e,{listId:n,hierarchy:b,tasksMap:c,completedTasks:a,editorState:s,tempIdMap:l,showCompleted:o,completedListRenderer:j,editorRenderer:u,taskRenderer:d}):null,s&&O&&s.mode===L.b?u():null,o&&!p.collapsed&&a&&a.items[r]&&a.items[r].completed_items>0?j(r,{shouldPrefetch:!1}):null]},f)}))})})),Pe=n("nD99"),De=n("RIqP"),Ie=n.n(De),Te=n("wUWr"),Ee=n.n(Te),Ae=n("mRsi"),Ne=n.n(Ae);function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e,t,n,r,c,i){var a={},o={},s={lastId:void 0};return{hierarchy:(e=e.filter((function(e){return!!(null==t?void 0:t[e.id])&&(!e.checked&&(r?e.parent_id===r:!i||!e.parent_id))}))).sort(c).filter((function(e){return null==t?void 0:t[e.id]})).reduce((function(e,r,l,u){var d=function e(t,n,r,c,i,a,o,s,l){var u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1;if(!n)return null;var d=n[t]||n[P.b.getRealId(t)];if(!d)return null;var j=r[t],b=s.lastId;if(a[d.id]=u,s.lastId=t,i&&j&&!d.collapsed){var p=j.reduce((function(e,t){var r=n[t];return!r||r.checked?e:[].concat(Ie()(e),[r])}),[]).sort(c);return o[d.id]={previousSiblingId:b,nextSiblingId:p[0]?p[0].id:l},{id:d.id,subTasks:p.reduce((function(t,d,j){if(!d)return t;var b=p[j+1],O=e(d.id,n,r,c,i,a,o,s,b?b.id:l,u+1);return O?[].concat(Ie()(t),[O]):t}),[])}}return o[d.id]={previousSiblingId:b,nextSiblingId:l},{id:d.id}}(r.id,t,n,c,i,a,o,s,u[l+1]?u[l+1].id:void 0);return d?[].concat(Ie()(e),[d]):e}),[]),indents:a,siblings:o,bottomTaskId:s.lastId}}function Me(e){function t(e){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete n.subTasks,e.subTasks&&e.subTasks.length?[n.id].concat(Ie()(Ee()(e.subTasks,t))):[n.id]}var n=e.map((function(e){return t(e)}));return Ne()(n)}var ze=["type","parentId","tasks","tasksByParentId","project","projects","section","sections","completedTasks","labels","collaborators","reminders","noteCountsByParentId","moreNotes","defaultAddFields","addButtonLabel","listId","sortFn","viewOptions","allowAdd","allowAddAbove","allowAddBelow","allowIndentChange","allowEmailAdd","allowWebsiteAdd","canAddComments","canUseLabels","isPremium","prefetchSubtasks","showCompleted","showDragHandle","showProject","showWorkspace","showTaskDue","showTaskTime","showSectionOnly","showSubTasks","showSubTasksCount","onUpdate","onAdd","onArchive","onDuplicate","onLinkCopy","onMoveToProject","onDelete","onCheckedChange"];function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue=function(e){var t,n=e.type,r=e.parentId,o=e.tasks,s=e.tasksByParentId,l=e.project,d=e.projects,j=e.section,b=e.sections,p=e.completedTasks,O=e.labels,f=e.collaborators,h=e.reminders,m=e.noteCountsByParentId,v=void 0===m?{}:m,g=e.moreNotes,y=e.defaultAddFields,x=void 0===y?{}:y,_=e.addButtonLabel,z=e.listId,B=e.sortFn,q=e.viewOptions,U=void 0===q?null:q,K=e.allowAdd,F=void 0===K||K,V=e.allowAddAbove,H=void 0!==V&&V,Y=e.allowAddBelow,W=void 0!==Y&&Y,G=e.allowIndentChange,Q=void 0!==G&&G,J=e.allowEmailAdd,Z=e.allowWebsiteAdd,te=e.canAddComments,ne=void 0===te||te,re=e.canUseLabels,ce=void 0===re||re,oe=e.isPremium,le=void 0!==oe&&oe,ue=e.prefetchSubtasks,de=void 0===ue||ue,je=e.showCompleted,be=void 0!==je&&je,pe=e.showDragHandle,Oe=void 0!==pe&&pe,fe=e.showProject,me=void 0!==fe&&fe,ve=e.showWorkspace,ge=void 0!==ve&&ve,xe=e.showTaskDue,we=void 0===xe||xe,ke=e.showTaskTime,De=void 0===ke||ke,Ie=e.showSectionOnly,Te=void 0!==Ie&&Ie,Ee=e.showSubTasks,Ae=void 0!==Ee&&Ee,Ne=e.showSubTasksCount,Re=void 0===Ne||Ne,Be=e.onUpdate,Ue=e.onAdd,Ke=e.onArchive,Fe=e.onDuplicate,Ve=e.onLinkCopy,He=e.onMoveToProject,Ye=e.onDelete,We=e.onCheckedChange,Ge=w()(e,ze),Qe=Object(i.useMemo)((function(){return z||Object(I.a)("taskList")}),[z]),Je=Object(L.i)(),Xe=Je.editorState,Ze=Je.onAddAbove,$e=Je.onAddBelow,et=Je.onAddBottom,tt=Je.onAddTop,nt=Object(i.useRef)(null),rt=Object(i.useRef)(null),ct=Object(E.d)(),it=ct.siblingsByListId,at=ct.setSiblingsByListId,ot=Object(a.h)((function(e){var t;return Boolean(null===(t=e.detailView)||void 0===t?void 0:t.type)})),st=Object(i.useMemo)((function(){return o.reduce((function(e,t){return qe(qe({},e),{},c()({},t.id,t))}),{})}),[o]),lt=Object(R.a)({listType:n,alwaysUseDefault:n===Se.g,viewOptions:U}),ut=Object(i.useMemo)((function(){return Le(o,st,s,r,B||lt,Ae)}),[lt,r,Ae,B,o,s,st]),dt=ut.hierarchy,jt=ut.indents,bt=ut.siblings,pt=ut.bottomTaskId,Ot=Object(k.a)(bt),ft=Object(k.a)(jt);!function(e){var t=e.editorState,n=e.editorSubmitData,r=e.project,c=e.viewOptions,a=e.disableOrderChanges,o=e.onAdd,s=e.onUpdate,l=Object(i.useRef)(!1),u=Object(L.i)().onResetEditorState,d=Object(k.a)(t),j=Object(k.a)(c);Object(i.useEffect)((function(){return function(){l.current=!0}}),[]);var b=Object(i.useCallback)((function(e){var t=Object($.c)(e,{disableOrderChanges:a}),n=t.fields,c=t.note,i=t.reminders;if(Object(X.b)(n)){if(e.editorState.mode===L.g){if(!n.id)return;var l=se(se({},n),{},{id:n.id});return s(l,i,null)}o({fields:n,note:c,reminders:i,project:r})}}),[a,o,s,r]);Object(i.useEffect)((function(){var e,r,i=n.current&&(!j&&c||j&&!c||!Object(ae.a)(j,c)),a=t&&d&&(null===(e=n.current)||void 0===e||null===(r=e.editorState)||void 0===r?void 0:r.key)===d.key&&d.key!==t.key&&!(Object(M.b)(t.mode)&&Object(M.b)(d.mode));return n.current&&(i||a)&&(b(n.current),i&&u()),function(){l.current&&n.current&&!i&&!a&&(b(n.current),u())}}),[b,a,t,n,o,u,s,d,j,r,c])}({editorState:Xe,editorSubmitData:nt,project:l,viewOptions:U,disableOrderChanges:!Q,onAdd:Ue,onUpdate:Be});var ht=Object(k.a)(Xe);Object(i.useEffect)((function(){(null==ht?void 0:ht.key)!==(null==Xe?void 0:Xe.key)&&(nt.current=null)}),[null==Xe?void 0:Xe.key,null==ht?void 0:ht.key]),Object(i.useEffect)((function(){if((null==Xe?void 0:Xe.listId)===Qe&&null!=Xe&&Xe.taskId&&!jt[Xe.taskId]&&ft&&Ot){if(Xe.mode===L.a){var e=function(e){var t,n=e.taskId,r=e.indents,c=e.previousSiblings,i=e.previousIndents;if(!i[n])return null;for(var a=i[n],o=null!==(t=c[n].previousSiblingId)&&void 0!==t?t:null;o&&(!r[o]||r[o]>a);){var s;o&&i[o]<a&&(a=i[o]),o=null!==(s=c[o].previousSiblingId)&&void 0!==s?s:null}return o}({taskId:Xe.taskId,indents:jt,previousIndents:ft,previousSiblings:Ot});return e?void $e(Qe,e,{generateKey:!1}):void tt(Qe,{generateKey:!1})}if(Xe.mode===L.b){var t=function(e){var t,n=e.taskId,r=e.indents,c=e.previousSiblings,i=e.previousIndents;if(!i[n])return null;for(var a=i[n],o=null!==(t=c[n].nextSiblingId)&&void 0!==t?t:null;o&&(!r[o]||r[o]>a);){var s;o=null!==(s=c[o].nextSiblingId)&&void 0!==s?s:null}return o}({taskId:Xe.taskId,indents:jt,previousIndents:ft,previousSiblings:Ot});if(!t)return void et(Qe,{generateKey:!1});Ze(Qe,t,{generateKey:!1})}}}),[null==Xe?void 0:Xe.listId,null==Xe?void 0:Xe.mode,null==Xe?void 0:Xe.taskId,Qe,jt,Ze,$e,et,tt,ft,Ot,st]);var mt=Object(a.h)(D.c),vt=Object(i.useCallback)((function(e){var t,r,c=Object(T.a)(e.id)?e.id:mt[e.id];return Object(ee.jsx)(he,{task:e,listId:Qe,indent:jt[e.id],completedTasks:p,subTasksIds:s[e.id],allowAddAbove:H,allowAddBelow:W,allowIndentChange:Q,canUseLabels:ce,showCompleted:be,showDragHandle:Oe,showDue:we,showProject:me,showWorkspace:ge,showTime:De,showSectionOnly:Te,showSubTasks:Ae,showSubTasksCount:Re,project:d?d[P.b.getRealId(e.project_id)]:void 0,section:b&&e.section_id?b[e.section_id]:void 0,labels:O,collaborators:f,reminders:h[e.id]||[],noteItemCount:null===(t=v[e.id])||void 0===t?void 0:t.itemCount,noteTreeCount:null===(r=v[e.id])||void 0===r?void 0:r.treeCount,noteHasMore:Boolean((null==g?void 0:g.items)&&(null==g?void 0:g.items[e.id])),isPremium:le,onUpdate:Be,onAdd:Ue,onArchive:Ke,onDuplicate:Fe,onLinkCopy:Ve,onMoveToProject:He,onDelete:Ye,onCheckedChange:We,listType:n},null!=c?c:e.id)}),[Qe,mt,jt,p,s,H,W,Q,ce,be,Oe,we,me,ge,De,Te,Ae,Re,d,b,O,f,h,v,null==g?void 0:g.items,le,Be,Ue,Ke,Fe,Ve,He,Ye,We,n]),gt=Object(i.useCallback)((function(e){var t;if(!Xe)return null;var c=!e&&null!=Xe&&Xe.key&&(null==ht?void 0:ht.key)===Xe.key?null===(t=nt.current)||void 0===t?void 0:t.editorValue:e;return Object(ee.jsx)(ie,{editorState:Xe,listId:Qe,listType:n,task:c,tasksMap:st,hierarchy:dt,indents:jt,siblings:bt,bottomTaskId:pt,defaultAddFields:x,project:l,section:j,parentId:r,allowAdd:F,allowAddAbove:H,allowAddBelow:W,allowIndentChange:Q,allowWebsiteAdd:Z,allowEmailAdd:J,canAddComments:ne,canUseLabels:ce,onAdd:Ue,onChange:function(e){nt.current=e},onUpdate:Be},Xe.key)}),[F,H,W,J,Q,Z,pt,ne,ce,x,Xe,dt,Qe,jt,Ue,Be,r,null==ht?void 0:ht.key,l,j,bt,st,n]),yt=Object(i.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(ee.jsx)(_e,qe({parentId:e,completedTasks:p,project:l,section:j,indent:e&&jt[e]?jt[e]+1:1,onDelete:Ye,onLinkCopy:Ve,onCheckedChange:We,canUseLabels:ce,shouldPrefetch:de},t))}),[ce,de,p,jt,We,Ye,Ve,l,j]),xt=Xe&&Xe.listId===Qe,wt=F&&(!Xe||"edit"===Xe.mode)&&null!=l&&!l.is_archived&&!l._unjoined;Object(Pe.b)({disabled:!wt});var kt=S()(Ge,"data-day-list-id","data-section-list-id","data-subitem-list-id");Object(i.useEffect)((function(){var e;if("subtasks"!==n){var t=null!==(e=null==j?void 0:j.id)&&void 0!==e?e:Qe;if(!it[t]||!u()(it[t],bt))return at(Object.assign(it,c()({},t,bt))),function(){at({})}}}),[Qe,null==j?void 0:j.id,at,bt,it,n]);var _t=Object(i.useMemo)((function(){return Me(dt)}),[dt]),St=Object(C.c)("frontend.dnd_everywhere"),Ct=St&&!(ot&&"subtasks"!==n)?A.a:i.Fragment,Pt=St?{id:"project"===n?(null==j?void 0:j.id)||"null":z,items:_t,listType:n}:null;return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(N.b,{}),Object(ee.jsxs)("div",qe(qe({ref:rt,className:"list_holder"},F?c()({},"data-task-list-id",Qe):{}),{},{children:[Object(ee.jsxs)("ul",qe(qe({className:"items"},kt),{},{children:[Xe&&xt&&Xe.mode===L.f?gt():null,Object(ee.jsx)(Ct,qe(qe({},Pt),{},{children:Object(ee.jsx)(Ce,{hierarchy:dt,listId:Qe,tasksMap:st,completedTasks:p,editorState:Xe,showCompleted:be&&Ae,completedListRenderer:yt,editorRenderer:gt,taskRenderer:vt})})),Xe&&xt&&Object(M.c)(Xe.mode)?gt():null,wt?Object(ee.jsx)(ye,{listId:Qe,addButtonLabel:_,allowWebsiteAdd:Z,allowEmailAdd:J}):null]})),be?Object(ee.jsxs)(ee.Fragment,{children:[r&&null!=p&&null!==(t=p.items[r])&&void 0!==t&&t.completed_items&&(F||o.length)?Object(ee.jsx)("div",{className:"completed_tasks_separator"}):null,Object(ee.jsx)("ul",{className:"items",children:yt(r)})]}):null]}))]})},Ke=L.h;function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var He=Object(a.c)((function(e,t){var n=t.project;return{projects:e.projects,sections:e.sections,moreNotes:e.moreNotes,labels:Object(f.f)(e),collaborators:e.collaborators,reminders:Object(v.f)(e),isPremium:Object(j.a)(e),tasksByParentId:e.mapping.tasks.byParentId,completedTasks:e.completed,project:null!=n?n:Object(m.o)(e),allowWebsiteAdd:Object(b.c)(e),allowEmailAdd:Object(b.b)(e),canUseLabels:Object(g.p)(e),canAddComments:Object(g.d)(e)}}),(function(e){var t=Object(y.a)(e);return{onAdd:function(e){var n=e.fields,r=e.note,c=e.reminders;return t.onAdd(n,r,c)},onUpdate:function(t,n,r){var c=s()(["parent_id","section_id","project_id","child_order"],t);if(n&&e(Object(v.h)(t.id,n)),!r){var i,a,o=t.id,l=t.parent_id,u=t.section_id,d=t.project_id,j=t.child_order;void 0===l&&void 0===u&&void 0===d||(i={id:o,parent_id:l,section_id:u,project_id:d}),void 0!==j&&o&&(a={id:o,to:j}),(a||i)&&e(Object(O.y)(i,a))}e(Object(p.K)(c,{item:r}))},onMoveToProject:function(t){return e(Object(O.y)(t))},onArchive:function(t){return e(Object(p.p)(t,{completeRecurring:!0}))},onDelete:function(t){return e(Object(p.s)(t))},onDuplicate:function(t){return e(Object(p.t)([t]))},onLinkCopy:function(e,t){return Object(d.a)({id:e,sync_id:t})},onCheckedChange:function(t,n,r,c,i){if(n){var a=r.shiftKey;e(Object(p.p)(t,{forceHistory:a}))}else e(Object(p.J)(t,c,i))}}}))(Ue);function Ye(e){var t=Object(i.useMemo)((function(){return Object(h.d)()}),[]),n=Object(a.h)((function(n){return t(n,e.tasks)}),u.a);return Object(i.createElement)(He,Ve(Ve({},e),{},{noteCountsByParentId:n}))}t.b=Object(i.memo)(Ye,(function(e,t){if(e.tasks.length===t.tasks.length){var n=t.tasks.every((function(t,n){return t===e.tasks[n]})),r=e.defaultAddFields===t.defaultAddFields||u()(e.defaultAddFields,t.defaultAddFields);if(n&&r){for(var c in t)if("tasks"!==c&&"defaultAddFields"!==c){var i=c;if(e[i]!==t[i])return!1}return!0}}return!1}))},KrOB:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("i8i4"),c=n.n(r);function i(){var e=document.getElementById("modal_box");return e||((e=document.createElement("div")).id="modal_box",document.body.appendChild(e)),e}function a(e){var t=e(o);c.a.render(t,i())}function o(e){e&&e.preventDefault(),c.a.unmountComponentAtNode(i())}},M1jK:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("G3Y2"),c=n("GgqS"),i=n("Vbab"),a=n("G/av"),o=n("LYyr"),s=n("pmBd"),l=n("nKUr");function u(e){var t=e.type,n=e.userPlanLimits,u=e.isOpen,d=e.onClose,j=function(e){return{TASKS_FREE:Object(o.a)(Object(i.b)("You\u2019ve reached the limit of 1 task per project. Upgrade to the Pro plan and keep track of up to 1 task in each of your projects.","You\u2019ve reached the limit of {currentNum} tasks per project. Upgrade to the Pro plan and keep track of up to {nextNum} tasks in each of your projects.",e.current.max_tasks),{currentNum:e.current.max_tasks,nextNum:e.next?e.next.max_tasks:a.b.max_tasks}),PROJECTS_FREE:Object(o.a)(Object(i.b)("You\u2019ve reached the Free plan\u2019s limit of 1 project.","You\u2019ve reached the Free plan\u2019s limit of {num} projects.",e.current.max_projects),{num:e.current.max_projects}),PROJECTS_PRO:Object(o.a)(Object(i.b)("You\u2019ve reached the limit of 1 active project. Consider archiving some, or upgrading to the Business Plan to increase your limit.","You\u2019ve reached the limit of {num} active projects. Consider archiving some, or upgrading to the Business Plan to increase your limit.",e.current.max_projects),{num:e.current.max_projects}),COLLABORATORS_FREE:Object(o.a)(Object(i.b)("You\u2019ve reached the Free Plan\u2019s limit of 1 guest.","You\u2019ve reached the Free Plan\u2019s limit of {num} guests.",e.current.max_collaborators),{num:e.current.max_collaborators}),COLLABORATORS_PRO:Object(o.a)(Object(i.b)("You\u2019ve reached the limit of 1 collaborator per project. Upgrade to the Business Plan to increase your limit.","You\u2019ve reached the limit of {num} collaborators per project. Upgrade to the Business Plan to increase your limit.",e.current.max_collaborators),{num:e.current.max_collaborators}),FILE_UPLOAD:Object(o.a)(Object(i.b)("This file exceeds the Free plan\u2019s 1MB upload limit.","This file exceeds the Free plan\u2019s {num}MB upload limit.",e.current.upload_limit_mb),{num:e.current.upload_limit_mb}),FILTERS:Object(o.a)(Object(i.b)("You\u2019ve reached the Free plan\u2019s limit of 1 filter.","You\u2019ve reached the Free plan\u2019s limit of {num} filters.",e.current.max_filters),{num:e.current.max_filters}),ACTIVITY_LOG:Object(o.a)(Object(i.b)("You\u2019ve reached the Free plan\u2019s limit of 1-day activity history.","You\u2019ve reached the Free plan\u2019s limit of {num}-day activity history.",e.current.activity_log_limit),{num:e.current.activity_log_limit}),REMINDERS:Object(i.a)("Reminders are only available on Pro and Business plans.")}}(n)[t],b="COLLABORATORS_PRO"===t||"PROJECTS_PRO"===t?Object(i.a)("Limit reached"):Object(i.a)("Go Pro"),p="COLLABORATORS_PRO"===t||"PROJECTS_PRO"===t?"/business/freeTrial":"/premium/upgrade",O=Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(r.a,{variant:"secondary",onClick:d,children:Object(i.a)("Cancel")}),Object(l.jsx)(c.a,{variant:"primary",href:p,openInNewTab:!0,children:Object(i.a)("Upgrade for more")})]});return Object(l.jsx)(s.a,{isOpen:u,header:b,body:j,onClose:d,action:O})}},MvHh:function(e,t,n){"use strict";var r=n("lSNA"),c=n.n(r),i=n("/MKj"),a=n("vV6a"),o=n("17Jv"),s=n("TQFH"),l=n("gVGk"),u=n("/6o7"),d=n("4PH6"),j=n("A72/"),b=n("AnGN"),p=n("RIqP"),O=n.n(p),f=n("J4zp"),h=n.n(f),m=n("q1tI"),v=n("lDtu"),g=n("zhxZ"),y=n("kazx"),x=n("TSYQ"),w=n.n(x),k=n("Vbab"),_=n("OgjY"),S=n("XOeF"),C=n("Ek05"),P=n("4eld"),D=n("/7zm"),I=n("y2hQ"),T=n("wjpq"),E=n("9l1k"),A=n("1/Z5"),N=n("nKUr");function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(e){var t,n=e.task,r=void 0===n?{}:n,c=e.labelName,a=e.projectId,o=e.user,l=e.isDayView,u=e.isOpen,d=void 0!==u&&u,j=e.onClose,p=e.onAdd,f=e.taskEditorKey,x=e.canUseLabels,R=void 0!==x&&x,M=e.canAddComments,z=void 0!==M&&M,B=e.isLoading,q=void 0!==B&&B,U=e.withCloseButton,K=void 0===U||U,F=Object(m.useState)(!1),V=h()(F,2),H=V[0],Y=V[1],W=Object(m.useRef)(null),G=Object(m.useRef)(null),Q=Object(m.useState)(!1),J=h()(Q,2),X=J[0],Z=J[1],$=Object(m.useRef)(null),ee=Object(i.h)((function(e){return Object(S.k)(e,a)})),te=null==ee?void 0:ee.is_archived,ne=Object(i.h)((function(e){var t;return null===(t=Object(S.o)(e))||void 0===t?void 0:t.id}));function re(e){Z(!0),$.current=window.setTimeout((function(){Z(!1),e()}),200)}function ce(){d&&(null!=G&&G.current&&G.current.content.trim().length>0?Y(!0):re(j))}Object(m.useEffect)((function(){return function(){$.current&&window.clearTimeout($.current)}}),[]),Object(m.useEffect)((function(){var e;H||(null===(e=W.current)||void 0===e||e.focusContentInput())}),[H]),Object(I.a)("closeQuickAdd",ce),Object(m.useEffect)((function(){var e;return b.isDesktopQuickAdd&&Object(b.getBridgeProtocolVersion)()<=3&&(e=setTimeout((function(){var e;null===(e=W.current)||void 0===e||e.focusContentInput()}),0)),function(){e&&clearTimeout(e)}}),[]),Object(I.a)("quickAddOpened",(function(){var e=setTimeout((function(){var e;null===(e=W.current)||void 0===e||e.focusContentInput()}),0);return function(){clearTimeout(e)}})),r=Object(m.useMemo)((function(){var e=L(L({},r),{},{project_id:te?ne:a});if(l){var t=v.b.date_max(new Date),n=C.a.dateistResultFromDate(t);e.due=_.a.fromDateist(n)}return c&&(e.labels=e.labels?[].concat(O()(e.labels),[c]):[c]),e}),[r,l,c,a,te,ne]);var ie=window.CURRENT_EXERNAL_SERVICE,ae=Object(T.a)({taskFields:L(L({},Object(s.n)(o)),r),projectId:r.project_id,onAddTask:function(e){return p(e)},onAddedTasks:function(){return re(j)},onCancel:function(){var e;return null===(e=W.current)||void 0===e?void 0:e.focusContentInput()}});return Object(N.jsxs)(g.a,{exceptionallySetClassName:"quick_add focus-marker-enabled-within",exceptionallySetOverlayClassName:w()("quick_add_overlay",{will_close:X}),isOpen:d,onDismiss:ce,autoFocus:!1,hideOnInteractOutside:K,children:[q?Object(N.jsx)(g.c,{exceptionallySetClassName:"quick_add__centered",children:Object(N.jsx)(E.a,{})}):Object(N.jsxs)(g.c,{exceptionallySetClassName:"quick_add__body",children:[d?Object(N.jsx)(A.a,{item:r,forwardedRef:W,user:o,canUseLabels:R,withQuickNote:z,onCancel:ce,onChange:function(e){G.current=e},onSubmit:function(e){var t;if(0===e.content.trim().length)return null===(t=W.current)||void 0===t?void 0:t.focusContentInput();!0!==p(e)&&(b.isDesktopQuickAdd&&Object(b.hasInstantQuickAdd)()||re(j))},onMultilinePaste:ae,isQuickAddEditor:!0},f):null,ie?Object(N.jsx)(y.a,{className:"quick_add__attach_email",children:Object(N.jsx)(P.a,{className:"action",onClick:function(){return ie.annotate_fn(W.current)},children:null!==(t=ie.annotate_add_text)&&void 0!==t?t:Object(k.a)("Attach email to task")})}):null]}),Object(N.jsx)(D.a,{isOpen:H,confirmLabel:Object(k.a)("Discard task"),onConfirm:function(){Y(!1),re(j)},onCancel:function(){return Y(!1)},children:Object(N.jsx)("span",{children:Object(k.a)("Are you sure you want to discard your current task?")})})]})};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=Object(i.c)((function(e){var t,n;return{labelName:e.mainView.type===a.j?null!==(t=null===(n=Object(l.i)(e,e.mainView.id))||void 0===n?void 0:n.name)&&void 0!==t?t:e.mainView.id:null,projectId:e.mainView.type===a.k?e.mainView.ids[0]:e.user&&e.user.inbox_project_id,user:e.user,isDayView:e.mainView.type===a.m||e.mainView.type===a.n,canUseLabels:Object(j.p)(e),canAddComments:Object(j.d)(e)}}),(function(e){return{onTaskAdd:function(t){var n=e(Object(s.o)(t));return e(Object(d.d)(n.id,t.project_id)),n},onClose:function(){e(Object(u.c)())}}}),(function(e,t,n){var r=t.onTaskAdd,c=t.onClose;return B(B(B({},e),n),{},{onClose:function(){var e;b.isDesktopQuickAdd&&Object(b.hasInstantQuickAdd)()||c(),null===(e=n.onClose)||void 0===e||e.call(n)},onAdd:function(e){if(track("task_form","click","add_from_quick_add"),!b.isDesktopQuickAdd||!Object(b.hasInstantQuickAdd)()){var t,c=r(e);return null===(t=n.onAdd)||void 0===t||t.call(n,c),c}Object(o.a)().sendQuickAddAdd(e)}})}))(M)},Nxvz:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("kazx"),c=n("RsDw"),i=n("Mtpm"),a=n("nKUr");function o(e){var t=e.children;return Object(a.jsx)(r.a,{borderRadius:"full",display:"flex",flexDirection:"column",justifyContent:"spaceAround",padding:"medium","data-testid":"social-sharing-menu",as:c.e,children:Object(a.jsx)(i.a,{children:t})})}},OBDP:function(e,t,n){},OMmk:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var r=n("/MKj"),c=n("awe3"),i=n("VKB9"),a=n("cM/R"),o=n("lSNA"),s=n.n(o),l=n("q1tI"),u=n("K6Df"),d=n("G3Y2"),j=n("PCrL"),b=n("tfz/"),p=n("n6bU"),O=n("ejxE"),f=n.n(O),h=n("vV6a"),m=n("Vbab"),v=n("TQFH"),g=n("XOeF"),y=n("gmEJ"),x=n("4PH6"),w=n("Ek05"),k=n("LYyr"),_=n("gd9Y"),S=n("FtiD"),C=n("6O1D"),P=n("Ba5u"),D=n("nKUr");function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=e.onCloseToast,n=e.handleUndo,r=e.actionName,c=e.navigateToParams,i=Object(_.k)();return n?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(d.a,{variant:"tertiary",size:"small",onClick:function(){n(),null==t||t()},tooltip:Object(D.jsx)(C.g,{identifier:"UNDO"}),children:null!=r?r:Object(m.a)("Undo")}),Object(D.jsx)(C.j,{handler:function(){n(),null==t||t()}})]}):c?Object(D.jsx)(d.a,{variant:"tertiary",size:"small",onClick:function(){null==t||t(),i(c)},children:null!=r?r:Object(m.a)("Open")}):null}function A(){var e=Object(S.c)().setHighlightedDate,t=Object(r.h)((function(e){return e.undo})),n=Object(r.g)(),c=Object(b.c)(),i=null==t?void 0:t.createdAt,a=Object(p.a)(i),o=Object(l.useRef)(null);return Object(l.useEffect)((function(){var r;if(t&&i!==a){var s=function(e){var t,n=e.undo,r=e.dispatch,c=e.setHighlightedDate,i=e.onCloseToast;function a(e){return Object(D.jsx)(j.a,{as:_.b,view:{type:"project",projectId:e.id},onClick:i,children:Object(D.jsx)(P.a,{source:e.name})})}switch(n.type){case g.b:return{message:Object(m.a)("Order changed"),action:Object(D.jsx)(E,{onCloseToast:i,handleUndo:function(){return r(Object(g.w)())}})};case g.a:var o=n.destProject;if(!o)throw new Error("unexpected duplicate state");return{message:Object(m.a)("Project duplicated"),action:Object(D.jsx)(E,{onCloseToast:i,navigateToParams:{view:{type:"project",projectId:o.id}}})};case v.i:return{message:Object(m.a)("Order changed"),action:Object(D.jsx)(E,{onCloseToast:i,handleUndo:function(){return r(Object(v.M)())}})};case v.j:var s=n.dueDate,l=n.newDueDateObj;return{message:s?Object(D.jsx)(u.a,{string:Object(m.a)("Due date updated to {due_date}"),mapping:{due_date:function(e,t){return t&&c?Object(D.jsx)(j.a,{"aria-label":Object(k.a)(Object(m.a)("Navigate to {due_date}"),{due_date:e}),href:"#",onClick:function(e){e.preventDefault(),c(t),null==i||i()},children:e}):e}(s,l)}}):Object(m.a)("Due date updated"),action:Object(D.jsx)(E,{onCloseToast:i,handleUndo:function(){return r(Object(v.O)())}})};case y.c:return{message:Object(m.a)("Order changed"),action:Object(D.jsx)(E,{onCloseToast:i,handleUndo:function(){return r(Object(y.o)())}})};case y.b:var d=n.destProject;if(!d)throw new Error("unexpected undo state");return{message:Object(D.jsx)(u.a,{string:Object(m.a)("Section moved to {project_name}"),mapping:{project_name:a(d)}}),action:Object(D.jsx)(E,{onCloseToast:i,handleUndo:function(){return r(Object(y.l)())}})};case v.f:var b=n.destProject;return{message:b?Object(D.jsx)(u.a,{string:Object(m.a)("Task moved to {project_name}"),mapping:{project_name:a(b)}}):Object(m.a)("Order changed"),action:Object(D.jsx)(E,{onCloseToast:i,handleUndo:function(){return r(Object(v.G)())}})};case v.g:var p=n.destProject,O=n.prevState;if(!p||null==O||!O.items)throw new Error("unexpected undo state");var S=Object.keys(O.items).length;return{message:Object(D.jsx)(u.a,{string:Object(m.b)("Task moved to {project_name}","Tasks moved to {project_name}",S),mapping:{project_name:a(p),n:S}})};case v.c:var C=n.due,I=n.subItemsInfo;if(!C)throw new Error("Recurring task is missing a due date");var T=w.a.formatView(C),A=Object(m.a)("Task completed");return I&&I.resetCount>0&&(A=I.resetCount===h.r&&I.totalCount>h.r?Object(m.a)("Completed and reset {count} of {total} sub-tasks"):Object(m.b)("Completed and reset {count} sub-task","Completed and reset {count} sub-tasks",I.resetCount)),{message:Object(D.jsx)(u.a,{string:A,mapping:{count:null==I?void 0:I.resetCount,total:null==I?void 0:I.totalCount}}),description:Object(D.jsx)(u.a,{string:Object(m.a)("Next occurrence: {date}"),mapping:{date:T}}),action:Object(D.jsx)(E,{onCloseToast:i,handleUndo:function(){return r(Object(v.q)())}})};case v.d:if(!n.prevState||!n.prevState.items)throw new Error("unexpected undo state");var N=f()(n.prevState.items).length;return{message:Object(k.a)(Object(m.b)("1 task completed","{n} tasks completed",N),{n:N}),action:Object(D.jsx)(E,{onCloseToast:i,handleUndo:function(){return r(Object(v.r)())}})};case x.a:var R=n.itemID,L=n.project;if(!L)throw new Error("unexpected undo state");return{message:Object(D.jsx)(u.a,{string:Object(m.a)("Task added to {project_name}"),mapping:{project_name:a(L)}}),action:Object(D.jsx)(E,{onCloseToast:i,navigateToParams:R?{task:{id:R}}:null})};case x.b:var M=n.message,z=void 0===M?"":M,B=n.actionLink,q=n.actionText;return{message:z,action:B&&q?Object(D.jsx)(E,{onCloseToast:i,actionName:q,handleUndo:function(){return window.open(B,"_blank")}}):void 0};default:return{message:null!==(t=n.message)&&void 0!==t?t:""}}}({undo:t,dispatch:n,setHighlightedDate:e,onCloseToast:function(){var e;return null===(e=o.current)||void 0===e?void 0:e.call(o)}});s.message&&(null===(r=o.current)||void 0===r||r.call(o),o.current=c(T(T({},s),{},{onDismiss:function(){n(Object(x.g)())}})))}}),[t,i,a,c,n,e]),null}var N=n("6M/T");function R(){var e=Object(i.g)(c.k).isTipScheduled,t=Object(N.b)(),n=t.completedThreshold,o=t.hasSeenCompletedTasksToast,s=Object(r.h)((function(e){return e.stats.completed_count}));return s===n&&o?null:Object(D.jsxs)(D.Fragment,{children:[e?null:Object(D.jsx)(A,{}),e&&s===n?Object(D.jsx)(a.a,{}):null]})}},PuTw:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return N}));var r=n("q1tI"),c=n("/MKj"),i=n("n6bU"),a=n("RZq6"),o=n("MrOw"),s=n("XOeF"),l=n("nvqi"),u=n("qiGY");function d(e){var t=Object(c.h)((function(t){var n;return e&&null!==(n=Object(s.k)(t,e))&&void 0!==n?n:null})),n=Object(i.a)(t),d=!t,j=Boolean(n)&&d,b=function(e){var t=Object(c.g)(),n=Object(u.c)("/projects/get_data",e?{params:{project_id:e}}:{}),i=n.fetch,a=n.state,o=n.setError,s=n.reset;return Object(r.useEffect)((function(){"resolved"===a.status&&(t(Object(l.d)({projects:a.value.project?[a.value.project]:[],notes:a.value.project_notes,sections:a.value.sections,items:a.value.items})),t({type:"RESET_MORE_COMMENTS_COUNT",payload:a.value.project_notes}))}),[a,t]),{fetchedProject:"resolved"===a.status?a.value.project:null,fetchProject:i,state:a,setError:o,reset:s}}(e),p=b.fetchProject,O=b.fetchedProject,f=b.state,h=b.setError,m=b.reset;return Object(r.useEffect)((function(){if(e){var n=!d&&(t.is_archived||t._unjoined);"idle"===f.status&&(d||n)&&o.default.getInstance().sync({onSuccess:function(){p()},onError:function(e){e&&"status"in e&&400===e.status&&Object(a.b)(e,{tags:{where:"useProjects"}}),h(e)}})}}),[e,d,p,f.status,null==t?void 0:t.is_archived,null==t?void 0:t._unjoined,h]),Object(r.useEffect)((function(){j&&"resolved"===f.status&&m()}),[j,m,f.status]),d&&"rejected"===f.status?{error:!0}:{project:d?O:t,error:!1}}var j=n("gmEJ");function b(e){return{section:Object(c.h)((function(t){var n;return e&&null!==(n=Object(j.s)(t,e))&&void 0!==n?n:null}))}}var p=n("J4zp"),O=n.n(p),f=n("RIqP"),h=n.n(f),m=n("ARXc"),v=n("TQFH");function g(e){var t=function(e){var t=Object(c.g)(),n=Object(r.useState)({status:"idle"}),i=O()(n,2),a=i[0],o=i[1],s="idle"===a.status;return Object(r.useEffect)((function(){if(s){o({status:"loading"});var n={completed_items:0,id:e,item_id:e};t(Object(m.d)({itemId:e,type:"items",completedInfo:n,completedItems:[]})).then((function(n){o({status:"success"}),n&&t(Object(m.g)({id:e,data:n.items,type:"items"}))})).catch((function(){o({status:"error"})}))}}),[e,s,t]),{state:a,setState:o}}(e),n=t.state,i=t.setState,a=Object(c.h)((function(t){var n,r,c,i,a=Object(v.y)(e,{items:t.items}).filter((function(t){return t.parent_id===e})),o=null==t||null===(n=t.completedItems)||void 0===n||null===(r=n.items)||void 0===r||null===(c=r[e])||void 0===c||null===(i=c.completedItems)||void 0===i?void 0:i.map((function(e){return e.item}));return o?[].concat(h()(a),h()(o)):a}),c.f);return Object(r.useEffect)((function(){i({status:"idle"})}),[e,i]),{subTasks:a,status:n.status}}var y=n("/wLL"),x=n("k0om");function w(e){var t=e.taskId,n=e.syncId,a=Object(c.h)((function(e){if(!t)return null;var r=Object(y.a)(e,t);if(r)return r;var c=n?Object(x.f)(n,e):Object(x.b)(e,t);return null!=c?c:null})),o=function(e){var t=e.taskId,n=e.syncId,a=Object(i.a)(t),o=Object(c.g)(),s=Object(u.c)("/items/get",t?{params:n?{item_id:t,all_data:!0,sync_id:n}:{item_id:t,all_data:!0}}:{}),d=s.fetch,j=s.state,b=s.reset;return Object(r.useEffect)((function(){a!==t&&["rejected","resolved"].includes(j.status)&&b()}),[a,b,j.status,t]),Object(r.useEffect)((function(){"resolved"===j.status&&(o(Object(l.d)({notes:j.value.notes,items:j.value.item?[j.value.item]:[]})),o({type:"RESET_MORE_COMMENTS_COUNT",payload:j.value.notes}))}),[j,o]),{fetchedTask:"resolved"===j.status?j.value.item:null,fetchTask:d,state:j}}({taskId:t,syncId:n}),s=o.fetchTask,d=o.state,j=!a;return Object(r.useEffect)((function(){if(t){var e=!j&&(a._archived||a._unjoined);"idle"===d.status&&(j||e)&&s()}}),[t,j,null==a?void 0:a._archived,null==a?void 0:a._unjoined,s,null==d?void 0:d.status]),j&&"rejected"===d.status?{error:!0}:{task:a,error:!1}}var k=n("lSNA"),_=n.n(k),S=n("7GkX"),C=n.n(S),P=n("wqDb"),D=n("TuXZ"),I=n("p3jf"),T=n("/oIX");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(){var e=Object(c.g)(),t=Object(r.useCallback)((function(t,n){e(Object(D.t)(t.id,n)),Object(P.a)("task_details","complete","task"),Signals.sendSignal("refresh_interface")}),[e]),n=Object(r.useCallback)((function(t,n){e(Object(D.y)(A({id:t.id},n))),Signals.sendSignal("refresh_interface")}),[e]),i=Object(r.useCallback)((function(t,r){var c=Object(T.a)(r,t);if(C()(c).length>0){var i;if(c.reminders&&e(Object(I.h)(t.id,c.reminders)),e(Object(D.D)(A(A({},t),c))),c.section_id||null===c.section_id)n(t,{project_id:null!==(i=c.project_id)&&void 0!==i?i:t.project_id,section_id:c.section_id});Signals.sendSignal("refresh_interface")}}),[e,n]),a=Object(r.useCallback)((function(t){e(Object(D.s)(t))}),[e]),o=Object(r.useCallback)((function(t){e(Object(D.C)(t.id,[t])),Object(P.a)("task_details","uncomplete","task"),Signals.sendSignal("refresh_interface")}),[e]),s=Object(r.useCallback)((function(t){e(Object(D.t)(t.id,{completeRecurring:!0}))}),[e]),l=Object(r.useCallback)((function(t){e(Object(D.w)(t))}),[e]),u=Object(r.useCallback)((function(t){e(Object(D.x)([t.id]))}),[e]);return{add:a,complete:t,update:i,move:n,uncomplete:o,archive:s,deleteTask:l,duplicate:u}}},Pz2I:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("lSNA"),c=n.n(r),i=n("QILm"),a=n.n(i),o=n("RsDw"),s=n("TSYQ"),l=n.n(s),u="VAbvhAZ",d=n("nKUr"),j=["exceptionallySetClassName"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){var t=e.exceptionallySetClassName,n=a()(e,j);return Object(d.jsx)(o.d,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({exceptionallySetClassName:l()(u,t)},n))}},Rhkm:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("Vbab"),c=n("LYyr"),i=n("4eld"),a=n("pmBd"),o=n("nKUr");function s(e){return{TASKS:Object(c.a)(Object(r.b)("You\u2019ve reached the limit of 1 active task per project. Consider archiving some, or creating a new project.","You\u2019ve reached the limit of {num} active tasks per project. Consider archiving some, or creating a new project.",e.current.max_tasks),{num:e.current.max_tasks}),SECTIONS:Object(c.a)(Object(r.b)("You\u2019ve reached the limit of 1 active section. Consider archiving some, or creating a new project.","You\u2019ve reached the limit of {num} active sections. Consider archiving some, or creating a new project.",e.current.max_sections),{num:e.current.max_sections}),FILE_UPLOAD:Object(c.a)(Object(r.b)("This file exceeds the 1MB limit. Consider uploading it to a cloud service and pasting the link.","This file exceeds the {num}MB limit. Consider uploading it to a cloud service and pasting the link.",e.current.upload_limit_mb),{num:e.current.upload_limit_mb}),PROJECTS:Object(c.a)(Object(r.b)("You\u2019ve reached the limit of 1 active project. Consider archiving some you don\u2019t use.","You\u2019ve reached the limit of {num} active projects. Consider archiving some you don\u2019t use.",e.current.max_projects),{num:e.current.max_projects}),FILTERS:Object(c.a)(Object(r.b)("You\u2019ve reached the limit of 1 available filter. Consider deleting some you don\u2019t use.","You\u2019ve reached the limit of {num} available filters. Consider deleting some you don\u2019t use.",e.current.max_filters),{num:e.current.max_filters}),LABELS:Object(c.a)(Object(r.b)("You\u2019ve reached the limit of 1 available label. Consider deleting some you don\u2019t use.","You\u2019ve reached the limit of {num} available labels. Consider deleting some you don\u2019t use.",e.current.max_labels),{num:e.current.max_labels}),COLLABORATORS:Object(c.a)(Object(r.b)("You\u2019ve reached the limit of 1 collaborator per project.","You\u2019ve reached the limit of {num} collaborators per project. Consider inviting fewer people.",e.current.max_collaborators),{num:e.current.max_collaborators}),TIME_REMINDERS:Object(c.a)(Object(r.b)("You\u2019ve reached the limit of 1 available reminder. Consider deleting some you don\u2019t use.","You\u2019ve reached the limit of {num} available reminders. Consider deleting some you don\u2019t use.",e.current.max_reminders_time),{num:e.current.max_reminders_time}),LOCATION_REMINDERS:Object(c.a)(Object(r.b)("You\u2019ve reached the limit of 1 available location reminder. Consider deleting some you don\u2019t use.","You\u2019ve reached the limit of {num} available location reminders. Consider deleting some you don\u2019t use.",e.current.max_reminders_location),{num:e.current.max_reminders_location})}}function l(e){var t=e.type,n=e.isOpen,c=e.onClose,l=e.userPlanLimits,u=Object(o.jsx)(i.a,{className:"ist_button",onClick:c,children:Object(r.a)("Close")}),d="COLLABORATORS"===t?Object(o.jsx)("div",{children:Object(o.jsx)("a",{href:"mailto:support@todoist.com",target:"_blank",rel:"noopener noreferrer",children:"support@todoist.com"})}):null,j=Object(o.jsxs)(o.Fragment,{children:[s(l)[t],d]});return Object(o.jsx)(a.a,{isOpen:n,header:Object(r.a)("Limit reached"),body:j,onClose:c,action:u})}},Rk0C:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var r=n("J4zp"),c=n.n(r),i=n("/MKj"),a=n("G3Y2"),o=n("kazx"),s=n("MPi4"),l=n("Vbab"),u=n("ImH7"),d=n("A72/"),j=n("gd9Y"),b=n("JQkX"),p=n("nM1N"),O=n("Vdij"),f=n("idbf"),h=n("18PS"),m=n("lSNA"),v=n.n(m),g=n("q1tI"),y=n("S+H7"),x=n("maC2"),w=n("XOeF"),k=n("JwyD"),_=n("kbOS"),S=n("KDcA"),C=n("k9f2"),P=n("ha8Y"),D=n("GnSW"),I=n("A/Zz"),T=n("nKUr");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(){var e=Object(i.g)(),t=Object(i.h)((function(e){return function(e){var t=Object(_.n)(e),n=Object(y.r)(e),r=Object(x.c)(e);return t.filter((function(e){return function(e){return!e.inbox_project&&!e.team_inbox&&!e.is_archived}(e)&&function(e){return!e.workspace_id}(e)})).map((function(t){var c=Object(_.q)(e,t.id),i=r[t.id]||0;return A(A({},t),{},{hasChildren:c.length>0,isShared:n(t.id),tasksCount:t.collapsed?c.reduce((function(e,t){return e+r[t.id]}),i):i})}))}(e)})),n=Object(i.h)((function(e){return e.settings.navigation.counts_shown})),r=Object(g.useCallback)((function(t){return e(Object(w.z)(t.id,{collapsed:!t.collapsed}))}),[e]);return Object(T.jsx)(S.c,{type:"PROJECT",droppableId:P.d,maxDepth:k.a-1,indentationWidth:25,combineEnabledFor:"TASK",scrollAncestorDroppableId:"left-menu",forceRoot:!0,children:function(e){var c=e.innerRef,i=e.placeholder,a=e.droppableProps;return Object(T.jsxs)(C.b,A(A({id:"projects_list","aria-label":Object(l.a)("Projects"),ref:c},a),{},{children:[t.map((function(e,t){return Object(T.jsx)(S.b,{draggableId:"".concat(P.b).concat(e.id),index:t,depth:e.indent-1,type:"PROJECT",children:function(t,c){var i=t.innerRef,a=t.draggableProps,o=c.combineTargetFor,s=c.nestedTargetFor;return Object(T.jsx)(I.a,A({supportDragAndDrop:!0,project:e,showTaskCount:n,innerRef:i,isTaskDraggedOver:Boolean(o)||Boolean(s),onToggleExpand:r,hideTooltip:null!=a["data-draggable-dragging"]},a),e.id)}},e.id)})),i(Object(T.jsx)(D.a,{}))]}))}})}function R(e){var t=e.showAsPersonalWorkspace,n=void 0!==t&&t,r=Object(s.a)("SidebarProjectsPanelExpanded",function(){try{return Boolean(JSON.parse(localStorage.left_menu_panels).project)}catch(e){return!0}}()),m=c()(r,2),v=m[0],g=m[1],y=Object(j.k)(),x=Object(i.h)(d.h),w=Object(i.h)(d.s),k=Object(i.h)(u.n);return Object(T.jsx)(f.a,{id:"left-menu-projects-panel",isExpanded:v,onToggleExpand:function(){return g((function(e){return!e}))},"data-track":"navigation|projects_panel",title:n?Object(l.a)("Personal"):Object(l.a)("Projects"),linkTo:"/app/projects",button:Object(T.jsx)(a.a,{variant:"quaternary",size:"small",onClick:function(){if(!x)return"teams"===w.current.plan_name?Object(O.a)({type:"PROJECTS",userPlanLimits:w}):"pro"===w.current.plan_name?Object(O.b)({type:"PROJECTS_PRO",userPlanLimits:w}):Object(O.b)({type:"PROJECTS_FREE",userPlanLimits:w}),null;Object(b.a)({navigateTo:y,anchorProjectId:void 0})},icon:Object(T.jsx)(p.a,{}),"aria-label":Object(l.a)("Add project")}),icon:n?Object(T.jsx)(o.a,{marginRight:"small","aria-hidden":!0,children:Object(T.jsx)(h.a,{user:k,size:"xsmall",roundedCorners:!0})}):null,children:Object(T.jsx)(N,{})})}},RkX7:function(e,t,n){"use strict";var r,c=n("TSYQ"),i=n.n(c),a=n("gIvJ"),o=n("q1tI");function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e){return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24"},e),r||(r=o.createElement("path",{fill:"currentColor",d:"M18 4a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h12zM8.89 8.4L4 7.14v1.37h4.93c.05 0 .07 0 .07-.05 0-.04-.03-.06-.11-.08zM7.5 11.74c0-.3.04-.45.29-.54l5.2-1.54a.02.02 0 00.01-.02v-.43c0-.12-.06-.2-.15-.2l-.18.03-6.33.9a.39.39 0 00-.34.39v2.45c0 .22.17.36.38.32l1.1-.22a.02.02 0 00.02-.02v-1.12zm2.32 1.06a.6.6 0 00-.32.56v2.73c0 .2.2.3.36.2l2.57-1.6 1.17.81a.08.08 0 00.05.02c.04 0 .06-.02.07-.06l.55-1.92 1.43-.9a.64.64 0 00.3-.54V9.7c0-.18-.1-.27-.23-.27-.07 0-.11.02-.15.04l-5.8 3.35z"})))}n.p;var u=n("nKUr");t.a=function(e){var t=e.type,n=e.className;if(!t)return null;var r=i()("service_icon",n);return"twist"===t?Object(u.jsx)(l,{className:r}):Object(u.jsx)(a.a,{className:r})}},TcCo:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u.a}));var r=n("TSYQ"),c=n.n(r),i=n("17x9"),a=n.n(i),o=n("nKUr");function s(e){var t=e.size,n=void 0===t?"small":t,r=e.className;return Object(o.jsxs)("div",{"data-testid":"loading",className:c()("spinner spinner--".concat(n),r),children:[Object(o.jsx)("div",{className:"bounce1"}),Object(o.jsx)("div",{className:"bounce2"}),Object(o.jsx)("div",{className:"bounce3"})]})}s.propTypes={size:a.a.oneOf(["small"])};var l=s,u=n("9l1k")},U6gh:function(e,t,n){"use strict";n.d(t,"a",(function(){return dr}));var r=n("J4zp"),c=n.n(r),i=n("q1tI"),a=n("/MKj"),o=n("CodD"),s=n("G3Y2"),l=n("TSYQ"),u=n.n(l),d=n("ibRB"),j=n("VNU/"),b=n("wrHN"),p=n("17Jv"),O=n("Vbab"),f=n("kraO"),h=n("KpGl"),m=n("awe3"),v=n("ImH7"),g=n("AnGN"),y=n("Bck0"),x=n("yYH5"),w=n("VKB9"),k=n("y2hQ"),_=n("DI5+"),S=n("ZyHs"),C=n("4rNB"),P=n("1zEf"),D=n("yZ7J"),I=n("XOeF"),T=n("oHMr"),E=n("gd9Y"),A=n("UVeO"),N=n("6O1D"),R=n("MPi4"),L=n("n6bU"),M=n("nKUr"),z=Object(i.createContext)({searches:[],locations:[],add:function(){},remove:function(){},removeAll:function(){}});function q(e,t){var n="query"===t.type?5:3,r=e.filter((function(e){return e.id!==t.id}));return r.unshift(t),r.length>n&&r.pop(),r}function U(e,t){return e.filter((function(e){var n=e.type,r=e.id;return n!==t.type||r!==t.id}))}function K(e){var t=e.children,n=Object(R.a)("recentSearches",[]),r=c()(n,2),a=r[0],o=r[1],s=Object(R.a)("recentLocations",[]),l=c()(s,2),u=l[0],d=l[1],j=Object(E.j)(),b=Object(i.useMemo)((function(){return function(e){var t;if(!e)return null;if("task"===(null===(t=e.subRoute)||void 0===t?void 0:t.type))return{type:"task",id:e.subRoute.taskId};switch(e.type){case"project":return{type:"project",id:e.projectId};case"label":return{type:"label",id:e.labelId};case"filter":return{type:"filter",id:e.filterId};case"search":return{type:"query",id:e.searchQuery};case"today":case"upcoming":return{type:"view",id:e.type}}return null}(j)}),[j]),p=Object(L.a)(b);Object(i.useEffect)((function(){!p||(null==b?void 0:b.type)===p.type&&(null==b?void 0:b.id)===p.id||("query"===p.type?o((function(e){return q(e,p)})):d((function(e){return q(e,p)})))}),[b,p,d,o]);var O=Object(i.useMemo)((function(){return{searches:a,locations:u,add:function(e){"query"===e.type?o(q(a,e)):d(q(u,e))},remove:function(e){"query"===e.type?o(U(a,e)):d(U(u,e))},removeAll:function(e){"searches"===e?o([]):d([])}}}),[a,u,o,d]);return Object(M.jsx)(z.Provider,{value:O,children:t})}function F(){return Object(i.useContext)(z)}var V=n("RIqP"),H=n.n(V),Y=n("xweI"),W=n.n(Y),G=n("vV6a"),Q=n("xvbm"),J=n("RZq6"),X=n("S+H7"),Z=n("ZnB/"),$=n("TQFH"),ee=n("gVGk"),te=n("PRk6"),ne=n("G5Ko"),re=n("4rXO");function ce(e,t){return 0===e.length?t:t.filter((function(t){return Object(re.a)(e,t.name)>=0}))}function ie(e,t){if(0===(e=e.trim()).length)return{highlightText:"",results:[]};var n=Object(Q.c)("frontend.teams_search")&&Object(v.f)(t),r=e.startsWith(G.o)||e.startsWith(G.p)?"project":e.startsWith(G.s)?"section":e.startsWith(G.d)||e.startsWith(G.e)?"label":"anything";"anything"!==r&&(e=e.substring(1));var c=Object(I.j)(t),i="project"===r||"anything"===r?ce(e,c):[],a=Object(te.e)(t),o="section"===r||"anything"===r?ce(e,a):[],s=Object(ee.e)(t),l="label"===r||"anything"===r?ce(e,s):[],u=[],d=[],j=[];return"anything"===r&&(u=Object(Z.e)(t,e),d=Object($.w)(e)(t),j=function(e){var t=[],n=Object(O.a)("Today");n.toLowerCase().includes(e)&&t.push({type:"view",id:"today",name:n});var r=Object(O.a)("Upcoming");return r.toLowerCase().includes(e)&&t.push({type:"view",id:"upcoming",name:r}),t}(e)),"anything"===r&&i.length+o.length+l.length+u.length+d.length>10&&(i=i.slice(0,3),o=o.slice(0,3),l=l.slice(0,3),d=d.slice(0,3),u=u.slice(0,3)),{highlightText:e,results:[].concat(H()(i.map((function(e){return{type:"project",id:e.id,project:e,parent:Object(I.k)(t,e.parent_id),isShared:Object(X.q)(t,e.id),workspace:n?Object(ne.d)(t,e.workspace_id):void 0}}))),H()(W()(o,"section_order").map((function(e){var r=Object(I.k)(t,e.project_id),c=n?Object(ne.d)(t,null==r?void 0:r.workspace_id):void 0;return{type:"section",id:e.id,section:e,project:r,workspace:c}}))),H()(W()(l,"item_order").map((function(e){return{type:"label",id:e.name,label:e}}))),H()(d.map((function(e){var r=Object(I.k)(t,e.project_id),c=n?Object(ne.d)(t,null==r?void 0:r.workspace_id):void 0;return{type:"task",id:e.id,task:e,project:r,isShared:Object(X.q)(t,e.project_id),workspace:c}}))),H()(W()(u,"item_order").map((function(e){return{type:"filter",id:e.id,filter:e}}))),H()(j))}}function ae(e,t){switch(e.type){case"view":return Object(E.f)({type:e.id});case"project":return Object(E.f)({type:"project",projectId:e.project.id});case"label":return Object(E.f)({type:"label",labelId:Object(E.d)(e.label)});case"query":return Object(E.f)({type:"search",searchQuery:e.id});case"filter":return Object(E.f)({type:"filter",filterId:e.filter.id});case"task":var n=e.task;return Object(E.f)(t,{id:n.id});case"section":var r=e.section,c=e.project;return c?{pathname:Object(E.f)({type:"project",projectId:c.id}),hash:"#section-".concat(r.id)}:(Object(J.c)("Found a section with a project_id that could not be found",{sectionId:r.id,projectId:r.project_id}),null)}}var oe=n("WhXB"),se=n("UTRX"),le=n("GIsW"),ue=n("+ger"),de=n("t6YY"),je=n("xKYe"),be=n("ysgU"),pe=n("5IEK"),Oe=n("hMw4"),fe=n("1S3k"),he=n("GS7h"),me=n("Akve"),ve=n("d7s4"),ge=n("kazx"),ye=n("R/7U"),xe=n("18PS");function we(e){var t=e.workspace,n=e.user,r=e.project,c=e.isShared;return Object(M.jsxs)(se.b,{alignY:"center",paddingRight:"xsmall",children:[t?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(se.a,{width:"content",children:Object(M.jsx)(ge.a,{as:ye.a,src:t.logo_small,size:"tiny",display:"flex",marginRight:"xsmall"})}),r?null:Object(M.jsx)(se.a,{children:Object(M.jsx)(le.a,{size:"caption",tone:"secondary",lineClamp:1,children:t.name})})]}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(se.a,{width:"content",children:Object(M.jsx)(ge.a,{display:"flex",marginRight:"xsmall",children:Object(M.jsx)(xe.a,{user:n,size:"xxsmall"})})}),r?null:Object(M.jsx)(se.a,{children:Object(M.jsx)(le.a,{size:"caption",tone:"secondary",lineClamp:1,children:Object(O.a)("Personal")})})]}),r?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(se.a,{width:"content",children:Object(M.jsx)(le.a,{size:"caption",tone:"secondary",children:Object(M.jsx)(ge.a,{paddingRight:"xsmall",children:"/"})})}),Object(M.jsx)(se.a,{children:Object(M.jsx)(le.a,{size:"caption",tone:"secondary",lineClamp:1,children:r.name})}),Object(M.jsx)(se.a,{width:"content",children:Object(M.jsx)(A.Vb,{size:"small",project:r,isShared:c})})]}):null]})}function ke(e){return{color:ue.d(e)}}function _e(e){var t=e.annotateSearchResult,n=e.handleOnClick,r=e.handleOnEnter,c=F(),i=c.searches,a=c.locations,o=c.remove,s=c.removeAll,l=Object(D.f)().state;return Object(M.jsxs)(M.Fragment,{children:[i.length>0?Object(M.jsxs)("div",{role:"group","aria-labelledby":"quick-find-recent-searches-header",children:[Object(M.jsxs)("h3",{role:"presentation",children:[Object(M.jsx)("span",{id:"quick-find-recent-searches-header",children:Object(O.a)("Recent searches")}),Object(M.jsx)("button",{tabIndex:-1,onClick:function(e){s("searches"),e.stopPropagation()},children:Object(O.a)("Clear")})]}),i.map((function(e,t){return Object(M.jsxs)(D.c,{value:"recent-searches-".concat(e.id,"-").concat(t),onClick:function(t){t.preventDefault(),null==l||l.setValue(e.id)},children:[Object(M.jsx)(be.a,{className:"quick_find__recent_search_icon"}),Object(M.jsx)("span",{children:e.id}),Object(M.jsx)("button",{tabIndex:-1,onClick:function(t){o(e),t.stopPropagation()},children:Object(M.jsx)(de.a,{})})]},"recent-searches-".concat(e.id,"-").concat(t))}))]}):null,a.length>0?Object(M.jsxs)("div",{role:"group","aria-labelledby":"quick-find-recently-visited-header",children:[Object(M.jsx)("h3",{role:"presentation",id:"quick-find-recently-visited-header",children:Object(O.a)("Recently viewed")}),a.map(t).map((function(e){return e?Object(M.jsx)(D.c,{value:"location-".concat(e.type,"-").concat(e.id),onClick:function(t){return n(t,e)},clickOnEnter:!1,onKeyDown:function(t){return r(t,e)},children:Object(M.jsx)(Se,{result:e})},"location-".concat(e.type,"-").concat(e.id)):null}))]}):null]})}function Se(e){var t=e.result,n=e.highlightText,r=Object(a.h)((function(e){return Object(Q.c)("frontend.teams_search")&&Object(v.f)(e)})),c=Object(a.h)(v.n);switch(t.type){case"project":var i=t.project,o=t.parent,s=t.isShared,l=t.workspace;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Oe.a,{"aria-hidden":!0,size:"medium",project:i,isShared:s}),Object(M.jsxs)("div",{className:"quick_find__search_result","aria-hidden":!0,children:[Object(M.jsxs)("div",{className:"quick_find__search_result--left",children:[Object(M.jsx)(D.d,{text:i.name,highlightText:n,className:"quick_find__search_result--content"}),null!=o?Object(M.jsx)("em",{children:o.name}):null]}),r?Object(M.jsx)("div",{className:"quick_find__search_result--right",children:Object(M.jsx)("div",{className:"quick_find__search_result--project",children:Object(M.jsx)(we,{user:c,workspace:l})})}):null]}),Object(M.jsxs)(oe.a,{children:[Object(O.a)("Project"),": ",i.name,".",null!=o?Object(M.jsxs)(M.Fragment,{children:[" ",Object(O.a)("Parent project"),": ",o.name]}):null]})]});case"section":var d=t.section,j=t.project,b=t.workspace;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(fe.a,{"aria-hidden":!0}),Object(M.jsxs)("div",{className:"quick_find__search_result","aria-hidden":!0,children:[Object(M.jsxs)("div",{className:"quick_find__search_result--left",children:[Object(M.jsx)(D.d,{text:d.name,highlightText:n}),null!=j?Object(M.jsx)("em",{children:j.name}):null]}),r?Object(M.jsx)("div",{className:"quick_find__search_result--right",children:Object(M.jsx)("div",{className:"quick_find__search_result--project",children:Object(M.jsx)(we,{user:c,workspace:b})})}):null]}),Object(M.jsxs)(oe.a,{children:[Object(O.a)("Section"),": ",d.name,".",Object(M.jsx)("br",{}),null!=j?Object(M.jsxs)(M.Fragment,{children:[" ",Object(O.a)("Project"),": ",j.name,"."]}):null]})]});case"label":var p=t.label;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(pe.a,{"aria-hidden":!0,style:ke(p.color)}),Object(M.jsx)("span",{"aria-hidden":!0,children:Object(M.jsx)(D.d,{text:p.name,highlightText:n})}),Object(M.jsxs)(oe.a,{children:[Object(O.a)("Label"),": ",p.name,"."]})]});case"filter":var f=t.filter;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(je.a,{"aria-hidden":!0,style:ke(f.color)}),Object(M.jsx)("span",{"aria-hidden":!0,children:Object(M.jsx)(D.d,{text:f.name,highlightText:n})}),Object(M.jsxs)(oe.a,{children:[Object(O.a)("Filter"),": ",f.name,"."]})]});case"task":var h,m=t.task,g=t.project,y=t.isShared,x=t.workspace,w=(null===(h=m.description)||void 0===h?void 0:h.length)>0,k=Object(ve.b)(m.content,{stripListLeaders:!0}),_=Object(ve.b)(m.description),S=u()("quick_find__search_result",{with_description:w});return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:"quick_find__task_icon","aria-hidden":!0,children:Object(M.jsx)("div",{})}),Object(M.jsxs)("div",{className:S,"aria-hidden":!0,children:[Object(M.jsxs)("div",{className:"quick_find__search_result--left",children:[Object(M.jsx)(D.d,{className:"quick_find__search_result--content",text:k,highlightText:n}),w?Object(M.jsx)(D.d,{className:"quick_find__search_result--description",text:_,highlightText:n}):null]}),g?Object(M.jsx)("div",{className:"quick_find__search_result--right",children:Object(M.jsx)("div",{className:"quick_find__search_result--project",children:r?Object(M.jsx)(we,{user:c,workspace:x,project:g,isShared:y}):Object(M.jsxs)(se.b,{alignY:"center",children:[Object(M.jsx)(se.a,{children:Object(M.jsx)(le.a,{size:"caption",tone:"secondary",lineClamp:1,children:g.name})}),Object(M.jsx)(se.a,{width:"content",children:Object(M.jsx)(Oe.a,{size:"small",project:g,isShared:y})})]})})}):null]}),Object(M.jsx)(oe.a,{children:Object(M.jsxs)(M.Fragment,{children:[Object(O.a)("Task name"),": ",k,".",w?Object(M.jsxs)(M.Fragment,{children:[" ",Object(O.a)("Task description"),": ",_,"."]}):null,g?Object(M.jsxs)(M.Fragment,{children:[" ",Object(O.a)("Project"),": ",g.name,"."]}):null]})})]});case"query":return Object(M.jsx)("span",{children:Object(M.jsx)(D.d,{text:t.id})})}return Object(M.jsxs)(M.Fragment,{children:["today"===t.id?Object(M.jsx)(he.a,{className:"quick_find__today_icon","aria-hidden":!0}):Object(M.jsx)(me.a,{className:"quick_find__upcoming_view_icon","aria-hidden":!0}),Object(M.jsx)("span",{"aria-hidden":!0,children:Object(M.jsx)(D.d,{text:t.name,highlightText:n})}),Object(M.jsx)(oe.a,{children:t.name})]})}var Ce=Object(a.c)((function(e){return{getSearchResults:function(t){return ie(t,e)},annotateSearchResult:function(t){return function(e,t){var n=e.type,r=e.id,c=Object(Q.c)("frontend.teams_search")&&Object(v.f)(t);switch(n){case"query":return{type:n,id:String(r)};case"view":return{type:n,id:"today"===r?"today":"upcoming",name:"today"===r?Object(O.a)("Today"):Object(O.a)("Upcoming")};case"project":var i=Object(I.k)(t,r);if(!i)return null;var a=c?Object(ne.d)(t,i.workspace_id):void 0;return{type:n,id:r,project:i,parent:Object(I.k)(t,i.parent_id),isShared:Object(X.q)(t,i.id),workspace:a};case"label":var o=Object(ee.j)(r,t);return o?{type:n,id:r,label:o}:null;case"filter":var s=Object(Z.d)(t,r);return s?{type:n,id:r,filter:s}:null;case"section":var l=t.sections[r];return l?{type:n,id:r,section:l,project:Object(I.k)(t,l.project_id)}:null;case"task":var u=Object($.u)(t,r);return u?{type:n,id:r,task:u,project:Object(I.k)(t,u.project_id),isShared:Object(X.q)(t,u.project_id)}:null}return null}(t,e)}}}))((function(e){var t,n,r=e.onSearchResultSelected,c=e.getSearchResults,i=e.annotateSearchResult,a=null!==(t=null===(n=Object(D.f)().state)||void 0===n?void 0:n.value.trim())&&void 0!==t?t:"";function o(e,t){"Enter"===e.key&&(e.preventDefault(),r(t,{viaKeyboard:!0}))}function s(e,t){e.preventDefault(),r(t)}if(0===a.length)return Object(M.jsx)(_e,{annotateSearchResult:i,handleOnClick:s,handleOnEnter:o});var l=c(a),u=l.results,d=l.highlightText;return Object(M.jsxs)(M.Fragment,{children:[u.map((function(e,t){return Object(M.jsx)(D.c,{value:"".concat(e.type,"-").concat(e.id),onClick:function(t){return s(t,e)},clickOnEnter:!1,onKeyDown:function(t){return o(t,e)},children:Object(M.jsx)(Se,{result:e,highlightText:d})},"".concat(t,"-").concat(e.type,"-").concat(e.id))})),Object(M.jsx)(D.c,{value:"quick-find-show-more",className:"quick_find__show_more",onClick:function(e){return s(e,{type:"query",id:a})},clickOnEnter:!1,onKeyDown:function(e){return o(e,{type:"query",id:a})},children:Object(O.a)("Show more results")})]})})),Pe=n("wqDb");function De(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.viaKeyboard,c=void 0!==r&&r,i=t?"inbox":null==e?void 0:e.type;i&&(c?Object(Pe.a)("search","opened","from_".concat(i,"_via_keyboard")):Object(Pe.a)("search","opened","from_".concat(i)))}function Ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viaKeyboard,n=void 0!==t&&t;Object(Pe.a)("search","opened",n?"other_via_keyboard":"other")}function Te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.viaKeyboard,r=void 0!==n&&n,c=Ee(e);r&&(c+="_via_keyboard"),Object(Pe.a)("searchResults","opened",c)}function Ee(e){var t,n;switch(e.type){case"label":case"filter":case"query":case"task":return e.type;case"project":return null!==(t=e.project)&&void 0!==t&&t.inbox_project||null!==(n=e.project)&&void 0!==n&&n.team_inbox?"inbox":"project";case"view":return"today"===e.id||"upcoming"===e.id?e.id:"other";default:return"other"}}function Ae(e){var t,n=e.disabled,r=e.isActive,a=e.onActiveChange,s=Object(i.useState)(""),l=c()(s,2),d=l[0],j=l[1],b=Object(i.useState)(!1),p=c()(b,2),f=p[0],h=p[1],m=d.trim(),v=Object(i.useRef)(null),g=T.default.getState(),y=null===(t=Object(I.o)(g))||void 0===t?void 0:t.id,x=F().add,w=Object(E.j)(),k="project"===(null==w?void 0:w.type)&&(null==w?void 0:w.projectId)===y;Object(i.useEffect)((function(){if(!r){var e=setTimeout((function(){j(""),h(!1)}),0);return function(){clearTimeout(e)}}}),[r]),Object(i.useEffect)((function(){if(r)return window.addEventListener("resize",e,{capture:!0}),function(){return window.removeEventListener("resize",e)};function e(){var e;null===(e=v.current)||void 0===e||e.blur(),a(!1)}}),[r,a]);var _=Object(o.j)();function S(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.viaKeyboard,c=void 0!==r&&r;null===(t=v.current)||void 0===t||t.blur(),a(!1);var i=ae(e,w);i&&(Te(e,{viaKeyboard:c}),_(i)),m.length>0&&setTimeout((function(){x({type:"query",id:m})}),0)}var R=Object(i.useCallback)((function(){var e;a(!0),null===(e=v.current)||void 0===e||e.focus()}),[v,a]),L=Object(i.useCallback)((function(e,t){var n;null==t||t.preventDefault(),null==t||null===(n=t.stopImmediatePropagation)||void 0===n||n.call(t);var r="";"label"===e?r="@":"project"===e?r="#":"section"===e&&(r="/"),R(),j(r)}),[R,j]);return Object(N.n)({identifier:"GO_TO_LABELS",handler:Object(i.useCallback)((function(e){L("label",e)}),[L])}),Object(N.n)({identifier:"GO_TO_PROJECTS",handler:Object(i.useCallback)((function(e){L("project",e)}),[L])}),Object(N.n)({identifier:"GO_TO_SECTION",handler:Object(i.useCallback)((function(e){L("section",e)}),[L])}),Object(N.n)({identifier:"OPEN_QUICK_FIND",handler:Object(i.useCallback)((function(e){L(null,e),De(w,k,{viaKeyboard:!0})}),[w,L,k])}),Object(M.jsx)("div",{id:"quick_find","data-testid":"quick_find_container",className:u()({active:r,disabled:n}),onFocus:function(){return!n&&a(!0)},onBlur:function(e){var t=e.currentTarget;(null==e.relatedTarget||!t.contains(e.relatedTarget))&&(a(!1),Ie())},onClick:function(){return De(w,k)},children:Object(M.jsxs)(D.a,{gutter:4,visible:f,onValueChange:j,children:[Object(M.jsx)(A.cc,{"aria-hidden":!0,className:"search_icon"}),Object(M.jsx)(D.b,{disabled:n,ref:v,className:"quick_find__input",onKeyDown:function(e){var t;"Escape"===e.key&&(null===(t=v.current)||void 0===t||t.blur(),a(!1),Ie({viaKeyboard:!0}))},onKeyPress:function(e){"Enter"===e.key&&m.length>0&&S({type:"query",id:m},{viaKeyboard:!0})},value:d,onFocus:function(){return h(!0)},placeholder:Object(O.a)("Search"),"aria-label":Object(O.a)("Quick search"),"aria-keyshortcuts":"/"}),f?Object(M.jsx)(D.e,{"aria-label":Object(O.a)("Quick search results"),children:Object(M.jsx)(Ce,{onSearchResultSelected:S})}):null,Object(M.jsx)(C.a,{content:Object(O.a)("How to use search"),children:Object(M.jsx)("a",{"aria-label":Object(O.a)("How to use search"),href:P.h,rel:"noopener noreferrer",target:"_blank",className:"help_icon",children:Object(M.jsx)(A.R,{"aria-hidden":!0})})}),Object(M.jsx)("button",{className:"close_icon","aria-label":Object(O.a)("Close Search"),onClick:function(){return a(!1)},children:Object(M.jsx)(A.v,{"aria-hidden":!0,small:!0,className:""})}),r?null:Object(M.jsx)(C.a,{content:Object(M.jsx)(N.g,{identifier:"OPEN_QUICK_FIND"}),children:Object(M.jsx)("button",{className:"shortcut_hint",onClick:R,"aria-label":Object(O.a)("Quick search"),"aria-keyshortcuts":"/",children:"/"})})]})})}function Ne(e){var t=e.disabled,n=e.isActive,r=e.onActiveChange;return Object(M.jsx)(K,{children:Object(M.jsx)(Ae,{disabled:t,isActive:n,onActiveChange:r})})}var Re=n("RsDw"),Le=n("MrOw"),Me=n("Ek05"),ze=n("KIIX"),Be=n("fdBK"),qe=n("iAAn"),Ue=n("5alK"),Ke=n("kYI+"),Fe=n("vDIV"),Ve=n("mtEF"),He=n("fA9/");function Ye(){var e=Object(N.m)().setIsCommandMenuShown;return Object(M.jsxs)(Re.d,{"aria-labelledby":"command-menu-description",onClick:function(){null==e||e(!0)},children:[Object(M.jsx)(He.a,{"aria-hidden":"true"}),Object(M.jsx)("span",{className:"help_menu_label",id:"command-menu-description",children:Object(O.d)("shortcuts","Command menu")}),Object(M.jsx)(N.e,{identifier:"OPEN_COMMAND_MENU"})]})}function We(e){var t=e.firstItemRef,n=Object(i.useState)((function(){return Me.a.prettyDate(Le.default.getInstance().last_synced.getTime())})),r=c()(n,2),a=r[0],o=r[1];return Object(i.useEffect)((function(){var e=setInterval((function(){o(Me.a.prettyDate(Le.default.getInstance().last_synced.getTime()))}),1e3);return function(){clearInterval(e)}}),[]),Object(M.jsxs)(Re.e,{"aria-label":Object(O.a)("Help menu"),exceptionallySetClassName:"help_menu user_menu",children:[Object(M.jsxs)(Re.d,{ref:t,as:"a",href:P.s,rel:"noopener noreferrer",target:"_blank",children:[Object(M.jsx)(Ke.a,{"aria-hidden":"true"}),Object(M.jsx)("span",{className:"help_menu_label",children:Object(O.a)("Help")})]}),Object(M.jsxs)(Re.d,{as:"a",href:"https://blog.doist.com",rel:"noopener noreferrer",target:"_blank",children:[Object(M.jsx)(ze.a,{"aria-hidden":"true"}),Object(M.jsx)("span",{className:"help_menu_label",children:Object(O.a)("Blog")})]}),Object(M.jsxs)(Re.d,{as:"a",href:"https://todoist.com/templates",rel:"noopener noreferrer",target:"_blank",children:[Object(M.jsx)(Ve.a,{"aria-hidden":"true"}),Object(M.jsx)("span",{className:"help_menu_label",children:Object(O.a)("Templates")})]}),Object(M.jsxs)(Re.d,{onSelect:N.k,"aria-describedby":"keyboard-shortcut-menu-item-description",children:[Object(M.jsx)(qe.a,{"aria-hidden":"true"}),Object(M.jsx)("span",{className:"help_menu_label",children:Object(O.a)("Keyboard shortcuts")}),Object(M.jsx)("span",{"aria-hidden":"true","aria-label":Object(O.a)("The keyboard shortcuts modal can be opened with the Question Mark key"),id:"keyboard-shortcut-menu-item-description",children:Object(M.jsx)(N.e,{identifier:"OPEN_KEYBOARD_SHORTCUTS_MODAL"})})]}),Object(M.jsx)(Ye,{}),Object(M.jsxs)(Re.d,{as:"a",href:"https://todoist.com/getting-started",rel:"noopener noreferrer",target:"_blank",children:[Object(M.jsx)(Be.a,{"aria-hidden":"true"}),Object(M.jsx)("span",{className:"help_menu_label",children:Object(O.a)("Getting started guide")})]}),Object(M.jsxs)(Re.d,{as:"a",href:P.q,rel:"noopener noreferrer",target:"_blank",children:[Object(M.jsx)(Ue.a,{"aria-hidden":"true"}),Object(M.jsx)("span",{className:"help_menu_label",children:Object(O.a)("What's new")})]}),Object(M.jsx)("hr",{}),Object(M.jsxs)(Re.d,{onSelect:function(){Object(Pe.a)("Menu","sync","from_help_menu"),Le.default.getInstance().sync(null,{from_user_action:!0})},"aria-describedby":"last_synced",children:[Object(M.jsx)(Fe.a,{"aria-hidden":"true"}),Object(M.jsx)("span",{className:"help_menu_label",children:Object(O.a)("Sync")})]}),Object(M.jsxs)("div",{id:"last_synced","data-testid":"last_synced",children:[Object(O.a)("Sync last completed"),": ",a]})]})}function Ge(){var e=Object(i.useRef)(null),t=Object(i.useRef)(null),n=Object(i.useCallback)((function(){var n,r;null==e||null===(n=e.current)||void 0===n||n.click(),null==t||null===(r=t.current)||void 0===r||r.focus()}),[e]);return Object(N.n)({identifier:"OPEN_HELP_MENU",handler:n}),Object(M.jsxs)(Re.a,{children:[Object(M.jsx)(C.a,{content:Object(M.jsx)(N.g,{identifier:"OPEN_HELP_MENU"}),children:Object(M.jsx)(Re.b,{"aria-label":Object(O.a)("Help & Feedback"),exceptionallySetClassName:"top_bar_btn",id:"help_btn",ref:e,children:Object(M.jsx)(A.Xb,{"aria-hidden":"true"})})}),Object(M.jsx)(We,{firstItemRef:t})]})}var Qe=n("4eld");function Je(e){var t=e.disabled,n=Object(o.j)();return Object(M.jsx)(Qe.a,{title:Object(O.a)("Go to Home view"),"aria-label":Object(O.a)("Go to Home view"),tooltip:Object(M.jsx)(N.g,{identifier:"GO_TO_HOME_VIEW"}),onClick:function(){return n("/app")},className:"top_bar_btn home_btn","data-gtm-id":"burger-home-button",disabled:t,children:Object(M.jsx)(A.T,{})})}var Xe=Object(i.forwardRef)((function(e,t){var n=e.disabled,r=Object(a.g)(),c=Object(S.c)(),o=c.menuOn,s=c.toggleMenu,l=Object(a.h)((function(e){return Object(m.v)(m.o,e)}));return Object(i.useEffect)((function(){Object(d.a)({variable:{name:"menu_action",value:o?"close":"open"}})}),[o]),Object(M.jsx)("div",{ref:t,children:Object(M.jsxs)(Qe.a,{"aria-label":Object(O.a)("Main menu"),role:"switch","aria-checked":o,className:"left_menu_toggle top_bar_btn",title:o?Object(O.a)("Close menu"):Object(O.a)("Open menu"),shortcut:"m",onClick:function(){s(),l&&r(Object(m.w)(m.o))},"data-gtm-id":"burger-menu-toggle",disabled:n,children:[Object(M.jsx)(A.v,{className:"close_icon"}),Object(M.jsx)(A.Q,{className:"menu_icon"})]})})})),Ze=n("17x9"),$e=n.n(Ze),et=n("PNZh"),tt=n("lSNA"),nt=n.n(tt),rt=n("DNwz"),ct=n.n(rt),it=n("PI/q"),at=n("rbFA"),ot=n("lwsE"),st=n.n(ot),lt=n("W8MJ"),ut=n.n(lt),dt=n("PJYZ"),jt=n.n(dt),bt=n("7W2i"),pt=n.n(bt),Ot=n("a1gu"),ft=n.n(Ot),ht=n("Nsbk"),mt=n.n(ht),vt=n("VNk9"),gt=n("LYyr"),yt=n("giaj"),xt=n("2Ze5"),wt=n("uS8r"),kt=n.n(wt),_t=n("PZ6b"),St=n.n(_t),Ct=n("JXqz"),Pt=n.n(Ct),Dt=n("ANjH"),It=n("qNui"),Tt=n("HXlA");function Et(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return At(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mt()(e);if(t){var c=mt()(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return ft()(this,n)}}var Rt=function(e){pt()(n,e);var t=Nt(n);function n(e){var r;st()(this,n),(r=t.call(this,e)).canvas=null,r.chartHolder=null;var c=r.props,i=c.stat,a=c.goal,o=c.width,s=Object(Dt.c)(Pt.a,kt()((function(e){return e.completed}))),l=Object(Dt.c)(St.a,kt()(s),kt()((function(e){return e.items})))(i);return r.pxPerCount=(o-55)/St()([l,a]),r.goalLineHeight=20*r.props.stat.length+10,r}return ut()(n,[{key:"componentDidUpdate",value:function(){this.drawCanvas()}},{key:"componentDidMount",value:function(){this.drawCanvas();var e=this.props,t=e.goal,n=e.stat,r=t*this.pxPerCount-7,c=4==n.length?SPAN(Object(O.a)("Weekly Goal"),": ",B(t)):SPAN(Object(O.a)("Daily Goal"),": ",B(t));IstTooltip.showSimpleText(this.chartHolder,c,null,-1,r)}},{key:"drawCanvas",value:function(){var e=this.props,t=e.goal,n=20*e.stat.length+10,r=this.canvas.getContext("2d");Object(It.a)(this.canvas,r);var c=this.pxPerCount*t,i=n-4;r.strokeStyle="#a5a5a5",r.fillStyle="#a5a5a5",r.lineWidth=1.5,r.beginPath(),r.moveTo(c,4),r.lineTo(c,i),r.stroke(),r.closePath(),r.beginPath(),r.arc(c,4,2,0,2*Math.PI,!1),r.fill(),r.closePath(),r.beginPath(),r.arc(c,i,2,0,2*Math.PI,!1),r.fill(),r.closePath()}},{key:"renderSingleBar",value:function(e){var t=e.colors,n=e.count,r=e.weekday,c=e.baseKey;if(0===t.length)return Object(M.jsxs)("li",{children:[Object(M.jsx)("div",{className:"project_colors",children:Object(M.jsx)("div",{className:"project_viz",style:{width:"1px"}},"".concat(c,"-0"))}),r?Object(M.jsx)("span",{className:"short_date",children:r}):null,Object(M.jsx)("b",{children:"0"})]},c);var i=t.map((function(e,t){var n=e.colorHex,r=e.width;return Object(M.jsx)("div",{className:"project_viz",style:{backgroundColor:n,width:r}},"".concat(c,"-").concat(t))}));return Object(M.jsxs)("li",{children:[Object(M.jsx)("div",{className:"project_colors",children:i}),r?Object(M.jsx)("span",{className:"short_date",children:r}):null,Object(M.jsx)("b",{children:n})]},c)}},{key:"render",value:function(){var e,t,n,r=this,c=this.props,i=c.stat,a=c.idToColor,o=c.width,s=Object(Dt.c)(Pt.a,kt()((function(e){return e.completed}))),l=[],u=Et(i);try{for(u.s();!(e=u.n()).done;){var d=e.value,j=d.items,b=d.date,p=b&&10===b.length?(t=b,n=void 0,n=Object(Tt.a)(t),Me.a.getWeekdayShort(n)):null,O=s(j),f=j.map((function(e){return{sortProperty:ue.e(a[e.id]),colorHex:ue.d(a[e.id]),width:r.pxPerCount*e.completed}}));f.sort((function(e,t){return e.sortProperty-t.sortProperty})),l.push(this.renderSingleBar({colors:f,count:O,weekday:p,baseKey:l.length}))}}catch(e){u.e(e)}finally{u.f()}var h={width:o,height:this.goalLineHeight,overflow:"hidden"};return Object(M.jsxs)("div",{className:"completed_bar_chart",ref:function(e){return r.chartHolder=e},children:[Object(M.jsx)("ul",{children:l}),Object(M.jsx)("div",{className:"goalline",style:h,children:Object(M.jsx)("canvas",{ref:function(e){return r.canvas=e},width:o,height:this.goalLineHeight.height})})]})}}]),n}(i.PureComponent);nt()(Rt,"propTypes",{stat:$e.a.arrayOf($e.a.shape({date:$e.a.string,items:$e.a.array})).isRequired,goal:$e.a.number,idToColor:$e.a.object.isRequired,width:$e.a.number}),nt()(Rt,"defaultProps",{width:225});var Lt=Rt,Mt=function(){function e(t){var n=t.p0,r=t.p25,c=t.p75,i=t.p100,a=t.p100plus,o=t.p100plusFri;st()(this,e),this.p0=n,this.p25=r,this.p75=c,this.p100=i,this.p100plus=a,this.p100plusFri=o}return ut()(e,[{key:"get",value:function(e){var t;switch(!0){case e>=1:t=5===(new Date).getDay()&&this.p100plusFri?this.p100plusFri:this.p100plus;break;case e>.75:t=this.p100;break;case e>.25:t=this.p75;break;case e>0:t=this.p25;break;case 0==e:default:t=this.p0}return t[(new Date).getDate()%t.length]}}]),e}(),zt=n("N1H6"),Bt=n("c9wj"),qt=n("yzT/");function Ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mt()(e);if(t){var c=mt()(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return ft()(this,n)}}var Kt=function(e){pt()(n,e);var t=Ut(n);function n(e){var r;return st()(this,n),(r=t.call(this,e)).progressbarRef=null,r.elementId=Object(Bt.a)("progress-ring"),r}return ut()(n,[{key:"componentDidMount",value:function(){var e=this;if(!this.props.disableAnimation){var t=this.props,n=t.animationDuration,r=t.animationStart;Object(qt.a)({from:0,to:this.props.progress,duration:n,easing:zt.a,step:function(t){e.progressbarRef&&(e.progressbarRef.style.strokeDashoffset=e.deriveStrokeDashoffset(t))},startAfter:r})}}},{key:"deriveStrokeDashoffset",value:function(e){return 301.635*(1-e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.color,r=t.width,c=t.strokeWidth,i=t.progress,a=t.disableAnimation,o={display:"block",width:r},s={strokeDasharray:"".concat(301.635,", ").concat(301.635),strokeDashoffset:a?this.deriveStrokeDashoffset(i):301.635},l={position:"relative",height:r,width:r},u=50-c/2,d=Object(gt.a)("M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{radius2} a {radius},{radius} 0 1 1 0,-{radius2}",{radius:u,radius2:2*u});return Object(M.jsxs)("div",{style:l,children:[Object(M.jsxs)("svg",{viewBox:"0 0 100 100",style:o,children:[Object(M.jsx)("defs",{children:Object(M.jsxs)("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:this.elementId,children:[Object(M.jsx)("stop",{stopColor:n,stopOpacity:"0.7",offset:"0%"}),Object(M.jsx)("stop",{stopColor:n,offset:"100%"})]})}),Object(M.jsx)("path",{d:d,stroke:this.props.strokeColor,strokeWidth:c,fillOpacity:"0"}),Object(M.jsx)("path",{ref:function(t){return e.progressbarRef=t},d:d,stroke:"url(#".concat(this.elementId,")"),strokeWidth:c,fillOpacity:"0",style:s})]}),Object(M.jsx)("div",{style:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",top:0,left:0,width:"100%",height:"100%"},children:this.props.children})]})}}]),n}(i.PureComponent);nt()(Kt,"propTypes",{progress:$e.a.number,width:$e.a.number,strokeWidth:$e.a.number,color:$e.a.string,strokeColor:$e.a.string,children:$e.a.node,disableAnimation:$e.a.bool,animationDuration:$e.a.number,animationStart:$e.a.number}),nt()(Kt,"defaultProps",{progress:.7,width:72,strokeWidth:6,disableAnimation:!1,animationDuration:1200,animationStart:500,color:"#316fea"});var Ft=n("zO8/");function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mt()(e);if(t){var c=mt()(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return ft()(this,n)}}var Ht=function(e){pt()(n,e);var t=Vt(n);function n(e){var r;return st()(this,n),(r=t.call(this,e)).motivatorCatelog=new Mt({p0:[Object(O.a)("What will you focus on first?"),Object(O.a)("Just take it one task at a time."),Object(O.a)("What\u2019s first on your list?")],p25:[Object(O.a)("You\u2019re off to a great start. Keep it up!"),Object(O.a)("Nice first steps. Keep moving forward!"),Object(O.a)("Getting started is the hardest part. Keep going!")],p75:[Object(O.a)("You\u2019re making great progress. Stay focused!"),Object(O.a)("You\u2019ve got some great momentum!"),Object(O.a)("You\u2019re on your way!"),Object(O.a)("Nothing can stop you!")],p100:[Object(O.a)("You\u2019re almost there. Keep going!"),Object(O.a)("It\u2019s the last stretch of the day!"),Object(O.a)("It\u2019s the final leg. You\u2019ve got this!")],p100plus:[Object(O.a)("Well done, {user_name}!"),Object(O.a)("You conquered the day, {user_name}!"),Object(O.a)("Nice work, {user_name}!")]}),r}return ut()(n,[{key:"renderStatus",value:function(){var e=this.props,t=e.goal,n=e.completed,r=e.userName,c=n<t?Object(O.b)("Daily goal: <b>{num_completed}/{num_goal} task</b>","Daily goal: <b>{num_completed}/{num_goal} tasks</b>",t):Object(O.b)("Daily goal completed: <b>{num_completed}/{num_goal} task</b>","Daily goal completed: <b>{num_completed}/{num_goal} tasks</b>",t),i=Object(gt.a)(c,{num_completed:n,num_goal:t}),a=n/t,o=Object(gt.a)(this.motivatorCatelog.get(a),{user_name:Object(xt.a)(r)});return Object(M.jsxs)("div",{children:[Object(M.jsx)("h4",{dangerouslySetInnerHTML:{__html:i}}),Object(M.jsx)("p",{children:o}),Object(M.jsx)("a",{href:"#",className:"edit_link","data-track":"karma|tab_daily_edit_goal",onClick:this.props.onEditGoalClick,children:Object(O.a)("Edit goal")})]})}},{key:"renderStreaks",value:function(){if(Object(Ft.c)(this.props.currentStreak))return null;var e,t=this.props.currentStreak.count,n=0===t?Object(O.a)("You are not on a streak."):Object(gt.a)(Object(O.b)("You've completed your goal {n} day in a row.","You've completed your goal {n} days in a row.",t),{n:t});if(!Object(Ft.c)(this.props.maxStreak)){var r=this.props.maxStreak.count,c=Object(O.b)("Your longest streak: {n} day","Your longest streak: {n} days",r);c=Object(gt.a)(c,{n:r});var i=this.props.maxStreak,a=i.start,o=i.end,s=Object(Ft.b)(a,o);e=Object(M.jsxs)("p",{className:"sm",children:[c,Object(M.jsx)("br",{}),"(",s,")"]})}return Object(M.jsxs)("div",{className:"section_streak",children:[Object(M.jsx)("p",{children:n}),e]})}},{key:"render",value:function(){var e=this.props,t=e.daysItems,n=e.projectColors,r=e.goal,c=e.completed,i=e.theme_id,a=e.disableAnimation,o=e.width,s=c/r,l=Object(yt.l)(i);i!==yt.j&&i!==yt.h||(l=Object(yt.l)(yt.i)),i===yt.f&&(l=yt.b);var u=i===yt.f?yt.c:"#B3B3B3",d=s<1?u:l,j=i===yt.f?yt.c:"#E6E6E6";return Object(M.jsxs)("div",{children:[Object(M.jsxs)("div",{className:"goal_status section_progress",children:[Object(M.jsx)(Kt,{className:"pie_chart",width:72,color:l,strokeColor:j,disableAnimation:a,progress:Math.min(s,1),animationStart:500,animationDuration:1200,children:Object(M.jsx)(A.ob,{width:45,color:d})}),this.renderStatus()]}),this.renderStreaks(),Object(M.jsxs)("div",{className:"section_completebar",children:[Object(M.jsx)("h6",{className:"section_title",children:Object(O.a)("Completed in the last 7 days")}),Object(M.jsx)(Lt,{width:o,stat:t,idToColor:n,goal:r})]})]})}}]),n}(i.PureComponent);nt()(Ht,"propTypes",{width:$e.a.number,daysItems:$e.a.arrayOf($e.a.shape({date:$e.a.string,items:$e.a.array})),maxStreak:$e.a.shape({count:$e.a.number,start:$e.a.string,end:$e.a.string}),currentStreak:$e.a.object,projectColors:$e.a.object,goal:$e.a.number,completed:$e.a.number,userName:$e.a.string,color:$e.a.string,theme_id:$e.a.string,disableAnimation:$e.a.bool,onEditGoalClick:$e.a.func}),nt()(Ht,"defaultProps",{disableAnimation:!1});var Yt=n("6acW"),Wt=n.n(Yt),Gt=n("qiVK"),Qt=n.n(Gt),Jt=n("2PhI"),Xt=n("D4Sf");function Zt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return $t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $t(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function en(e){var t=e.colorHex,n=e.trendData,r=e.height,c=void 0===r?70:r,a=e.width,o=void 0===a?300:a,s=e.paddingTop,l=void 0===s?10:s,u=e.paddingRight,d=void 0===u?10:u,j=e.paddingBottom,b=void 0===j?15:j,p=e.paddingLeft,O=function(e){var t,n,r=e.trendData,c=e.width,i=e.height,a=e.paddingTop,o=e.paddingBottom,s=e.paddingLeft,l=e.paddingRight,u=e.colorHex,d=s,j=c-l,b=a,p=i-o,O=null!==(t=Qt()(r.map((function(e){return e.karma_avg}))))&&void 0!==t?t:0,f=null!==(n=St()(r.map((function(e){return e.karma_avg}))))&&void 0!==n?n:0;O===f&&(f=O+1);var h=Math.ceil((j-d)/(r.length-1));return{dataPoints:r.map((function(e,t){return{x:d+h*t,y:Object(Xt.a)(O,f,p,b,e.karma_avg),karma:e.karma_avg,date:Object(Tt.a)(e.date)}})),endY:p,colorHex:u,paddingBottom:o}}({colorHex:t,trendData:n,width:o,height:c,paddingTop:l,paddingRight:d,paddingBottom:b,paddingLeft:void 0===p?10:p}),f=Object(i.useRef)(),h=Object(i.useCallback)((function(e){!function(e){var t=e.canvas,n=e.graphData,r=n.dataPoints,c=n.endY,i=n.colorHex,a=n.paddingBottom,o=null==t?void 0:t.getContext("2d");if(t&&o){Object(It.a)(t,o),o.fillStyle="#eeeeee",o.translate(-2,0);var s,l=Zt(r);try{for(l.s();!(s=l.n()).done;){var u=s.value,d=u.x,j=u.y;o.beginPath(),o.fillStyle=i,o.arc(d,j,2,0,2*Math.PI,!1),o.fill(),o.closePath()}}catch(e){l.e(e)}finally{l.f()}o.lineWidth=2,o.strokeStyle=i;for(var b=1;b<r.length;b++){var p=r[b-1],O=r[b];o.beginPath(),o.moveTo(p.x,p.y),o.lineTo(O.x,O.y),o.stroke(),o.closePath()}o.strokeStyle="#999999",o.lineWidth=.2;var f,h=Zt(r);try{for(h.s();!(f=h.n()).done;){var m=f.value,v=m.x,g=m.y;o.beginPath(),o.moveTo(v,g),o.lineTo(v,c),o.stroke(),o.closePath()}}catch(e){h.e(e)}finally{h.f()}o.beginPath();var y=r[0],x=r[r.length-1];o.moveTo(y.x,y.y);var w,k=Zt(r.slice(1));try{for(k.s();!(w=k.n()).done;){var _=w.value,S=_.x,C=_.y;o.lineTo(S,C)}}catch(e){k.e(e)}finally{k.f()}o.lineTo(x.x,c),o.lineTo(y.x,c),o.moveTo(y.x,y.y),o.fillStyle=Object(Jt.a)(i,.1),o.fill(),o.closePath(),o.fillStyle="#999999";var P,D=Zt(r);try{for(D.s();!(P=D.n()).done;){var I=P.value,T=Me.a.getWeekdayShort(I.date);o.fillText(Wt()(T),I.x-5,c+a-4)}}catch(e){D.e(e)}finally{D.f()}}}({canvas:e,graphData:O})}),[O]);return Object(i.useEffect)((function(){return h(f.current)}),[h]),Object(M.jsxs)("div",{children:[O.dataPoints.map((function(e,t){return Object(M.jsx)(tn,{dataPoint:e},t)})),Object(M.jsx)("canvas",{ref:function(e){f.current!==e&&(f.current=e,h(f.current))},width:o,height:c})]})}function tn(e){var t=e.dataPoint;return Object(M.jsx)(C.a,{content:t.karma.toString()||"0",position:"bottom-start",gapSize:2,children:Object(M.jsx)("div",{className:"fixed_pos",style:nn({dataPoint:t,width:20,height:20})})})}function nn(e){var t=e.dataPoint,n=e.height,r=e.width;return{position:"absolute",width:"".concat(r,"px"),height:"".concat(n,"px"),marginLeft:"".concat(t.x-.5*r,"px"),marginTop:"".concat(t.y-.5*n,"px")}}var rn=n("QILm"),cn=n.n(rn),an=["level","color","width"];function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){nt()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ln=function(e){var t=e.level,n=e.color,r=e.width,c=cn()(e,an),i=r;return Object(M.jsxs)("svg",sn(sn({width:r,height:i,viewBox:"0 0 48 48"},c),{},{children:[Object(M.jsx)("defs",{children:Object(M.jsxs)("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"karma_gradient",children:[Object(M.jsx)("stop",{stopColor:n,stopOpacity:"0.7",offset:"0%"}),Object(M.jsx)("stop",{stopColor:n,offset:"100%"})]})}),Object(M.jsx)("g",{fill:"url(#karma_gradient)",children:Object(M.jsx)("path",{d:un(t)})})]}))};function un(e){switch(e){case 0:return"M24,35.5 C23.4922575,34.6160564 17.4279735,29.0769802 15.5491755,24.6276455 C15.2124383,23.6024532 15,22.6896523 15,21.9834087 C15,13.6034107 20.4495689,12.5 24,12.5 C27.5504311,12.5 33,13.6034107 33,21.9834087 C33,22.7071186 32.7747552,23.6510549 32.4199381,24.7142173 C30.5057337,29.1627926 24.5069892,34.622891 24,35.5 L24,35.5 Z";case 1:return"M24,8.5 C27.5504311,8.5 33,9.22138793 33,17.5745 C33,20.8006862 28.6608354,26.3696799 27.0133088,30.4156594 C24.3939901,36.8483505 24,39.5 24,39.5 C24,39.5 23.6029966,36.8286695 20.9866912,30.4156594 C19.3293714,26.3552975 15,20.8135546 15,17.5745 C15,9.22138793 20.4495689,8.5 24,8.5 L24,8.5 Z";case 2:return"M34.3341908,22.1449031 C34.3341908,30.6167582 25.25,37.5 25.25,37.5 L25.25,34.1295334 L25.25,18.0254439 C25.25,9.55283987 30.9014098,10.5347691 33.577238,10.5347691 C36.2523093,10.5347691 34.3341908,13.6730481 34.3341908,22.1449031 Z M14.6658092,22.1449031 C14.6658092,13.6730481 12.7476907,10.5347691 15.422762,10.5347691 C18.0985902,10.5347691 23.75,9.55283987 23.75,18.0254439 L23.75,34.1295334 L23.75,37.5 C23.75,37.5 14.6658092,30.6167582 14.6658092,22.1449031 Z";case 3:return"M11.2039067,9 C14.9126968,9 21.4,9.51672416 21.4,18.0003 L21.4,33.0003 L21.4,39 C21.4,39 12.2039067,29.4829759 12.2039067,21.00015 C12.2039067,12.5173241 9.49511662,9 12.2039067,9 Z M35.7960933,9 C38.5048834,9 35.7960933,12.5173241 35.7960933,21.00015 C35.7960933,29.4829759 26.6,39 26.6,39 L26.6,33.0003 L26.6,18.0003 C26.6,9.51672416 33.0873032,9 35.7960933,9 Z";case 4:return"M8.73765498,11.0652174 C11.3560232,11.0652174 20.952381,17.6768433 20.952381,26.2826087 L20.952381,41.5 C20.952381,41.5 12.8049045,40.0483335 11.7911456,23.2392826 C11.2728156,14.6494947 6.11928675,11.0652174 8.73765498,11.0652174 Z M39.2364976,11.0652174 C41.9171215,11.0652174 36.7196515,14.6494947 36.1894684,23.2392826 C35.1511932,40.0483335 27.047619,41.5 27.047619,41.5 L27.047619,26.2826087 C27.047619,17.6768433 36.5558736,11.0652174 39.2364976,11.0652174 Z M24,6.5 C25.1835937,6.5 27,6.9975096 27,10.7796525 C27,14.5617954 24,20.1956522 24,20.1956522 C24,20.1956522 21,14.5617954 21,10.7796525 C21,6.9975096 22.8164062,6.5 24,6.5 Z";case 5:return"M6,19.6363636 C12.5502577,19.6363636 18.4900102,25.0448977 20.694,31.2730389 C22.5754726,36.5892127 23.6326531,37.091013 23.6326531,37.091013 C23.6326531,37.091013 23.6326531,35.8183312 23.6326531,40 C18.7655089,40 13.9747698,37.0488327 11.8773061,31.2730389 C8.2759868,21.3533932 6,22.4900799 6,19.6363636 Z M24.0003646,8 C24.0003646,8 27.2843944,9.21376761 29.8334549,10.9089697 C31.4258885,11.9678347 32.75,13.8179394 32.75,13.8179394 C32.75,13.8179394 29.1940023,16.6076413 26.9169097,19.6366061 C24.8272051,22.4153994 24.0003646,25.4545455 24.0003646,25.4545455 C24.0003646,25.4545455 23.2464376,22.5128498 21.0838194,19.6366061 C18.8723491,16.6956377 15.25,13.8179394 15.25,13.8179394 C15.25,13.8179394 16.6156723,11.9401995 18.1672743,10.9089697 C20.7272718,9.20649518 24.0003646,8 24.0003646,8 Z M42,19.6363636 C42,22.8173409 39.7240132,21.3533932 36.1226939,31.2730389 C34.0252302,37.0488327 29.2344911,40 24.3673469,40 C24.3673469,35.8183312 24.3673469,37.091013 24.3673469,37.091013 C24.3673469,37.091013 25.4245274,36.5892127 27.306,31.2730389 C29.5099898,25.0448977 35.4497423,19.6363636 42,19.6363636 Z";case 6:return"M30.9866785,26.31856 C32.837713,23.4054756 34.6740291,20.8399049 35.9673256,19.4937112 C44.7374194,10.3631561 40.9311693,24.5778132 38.9839734,28.3050478 C35.4253273,35.1146488 25.6142613,39.9058175 24.0979394,40.6151368 C24.0993101,40.6463881 24.1000004,40.6767717 24.1000004,40.706272 C24.1000004,40.706272 24.0637515,40.6918003 23.9946652,40.6631075 C23.9325212,40.6917468 23.8999996,40.706272 23.8999996,40.706272 C23.8999996,40.6796963 23.9005913,40.6523374 23.9017671,40.6242081 C22.3844859,39.9841274 12.5746114,35.6300737 9.01629119,28.6310582 C7.06832754,24.8011907 3.26289798,10.1910951 12.0328822,19.5752138 C13.3493838,20.9837268 15.2285682,23.6081896 17.1131724,26.5614364 L13,16.556599 L21.0668622,24.8577897 C21.0668622,24.8577897 22.5334311,26.3670971 24,26.3670971 C25.4665689,26.3670971 26.9331378,24.8577897 26.9331378,24.8577897 L35,16.556599 L30.9866785,26.31856 Z M24,7.5 L31.5,11.9997188 L24,19.5 L16.5,11.9997188 L24,7.5 Z";case 7:return"M21.0001875,18.8888348 C21.0001875,18.8888348 22.5000937,20.3702066 24,20.3702066 C25.4999063,20.3702066 26.9998125,18.8888348 26.9998125,18.8888348 L36,9.99986364 L26.9998125,27.7770653 C26.9998125,27.7770653 25.4249109,29.9998636 24,29.9998636 C22.431848,29.9998636 21.0001875,27.7770653 21.0001875,27.7770653 L12,9.99986364 L21.0001875,18.8888348 Z M23.75,40 C23.75,40 12.4318815,35.5474524 8.5377368,27.9997955 C6.57317123,24.1937185 2.73530912,9.67437844 11.5800373,19.0002045 C15.3623775,22.9877733 23.75,36.7818963 23.75,40 Z M23.75,40.072485 C23.75,36.8543812 32.1376225,23.0602582 35.9199627,19.0726895 C44.7646909,9.7468634 40.9268288,24.2662034 38.9622632,28.0722804 C35.0681185,35.6199373 23.75,40.072485 23.75,40.072485 Z M30,9.99986364 L24,16.0003409 L18,9.99986364 L24,7 L30,9.99986364 Z"}}ln.propTypes={level:$e.a.number,color:$e.a.string,width:$e.a.oneOfType([$e.a.number,$e.a.string])};var dn=ln;function jn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mt()(e);if(t){var c=mt()(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return ft()(this,n)}}var bn=function(e){pt()(n,e);var t=jn(n);function n(e){var r;return st()(this,n),(r=t.call(this,e)).karmaTitles=[_x("karma","You are a <b>Beginner</b>"),_x("karma","You are a <b>Novice</b>"),_x("karma","You are an <b>Intermediate</b>"),_x("karma","You are a <b>Professional</b>"),_x("karma","You are an <b>Expert</b>"),_x("karma","You are a <b>Master</b>"),_x("karma","You are a <b>Grand Master</b>"),_x("karma","You are <b>Enlightened</b>")],r}return ut()(n,[{key:"render",value:function(){var e=this.props,t=e.karma,n=e.theme,r=e.trendData,c=e.disableAnimation,i=Object(yt.l)(n);n!==yt.j&&n!==yt.h||(i=Object(yt.l)(yt.i)),n===yt.f&&(i=yt.b);var a=n===yt.f?"#3e3e3e":"#E6E6E6",o=Object(Ft.e)(t),s=this.karmaTitles[o],l=null,u=1;if(!(o==Ft.d.length-1)){var d=Ft.d[o],j=Ft.d[o+1];u=(t-d)/(j-d);var b=j-t;Object(O.a)("{karma_num} left to get to {karma_level}");var p=_n("{karma_num} point required for next level","{karma_num} points required for next level",b);l=Object(M.jsx)("p",{children:Object(gt.a)(p,{karma_num:b})})}return Object(M.jsxs)("div",{children:[Object(M.jsxs)("div",{className:"section_progress",children:[Object(M.jsx)(Kt,{className:"pie_chart",width:72,color:i,strokeColor:a,progress:u,disableAnimation:c,animationStart:500,animationDuration:1200,children:Object(M.jsx)(dn,{level:o,color:i,width:45})}),Object(M.jsxs)("h4",{children:[Object(M.jsx)("span",{dangerouslySetInnerHTML:{__html:s}})," (".concat(t,")")]}),l,Object(M.jsx)("a",{href:"#",className:"edit_link","data-track":"karma|tab_karma_about_levels",onClick:this.props.onKarmaInfoClick,children:Object(O.a)("About Karma Levels")})]}),Object(M.jsxs)("div",{className:"section_completebar",children:[Object(M.jsx)("h6",{className:"section_title",children:Object(O.a)("Karma trend")}),Object(M.jsx)(en,{trendData:r,colorHex:i,width:280})]})]})}}]),n}(i.PureComponent);function pn(e){var t=e.color,n=Object(O.a)("Weekly goals and streaks are Premium features. <a>Learn more</a>").replace("<a>",'<a href="'.concat(P.i,'" target="_blank" rel="noopener noreferrer">'));return Object(M.jsx)("div",{children:Object(M.jsxs)("div",{className:"goal_status section_progress",style:{border:0},children:[Object(M.jsx)(Kt,{className:"pie_chart",width:72,iconType:"trophy",color:t,disableAnimation:!0,progress:0,children:Object(M.jsx)(A.rc,{width:45})}),Object(M.jsx)("h4",{style:{marginTop:"1em"},dangerouslySetInnerHTML:{__html:n}})]})})}function On(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mt()(e);if(t){var c=mt()(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return ft()(this,n)}}nt()(bn,"propTypes",{color:$e.a.string,karma:$e.a.number,trendData:$e.a.arrayOf($e.a.shape({date:$e.a.string,karma_avg:$e.a.number})),onKarmaInfoClick:$e.a.func,disableAnimation:$e.a.bool,theme_id:$e.a.string}),nt()(bn,"defaultProps",{disableAnimation:!1}),pn.propTypes={color:$e.a.string};var fn=function(e){pt()(n,e);var t=On(n);function n(e){var r;return st()(this,n),(r=t.call(this,e)).motivatorCatelog=new Mt({p0:[Object(O.a)("Big things happen one task at a time."),Object(O.a)("Starting is the hardest part. You\u2019ve got this!"),Object(O.a)("Build momentum with one small task.")],p25:[Object(O.a)("You\u2019re on the right track!"),Object(O.a)("Nice start! Keep it up."),Object(O.a)("Keep up the momentum!")],p75:[Object(O.a)("Keep up the pace!"),Object(O.a)("Nothing can stop you!"),Object(O.a)("Your focus is unbreakable!")],p100:[Object(O.a)("It\u2019s the final stretch. You\u2019ve got this!"),Object(O.a)("The end is in sight. Go for it!"),Object(O.a)("Just a bit more to go!"),Object(O.a)("Your goal is within reach!")],p100plus:[Object(O.a)("You did it, {user_name}!"),Object(O.a)("Nice work, {user_name}!"),Object(O.a)("Nicely done, {user_name}!"),Object(O.a)("You conquered the week!"),Object(O.a)("Treat yourself. You deserve it, {user_name}!")]}),r}return ut()(n,[{key:"renderStatus",value:function(){var e=this.props,t=e.goal,n=e.completed,r=_n("Weekly goal: <b>{num_completed}/{num_goal} task</b>","Weekly goal: <b>{num_completed}/{num_goal} tasks</b>",t),c=_n("Weekly goal completed: <b>{num_completed}/{num_goal} task</b>","Weekly goal completed: <b>{num_completed}/{num_goal} tasks</b>",t),i=Object(O.a)("Edit goal"),a=n<t?r:c;a=Object(gt.a)(a,{num_completed:n,num_goal:t});var o=n/t,s=Object(gt.a)(this.motivatorCatelog.get(o),{user_name:Object(xt.a)(this.props.userName)});return Object(M.jsxs)("div",{children:[Object(M.jsx)("h4",{dangerouslySetInnerHTML:{__html:a}}),Object(M.jsx)("p",{children:s}),Object(M.jsx)("a",{href:"#",className:"edit_link","data-track":"karma|tab_weekly_edit_goal",onClick:this.props.onEditGoalClick,children:i})]})}},{key:"renderStreaks",value:function(){if(Object(Ft.c)(this.props.currentStreak))return null;var e,t=this.props.currentStreak.count,n=_n("You've completed your goal {n} week in a row.","You've completed your goal {n} weeks in a row.",t);if(n=Object(gt.a)(n,{n:t}),!Object(Ft.c)(this.props.maxStreak)){var r=this.props.maxStreak.count,c=_n("Your longest streak: {n} week","Your longest streak: {n} weeks",r);c=Object(gt.a)(c,{n:r});var i=this.props.maxStreak,a=i.start,o=i.end,s=Object(Ft.b)(a,o);e=Object(M.jsxs)("p",{className:"sm",children:[c,Object(M.jsx)("br",{}),"(",s,")"]})}return Object(M.jsxs)("div",{className:"section_streak",children:[Object(M.jsx)("p",{children:n}),e]})}},{key:"render",value:function(){var e=this.props,t=e.weekItems,n=e.projectColors,r=e.completed,c=e.goal,i=e.theme,a=e.disableAnimation,o=e.width,s=r/c,l=Object(yt.l)(i);i!==yt.j&&i!==yt.h||(l=Object(yt.l)(yt.i)),i===yt.f&&(l=yt.b);var u=i===yt.f?yt.c:"#B3B3B3",d=s<1?u:l,j=i===yt.f?yt.c:"#E6E6E6";return Object(M.jsxs)("div",{children:[Object(M.jsxs)("div",{className:"goal_status section_progress",children:[Object(M.jsx)(Kt,{className:"pie_chart",width:72,iconType:"trophy",color:l,strokeColor:j,disableAnimation:a,progress:Math.min(r/c,1),animationStart:500,animationDuration:1200,children:Object(M.jsx)(A.rc,{width:45,color:d})}),this.renderStatus()]}),this.renderStreaks(),Object(M.jsxs)("div",{className:"section_completebar",children:[Object(M.jsx)("h6",{className:"section_title",children:Object(O.a)("Completed in the last 4 weeks")}),Object(M.jsx)(Lt,{width:o,color:l,stat:t,idToColor:n,goal:c})]})]})}}]),n}(i.PureComponent);function hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mt()(e);if(t){var c=mt()(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return ft()(this,n)}}nt()(fn,"propTypes",{stat:$e.a.object,completed:$e.a.number,goal:$e.a.number,weekItems:$e.a.arrayOf($e.a.shape({items:$e.a.array})),maxStreak:$e.a.shape({count:$e.a.number,start:$e.a.string,end:$e.a.string}),currentStreak:$e.a.object,projectColors:$e.a.object,color:$e.a.string,userName:$e.a.string,disableAnimation:$e.a.bool,onEditGoalClick:$e.a.func,theme_id:$e.a.string,width:$e.a.number}),nt()(fn,"defaultProps",{disableAnimation:!1});var mn=function(e){pt()(n,e);var t=hn(n);function n(e){var r;return st()(this,n),(r=t.call(this,e)).state={current:"daily",shown:{}},r.onTabChange=r.onTabChange.bind(jt()(r)),r}return ut()(n,[{key:"onTabChange",value:function(e){var t=this.state,n=t.shown,r=t.current,c={shown:n,current:e};r&&(c[r]=!0),this.setState(c)}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.hideKarma,r=e.theme_id,c=e.canAccessWeeklyTrends,i=e.onClose,a=e.canViewCompletedTasks,o=e.onPreventCompletedTasksView,s=this.props.stat.goals,l=s.daily_goal,u=s.current_daily_streak,d=s.max_daily_streak,j=s.weekly_goal,b=s.current_weekly_streak,p=s.max_weekly_streak,f=this.props.stat,h=f.karma,m=f.days_items,v=f.week_items,g=f.project_colors,y=f.karma_graph_data,x=f.completed_count,w=Object(gt.a)(_n("{count_num} completed task","{count_num} completed tasks",x),{count_num:x}),k=this.state.shown;return Object(M.jsxs)("div",{className:"completed_quick_viz",style:{width:"".concat(this.props.width,"px")},children:[Object(M.jsxs)("div",{className:"total_stat",children:[Object(M.jsx)("span",{children:w}),a?Object(M.jsx)(E.a,{view:{type:"activity"},search:"?eventType=".concat(encodeURIComponent("item:completed"),"&userId=").concat(t.id),"data-track":"karma|view_completed_tasks",onClick:i,children:Object(O.a)("View all completed tasks")}):Object(M.jsx)("button",{className:"productivity_stat__completed_tasks_button","data-track":"karma|view_completed_tasks",onClick:o,children:Object(O.a)("View all completed tasks")})]}),Object(M.jsxs)(vt.d,{variant:"neutral",onSelectedIdChange:this.onTabChange,children:[Object(M.jsx)(ge.a,{display:"flex",justifyContent:"center",children:Object(M.jsxs)(vt.b,{"aria-label":Object(O.a)("Stats by category"),children:[Object(M.jsx)(vt.a,{id:"daily",track:"karma|tab_daily",children:Object(O.d)("stat","Daily")}),Object(M.jsx)(vt.a,{id:"weekly",track:"karma|tab_weekly",children:Object(O.d)("stat","Weekly")}),n?null:Object(M.jsx)(vt.a,{id:"karma",track:"karma|tab_karma",children:Object(O.d)("stat","Karma")})]})}),Object(M.jsx)(vt.c,{id:"daily",render:"lazy",children:Object(M.jsx)(Ht,{width:this.props.width,userName:t.full_name,daysItems:m,maxStreak:d,projectColors:g,completed:this.props.completedToday,goal:l,currentStreak:u,theme_id:r,disableAnimation:k.daily,onEditGoalClick:this.props.onSettingEditClick})}),Object(M.jsx)(vt.c,{id:"weekly",render:"lazy",children:c?Object(M.jsx)(fn,{width:this.props.width,userName:t.full_name,weekItems:v,maxStreak:p,projectColors:g,completed:this.props.completedThisWeek,goal:j,currentStreak:b,theme_id:r,disableAnimation:k.weekly,onEditGoalClick:this.props.onSettingEditClick}):Object(M.jsx)(pn,{})}),Object(M.jsx)(vt.c,{id:"karma",render:"lazy",children:Object(M.jsx)(bn,{karma:h,theme_id:r,trendData:y,disableAnimation:k.karma,onKarmaInfoClick:this.props.onKarmaInfoClick})})]}),Object(M.jsx)("div",{className:"section_setting_link",children:Object(M.jsx)("a",{href:"#","data-track":"karma|karma_goals_and_settings",onClick:this.props.onSettingEditClick,children:Object(O.a)("Karma Goals and Settings")})})]})}}]),n}(i.PureComponent);nt()(mn,"propTypes",{stat:$e.a.object.isRequired,completedToday:$e.a.number.isRequired,completedThisWeek:$e.a.number.isRequired,onClose:$e.a.func.isRequired,user:$e.a.object.isRequired,onKarmaInfoClick:$e.a.func,onSettingEditClick:$e.a.func,canViewCompletedTasks:$e.a.bool,onPreventCompletedTasksView:$e.a.func,canAccessWeeklyTrends:$e.a.bool,hideKarma:$e.a.bool,theme_id:$e.a.string,width:$e.a.number}),nt()(mn,"defaultProps",{width:300,canAccessWeeklyTrends:!1,theme_id:0,hideKarma:!1});var vn=n("TcCo"),gn=n("A72/"),yn=n("7HK4"),xn=n("GpCm");function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(n),!0).forEach((function(t){nt()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sn=ct()(0,"completed_count"),Cn=ct()(0,"days_items[0].total_completed"),Pn=ct()(0,"week_items[0].total_completed");function Dn(e){var t=e.onClose,n=function(){var e=Object(i.useState)(null),t=c()(e,2),n=t[0],r=t[1],o=Object(i.useState)(null),s=c()(o,2),l=s[0],u=s[1],d=Object(a.g)(),j=Object(i.useRef)();return j.current||(j.current=d(Object(et.c)()).then(r).catch(u)),[!n&&!l,n,l]}(),r=c()(n,3),o=r[0],s=r[1],l=r[2],u=Object(_.a)(),d=Object(a.h)((function(e){return{canViewCompletedTasks:Object(gn.b)(e),canAccessWeeklyTrends:Object(gn.c)(e),hideKarma:!!e.user.karma_disabled,user:e.user}}));function j(e){null==e||e.preventDefault(),t(),it.a.showPrefs("karma")}if(o)return Object(M.jsx)("div",{className:"status_loading",children:Object(M.jsx)(vn.b,{})});if(l)return Object(M.jsxs)("div",{className:"status_error",children:[Object(M.jsx)("p",{children:Object(O.a)("Productivity report requires an Internet connection")}),Object(M.jsx)("p",{children:Object(O.a)("Please check your connection and try again")})]});var b=Sn(s),p=Cn(s),f=Pn(s);return 0===b?Object(M.jsx)(yn.f,{onButtonClick:j}):Object(M.jsx)(mn,kn(kn({},d),{},{theme:u,stat:s,width:300,completedToday:p,completedThisWeek:f,onSettingEditClick:j,onKarmaInfoClick:function(e){null==e||e.preventDefault(),it.a.showKarmaInfo()},onPreventCompletedTasksView:at.c,onClose:t}))}function In(e){var t=e.anchor,n=e.onClose;return Object(M.jsx)(xn.c,{withArrow:!1,isShown:!0,renderReferenceElement:t,onClose:n,position:"bottom",offset:[-50,0],zIndex:1e4,children:Object(M.jsxs)("div",{className:"productivity_stat_popper",children:[Object(M.jsx)("header",{children:Object(M.jsx)("h1",{autoFocus:!0,tabIndex:-1,className:"no-focus-marker",children:Object(O.a)("Your Productivity")})}),Object(M.jsx)("div",{className:"productivity_stat_popper__content",children:Object(M.jsx)(Dn,{onClose:n})})]})})}Dn.propTypes={onClose:$e.a.func.isRequired},In.propTypes={anchor:$e.a.instanceOf(HTMLElement),onClose:$e.a.func.isRequired};var Tn=n("8dZE");function En(e){var t=e.vacationMode,n=e.completed,r=e.goal,a=e.disabled,o=Object(i.useState)(!1),s=c()(o,2),l=s[0],d=s[1],j=Object(i.useRef)(),b=Math.min(n/r,1);Object(i.useEffect)((function(){function e(){d(!0)}return Signals.connect("productivity_stat_show",e),function(){return Signals.disconnect("productivity_stat_show",e)}}),[]);var p=Object(i.useCallback)((function(){d((function(e){return!e}))}),[]);return Object(N.n)({identifier:"OPEN_PRODUCTIVITY_MENU",handler:p}),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(Qe.a,{"aria-label":Object(O.a)("Productivity"),id:"top_completed_holder",className:u()("completed_pie_stat","top_bar_btn",{top_completed_holder_open:l}),"data-track":"navigation|karma",onClick:p,ref:j,tooltip:Object(M.jsx)(N.g,{identifier:"OPEN_PRODUCTIVITY_MENU"}),disabled:a,children:[Object(M.jsx)(Tn.a,{vacationMode:t,progress:b,outline:!0}),0===r?null:Object(M.jsxs)("span",{className:"count",children:[n,"/",r]})]}),l?Object(M.jsx)(In,{anchor:j.current,onClose:function(){return d(!1)}}):null]})}En.propTypes={vacationMode:$e.a.bool,completed:$e.a.number,goal:$e.a.number,disabled:$e.a.bool};var An=Object(a.c)((function(e){var t=e.stats,n=e.user;return t&&n?{vacationMode:n.features.karma_vacation,goal:Object(et.f)(e),completed:Object(et.i)(e)}:{}}))(En),Nn=n("/6o7");function Rn(e){var t=e.disabled,n=Object(a.g)();return Object(M.jsx)(Qe.a,{id:"quick_add_task_holder",className:"top_bar_btn",onClick:function(){n(Object(Nn.d)({type:Nn.a.QUICK_ADD}))},title:Object(O.a)("Quick Add Task"),shortcut:"q",tooltip:Object(M.jsx)(N.g,{identifier:"OPEN_QUICK_ADD"}),"data-track":"navigation|quick_add","aria-label":Object(O.a)("Quick Add"),disabled:t,children:Object(M.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(M.jsxs)("g",{fill:"none",fillRule:"evenodd",transform:"translate(4 3)",children:[Object(M.jsx)("mask",{id:"jd4FBg",fill:"#fff",children:Object(M.jsx)("path",{d:"M9 8h7a.5.5 0 1 1 0 1H9v7a.5.5 0 1 1-1 0V9H1a.5.5 0 0 1 0-1h7V1a.5.5 0 0 1 1 0v7z"})}),Object(M.jsx)("g",{mask:"url(#jd4FBg)",children:Object(M.jsx)("path",{fill:"currentColor",d:"M-4-3h24v24H-4z"})})]})})})}var Ln=n("I4sn"),Mn=n("g2hZ"),zn=n("oDV5"),Bn=n("PzWS"),qn=n("oHNl"),Un=n("Wv30"),Kn=n("nyrj"),Fn=n("aL1g"),Vn=n("+HCy"),Hn=n("ZCeu"),Yn=n("7SJp"),Wn=n("XF1C"),Gn="nF7qj1vItzc-9lEtPBh8ww==";function Qn(){return Object(a.h)((function(e){return Boolean(Object(Mn.b)(e))}))?Object(M.jsxs)(M.Fragment,{children:["serviceWorker"in navigator?Object(M.jsx)(Re.d,{exceptionallySetClassName:Gn,onSelect:Wn.a.loadNewVersion,children:Object(O.a)("New version available")}):Object(M.jsx)(Re.d,{exceptionallySetClassName:Gn,onSelect:function(){return window.location.reload()},children:Object(O.a)("New version available")}),Object(M.jsx)("hr",{})]}):null}function Jn(e,t){navigator.onLine||(e.preventDefault(),alert(Object(O.a)("You appear to be offline or Todoist is down. This action requires that you are online. Please try again later."))),"blocked"===t.verification_status&&e.preventDefault()}function Xn(e){var t=e.firstItemRef,n=Object(o.j)(),r=Object(a.h)(v.n,a.f),c=Object(a.h)(v.g),i=Object(a.h)(v.f);/@doist\.(com|io|test)$/i.test(null==r?void 0:r.email)&&Object(qn.b)("global.teams");var s=Un.a.isSupported(),l=r.is_biz_admin,u=r.is_premium,d=g.isElectron&&g.isMac,j=!g.isMacApp&&!d&&!r.business_account_id,b=Object(w.b)(),p=b.copyToClipboard,f=b.isCopyToClipboardSupported;function h(){return"v".concat(Ln.a.version?Ln.a.version:" ".concat(Object(O.a)("Unknown"))).concat(Ln.a.isBeta?" (".concat(Object(O.a)("beta"),")"):"")}return Object(M.jsxs)(Re.e,{"aria-label":Object(O.a)("Settings menu"),exceptionallySetClassName:"user_menu",children:[Object(M.jsx)(Re.d,{id:"user_menu_settings_menuitem",ref:t,as:Vn.e,to:"/app/settings/account",onClick:function(e){return Jn(e,r)},children:Object(M.jsxs)(zn.a,{width:"full",space:"xsmall",children:[Object(M.jsxs)(Bn.a,{"aria-hidden":"true",children:[Object(M.jsx)("div",{className:"avatar_container",children:Object(M.jsx)(xe.a,{user:r,size:"large"})}),Object(M.jsxs)("div",{className:"user_menu_details_text",children:[Object(M.jsx)("strong",{children:r.full_name}),Object(M.jsx)("p",{className:"user_menu_email",children:r.email})]})]}),Object(M.jsxs)(Bn.a,{children:[Object(M.jsx)(A.fc,{"aria-hidden":"true",className:"svg_icon"}),Object(M.jsxs)("span",{className:"user_menu_label",children:[Object(O.a)("Settings")," "]}),Object(M.jsx)(N.e,{identifier:"OPEN_SETTINGS"})]})]})}),Object(M.jsx)("hr",{}),i?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(Re.d,{onSelect:function(){Object(Fn.a)({onCreate:function(e){return n(Object(Hn.a)(e))}})},children:[Object(M.jsx)(ge.a,{className:"svg_icon",display:"flex",alignItems:"center",justifyContent:"center",children:Object(M.jsx)(A.Pb,{"aria-hidden":"true"})}),Object(M.jsxs)("span",{className:"user_menu_label",children:[Object(O.a)("Create a workspace")," "]})]}),Object(M.jsx)("hr",{})]}):null,s?Object(M.jsxs)(Re.d,{onSelect:function(){Un.a.launch()},children:[Object(M.jsx)(A.Qb,{"aria-hidden":"true"}),Object(M.jsx)("span",{className:"user_menu_label",children:Object(O.a)("Popout in a window")})]}):null,Object(M.jsxs)(Re.d,{as:Vn.e,to:"/app/settings/theme",onClick:function(e){return Jn(e,r)},children:[Object(M.jsx)(A.oc,{"aria-hidden":"true"}),Object(M.jsx)("span",{className:"user_menu_label",children:Object(O.a)("Theme")}),Object(M.jsx)(N.e,{identifier:"OPEN_THEMES"})]}),Object(M.jsxs)(Re.d,{as:E.a,view:{type:"activity"},children:[Object(M.jsx)(Yn.a,{"aria-hidden":"true"}),Object(M.jsx)("span",{className:"user_menu_label",children:Object(O.a)("Activity log")}),Object(M.jsx)(N.e,{identifier:"OPEN_ACTIVITY_LOG"})]}),Object(M.jsxs)(Re.d,{onSelect:function(){Signals.sendSignal("open_print_mode")},children:[Object(M.jsx)(A.Ub,{"aria-hidden":"true"}),Object(M.jsx)("span",{className:"user_menu_label",children:Object(O.a)("Print")}),Object(M.jsx)(N.e,{identifier:"PRINT_VIEW"})]}),Object(M.jsxs)(Re.d,{as:Vn.e,to:"/app/settings/integrations",onClick:function(e){return Jn(e,r)},children:[Object(M.jsx)(A.X,{"aria-hidden":"true"}),Object(M.jsx)("span",{className:"user_menu_label",children:Object(O.a)("Integrations")})]}),u&&!j&&!l||g.isMacApp||d?null:Object(M.jsx)("hr",{}),u?null:Object(M.jsxs)(Re.d,{as:"a",href:"/premium",target:"_blank",rel:"noopener noreferrer",children:[Object(M.jsx)(A.mc,{"aria-hidden":"true",variant:"goldFilled"}),Object(M.jsx)("span",{className:"user_menu_label",children:Object(O.a)("Upgrade to Pro")})]}),j?Object(M.jsxs)(Re.d,{as:"a",onClick:function(e){return function(e,t){t||(e.preventDefault(),alert(Object(O.a)("Upgrading to Todoist Business is not available for unverified accounts.")))}(e,c)},href:"/business",target:"_blank",rel:"noopener noreferrer",children:[Object(M.jsx)(A.Ib,{className:"business_icon","aria-hidden":"true"}),Object(M.jsx)("span",{className:"user_menu_label",children:Object(O.a)("Upgrade to Business")})]}):null,l?Object(M.jsxs)(Re.d,{as:"a",href:"/business/users",target:"_blank",rel:"noopener noreferrer",children:[Object(M.jsx)(A.Ib,{className:"business_icon","aria-hidden":"true"}),Object(M.jsx)("span",{className:"user_menu_label",children:Object(O.a)("Business admin")})]}):null,g.isMacApp||d?null:Object(M.jsxs)(Re.d,{as:"a",href:"/downloads",target:"_blank",rel:"noopener noreferrer",children:[Object(M.jsx)(A.Ob,{"aria-hidden":"true"}),Object(M.jsx)("span",{className:"user_menu_label",children:Object(O.a)("Download apps")})]}),!u||j||l||!g.isMacApp&&!d?Object(M.jsx)("hr",{}):null,Object(M.jsxs)(Re.d,{onSelect:function(){Kn.default.logout()},children:[Object(M.jsx)(A.jb,{"aria-hidden":"true"}),Object(M.jsx)("span",{className:"user_menu_label",children:Object(O.a)("Log out")})]}),Object(M.jsx)("hr",{}),Object(M.jsx)(Qn,{}),Object(M.jsxs)("div",{"aria-label":Object(O.a)("Todoist version info"),className:"user_menu_version","data-testid":"user_menu_version",children:[Object(M.jsx)(Re.d,{"aria-describedby":"copy_btn_a11y_helper","aria-label":"".concat(Object(O.a)("Version")," ").concat(h()),disabled:!f,onSelect:function(){return p(h(),{onSuccessMessage:Object(O.a)("Version number copied!")})},children:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(C.a,{content:Object(O.a)("Copy version number"),children:Object(M.jsx)("span",{className:"user_menu_label",children:h()})}),f?Object(M.jsx)(oe.a,{id:"copy_btn_a11y_helper",children:Object(O.a)("Press enter to copy version number")}):null]})}),Object(M.jsx)("span",{children:"\xb7"}),Object(M.jsx)(Re.d,{as:"a",href:P.q,target:"_blank",rel:"noopener noreferrer",children:Object(M.jsx)("span",{className:"user_menu_label",children:Object(O.a)("What's new")})})]})]})}var Zn=Object(a.c)((function(e){return{newVersion:Object(Mn.b)(e),user:Object(v.n)(e)}}))((function(e){var t=e.newVersion,n=e.user,r=Object(i.useRef)(null),c=Object(i.useRef)(null),a=Object(i.useCallback)((function(){var e,t;null==r||null===(e=r.current)||void 0===e||e.click(),null==c||null===(t=c.current)||void 0===t||t.focus()}),[r]);Object(N.n)({identifier:"OPEN_USER_MENU",handler:a});var o=Ln.a.version,s=Boolean(t&&(!o||"number"==typeof o&&parseInt(t,10)-o>10));return Object(M.jsxs)(Re.a,{children:[Object(M.jsx)(C.a,{content:Object(M.jsx)(N.g,{identifier:"OPEN_USER_MENU"}),children:Object(M.jsxs)(Re.b,{"aria-label":Object(O.a)("Settings"),exceptionallySetClassName:"top_bar_btn settings_btn",ref:r,children:[Object(M.jsx)(xe.a,{user:n,size:"large",exceptionallySetClassName:"settings_avatar"}),s?Object(M.jsx)("span",{className:"new_version_indicator","data-testid":"new_version_indicator"}):null]})}),Object(M.jsx)(Xn,{firstItemRef:c})]})})),$n=n("y09m"),er="PAU6+xJ9PRgUFqaHVIoelQ==",tr="dwIBUGdPG7mHUllf98YsxA==";function nr(){var e=Object(i.useState)(0),t=c()(e,2),n=t[0],r=t[1];return Object(i.useEffect)((function(){function e(){var e=Le.default.getInstance().scheduled_sync_time,t=e?e-Date.now():0;r(t>0?Math.ceil(t/1e3):0)}var t=setInterval(e,1e3);return e(),function(){return clearInterval(t)}})),n?Object(M.jsx)(le.a,{children:Object(O.a)("Trying again in %s seconds...").replace("%s",String(n))}):null}var rr=n("qOqX"),cr=n("sEfC"),ir=n.n(cr);function ar(){var e=Object(i.useState)("online"),t=c()(e,2),n=t[0],r=t[1],a=Object(i.useMemo)((function(){return ir()((function(){r(Le.default.getInstance().getSyncState()===Le.default.getInstance().sync_states.syncing?"syncing":Le.default.getInstance().global_error?"offline":Le.default.getInstance().getReportableErrorQueue().length?"sync_error":Kn.default.fetchedDataFromServer?"online":"offline")}),100)}),[]);return Object(i.useEffect)((function(){return Signals.connect("sync_state_changed",a),function(){Signals.disconnect("sync_state_changed",a)}}),[a]),n}function or(){Le.default.getInstance().sync(null,{from_user_action:!0})}function sr(){var e=function(){var e=Object(i.useState)(navigator.onLine?"online":"offline"),t=c()(e,2),n=t[0],r=t[1];return Object(i.useEffect)((function(){function e(){r(navigator.onLine?"online":"offline")}return window.addEventListener("online",e),window.addEventListener("offline",e),function(){window.removeEventListener("online",e),window.removeEventListener("offline",e)}}),[]),Object(rr.a)((function(){"online"===n&&Le.default.getInstance().sync()}),[n]),n}(),t=ar();return"syncing"===t?Object(M.jsx)(vn.a,{"aria-label":Object(O.a)("Syncing\u2026")}):"offline"===e?Object(M.jsx)(s.a,{variant:"quaternary",exceptionallySetClassName:"top_bar_btn",icon:Object(M.jsx)(A.zc,{className:tr,"aria-hidden":!0}),"aria-label":Object(O.a)("Force sync"),tooltip:Object(M.jsxs)("div",{className:er,children:[Object(M.jsx)(le.a,{weight:"bold",children:Object(O.a)("Offline mode is on")}),Object(M.jsx)(le.a,{children:Object(O.a)("Looks like you're not connected to the Internet. Changes you make in offline mode will be synced when you reconnect.")})]}),onClick:or}):"offline"===t?Object(M.jsx)(s.a,{variant:"quaternary",exceptionallySetClassName:"top_bar_btn",icon:Object(M.jsx)(A.zc,{className:tr,"aria-hidden":!0}),"aria-label":Object(O.a)("Force sync"),tooltip:Object(M.jsxs)("div",{className:er,children:[Object(M.jsx)(le.a,{weight:"bold",children:Object(O.a)("Offline mode is on")}),Object(M.jsx)(le.a,{children:Object(O.a)("We're having trouble reaching the Todoist servers. Changes you make in offline mode will be synced once we're able to reconnect.")}),Object(M.jsx)(le.a,{children:Object(O.a)("Click on this icon to force a sync.")}),Object(M.jsx)(nr,{})]}),onClick:or}):"sync_error"===t?Object(M.jsx)(s.a,{variant:"quaternary",exceptionallySetClassName:"top_bar_btn",icon:Object(M.jsx)(A.zc,{className:tr,"aria-hidden":!0}),"aria-label":Object(O.a)("Show sync errors"),tooltip:Object(M.jsxs)("div",{className:er,children:[Object(M.jsx)(le.a,{weight:"bold",children:Object(O.a)("Sync issues")}),Object(M.jsx)(le.a,{children:Object(O.a)("We could not sync some updates")}),Object(M.jsx)(le.a,{children:Object(O.a)("Click here for more details")}),Object(M.jsx)(nr,{})]}),onClick:function(){$n.a.show()}}):null}var lr=n("n9v8");function ur(){var e=Object(i.useState)(!1),t=c()(e,2),n=t[0],r=t[1];function a(e){Object(p.a)().changeWindowState(e)}return Object(k.a)("changeWindowState",(function(e){"maximize"===e?r(!0):"restore-down"===e&&r(!1)})),Object(M.jsxs)("div",{className:"windows_control_background",children:[Object(M.jsx)(Qe.a,{onClick:function(){a("minimize")},title:Object(O.a)("Minimize"),"aria-label":Object(O.a)("Minimize window"),className:"top_bar_btn windows_control_btn",children:Object(M.jsx)(lr.c,{"aria-hidden":!0})}),Object(M.jsx)(Qe.a,{onClick:function(){a(n?"restore-down":"maximize"),r(!n)},title:n?Object(O.a)("Restore"):Object(O.a)("Maximize"),"aria-label":n?Object(O.a)("Restore window"):Object(O.a)("Maximize window"),className:"top_bar_btn windows_control_btn",children:n?Object(M.jsx)(lr.d,{}):Object(M.jsx)(lr.b,{})}),Object(M.jsx)(Qe.a,{onClick:function(){a("close")},title:Object(O.a)("Close"),"aria-label":Object(O.a)("Close window"),className:"top_bar_btn windows_close_btn windows_control_btn",children:Object(M.jsx)(lr.a,{})})]})}var dr=Object(a.c)((function(e){var t=Object(v.n)(e);return{dataLoaded:Object(h.a)(e),disabled:t&&"blocked"===t.verification_status}}))((function(e){var t=e.dataLoaded,n=e.disabled,r=Object(i.useRef)(null),a=Object(i.useRef)(null),l=Object(i.useRef)(null),h=Object(_.a)(),v=Object(o.h)(),C=Object(w.g)(m.n).isTipScheduled,P=Object(w.g)(m.o),D=P.isTipScheduled,I=P.markTipSeen;Object(i.useEffect)((function(){j.a.switchThemes(h)}),[h]);var T=Object(S.c)(),E=T.closeOnMiniMode,A=T.menuOn,N=T.setMenuOn,R=D&&v.pathname.includes("today")&&!v.pathname.includes("settings")&&!v.pathname.includes("task")&&!C&&!A,L=Object(i.useState)(!1),z=c()(L,2),B=z[0],q=z[1],U=Object(i.useCallback)((function(e){e&&E(),q(e)}),[E]);Object(i.useEffect)((function(){R&&Object(d.a)({event:"tooltip_view_menu"})}),[R]);var K=Object(i.useState)(!1),F=c()(K,2),V=F[0],H=F[1];Object(k.a)("changeWindowState",(function(e){"maximize"===e?H(!0):"restore-down"===e&&H(!1)}));var Y=Object(g.hasFramelessTitleBar)()&&B;return t?Object(M.jsx)(b.a,{children:Object(M.jsxs)("div",{"data-testid":"top_bar",id:"top_bar",onDoubleClick:function(e){e.target!==e.currentTarget&&e.target!==r.current||Object(p.a)().titleBarDoubleClick()},children:[Object(g.hasFramelessTitleBar)()?Object(M.jsx)("div",{className:u()("top_bar_drag_region",{top_bar_drag_region_maximized:V})}):null,Object(M.jsxs)("div",{id:"top_bar_inner",ref:r,role:"banner","aria-label":Object(O.a)("Top Banner: contains Search, Quick Add, Productivity, Help, Notifications, and Settings"),children:[Object(M.jsxs)("div",{className:"left_control",children:[Object(M.jsx)(Xe,{disabled:n,ref:l}),Object(M.jsx)(Je,{disabled:n}),Object(M.jsx)(Ne,{disabled:n,isActive:B,onActiveChange:U})]}),R?Object(M.jsxs)(x.b,{isShown:!0,placement:"bottom",referenceElement:(null==l?void 0:l.current)||void 0,children:[Object(M.jsx)(x.a.TooltipHeader,{icon:Object(M.jsx)("div",{className:"tooltip-project",children:Object(M.jsx)(y.a,{"aria-hidden":!0})}),title:Object(O.a)("View your project list")}),Object(M.jsx)(x.a.TooltipBody,{children:Object(O.a)("Open the menu to find your projects, upcoming tasks, Today view, and more.")}),Object(M.jsxs)(x.a.TooltipFooter,{children:[Object(M.jsx)(x.a.TooltipConfirmButton,{tooltip:"onboarding_today_view_menu"}),Object(M.jsx)(s.a,{onClick:function(){N(!0),Object(d.a)({event:"tooltip_action_menu"}),I()},variant:"primary",children:Object(O.a)("Open menu")})]})]}):null,Object(M.jsxs)("div",{ref:a,"aria-label":Object(O.a)("Menu"),className:u()("top_right_button_group",{top_right_button_group_collapsed:Y}),role:"group",onClick:function(e){e.target!==a.current&&E()},children:[Object(M.jsx)(sr,{}),Object(M.jsx)(Rn,{disabled:n}),Object(M.jsx)(An,{disabled:n}),Object(M.jsx)(Ge,{}),Object(M.jsx)(f.a,{disabled:n}),Object(M.jsx)(Zn,{}),Object(g.hasFramelessTitleBar)()?Object(M.jsx)(ur,{}):null]})]})]})}):null}))},UOyc:function(e,t,n){"use strict";var r=n("/MKj"),c=n("17x9"),i=n.n(c),a=n("S+H7"),o=n("J4zp"),s=n.n(o),l=n("kazx"),u=n("oDV5"),d=n("GIsW"),j=n("Vbab"),b=n("4eld"),p=n("UVeO"),O=n("7BR2"),f=n("18PS"),h=n("nKUr");function m(e){var t=e.reminder,n=e.isSharedProject,r=e.user,c=e.allCollaborators;if(n){var i="location"===t.type||t.notify_uid===r.id?r:c[t.notify_uid];return Object(h.jsx)(f.a,{user:i,size:"xsmall"})}switch(t.type){case"relative":return Object(h.jsx)(p.u,{});case"location":return Object(h.jsx)(p.lb,{});case"absolute":default:return Object(h.jsx)(p.S,{})}}function v(e){var t=e.reminder,n=e.onDeleteReminder,r=e.allCollaborators,c=e.user,i=e.isSharedProject,a=e.isInTaskDetailMiniMode,o=Object(O.e)(t),f=s()(o,2),v=f[0],g=f[1];function y(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n(t)}return a?Object(h.jsxs)(l.a,{display:"flex",as:"li",justifyContent:"spaceBetween",alignItems:"center",className:"reminder isInTaskDetailMiniMode","aria-label":v,children:[Object(h.jsxs)(u.a,{children:[Object(h.jsx)(d.a,{weight:g?"bold":"regular",children:v}),g?Object(h.jsx)(d.a,{children:g}):null]}),n?Object(h.jsx)("button",{"aria-label":Object(j.a)("Delete reminder"),onClick:y,children:Object(h.jsx)(p.F,{"aria-hidden":!0})}):null]}):Object(h.jsxs)("li",{className:"reminder",children:[Object(h.jsx)(m,{reminder:t,isSharedProject:i,user:c,allCollaborators:r}),Object(h.jsxs)("span",{className:"text",children:[g?Object(h.jsx)("b",{children:v}):v,g?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("br",{}),g]}):null]}),n?Object(h.jsx)(b.a,{"aria-label":Object(j.a)("Delete reminder"),onClick:y,children:Object(h.jsx)(p.C,{className:"trash"})}):null]})}v.propTypes={reminder:i.a.object.isRequired,onDeleteReminder:i.a.func,allCollaborators:i.a.object.isRequired,user:i.a.object.isRequired,isSharedProject:i.a.bool.isRequired,isInTaskDetailMiniMode:i.a.bool};var g=v;function y(e){var t=e.item,n=e.reminders,c=void 0===n?[]:n,i=e.onDeleteReminder,o=e.isInTaskDetailMiniMode,s=void 0!==o&&o,l=Object(r.h)((function(e){return e.collaborators})),u=Object(r.h)((function(e){return e.user}));if(0===c.length)return null;var d=Object(a.q)({collaborators:l},t.project_id);return Object(h.jsx)("ul",{className:"reminder_viewer",children:c.map((function(e,t){return Object(h.jsx)(g,{reminder:e,allCollaborators:l.all,user:u,isSharedProject:d,onDeleteReminder:i,isInTaskDetailMiniMode:s},e.id||t)}))})}y.propTypes={item:i.a.object.isRequired,reminders:i.a.arrayOf(i.a.object.isRequired),onDeleteReminder:i.a.func,isInTaskDetailMiniMode:i.a.bool};t.a=y},V7BD:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ae}));var r=n("lSNA"),c=n.n(r),i=n("J4zp"),a=n.n(i),o=n("QILm"),s=n.n(o),l=n("q1tI"),u=n("GYl5"),d=n("kazx"),j=n("k45q"),b=n("TSYQ"),p=n.n(b),O=n("AnGN");var f,h=n("4rNB"),m=n("PzWS"),v=n("G3Y2"),g=n("usw2"),y=n("Vbab"),x=n("IM7V");function w(){return(w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e){return l.createElement("svg",w({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),f||(f=l.createElement("path",{d:"M8.573 18h3.958c2.561 0 4.117-1.297 4.117-3.41 0-1.588-1.14-2.76-2.77-2.918v-.067c1.231-.2 2.188-1.322 2.188-2.611C16.066 7.173 14.66 6 12.48 6H8.573C7.907 6 7.5 6.416 7.5 7.114v9.772c0 .698.407 1.114 1.073 1.114zm1.073-6.944V7.672h2.295c1.28 0 2.004.59 2.004 1.638 0 1.114-.84 1.746-2.337 1.746H9.646zm0 5.272v-3.75h2.303c1.647 0 2.511.64 2.511 1.863 0 1.23-.84 1.887-2.42 1.887H9.646z",fill:"currentColor"})))}var _;n.p;function S(){return(S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e){return l.createElement("svg",S({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),_||(_=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 6.5a1 1 0 11-2 0 1 1 0 012 0zM6 13a1 1 0 100-2 1 1 0 000 2zm0 5.5a1 1 0 100-2 1 1 0 000 2zM9.5 17a.5.5 0 000 1h9a.5.5 0 000-1h-9zM9 12a.5.5 0 01.5-.5h9a.5.5 0 010 1h-9A.5.5 0 019 12zm.5-6a.5.5 0 000 1h9a.5.5 0 000-1h-9z",fill:"currentColor"})))}var P;n.p;function D(){return(D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e){return l.createElement("svg",D({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),P||(P=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.987 5.612a.5.5 0 00-.974-.224l-3 13a.5.5 0 00.974.224l3-13zM8.354 8.146a.5.5 0 010 .708L5.207 12l3.147 3.146a.5.5 0 11-.708.707l-3.5-3.5a.5.5 0 010-.707l3.5-3.5a.5.5 0 01.708 0zm7.292 7.707a.5.5 0 010-.707L18.793 12l-3.147-3.146a.5.5 0 01.708-.708l3.5 3.5a.5.5 0 010 .707l-3.5 3.5a.5.5 0 01-.708 0z",fill:"currentColor"})))}var T;n.p;function E(){return(E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e){return l.createElement("svg",E({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),T||(T=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 6a.5.5 0 00-.5.5v11a.5.5 0 001 0V12H13v5.5a.5.5 0 001 0v-11a.5.5 0 00-1 0V11H6.5V6.5A.5.5 0 006 6zm12.5 6.5a.5.5 0 00-.777-.416l-1.5 1a.5.5 0 00.554.832l.723-.482V17.5a.5.5 0 101 0v-5z",fill:"currentColor"})))}var N;n.p;function R(){return(R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e){return l.createElement("svg",R({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),N||(N=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 7a.5.5 0 00-.5.5v9a.5.5 0 001 0V12h5v4.5a.5.5 0 001 0v-9a.5.5 0 00-1 0V11h-5V7.5A.5.5 0 006 7zm9.579 5.644c.09-.299.368-.644 1.021-.644.354 0 .698.113.91.303.181.163.314.422.204.88-.028.116-.118.284-.311.51-.189.221-.442.46-.745.723-.2.175-.427.362-.663.558-.446.369-.928.768-1.341 1.165A.5.5 0 0015 17h3.5a.5.5 0 100-1h-2.175l.26-.216c.245-.203.49-.405.729-.613.314-.272.612-.55.85-.828.231-.272.44-.584.522-.926.19-.792-.036-1.433-.508-1.858C17.736 11.162 17.13 11 16.6 11c-1.114 0-1.768.655-1.979 1.356a.5.5 0 00.958.288z",fill:"currentColor"})))}var M;n.p;function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function B(e){return l.createElement("svg",z({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),M||(M=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 6.5A.5.5 0 0111 6h5a.5.5 0 010 1h-1.717l-3 10H13a.5.5 0 110 1H8a.5.5 0 010-1h1.717l3-10H11a.5.5 0 01-.5-.5z",fill:"currentColor"})))}var q;n.p;function U(){return(U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function K(e){return l.createElement("svg",U({width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),q||(q=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.096 13.046l-.707-.707-1.768 1.768a3 3 0 104.243 4.242l3.535-3.535a3 3 0 000-4.243l-.707.707a2 2 0 010 2.829l-3.535 3.535a2 2 0 11-2.829-2.828l1.768-1.768zm7.425-1.768l.707.707 1.768-1.768a3 3 0 10-4.243-4.242L10.217 9.51a3 3 0 000 4.243l.708-.707a2 2 0 010-2.829l3.535-3.535a2 2 0 112.83 2.828l-1.768 1.768z"})))}var F;n.p;function V(){return(V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function H(e){return l.createElement("svg",V({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),F||(F=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.002 9.892c0 .37-.245.608-.61.608-.367 0-.615-.238-.615-.608V6.665h-.024l-.604.42a.466.466 0 01-.303.104.409.409 0 01-.416-.426c0-.178.07-.316.245-.437l.917-.625c.258-.174.467-.201.708-.201.444 0 .702.265.702.688v3.704zM10.5 6a.5.5 0 000 1h9a.5.5 0 100-1h-9zm-.5 6a.5.5 0 01.5-.5h9a.5.5 0 110 1h-9a.5.5 0 01-.5-.5zm0 5.5a.5.5 0 01.5-.5h9a.5.5 0 110 1h-9a.5.5 0 01-.5-.5zm-5.199 1h2.705c.314 0 .497-.193.497-.477 0-.29-.183-.476-.497-.476H5.819v-.024l.97-.886c.774-.7 1.092-1.058 1.092-1.683 0-.862-.73-1.454-1.842-1.454-.89 0-1.538.43-1.751.99a.675.675 0 00-.051.271c0 .304.193.49.514.49.25 0 .395-.098.55-.338.18-.324.4-.48.72-.48.39 0 .66.25.66.602 0 .318-.155.54-.727 1.061l-1.393 1.265c-.243.21-.341.375-.341.608 0 .308.183.531.581.531z",fill:"currentColor"})))}var Y;n.p;function W(){return(W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e){return l.createElement("svg",W({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Y||(Y=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.55 12.5c.498 0 .915-.166 1.249-.498a1.66 1.66 0 00.501-1.224c0-.456-.17-.857-.509-1.203-.339-.347-.773-.548-1.301-.605 0-.726.547-1.364 1.642-1.912a.207.207 0 00.09-.286l-.382-.67a.199.199 0 00-.262-.08C5.526 7.057 4.5 8.477 4.5 10.278c0 .617.202 1.142.606 1.573.404.432.885.648 1.444.648zm5.2 0c.498 0 .915-.166 1.249-.498a1.66 1.66 0 00.501-1.224c0-.456-.17-.857-.509-1.203-.339-.347-.773-.548-1.301-.605 0-.726.547-1.364 1.642-1.912a.207.207 0 00.09-.286l-.382-.67a.199.199 0 00-.262-.08C10.726 7.057 9.7 8.477 9.7 10.278c0 .617.202 1.142.606 1.573.404.432.885.648 1.444.648zM5 17a.5.5 0 000 1h14a.5.5 0 000-1H5zm10.5-5a.5.5 0 01.5-.5h3a.5.5 0 010 1h-3a.5.5 0 01-.5-.5zm.5-6a.5.5 0 000 1h3a.5.5 0 000-1h-3z",fill:"currentColor"})))}n.p;var Q=n("7lOM"),J=n("8QT5"),X=n("RIqP"),Z=n.n(X),$=n("mYBN");function ee(e){var t=e.state,n=t.doc,r=t.selection,c=r.empty,i=!n.textBetween(r.from,r.to).length&&Object($.u)(t.selection);return c||i}var te=n("nKUr"),ne=["children","className","editor","shouldShow","tippyOptions"],re=["hideOnClick","onClickOutside"];function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ae=Object(l.forwardRef)((function(e,t){var n=e.children,r=e.className,c=e.editor,i=e.shouldShow,o=e.tippyOptions,u=s()(e,ne),d=Object(l.useState)(!1),j=a()(d,2),b=j[0],p=j[1],O=Object(l.useRef)(null),f=Object(l.useRef)(!1),h=null!=o?o:{},m=h.hideOnClick,v=h.onClickOutside,g=s()(h,re),y=Object(l.useCallback)((function(e){e&&(O.current=function(e){var t=e.state,n=e.view,r=t.selection,c=Math.min.apply(Math,Z()(r.ranges.map((function(e){return e.$from.pos})))),i=Math.max.apply(Math,Z()(r.ranges.map((function(e){return e.$to.pos}))));if(Object($.t)(r)){var a=n.nodeDOM(c);if(a)return a.getBoundingClientRect()}return Object($.z)(n,c,i)}(c)),p(e)}),[c]);Object(l.useEffect)((function(){function e(){f.current=!0}return c.view.dom.addEventListener("mousedown",e),function(){c.view.dom.removeEventListener("mousedown",e)}}),[c.view.dom]),Object(Q.a)((function(){function e(){f.current&&(f.current=!1,ee(c)||y(!0))}function t(){f.current||(ee(c)?y(!1):y(!0))}return window.addEventListener("mouseup",e),c.on("selectionUpdate",t),function(){window.removeEventListener("mouseup",e),c.off("selectionUpdate",t)}}),[c,i,y],[i],(function(e){return void 0===a()(e,1)[0]})),Object(Q.a)((function(){y(null!=i&&i)}),[i,y],[i],(function(e){return void 0!==a()(e,1)[0]})),Object(l.useEffect)((function(){function e(){y(!1)}return window.addEventListener("blur",e),function(){window.removeEventListener("blur",e)}}),[y]);var x=O.current;return Object(te.jsx)(J.a,ie({content:Object(te.jsx)("div",ie(ie({},u),{},{className:r,ref:t,children:n})),visible:b,appendTo:document.body,duration:0,interactive:!0,getReferenceClientRect:x?function(){return x}:null,onClickOutside:function(e,t){!1!==m&&y(!1),null==v||v(e,t)}},g))})),oe=O.isMac?"Cmd":"Ctrl",se={bold:"".concat(oe,"+B"),italic:"".concat(oe,"+I"),strike:"".concat(oe,"+Shift+X"),h1:"".concat(oe,"+Alt+1"),h2:"".concat(oe,"+Alt+2"),quote:"".concat(oe,"+Shift+B"),code:"".concat(oe,"+E"),bulletList:"".concat(oe,"+Shift+8"),orderedList:"".concat(oe,"+Shift+7"),link:"".concat(oe,"+K")},le={duration:[250,150],offset:[0,3],zIndex:10006},ue="eQEgPsq",de="_7z-i0ld",je="RlqfWUT";function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e){var t=e.icon,n=e.name,r=e.tooltip,c=e.shortcut,i=e.isActive,a=e.onClick,o={"aria-label":r,"aria-pressed":i(),variant:"tertiary",onClick:a,tooltip:null};return Object(te.jsx)(h.a,{gapSize:7,content:Object(te.jsxs)(m.a,{space:"xsmall",children:[Object(te.jsx)("span",{children:r}),Object(te.jsx)(x.a,{variant:"onDark",children:c})]}),children:n?Object(te.jsx)(v.a,pe(pe({startIcon:t,exceptionallySetClassName:de},o),{},{children:n})):Object(te.jsx)(v.a,pe({icon:t},o))})}var fe,he=Object(l.forwardRef)((function(e,t){var n=e.editor,r=e.shouldShow,c=e.onLinkButtonClick,i=Object(g.a)(),a=Object(l.useMemo)((function(){var e=n.schema,t=[];return e.marks.bold&&t.push({icon:Object(te.jsx)(k,{}),tooltip:Object(y.a)("Bold"),shortcut:se.bold,isActive:function(){return n.isActive("bold")},onClick:function(){return n.chain().focus().toggleBold().run()}}),e.marks.italic&&t.push({icon:Object(te.jsx)(B,{}),tooltip:Object(y.a)("Italic"),shortcut:se.italic,isActive:function(){return n.isActive("italic")},onClick:function(){return n.chain().focus().toggleItalic().run()}}),e.nodes.heading&&t.push({icon:Object(te.jsx)(A,{}),tooltip:Object(y.a)("Heading 1"),shortcut:se.h1,isActive:function(){return n.isActive("heading",{level:1})},onClick:function(){return n.chain().focus().toggleHeading({level:1}).run()}},{icon:Object(te.jsx)(L,{}),tooltip:Object(y.a)("Heading 2"),shortcut:se.h2,isActive:function(){return n.isActive("heading",{level:2})},onClick:function(){return n.chain().focus().toggleHeading({level:2}).run()}}),e.nodes.blockquote&&t.push({icon:Object(te.jsx)(G,{}),tooltip:Object(y.a)("Quote"),shortcut:se.quote,isActive:function(){return n.isActive("blockquote")},onClick:function(){return n.chain().focus().toggleBlockquote().run()}}),e.marks.code&&t.push({icon:Object(te.jsx)(I,{}),tooltip:Object(y.a)("Code"),shortcut:se.code,isActive:function(){return n.isActive("code")},onClick:function(){return n.chain().focus().toggleCode().run()}}),e.nodes.bulletList&&t.push({icon:Object(te.jsx)(C,{}),tooltip:Object(y.a)("Bulleted list"),shortcut:se.bulletList,isActive:function(){return n.isActive("bulletList")},onClick:function(){return n.chain().focus().toggleBulletList().run()}}),e.nodes.orderedList&&t.push({icon:Object(te.jsx)(H,{}),tooltip:Object(y.a)("Numbered list"),shortcut:se.orderedList,isActive:function(){return n.isActive("orderedList")},onClick:function(){return n.chain().focus().toggleOrderedList().run()}}),e.marks.link&&t.push({icon:Object(te.jsx)(K,{}),name:Object(y.a)("Link"),tooltip:Object(y.a)("Add link"),shortcut:se.link,withDividerBefore:!0,isActive:function(){return!1},onClick:c}),t}),[n,c]);return Object(l.useEffect)((function(){function e(){i()}return n.on("selectionUpdate",e),function(){n.off("selectionUpdate",e)}}),[n,i]),Object(te.jsx)(ae,{ref:t,"data-testid":"formattingToolbarPopover",className:ue,editor:n,shouldShow:r,tippyOptions:le,children:a.map((function(e,t){return e.withDividerBefore?Object(te.jsx)(d.a,{className:je,children:Object(te.jsx)(Oe,pe({},e))},t):Object(te.jsx)(Oe,pe({},e),t)}))})})),me=n("Bb5G"),ve=n("qOqX");function ge(){return(ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ye(e){return l.createElement("svg",ge({width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),fe||(fe=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 3h5A1.5 1.5 0 0116 4.5V5h2.5a.5.5 0 010 1H18v12a2 2 0 01-2 2H8a2 2 0 01-2-2V6h-.5a.5.5 0 010-1H8v-.5A1.5 1.5 0 019.5 3zM7 6h10v12a1 1 0 01-1 1H8a1 1 0 01-1-1V6zm7 2h-1v9h1V8zm-4 0h1v9h-1V8zm5-3.5V5H9v-.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5z"})))}n.p;var xe="T6HvZx4",we="CTdgnk3",ke="PUSkz48",_e="B7g5ko0",Se="dg1S9W1",Ce="JOCOWgt",Pe=Object(l.forwardRef)((function(e,t){var n=e.editor,r=e.shouldShow,i=e.onFinished,o=Object(l.useRef)(null),s=Object(l.useRef)(""),u=Object(l.useRef)(),j=Object(l.useState)(""),b=a()(j,2),O=b[0],f=b[1],h=O.length>0&&s.current!==O,m=s.current.length>0,g=Object(l.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];i(),e&&u.current&&n.chain().setTextSelection(u.current).focus().run()}),[n,i]);function x(){var e,t;h&&(n.commands.setLink({href:(e=O,t=e.trim(),/^\.*\/|^(?!localhost)\w+?:/.test(t)?t:t.replace(/^(?!(?:\w+?:)?\/\/)/,"https://"))}),g())}return Object(Q.a)((function(){u.current=n.state.selection,s.current=String(n.getAttributes("link").href||""),n.state.selection.empty&&(n.commands.extendMarkRange("link"),n.state.selection.empty&&n.commands.extendWordRange()),f(s.current),setTimeout((function(){var e;null===(e=o.current)||void 0===e||e.focus()}),0)}),[n,r],[r],(function(e){var t=a()(e,1)[0];return null!=t&&t}),ve.a),Object(l.useEffect)((function(){function e(){g(!1)}return n.view.dom.addEventListener("mousedown",e),function(){n.view.dom.removeEventListener("mousedown",e)}}),[n.view.dom,g]),Object(te.jsxs)(ae,{ref:t,"data-testid":"linkToolbarPopover",className:xe,editor:n,shouldShow:r,tippyOptions:le,children:[Object(te.jsx)(me.a,{className:p()(we,c()({},ke,m)),placeholder:Object(y.a)("Paste or type a link"),spellCheck:!1,type:"text",value:O,onChange:function(e){f(e.target.value)},onFocus:function(){setTimeout((function(){var e;null===(e=o.current)||void 0===e||e.select()}),0)},onKeyDown:function(e){e.stopPropagation(),"Escape"===e.key?g():"Enter"===e.key&&(e.preventDefault(),x())},ref:o}),h?Object(te.jsx)(v.a,{variant:"tertiary",exceptionallySetClassName:_e,onClick:x,children:Object(y.a)("Apply")}):null,m?Object(te.jsx)(d.a,{className:Se,children:Object(te.jsx)(v.a,{"aria-label":Object(y.a)("Remove link"),variant:"quaternary",icon:Object(te.jsx)(ye,{}),exceptionallySetClassName:Ce,onClick:function(){n.commands.unsetLink(),g()}})}):null]})})),De="kr2Srm5",Ie=["className","content","onKeyDown"];function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ae=Object(l.forwardRef)((function(e,t){var n=e.className,r=e.content,c=e.onKeyDown,i=s()(e,Ie),o=Object(l.useRef)(null),b=Object(l.useRef)(null),f=Object(l.useRef)(null),h=Object(l.useRef)(r),m=Object(l.useState)(null),v=a()(m,2),g=v[0],y=v[1],x=Object(l.useState)(!1),w=a()(x,2),k=w[0],_=w[1],S=!k&&void 0,C=Object(u.useEvent)((function(){_(!0)})),P=Object(u.useEvent)((function(){_(!1)}));Object(l.useImperativeHandle)(t,(function(){var e=o.current;return e?Ee(Ee({},e),{},{getEditorElement:function(){return e.getEditor().options.element},toolbarsRefs:[b,f],insertAtCursor:function(t){return e.getEditor().commands.insertMarkdownContent(t)},focus:function(){return e.getEditor().commands.focus()}}):null}),[]),Object(l.useEffect)((function(){o.current&&y(o.current.getEditor())}),[]);var D=Object(u.useEvent)((function(e){(function(e){return 0===e.button&&e.target instanceof HTMLAnchorElement&&Boolean(e.target.getAttribute("href"))})(e)&&setTimeout((function(){_(!0)}),60)})),I=Object(u.useEvent)((function(e,t){var n;return function(e){return(O.isMac?e.metaKey:e.ctrlKey)&&!e.shiftKey&&!e.altKey&&("k"===e.key||"K"===e.key)}(e)?(e.stopPropagation(),_(!0),!0):null!==(n=null==c?void 0:c(e,t))&&void 0!==n&&n}));return Object(te.jsxs)(d.a,{display:"flex",flexDirection:"column",flexGrow:1,children:[g?Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(he,{ref:b,editor:g,shouldShow:S,onLinkButtonClick:C}),Object(te.jsx)(Pe,{ref:f,editor:g,shouldShow:k,onFinished:P})]}):null,Object(te.jsx)(j.a,Ee({ref:o,className:p()(De,"markdown_content",n),content:h.current,onClick:D,onKeyDown:I},i))]})}))},Vdij:function(e,t,n){"use strict";n("Rhkm");var r=n("X6fj");n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b}));n("M1jK")},X0ZH:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("q1tI"),c=n("/MKj"),i=n("71j2"),a=n("Qhux");function o(e){var t,n=e.viewOptions,o=Object(c.h)(i.c),s=Object(c.h)(a.b),l=null!==(t=null==n?void 0:n.filtered_by)&&void 0!==t?t:null;return Object(r.useMemo)((function(){if(!l)return null;var e=Object(i.a)(l,o);return function(t){return e(t,s)}}),[l,s,o])}},X6fj:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n("i8i4"),c=n.n(r),i=n("Rhkm"),a=n("M1jK"),o=n("nKUr");function s(e){return function(t){var n=t.type,r=t.userPlanLimits,i=document.createElement("div");document.body.appendChild(i),c.a.render(Object(o.jsx)(e,{userPlanLimits:r,isOpen:!0,onClose:function(){c.a.unmountComponentAtNode(i),i.parentElement&&document.body.removeChild(i)},type:n}),i)}}var l=s(i.a),u=s(a.a)},YRxN:function(e,t,n){"use strict";n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return L})),n.d(t,"d",(function(){return M})),n.d(t,"e",(function(){return z})),n.d(t,"f",(function(){return B})),n.d(t,"c",(function(){return q}));var r=n("RIqP"),c=n.n(r),i=n("lSNA"),a=n.n(i),o=n("J4zp"),s=n.n(o),l=n("xweI"),u=n.n(l),d=n("vV6a"),j=n("S+H7"),b=n("gVGk"),p=n("Ek05"),O=n("oyQV"),f=n("iDm+"),h=n("u57q"),m=n.n(h),v=n("qOpA"),g=n.n(v),y=n("peh1"),x=n("XOeF"),w=n("gmEJ");function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=/([+.?*+^$[\]\\(){}|_&-])/g,C=Object(y.createSelector)(x.i,(function(e){return e.map((function(e){var t=e.name;return t=Object(O.a)(t.replace(S,"\\$1")),{regex:new RegExp("(?:^|\\s)[".concat(d.o).concat(d.p,"]").concat(t),"i"),project:e}}))})),P=Object(y.createSelector)((function(e){var t=e.sections;return e.projectIds.reduce((function(e,n){return e.concat(Object(w.i)(n)({sections:t}))}),[])}),(function(e){return e.map((function(e){var t=e.name;return t=Object(O.a)(t.replace(S,"\\$1")),{regex:new RegExp("(?:^|\\s)".concat(d.s).concat(t),"i"),section:e}}))})),D=Object(y.createSelector)((function(e){return e.collaborators.all}),(function(e){return e.user}),(function(e,t){var n={},r=_(_({},e),{},a()({},t.id,t));for(var c in r){var i=r[c],o=i.full_name||i.email;if(0!==(o=Object(O.a)(o.replace(S,"\\$1"))).length){var s=Object(f.c)(o,i.id,t.id);n[c]={collaborator:i,regex:new RegExp("(?:^|\\s)\\+(?:".concat(s.join("|"),")"),"gi")}}}return n})),I=Object(y.createSelector)((function(e){return e.collaborators.byPID}),(function(e){return e.user}),x.i,D,(function(e,t,n,r){return n.reduce((function(n,i){var o=[].concat(c()(m()(e[i.id])),[t.id]);return _(_({},n),{},a()({},i.id,g()(o,r)))}),{})}));function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e){var t=p.a.parse(e,null,!0,null,!0);return"length"in t&&0!==t.length?t.map((function(e){var t=s()(e.pos,2),n=t[0],r=t[1];return{id:e.date_string,start:n,end:r,matchedString:e.date_string_matched,type:"date",data:{dateistResult:e}}})):[]}function L(e,t){var n=new RegExp("(?:^|\\s+)[".concat(d.d).concat(d.e,"]([^\\s,]+)"),"g"),r=e.match(n),c={};if(!r)return[];var i,a=[],o=A(r);try{var s=function(){var n=i.value;if(n=n.trim(),!c[n]){c[n]=!0;var r=n.substring(1),o=Object(b.j)(r,{labels:t},{normalize:!0});if(!o)return"continue";o.id||(o={id:o.name,name:o.name}),a=a.concat(Object(f.d)(e,n).map((function(e){return E(E({},e),{},{id:o.id,matchedString:n,type:"label",data:{id:o.id,name:o.name}})})))}};for(o.s();!(i=o.n()).done;)s()}catch(e){o.e(e)}finally{o.f()}return a}function M(e){var t=new RegExp("(?:(?:^|\\s)!!|\\bp)(1|2|3|4)(?=\\s|$)","gi"),n=e.match(t);if(!n)return[];var r,c=[],i=A(n);try{var a=function(){var t,n=r.value;n=n.trim();var i=null===(t=/\d+/.exec(n))||void 0===t?void 0:t[0];if(!i)return"continue";Object(f.d)(e,n).forEach((function(e){var t=parseInt(i);c.push(E(E({},e),{},{id:t,type:"priority",matchedString:n,data:{value:t}}))}))};for(i.s();!(r=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}return c}function z(e,t){if(!new RegExp("(?:^|\\s+)[".concat(d.o).concat(d.p,"]([^\\s]+)"),"g").test(e))return[];var n,r=[],c=A(C({projects:t}));try{var i=function(){var t,c=n.value,i=c.regex,a=c.project,o=e.match(i),s=null==o||null===(t=o[0])||void 0===t?void 0:t.trim();if(void 0===s)return"continue";Object(f.d)(e,s).forEach((function(e){r.push(E(E({},e),{},{id:a.id,type:"project",matchedString:s,data:a}))})),c.regex.lastIndex=0};for(c.s();!(n=c.n()).done;)i()}catch(e){c.e(e)}finally{c.f()}return r}function B(e,t,n){var r=new RegExp("(?:^|\\s+)".concat(d.s,"([^\\s]+)"),"g");if(!n.length||!r.test(e))return[];var c,i=[],a=A(P({sections:t,projectIds:n}));try{var o=function(){var t,n=c.value,r=n.regex,a=n.section,o=e.match(r),s=null==o||null===(t=o[0])||void 0===t?void 0:t.trim();if(void 0===s)return"continue";Object(f.d)(e,s).forEach((function(e){i.push(E(E({},e),{},{id:a.id,type:"section",matchedString:s,data:{id:a.id,name:a.name}}))})),n.regex.lastIndex=0};for(a.s();!(c=a.n()).done;)o()}catch(e){a.e(e)}finally{a.f()}return i}function q(e){var t,n=e.content,r=e.projects,i=e.labels,a=e.user,o=e.collaborators,s=e.project,l=e.sections,d=e.isAssigneeDisabled,b=void 0!==d&&d,p=e.isLabelsDisabled,h=void 0!==p&&p,m=e.isPriorityDisabled,v=void 0!==m&&m,g=e.isDateistDisabled,y=void 0!==g&&g,x=Object(O.a)(n),w=z(x,r),k=B(x,l,w.map((function(e){return e.data.id})).concat(null!==(t=null==s?void 0:s.id)&&void 0!==t?t:[])),_=[].concat(c()(w),c()(k));return b||(_=_.concat(function(e,t,n,r,c){var i=[];if(!c||!/\+[^\s]+/.exec(e)||!Object(j.q)({collaborators:n},c.id))return i;var a=I({collaborators:n,projects:r,user:t})[c.id],o=function(t){var n,r=a[t];if(!r)return"continue";var c=r.regex.exec(e),o=null==c||null===(n=c[0])||void 0===n?void 0:n.trim();if(void 0===o)return"continue";Object(f.d)(e,o).forEach((function(e){i.push(E(E({},e),{},{id:r.collaborator.id,type:"collaborator",matchedString:o,data:{id:r.collaborator.id}}))})),r.regex.lastIndex=0};for(var s in a)o(s);return i}(x,a,o,r,s))),h||(_=_.concat(L(x,i))),v||(_=_.concat(M(x))),y||a.features.dateist_inline_disabled||a.dateist_inline_disabled||(_=_.concat(R(n))),u()(_,"start")}},YrBN:function(e,t,n){"use strict";var r=n("lSNA"),c=n.n(r),i=n("QILm"),a=n.n(i),o=n("17x9"),s=n.n(o),l=n("Vbab"),u=n("zZLx"),d=n("UVeO"),j=n("nALT"),b=n("nKUr"),p=["className","children","priority","onSelect","onClose","disabled","isShown","anchorRef","placement","withArrow"];function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){var t=e.priority,n=void 0===t?4:t,r=5-n,c=Object(l.a)("Priority %s").replace("%s",r);return Object(b.jsx)(u.b,{value:String(n),label:c,"data-action-hint":"task-actions-priority-".concat(n),className:"priority_picker_item",children:function(e){var t=e.isSelected;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{"aria-hidden":"true",className:"priority_picker_item_priority_icon",children:Object(b.jsx)(j.a,{priority:r})}),Object(b.jsx)("span",{className:"priority_picker_item_name",children:c}),t?Object(b.jsx)(d.p,{"aria-hidden":"true",className:"dropdown_select_checkmark"}):null]})}})}function m(e){var t=e.className,n=e.children,r=e.priority,c=void 0===r?1:r,i=e.onSelect,o=void 0===i?function(){}:i,s=e.onClose,d=e.disabled,j=void 0!==d&&d,O=e.isShown,m=e.anchorRef,v=e.placement,g=(e.withArrow,a()(e,p));return(c>4||c<1)&&(c=1),Object(b.jsxs)(u.g,{disabled:j,value:String(c),onChange:function(e){o(Number(e.target.value))},isShown:O,children:[m?null:Object(b.jsx)(u.h,f(f({className:t},g),{},{children:n})),Object(b.jsx)(u.e,{className:"priority_picker",anchorRef:m,onClose:s,placement:v,children:Object(b.jsx)(u.d,{"aria-label":Object(l.a)("Select a priority"),children:[4,3,2,1].map((function(e){return Object(b.jsx)(h,{priority:e},e)}))})})]})}h.propTypes={priority:s.a.number},m.propTypes={className:s.a.string,children:s.a.oneOfType([s.a.node,s.a.func]),tooltip:s.a.node,priority:s.a.number,disabled:s.a.bool,onClose:s.a.func,onSelect:s.a.func,isShown:s.a.bool,anchorRef:s.a.object,placement:s.a.string,withArrow:s.a.bool};var v=m;t.a=v},aSh9:function(e,t,n){"use strict";n.d(t,"h",(function(){return s})),n.d(t,"n",(function(){return l})),n.d(t,"f",(function(){return j})),n.d(t,"g",(function(){return b})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return O})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"l",(function(){return v})),n.d(t,"i",(function(){return g})),n.d(t,"k",(function(){return y})),n.d(t,"j",(function(){return x})),n.d(t,"m",(function(){return w}));var r=n("peh1"),c=n("L8gx"),i=n("RZq6");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){var r,c=a(t);try{for(c.s();!(r=c.n()).done;){var o=r.value;try{var s=o(e,n);if(0!==s)return s}catch(e){Object(i.b)(e,{tags:{where:"composeSortFunc"}})}}}catch(e){c.e(e)}finally{c.f()}return 0}}function l(e){return function(t,n){return e(n,t)}}function u(e){var t=e.child_order+5e7;return"".concat(String(t).padStart(8,"0"),"_").concat(e.id)}function d(e,t){var n=u(e);if(!t)return n;for(var r=e;r=t[r.parent_id||-1];)n=u(r)+"-"+n;return n}function j(e,t){return"number"==typeof e.id&&"number"==typeof t.id?e.id-t.id:"number"==typeof e.id&&"string"==typeof t.id?-1:"string"==typeof e.id&&"number"==typeof t.id?1:"string"==typeof e.id&&"string"==typeof t.id?e.id.localeCompare(t.id):0}function b(e,t){return e.priority-t.priority}function p(e,t){var n=e.due,r=t.due;return n||r?n&&!r?-1:!n&&r?1:n&&r?n.isSameDate(r)?n.with_time||r.with_time?n.with_time&&!r.with_time?-1:!n.with_time&&r.with_time?1:n.getTime()-r.getTime():0:n.getTime()-r.getTime():0:0}function O(e,t){var n=e.day_order,r=t.day_order;return n===r?0:n&&!r?-1:!n&&r||-1===n&&-1!==r?1:-1!==n&&-1===r?-1:n-r}function f(e,t){return e.added_at.getTime()-t.added_at.getTime()}function h(e,t){return e.child_order-t.child_order}function m(e,t){if(e.content===t.content)return 0;var n={only_text:!0,as_html:!1},r=c.a.format(e.content,n),i=c.a.format(t.content,n);return r.localeCompare(i)}var v=Object(r.createSelector)((function(e){return e.items}),(function(e){return function(t,n){if(!e)return-1;if(t.parent_id&&!e[t.parent_id])return 1;if(n.parent_id&&!e[n.parent_id])return-1;var r=d(t,e),c=d(n,e);return r===c?0:r<c?-1:1}})),g=Object(r.createSelector)((function(e){return e.projects}),(function(e){return function(t,n){if(!e)return-1;if(!e[t.project_id])return 1;if(!e[n.project_id])return-1;var r=d(e[t.project_id],e),c=d(e[n.project_id],e);return r===c?0:r<c?-1:1}})),y=Object(r.createSelector)((function(e){return e.sections}),(function(e){return function(t,n){var r=e[t.section_id||-1],c=e[n.section_id||-1];return r||c?r&&!c?1:!r&&c?-1:r.section_order===c.section_order?0:r.section_order<c.section_order?-1:1:0}})),x=Object(r.createSelector)((function(e){return e.collaborators.all}),(function(e){return function(t,n){var r=e[t.responsible_uid||-1],c=e[n.responsible_uid||-1];return r===c?0:r&&!c?-1:!r&&c?1:r.full_name===c.full_name?0:r.full_name.localeCompare(c.full_name)}})),w=Object(r.createSelector)((function(e){return e.projects}),(function(e){return e.workspaces}),(function(e,t){return function(n,r){var c=k(n,{projects:e,workspaces:t}),i=k(r,{projects:e,workspaces:t});return c===i?0:"Personal"===c?-1:"Personal"===i?1:c.localeCompare(i)}}));function k(e,t){var n,r,c=t.projects,i=t.workspaces,a=null==c||null===(n=c[e.project_id])||void 0===n?void 0:n.workspace_id,o=a?null==i?void 0:i[a]:void 0;return null!==(r=null==o?void 0:o.name)&&void 0!==r?r:"Personal"}},b3nZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("/MKj"),c=n("/uLG"),i=n("CZSy"),a=n("SoKn"),o=n("q1tI"),s=n("n6bU"),l=n("TSYQ"),u=n.n(l),d=n("wqDb"),j=n("Vbab"),b=n("o5ZH"),p=n("KXw1"),O=n("4eld"),f=n("UVeO"),h=n("vzEX"),m=n("dbRB"),v=n("nKUr");var g=Object(r.c)((function(e,t){var n=t.viewInfo;return{viewOptions:Object(a.a)(e,n)}}),(function(e,t){var n=t.viewInfo;return{onSortOrderChange:function(t,r){if(t&&r&&t.sorted_by)return e(Object(c.c)(n,{sortedBy:t.sorted_by,sortOrder:r}))},onFilteredByClear:function(t){if(t)return t.grouped_by===i.f&&t.sorted_by===i.t?e(Object(c.a)(n)):e(Object(c.c)(n,{filteredBy:null}))},onClearViewOptions:function(){e(Object(c.a)(n))}}}),(function(e,t,n){var r=e.viewOptions,c=n.className,i=n.collaboratorIds,a=n.viewInfo,o=n.onCustomSortingClick;return{className:c,collaboratorIds:i,viewInfo:a,viewOptions:r,onFilteredByClear:function(){return t.onFilteredByClear(r)},onSortOrderChange:function(e){return t.onSortOrderChange(r,e)},onClearViewOptions:function(){return r&&t.onClearViewOptions()},onCustomSortingClick:o}}))((function(e){var t,n=e.className,r=e.viewOptions,c=e.onCustomSortingClick,a=e.onFilteredByClear,l=e.onSortOrderChange,g=e.onClearViewOptions,y=Object(s.a)(r);if(Object(o.useLayoutEffect)((function(){(!y&&r||r&&!Object(m.a)(y,r))&&Object(p.a)(0)}),[y,r]),Object(o.useEffect)((function(){(null==r?void 0:r.filtered_by)===h.e&&a()}),[a,r]),!r||Object(b.b)(r))return null;if(r.filtered_by||r.grouped_by)t=Object(j.a)("Custom view");else switch(r.sorted_by){case i.s:t=Object(j.a)("Sorted by assignee");break;case i.w:t=Object(j.a)("Sorted by priority");break;case i.v:t=Object(j.a)("Sorted alphabetically");break;case i.u:t=Object(j.a)("Sorted by due date");break;case i.r:t=Object(j.a)("Sorted by date added");break;case i.x:t=Object(j.a)("Sorted by project");break;default:t=Object(j.a)("Custom view")}var x=r.sort_order===i.z;return Object(v.jsx)("div",{className:u()("view_options_status",n),children:Object(v.jsxs)("div",{className:"view_options_status__inner",children:[r.sorted_by!==i.t?Object(v.jsx)(O.a,{"aria-label":Object(j.a)("Reverse order"),title:Object(j.a)("Reverse order"),onClick:function(){Object(d.a)("sort_options","sort_reversed"),l(x?i.A:i.z)},children:x?Object(v.jsx)(f.jc,{}):Object(v.jsx)(f.kc,{})}):null,Object(v.jsx)(O.a,{className:"view_options_status__label","aria-label":Object(j.a)("Change sorting options"),title:Object(j.a)("Change sorting options"),onClick:function(){Object(d.a)("items","click","sort_options"),c()},children:Object(v.jsx)("span",{children:t})}),Object(v.jsx)(O.a,{"aria-label":Object(j.a)("Reset sorting options"),title:Object(j.a)("Reset sorting options"),onClick:function(){Object(d.a)("sort_options","cleared"),g()},children:Object(v.jsx)(f.F,{})})]})})}))},c7SM:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n("RIqP"),c=n.n(r),i=n("/MKj"),a=n("kazx"),o=n("Vbab"),s=n("TQFH"),l=n("+ger"),u=n("LYyr"),d="IcVxMex",j=n("nKUr");function b(e,t){var n,r;return null!==(n=null==e||null===(r=e[t])||void 0===r?void 0:r.color)&&void 0!==n?n:l.a}function p(e){var t=e.projects,n=e.tasks,r=e.unitHeight,c=void 0===r?4:r,i=e.unitWidth,o=void 0===i?4:i,s=e.maxWidth;return s&&n.length*o>s&&(o=s/n.length),Object(j.jsx)("div",{className:d,children:n.map((function(e){return Object(j.jsx)(a.a,{display:"inlineBlock",style:{backgroundColor:Object(l.d)(b(t,e.project_id)),height:"".concat(c,"px"),width:"".concat(o,"px")}},e.id)}))})}function O(e){var t=e.date,n=Object(i.h)((function(e){return Object(s.z)(t,e)||[]})),r=Object(i.h)((function(e){return e.projects||{}})),a=c()(n);a.sort((function(e,t){var n=b(r,e.project_id),c=b(r,t.project_id);return Object(l.e)(n)-Object(l.e)(c)}));var d=0===n.length?Object(o.a)("No tasks due"):Object(u.a)(Object(o.b)("{count} task due","{count} tasks due",n.length),{count:n.length});return Object(j.jsxs)("div",{className:"project_bar_holder",children:[d,Object(j.jsx)(p,{tasks:a,projects:r,maxWidth:100})]})}},cTnB:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("q1tI"),c=n("/MKj"),i=n("HLc3"),a=n("/uLG"),o=n("CZSy"),s=n("AnGN");function l(e){var t=e.collaboratorIds,n=e.viewOptions,l=e.viewInfo,u=e.disabled,d=Object(c.h)(i.e),j=Object(c.g)();Object(r.useEffect)((function(){if(!d&&!u)return document.addEventListener("keypress",r),function(){document.removeEventListener("keypress",r)};function e(e,t){e.preventDefault(),n&&n.sorted_by===t?j(n.grouped_by||n.filtered_by?Object(a.c)(l,{sortedBy:o.t,sortOrder:null}):Object(a.a)(l)):j(Object(a.c)(l,{sortedBy:t,sortOrder:t===o.w?o.A:o.z}))}function r(n){var r=n.keyCode;s.isSafari&&n.metaKey&&[112,1079].includes(r)||n.ctrlKey||n.shiftKey||function(e){if(e.target){var t=e.target;if("INPUT"===(null==t?void 0:t.tagName)||"SELECT"===(null==t?void 0:t.tagName)||"TEXTAREA"===(null==t?void 0:t.tagName)||"textbox"===t.getAttribute("role"))return!0;if(t.classList.contains("ist_button")||t.classList.contains("ist_button")||t.classList.contains("richtext_editor")||t.classList.contains("t_date")||t.classList.contains("t_label"))return!0}return!1}(n)||([114,1082].includes(r)&&null!=t&&t.length?e(n,o.s):[112,1079].includes(r)?e(n,o.w):[68,100,1074].includes(r)?e(n,o.u):[110,1090].includes(r)&&e(n,o.v))}}),[t,j,d,n,l,u])}},ck76:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));function r(e){return e?function(t){13!==t.keyCode&&32!==t.keyCode||(e(t),t.preventDefault())}:void 0}function c(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}},cppk:function(e,t,n){"use strict";var r=n("lSNA"),c=n.n(r),i=n("yXPU"),a=n.n(i),o=n("RIqP"),s=n.n(o),l=n("J4zp"),u=n.n(l),d=n("QILm"),j=n.n(d),b=n("o0o1"),p=n.n(b),O=n("q1tI"),f=n("i8i4"),h=n.n(f),m=n("DUc8"),v=n("KFoM"),g=n("rJga"),y=n("9P9J"),x=n("GYl5"),w=n("qOqX"),k=n("TSYQ"),_=n.n(k);function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!(e&&e instanceof HTMLElement))return t;var n=C(e);if(!n||!n.defaultView)return t;var r=parseInt(n.defaultView.getComputedStyle(e).getPropertyValue("z-index"));return isNaN(r)?S(e.parentElement,t):S(e.parentElement,r>t?r:t)}function C(e){return e&&e.ownerDocument||document}var P=n("nKUr"),D=["children","modifiers","placement","renderReferenceElement","offset","withArrow","withFocusLock","withFocusLockAutofocus","isShown","onClose","onShown","className","overlayClassName","zIndex","resizeOnInput","disableOverlay","allowEventPropagation"];function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){"blur"===e.type&&e.target instanceof HTMLInputElement&&e.target.closest(".pac-target-input")||e.stopPropagation()}t.a=function(e){var t=e.children,n=e.modifiers,r=void 0===n?[]:n,c=e.placement,i=void 0===c?"bottom":c,o=e.renderReferenceElement,l=e.offset,d=e.withArrow,b=void 0===d||d,f=e.withFocusLock,k=void 0===f||f,C=e.withFocusLockAutofocus,I=void 0===C||C,A=e.isShown,N=void 0!==A&&A,R=e.onClose,L=e.onShown,M=e.className,z=void 0===M?"":M,B=e.overlayClassName,q=void 0===B?"":B,U=e.zIndex,K=void 0===U?"ref":U,F=e.resizeOnInput,V=void 0!==F&&F,H=e.disableOverlay,Y=void 0!==H&&H,W=e.allowEventPropagation,G=void 0!==W&&W,Q=j()(e,D),J=G?void 0:E,X=Object(O.useState)(!1),Z=u()(X,2),$=Z[0],ee=Z[1],te=Object(O.useRef)(null),ne=Object(O.useRef)(null),re=Object(O.useRef)("function"!=typeof o&&o?o:null);Object(O.useEffect)((function(){o instanceof HTMLElement&&(re.current=o)}),[o]);var ce=Object(O.useRef)(!1);Object(w.a)((function(){var e,t,n=ce.current,r=null!=document.activeElement&&document.activeElement!==document.body,c="function"==typeof(null===(e=re.current)||void 0===e?void 0:e.focus);N||n||r||!c||(null===(t=re.current)||void 0===t||t.focus());ce.current=!1}),[N]);var ie=Object(x.useEvent)(R||function(){});function ae(e){"Escape"===e.key&&"function"==typeof R&&(e.stopPropagation(),R())}Object(O.useEffect)((function(){if(N)return"ontouchend"in window?document.addEventListener("touchend",e,{capture:!0}):document.addEventListener("click",e,{capture:!0}),document.addEventListener("contextmenu",e,{capture:!0}),function(){document.removeEventListener("touchend",e,{capture:!0}),document.removeEventListener("click",e,{capture:!0}),document.removeEventListener("contextmenu",e,{capture:!0})};function e(e){e.target===ne.current&&(ce.current=!0,ie())}}),[N,ie]),Object(O.useEffect)((function(){N||ee(!1)}),[N]);var oe=b?l?[l[0],l[1]+12]:[0,12]:l;function se(e){return le.apply(this,arguments)}function le(){return(le=a()(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!V){e.next=3;break}return e.next=3,t();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return oe&&(r=[].concat(s()(r),[{name:"offset",enabled:!0,options:{offset:oe}}])),Object(P.jsxs)(v.a,{children:["function"==typeof o?Object(P.jsx)(g.a,{children:function(e){var t=e.ref;return o({ref:function(e){re.current=e,t(e)},isExpanded:N})}}):null,N?h.a.createPortal(Object(P.jsx)(y.a,{referenceElement:"function"==typeof o?void 0:o,modifiers:r,placement:i,onFirstUpdate:function(){ee(!0),L&&L()},children:function(e){var n=e.ref,r=e.style,c=e.placement,i=e.arrowProps,o=e.update,s=S(Y?te.current:ne.current),l="ref"===K?S(re.current):K||void 0;"ref"===K&&l&&s>l&&(l=s);var u=l?{zIndex:l}:void 0;return Object(P.jsx)("div",{ref:ne,className:_()(Y?"popper":"popper__overlay",q),"data-testid":"popper__overlay",onClick:J,onContextMenu:J,style:Y?void 0:u,children:Object(P.jsx)(m.a,{disabled:!k||!$,returnFocus:!0,autoFocus:I,children:Object(P.jsxs)("div",T(T({className:z+" popper",ref:function(e){null==n||n(e),te.current=e},style:Y?T(T({},r),u):r,"data-placement":c,onKeyDown:ae,onClick:J,onContextMenu:J,onMouseDown:J,onMouseEnter:J,onMouseLeave:J,onMouseMove:J,onMouseOver:J,onMouseOut:J,onMouseUp:J,onKeyPress:J,onFocus:J,onBlur:J,onChange:J,onInput:function(){var e=a()(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==J||J(t),e.next=3,se(o);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onInvalid:J,onSubmit:J},Q),{},{children:[b?Object(P.jsx)("div",{className:"popper__arrow",ref:i.ref,style:i.style}):null,"function"==typeof t?t():t]}))})})}}),document.body):null]})}},dAW7:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return y})),n.d(t,"i",(function(){return k}));var r=n("lSNA"),c=n.n(r),i=n("J4zp"),a=n.n(i),o=n("q1tI"),s=n("/MKj"),l=n("n6bU"),u=n("TQFH"),d=n("c9wj"),j=n("nKUr");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O="add_above",f="add_below",h="add_bottom",m="add_bottom_website",v="add_bottom_email",g="add_top",y="edit";function x(){return Object(d.a)("editor")}var w=Object(o.createContext)({editorState:null,onEditItem:function(){return{}},onAddBottom:function(){return{}},onAddBottomWebsite:function(){return{}},onAddBottomEmail:function(){return{}},onAddTop:function(){return{}},onAddAbove:function(){return{}},onAddBelow:function(){return{}},onResetEditorState:function(){return{}},onChangeIndent:function(){return{}}});function k(){return Object(o.useContext)(w)}t.h=function(e){var t=e.children,n=e.onEditItem,r=e.onAddBottom,c=e.onAddBottomWebsite,i=e.onAddBottomEmail,d=e.onAddTop,b=e.onAddAbove,k=e.onAddBelow,_=e.onResetEditorState,S=e.onChangeIndent,C=Object(o.useState)(null),P=a()(C,2),D=P[0],I=P[1],T=Object(s.h)((function(e){return e.tempIds})),E=Object(s.h)((function(e){return null!=D&&D.taskId?Object(u.u)(e,D.taskId):null})),A=Object(l.a)(T);Object(o.useEffect)((function(){E&&D&&D.taskId!==E.id&&I(p(p({},D),{},{taskId:E.id}))}),[D,E]),Object(o.useEffect)((function(){if(T&&D&&A!==T){var e=T[D.listId];e&&I(p(p({},D),{},{listId:e}))}}),[D,A,T]),Object(o.useEffect)((function(){null==D||!D.taskId||E&&!E.checked||I(null)}),[D,E]);var N=Object(o.useCallback)((function(e,t){I({listId:e,taskId:t,mode:y,key:x()})}),[]),R=Object(o.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.generateKey,r=void 0===n||n,c=t.fromShortcut,i=void 0!==c&&c;I((function(t){return{listId:e,mode:h,key:!t||r?x():t.key,fromShortcut:i}}))}),[]),L=Object(o.useCallback)((function(e){I({listId:e,mode:m,key:x()})}),[]),M=Object(o.useCallback)((function(e){I({listId:e,mode:v,key:x()})}),[]),z=Object(o.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.generateKey,r=void 0===n||n,c=t.fromShortcut,i=void 0!==c&&c;I((function(t){return{listId:e,mode:g,key:!t||r?x():t.key,fromShortcut:i}}))}),[]),B=Object(o.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.generateKey,c=void 0===r||r;I((function(n){return{listId:e,taskId:t,mode:O,key:!n||c?x():n.key}}))}),[]),q=Object(o.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.generateKey,c=void 0===r||r;I((function(n){return{listId:e,taskId:t,mode:f,key:!n||c?x():n.key}}))}),[]),U=Object(o.useCallback)((function(e){I((function(t){return t?p(p({},t),{},{indent:e}):t}))}),[]),K=Object(o.useCallback)((function(){I(null)}),[]),F=Object(o.useMemo)((function(){return{editorState:D,onEditItem:n||N,onAddBottom:r||R,onAddBottomWebsite:c||L,onAddBottomEmail:i||M,onAddTop:d||z,onAddAbove:b||B,onAddBelow:k||q,onResetEditorState:_||K,onChangeIndent:S||U}}),[D,B,q,R,M,L,z,U,N,b,k,r,i,c,d,S,n,_,K]);return Object(j.jsx)(w.Provider,{value:F,children:t})}},dD6n:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m}));var r=n("lSNA"),c=n.n(r),i=n("SA+Z"),a=n.n(i),o=n("RIqP"),s=n.n(o),l=n("mYBN"),u=n("Qi13"),d=n("iDm+"),j=n("sslh"),b=n("YRxN");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){var t=e.editor,n=e.options,r=e.transaction,c=void 0===r?t.state.tr:r,i=n.getStoreState(),o=i.projects,p=i.labels,f=i.user,h=i.collaborators,m=i.sections,v=i.project,g=i.isAssigneeDisabled,y=i.isLabelsDisabled,x=i.isPriorityDisabled,w=i.isDateistDisabled,k=t.getText(),_=Object(b.c)({projects:o,labels:p,user:f,collaborators:h,sections:m,content:k,project:v,isAssigneeDisabled:g,isLabelsDisabled:y,isPriorityDisabled:x,isDateistDisabled:w}),S=Object(l.q)(0,t.state.doc.content.size,t.state.doc).reduce((function(e,t){if(!Object(d.f)(t.mark))return[].concat(s()(e),[t]);var n=a()(e).slice(0),r=n.pop();return(null==r?void 0:r.mark)===t.mark?[].concat(s()(n),[O(O({},t),{},{from:r.from,to:t.to})]):[].concat(s()(e),[t])}),[]),C=null,P=_.reduce((function(e,t){if(S.some((function(e){var n=e.from,r=e.to;return"link"===e.mark.type.name&&t.start+1>=n&&t.end+1<=r})))return e;var n=S.findIndex((function(e){var n=e.from,r=e.to,c=e.mark;return Object(d.f)(c)&&n===t.start+1&&r===t.end+1})),r=S[n],c=s()(e);if(C){if(t.end<=C.end&&t.start>=C.start)return c;t.start<=C.end&&t.end>=C.end&&(c=c.slice(0,-1))}return r?c.some((function(e){return e.markRange===r}))||u.b.getRealId(r.mark.attrs.id)!==u.b.getRealId(t.id)?c:(C=t,[].concat(s()(c),[O(O({},t),{},{markRange:r})])):(C=t,[].concat(s()(c),[t]))}),[]);c.setMeta("addToHistory",!1).setMeta("preventUpdate",!0),S.forEach((function(e){Object(d.f)(e.mark)&&(!P.some((function(t){var n=t.markRange;return e===n}))&&c.removeMark(e.from,e.to,e.mark))}));for(var D=[],I={project:!1,section:!1,label:!1,date:!1,collaborator:!1,priority:!1},T=P.length-1;T>=0;T--){var E,A,N,R,L=P[T],M=L.type;if(L.markRange){var z=L.markRange.mark,B=z.type.name===j.b.name,q=z.type.name===j.a.name;if(B||I[M]&&!q)continue;if(!I[M]&&q){D.unshift(L),I[M]=!0;continue}}var U=L.start+1,K=L.end+1,F=!I[M]||"label"===M;if(F&&(D.unshift(L),I[M]=!0),L.markRange){var V=L.markRange.mark.type.name===j.b.name,H=L.markRange.mark.type.name===j.a.name;if(!(V||F&&H||!F&&!H)){c.removeMark(L.markRange.from,L.markRange.to,Object(l.p)(H?j.a.name:j.c.name,t.state.schema));var Y=F?Object(l.p)(j.a.name,t.state.schema).create({id:L.id,isInserted:null!==(E=null===(A=L.markRange)||void 0===A?void 0:A.mark.attrs.isInserted)&&void 0!==E&&E}):Object(l.p)(j.c.name,t.state.schema).create({id:L.id,isInserted:null!==(N=null===(R=L.markRange)||void 0===R?void 0:R.mark.attrs.isInserted)&&void 0!==N&&N});c.addMark(U,K,Y)}}else c.addMark(U,K,Object(l.p)(F?j.a.name:j.c.name,t.state.schema).create({id:L.id,isInserted:!1}))}return{transaction:c,highlightedMatches:D}}function h(e){var t=e.state,n=e.start,r=e.end,c=e.transaction,i=void 0===c?t.tr:c;return Object(l.q)(n,r,t.doc).forEach((function(e){if(e.mark.type.name===j.a.name)return e.mark.attrs.isInserted?i.delete(e.from,e.to+1):void function(e){var t=e.state,n=e.markRange,r=e.transaction,c=void 0===r?t.tr:r;c.removeMark(n.from,n.to,n.mark.type),c.addMark(n.from,n.to,Object(l.p)(j.b.name,t.schema).create({id:n.mark.attrs.id}))}({state:t,markRange:e,transaction:i})})),i}function m(e){var t=e.id,n=e.matchString,r=e.start,c=e.end,i=e.state,a=e.transaction,o=void 0===a?i.tr:a,s=e.isIgnored,u=void 0!==s&&s,d=e.isHighlighted,b=void 0===d||d,p=e.leadingSpace,O=void 0===p||p,f=e.trailingSpace,h=void 0===f||f,m=o.doc.textContent[r-2],v=O&&" "!==m&&void 0!==m;n="".concat(v?" ":"").concat(n).concat(h?" ":"");var g=r+(v?1:0),y=u?Object(l.p)(j.b.name,i.schema).create({id:t}):b?Object(l.p)(j.a.name,i.schema).create({id:t,isInserted:!0}):Object(l.p)(j.c.name,i.schema).create({id:t,isInserted:!0});return o.insertText(n,r,c).addMark(g,g+n.length-1,y)}},dbRB:function(e,t,n){"use strict";function r(e,t){return e===t||!(!e||!t)&&(e.sorted_by===t.sorted_by&&e.sort_order===t.sort_order&&e.grouped_by===t.grouped_by&&e.filtered_by===t.filtered_by&&e.view_mode===t.view_mode)}n.d(t,"a",(function(){return r}))},e3uP:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("TSYQ"),c=n.n(r),i=n("d7s4"),a=n("nKUr");function o(e){var t=e.className,n=e.content,r=e.markdownMode,o=void 0===r?"inline":r,s=e.placeholder,l=void 0===s?"":s,u="inline"===o?null==n?void 0:n.replace(/^\*\s+/,""):n,d=(null==u?void 0:u.length)>0;return Object(a.jsx)(i.a,{mode:o,className:c()("task_content",t,{placeholder:!d}),source:d?u:l})}},eVCd:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return f}));var r=n("lSNA"),c=n.n(r),i=n("J4zp"),a=n.n(i),o=n("Bcse"),s=n.n(o),l=n("3WX/"),u=n.n(l);n("Ek05");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e){if(!e)return{type:null,linkId:"",content:e};var t,n,r=e.match(/mail.google.com\/mail/g);if(r&&1===r.length){if((r=/(https?:\/\/mail.google.com\/mail\/[^\s]+) \(([^)]+)\)/.exec(e))&&r[0]===e)return e=e.replace(r[0],r[2]),{type:"gmail_new",linkId:r[1],content:e};if((r=/\[([^\]]+)\]\((https?:\/\/mail.google.com\/mail(?:\/|\?)[^\s]+)\)/.exec(e))&&r[0]===e)return{type:"gmail_new",linkId:r[2],content:r[1]}}if((r=/\[([^\]]+)\]\((https?:\/\/[^\s]*twist(?:app)?.com\/a\/[^\s]+)\)/.exec(e))&&r[0]===e)return{type:"twist",linkId:r[2],content:e};if(e.includes("[[gmail=")&&(r=/\[\[gmail=(.+?),\s*(.+?)\]\]/.exec(e))&&r[0]===e)return{type:"gmail",linkId:r[1],content:r[2]};if(e.includes("[[thunderbird")&&(r=/\[\[thunderbird\n?([^\n]+)\n([^\n]+)\n\s*\]\]/.exec(e))&&r[0]===e)return{type:"thunderbird",linkId:r[2],content:r[1]};if(e.includes("[[outlook=")&&(r=/\[\[outlook=(.+?),\s*(.+?)\]\]/.exec(e))&&r[0]===e)return{type:"outlook",linkId:r[1],content:r[2]};if(e.includes("https://outlook.live.com/owa/?ItemID")&&(null!==(t=r=/\[(.+)\]\((.+)\)/.exec(e))&&void 0!==t&&null!==(n=t[2])&&void 0!==n&&n.startsWith("https://outlook.live.com/owa/?ItemID")))return{type:"new_outlook",linkId:r[2],content:r[1]};return e.includes("https://mail.superhuman.com/")&&(r=/\[([^\]]+)\]\((https?:\/\/mail.superhuman.com.+?thread\/[^\s]+)\)/.exec(e))&&r[0]===e?(e=r[1].replace(" \u2022 Superhuman",""),{type:"superhuman",linkId:r[2],content:e}):(r=e.match(/readdle-?spark:\/\//g))&&1===r.length&&(r=/(.+)\s(\[\(.+\)\]\(readdle-?spark:[^\s]+\))/.exec(e))?{type:"spark",linkId:r[2],content:r[1]}:{type:null,linkId:"",content:e}}function p(e,t){var n=t.type,r=t.linkId;return(e=(e||"").trim()).includes("@")&&(e=" ".concat(e," ")),"gmail"===n?"[[gmail=".concat(r,", ").concat(e," ]]"):"thunderbird"===n?"[[thunderbird\n ".concat(e.replace(/\n/g,""),"\n").concat(r.replace(/\n/g,"")," \n ]]"):"outlook"===n?"[[outlook=".concat(r,", ").concat(e," ]]"):"spark"===n?"".concat(e," ").concat(r):"twist"===n?e:n?(e=(e=e.replace(/\[/g,"(")).replace(/\]/g,")"),r=(r=r.replace(/\(/g,"[")).replace(/\)/g,"]"),"[".concat(e,"](").concat(r,")")):e}function O(e,t,n,r,c,i,o,l,d,b){if(!t)throw new Error("EditorState is not valid");var p=function(e,t,n,r,c,i){if(!e)throw new Error("EditorState is not valid");var a=e.mode,o=e.id,s=new Error("No valid task ID found"),l=void 0,u=void 0;switch(a){case"edit":var d;if(null==o)throw s;l=n.findIndex((function(e){return e.id===o})),u=e.indent||(null===(d=r[o])||void 0===d?void 0:d.indent);break;case"add_below":if(null==o)throw s;var j=r[o];if(l=n.findIndex((function(e){return e.id===o}))+1,e.indent)u=e.indent;else if(j){var b=t[o],p=j.indent||1;u=Boolean(c[b.id])?Math.min(p+1,i):p}else u=1,l=n.length;break;case"add_above":if(null==o)throw s;l=n.findIndex((function(e){return e.id===o})),u=e.indent||r[o]&&r[o].indent||1;break;case"add_bottom":l=n.length,u=e.indent||1;break;case"add_bottom_website":case"add_bottom_email":l=n.length,u=e.indent||1;break;case"add_top":l=0,u=1}return[l,u]}(t,r,o,i,n,c),O=a()(p,2),f=O[0],h=O[1];if("number"!=typeof f||isNaN(f))throw new Error("Task editor: Could not find the correct position to save task");var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,c=arguments.length>6?arguments[6]:void 0,i=null,a=0;if(0===e)0===r.length?(i=n,a=1):(i=r[0].parent_id,a=r[0].child_order);else{var o=r[e-1],s=c[o.id].indent||1;if(t>s)i=o.id,a=1;else if(t===s)i=o.parent_id,a=o.child_order+1;else if(t<s){var l=r.slice(0,e).reverse().find((function(e){return c[e.id].indent===t}));i=(null==l?void 0:l.parent_id)||null,a=((null==l?void 0:l.child_order)||0)+1}}return{parent_id:i,child_order:a}}(f,h,null==t?void 0:t.mode,b,o,n,i),v=m.parent_id,g=m.child_order,y=u()(e,(function(e){return void 0===e}));y=j(j({},e),{},{child_order:g,parent_id:v});var x=e.note,w=e.reminders;return delete y.note,delete y.reminders,l===y.project_id&&d===y.section_id||(y=j(j({},y),{},{parent_id:null}),y=s()("child_order",y)),{fields:y,note:x,reminders:w}}function f(e){try{var t=e.getData("text/uri-list"),n=e.getData("text/plain");if(t&&n&&t.trim().toLowerCase().startsWith("message:"))return"[".concat(n,"](").concat(t,")")}catch(e){}return null}},eYn1:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("q1tI"),c=n("/MKj"),i=n("CZSy"),a=n("4MLW"),o=n("aSh9");function s(e){var t,n,s=e.listType,l=e.viewOptions,u=e.alwaysUseDefault,d=void 0!==u&&u,j=Object(c.h)(o.j),b=Object(c.h)(o.i),p=Object(c.h)(o.k),O=Object(c.h)(o.l),f=Object(c.h)(o.m),h=null!==(t=null==l?void 0:l.sorted_by)&&void 0!==t?t:null,m=null!==(n=null==l?void 0:l.sort_order)&&void 0!==n?n:null,v=Object(r.useMemo)((function(){return(Array.isArray(s)?s:[s]).map((function(e){if(!h||h===i.t||d)switch(e){case a.d:return Object(o.h)(o.e,Object(o.n)(o.g),b,p,O,o.f);case a.a:return Object(o.h)(o.e,Object(o.n)(o.g),o.d,o.c,b,p,O,o.f);case a.b:case a.c:return Object(o.h)(Object(o.n)(o.g),o.e,b,p,O,o.f);case a.g:case a.e:return Object(o.h)(o.a,o.f);case a.f:return Object(o.h)(Object(o.n)(o.g),b,p,O,o.f);default:return Object(o.h)(o.a,o.f)}var t,n=m===i.A;switch(h){case i.v:t=Object(o.h)(n?Object(o.n)(o.b):o.b,Object(o.n)(o.g),o.e,b,p,O,o.f);break;case i.s:t=Object(o.h)(n?Object(o.n)(j):j,Object(o.n)(o.g),o.e,b,p,O,o.f);break;case i.u:t=Object(o.h)(n?Object(o.n)(o.e):o.e,Object(o.n)(o.g),o.d,o.c,b,p,O,o.f);break;case i.r:t=Object(o.h)(n?Object(o.n)(o.c):o.c,Object(o.n)(o.g),o.d,b,p,O,o.f);break;case i.w:t=Object(o.h)(n?Object(o.n)(o.g):o.g,o.e,b,p,O,o.f);break;case i.x:t=Object(o.h)(n?Object(o.n)(b):b,p,O,o.f);break;case i.y:t=Object(o.h)(n?Object(o.n)(f):f,p,O,o.f);break;default:t=Object(o.h)(o.a,o.f)}return t}))}),[d,b,j,p,O,f,s,m,h]);return Array.isArray(s)?v:v[0]}},fCkL:function(e,t,n){"use strict";var r=n("J4zp"),c=n.n(r),i=n("q1tI"),a=n("GYl5"),o=n("TSYQ"),s=n.n(o),l=n("17x9"),u=n.n(l),d=n("VFEO"),j=n("GpCm"),b=n("FUwg"),p=n("nKUr");function O(e){var t=e.placement,n=void 0===t?"bottom":t,r=e.renderReferenceElement,o=e.selectedDate,l=e.selectedItems,u=e.onClose,O=void 0===u?function(){}:u,f=e.onDateSelect,h=e.onToggle,m=e.className,v="function"==typeof r,g=Object(i.useState)(r&&!v),y=c()(g,2),x=y[0],w=y[1];function k(){w(!1),null==h||h(!1),O()}function _(){w(!0),null==h||h(!0)}var S=Object(a.useEvent)((function(e){_(),null==e||e.preventDefault(),null==e||e.stopPropagation()})),C=Object(a.useEvent)((function(e){e.code!==d.a.ARROW_DOWN&&e.code!==d.a.ENTER&&e.code!==d.a.SPACE||(_(),null==e||e.preventDefault(),null==e||e.stopPropagation())}));return Object(p.jsx)(j.c,{className:s()("scheduler_popper",m),zIndex:!1,modifiers:[j.b,j.a],placement:n,renderReferenceElement:v?function(e){var t=e.ref,n=e.isExpanded;return r({isExpanded:n,onClick:S,onKeyDown:C,ref:t})}:r,isShown:x,withArrow:!1,onClose:k,resizeOnInput:!0,children:x?Object(p.jsx)(b.a,{selectedDate:o,selectedItems:l,onClose:k,onDateSelect:function(e){k(),f(e)}}):null})}O.propTypes={isMultiSelect:u.a.bool,placement:u.a.string,renderReferenceElement:u.a.oneOfType([u.a.instanceOf(HTMLElement),u.a.func]),className:u.a.string,selectedDate:u.a.object,selectedItems:u.a.array,onDateSelect:u.a.func,onClose:u.a.func,onToggle:u.a.func},O.defaultProps={onDateSelect:function(){},onHide:function(){}},t.a=O},gIvJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r,c=n("q1tI");function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e){return c.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24"},e),r||(r=c.createElement("path",{fill:"currentColor",d:"M6 6h12a2 2 0 012 2v8a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2zm0 1a1 1 0 00-1 1v8a1 1 0 001 1h12a1 1 0 001-1V8a1 1 0 00-1-1H6zm10.7 1.6a.5.5 0 01.6.8L12 13.1 6.7 9.4a.5.5 0 11.6-.8l4.7 3.3 4.7-3.3z"})))}n.p},gXw9:function(e,t,n){"use strict";n.d(t,"a",(function(){return F})),n.d(t,"b",(function(){return L}));var r=n("lSNA"),c=n.n(r),i=n("QILm"),a=n.n(i),o=n("q1tI"),s=n("/MKj"),l=n("kazx"),u=n("GIsW"),d=n("e9+e"),j=n("Vbab"),b=n("XOeF"),p=n("ImH7"),O=n("R/7U"),f=n("zZLx"),h=n("UVeO"),m=n("Q05W"),v=n("18PS"),g=n("rcvD"),y=n("RIqP"),x=n.n(y),w=n("J4zp"),k=n.n(w),_=n("LvDl"),S=n("S+H7"),C=n("gmEJ"),P=n("jgxE"),D=n("G5Ko"),I=n("ej5t"),T=n("4rXO"),E=["workspaceScope"],A=["workspaces","projects"];function N(e){var t=e.projectId,n=e.sectionId;return n?"".concat(t,"-").concat(n):String(t)}function R(e,t,n,r){var c=n.selectionScope,i=n.searchText,a=void 0===i?"":i,o=r.sections,s=r.collaborators,l=r.isTeamsEnabled,u=null!=e&&l,d=t.map((function(t){return{value:N({projectId:t.id}),label:t.name,type:"project",project:t,workspace:null!=e?e:"personal",isShared:Object(S.q)({collaborators:s},t.id),indent:a?1:t.indent+(u?1:0)}})),b="projects-only"===c?d:d.reduce((function(e,t){var n=t.project,r=Object(C.i)(n.id)({sections:o});return[].concat(x()(e),[t],x()(r.map((function(e){return{value:N({projectId:n.id,sectionId:e.id}),label:e.name,type:"section",section:e,project:n,indent:a?1:t.indent+1}}))))}),[]),p=""!==a?b.filter((function(e){var t=e.label;return-1!==Object(T.a)(a,t)})):b;return 0===p.length?[]:u&&""===a?["string"==typeof e?{type:"workspace",value:"personal",label:Object(j.a)("Personal"),workspace:"personal"}:{type:"workspace",value:"ws-".concat(e.id),label:e.name,workspace:e}].concat(x()(p)):p}function L(e,t){var n=e.workspaceScope,r=void 0===n?"personal":n,c=a()(e,E),i=t.workspaces,o=void 0===i?null:i,s=t.projects,l=a()(t,A),u=Object(_.partition)(Object(b.s)({projects:s}),(function(e){return e.inbox_project||e.team_inbox})),d=k()(u,2),j=d[0],p=d[1];l.isTeamsEnabled||(r="personal");var O=function(e,t){var n=t.workspaces,r=t.projects;if("string"==typeof e)return"all"===e?Object(D.c)({workspaces:n}):"personal";var c=null;if("project"===e.type){var i=Object(b.k)({projects:r},e.id);if(null==i||!i.workspace_id)return"personal";c=i.workspace_id}else c=e.id;var a=Object(D.d)({workspaces:n},c);return a?[a]:[]}(r,{workspaces:o,projects:s});"personal"===O&&(r="personal",O=[]);var f=O.flatMap((function(e){return R(e,Object(P.a)({projects:s},e.id),c,l)}));return"string"==typeof r?[].concat(x()(R(null,j,c,l)),x()(R("personal",p,c,l)),x()(f)):f}var M="FPJR+La",z="lLE-4PW",B=n("nKUr"),q=["title"];function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e){var t=e.selectedOption,n=e.onSelect,r=e.selectionScope,c=e.workspaceScope,i=void 0===c?"personal":c,o=e.disabled,s=e.anchorRef,l=e.position,u=void 0===l?"bottom":l,d=e.withArrow,b=void 0!==d&&d,p=e.extraOptionLabel,O=void 0===p?null:p,h=e.canAddProject,m=void 0===h||h,v=e.renderToggleButton,g=e.isOpen,y=e.onClose;return Object(B.jsxs)(f.g,{isShown:g,value:t?N(t):null,onChange:function(e){var t,r,c,i,a,o=e.target,s=(t=o.value,r=("string"==typeof t?t:t[0]).split("-"),c=k()(r,2),i=c[0],a=c[1],{projectId:Object(I.a)(i),sectionId:a});s&&n(s)},disabled:o,children:[v?Object(B.jsx)(f.h,{children:function(e){var t=e.toggleDropdown,n=e.isDropdownOpen,r=e.buttonProps,c=(r.title,a()(r,q));return v({isDropdownOpen:n,toggleDropdown:t,buttonProps:c})}}):null,Object(B.jsxs)(f.e,{className:M,anchorRef:s,position:u,withArrow:b,width:null,onClose:y,children:[Object(B.jsx)(f.f,{placeholder:Object(j.a)("Type a project")}),Object(B.jsx)(f.d,{"aria-label":Object(j.a)("Select a project"),children:Object(B.jsx)(V,{selectionScope:r,workspaceScope:i,canAddProject:m,extraOptionLabel:O})})]})]})}function V(e){var t=e.selectionScope,n=e.workspaceScope,r=e.extraOptionLabel,c=e.canAddProject,i=Object(o.useContext)(f.a).searchText,a=""!==i,l=function(e){var t=e.searchText,n=void 0===t?"":t,r=e.selectionScope,c=e.workspaceScope,i=Object(s.h)(p.f),a=Object(s.h)((function(e){return e.workspaces})),l=Object(s.h)((function(e){return e.projects})),u=Object(s.h)((function(e){return e.sections})),d=Object(s.h)((function(e){return e.collaborators}));return Object(o.useMemo)((function(){return L({searchText:n,selectionScope:r,workspaceScope:c},{workspaces:a,projects:l,sections:u,collaborators:d,isTeamsEnabled:i})}),[a,l,u,d,n,r,c,i])}({searchText:i,selectionScope:t,workspaceScope:n}),u=0===l.length&&i.length>0;return Object(B.jsxs)(B.Fragment,{children:[r?Object(B.jsx)(f.b,{value:"project-0",children:function(e){var t=e.isSelected;return Object(B.jsx)(d.a,{label:r,isSelected:t,icon:Object(B.jsx)(h.Vb,{})})}}):null,u?Object(B.jsx)(H,{canAddProject:c,searchText:i}):l.map((function(e){return"workspace"===e.type?Object(B.jsx)(G,{workspace:e.workspace},e.value):"project"===e.type?Object(B.jsx)(Y,K({isFiltering:a},e),e.value):Object(B.jsx)(W,K({isFiltering:a},e),e.value)}))]})}function H(e){var t=e.canAddProject,n=e.searchText,r=Object(s.g)();return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(l.a,{as:f.c,display:"flex",alignItems:"center",paddingY:"xsmall",marginX:"small",children:Object(j.a)("Project not found")}),t?Object(B.jsxs)(l.a,{as:"button",width:"full",display:"flex",alignItems:"center",textAlign:"start",paddingX:"small",paddingY:"xsmall",className:z,onClick:function(e){var t;e.stopPropagation(),t=n,r(Object(b.f)({name:t,child_order:0}))},children:[Object(B.jsx)(h.B,{}),Object(j.a)('Create "{query}"').replace("{query}",n)]}):null]})}function Y(e){var t=e.value,n=e.project,r=e.workspace,c=e.indent,i=e.isShared,a=e.isFiltering,o=Object(s.h)(p.f),l="personal"===r?Object(j.a)("Personal"):r.name,u=a&&o?l:void 0,b=u?"".concat(n.name," (").concat(u,")"):n.name;return Object(B.jsx)(f.b,{value:t,label:b,children:function(e){var t=e.isSelected;return Object(B.jsx)(d.a,{label:n.name,subtitle:u,isSelected:t,icon:Object(B.jsx)(h.Vb,{project:n,isShared:i}),indent:c})}})}function W(e){var t=e.value,n=e.section,r=e.project,c=e.indent,i=e.isFiltering?r.name:void 0,a="".concat(Object(j.a)("Section"),": ").concat(n.name," (").concat(Object(j.a)("Project"),": ").concat(r.name,")");return Object(B.jsx)(f.b,{value:t,label:a,children:function(e){var t=e.isSelected;return Object(B.jsx)(d.a,{label:n.name,subtitle:i,isSelected:t,icon:Object(B.jsx)(m.a,{}),indent:c})}})}function G(e){var t=e.workspace,n=Object(s.h)((function(e){return e.user})),r="personal"===t?Object(j.a)("Personal"):Object(g.a)(t.name);return Object(B.jsxs)(l.a,{as:f.c,display:"flex",alignItems:"center",paddingY:"xsmall",marginX:"small",children:[Object(B.jsx)(l.a,{display:"flex",alignItems:"center",justifyContent:"center",children:"personal"===t?Object(B.jsx)(v.a,{user:n,size:"xsmall"}):Object(B.jsx)(O.a,{src:t.logo_small,size:"small"})}),Object(B.jsx)(l.a,{paddingLeft:"small",flexGrow:1,overflow:"hidden",children:Object(B.jsx)(u.a,{weight:"bold",size:"copy",lineClamp:1,children:r})})]})}},ha8Y:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return c}));var r="projects-list",c="projects-list-",i="project-",a="favorite-projects-list",o="favorite-project-"},i3Tl:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return D})),n.d(t,"c",(function(){return I}));var r=n("J4zp"),c=n.n(r),i=n("QILm"),a=n.n(i),o=n("lSNA"),s=n.n(o),l=n("RIqP"),u=n.n(l),d=n("q1tI"),j=n("TSYQ"),b=n.n(j),p=n("AnGN"),O=n("6O1D"),f="Y5yhyJ9+YO8qffAawwCaoQ==",h=n("nKUr"),m=["children","className"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){return e.split("/")[0]}var x={selectedIds:[],selectedRefId:null,activeId:null};function w(e,t){return e.includes(t)?e.filter((function(e){return e!==t})):[].concat(u()(e),[t])}var k=Object(d.createContext)({dispatch:function(){},getSelection:function(){return[]},isSelected:function(){return!1}});function _(e){return e?u()(e.querySelectorAll("[".concat("data-selection-id","]"))).map((function(e){var t;return null!==(t=e.getAttribute("data-selection-id"))&&void 0!==t?t:""})).filter(Boolean):[]}function S(e){return e.shiftKey}function C(e){return!S(e)&&(p.isMac?e.metaKey:e.ctrlKey)}function P(e){var t=e.children,n=e.className,r=a()(e,m),i=Object(d.useRef)(null),o=Object(d.useState)(x),s=c()(o,2),l=s[0],j=s[1],p=Object(d.useCallback)((function(e){var t=_(i.current);j((function(n){return function(e,t,n){switch(t.type){case"RANGE_MULTISELECTION":var r=e.selectedRefId,c=null!=r?n.indexOf(r):-1,i=n.indexOf(t.id);if(i<0)return e;if(c>=0&&r){for(var a=Math.min(c,i),o=Math.max(c,i),s=[r],l=a;l<=o;++l)l!==c&&(s=[].concat(u()(s),[n[l]]));return g(g({},e),{},{selectedIds:s})}var d=e.selectedIds.filter((function(e){return n.includes(e)}));return g(g({},e),{},{selectedRefId:t.id,selectedIds:w(d,t.id)});case"TOGGLE_MULTISELECTION":var j=e.selectedIds.filter((function(e){return n.includes(e)}));return g(g({},e),{},{selectedRefId:t.id,selectedIds:w(j,t.id)});case"CLEAR_MULTISELECTION":return null===e.selectedRefId&&0===e.selectedIds.length?e:g(g({},e),{},{selectedRefId:null,selectedIds:[]});default:return e}}(n,e,t)}))}),[]),v=Object(d.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"elementId",t=_(i.current),n=l.selectedIds.filter((function(e){return t.includes(e)}));return"uniqueId"===e?n:n.map(y)}),[l.selectedIds]),P=Object(d.useCallback)((function(e){return v("uniqueId").includes(e)}),[v]),D=Object(d.useMemo)((function(){return{dispatch:p,getSelection:v,isSelected:P}}),[p,v,P]),I=0===v().length,T=Object(d.useCallback)((function(){p({type:"CLEAR_MULTISELECTION"})}),[p]);return Object(d.useEffect)((function(){if(!I)return document.addEventListener("click",e,{capture:!0}),function(){document.removeEventListener("click",e,{capture:!0})};function e(e){(function(e){var t=e.target,n=null!=t.closest("[".concat("data-selection-id","]")),r=n&&(S(e)||C(e)),c=null!=t.closest("[data-selection-clear-disabled]"),i=null!=t.closest("#item_selecter")||null!=t.closest(".scheduler-item-selecter")||null!=t.closest(".dialog")||null!=t.closest(".popper")||null!=t.closest("#GB_window")||null!=t.closest(".GB_overlay")||null!=t.closest(".ist_tooltip_holder")||null!=t.closest("#ist_complete_floater")||null!=t.closest(".ist_menu")||null!=t.closest(".menu_selecter_more")||null!=t.closest(".multi_select_toolbar")||null!=document.querySelector("body > .popper__overlay");return n||r||c||i})(e)||T()}}),[T,I]),Object(h.jsxs)(k.Provider,{value:D,children:[Object(h.jsx)("div",g(g({role:"listbox","aria-multiselectable":"true","data-selection-empty":I?"":void 0,tabIndex:-1,className:b()(f,n),ref:i},r),{},{children:t})),I?null:Object(h.jsx)(O.f,{identifier:"DISMISS",handler:T,category:"global"})]})}function D(e){var t,n=e.selectionId,r=e.isDisabled,c=void 0!==r&&r,i=Object(d.useMemo)((function(){return function(e){return"".concat(e,"/").concat(Math.floor(1e10*Math.random()))}(n)}),[n]),a=Object(d.useContext)(k),o=a.dispatch,l=a.isSelected,u=Object(d.useCallback)((function(){c||o({type:"TOGGLE_MULTISELECTION",id:i})}),[c,i,o]),j=!c&&l(i);return{isSelected:j,toggleMultiselection:u,props:(t={},s()(t,"data-selection-id",c?"":i),s()(t,"aria-selected",c?void 0:j),s()(t,"onClick",(function(e){e.isDefaultPrevented()||(C(e)&&(c||o({type:"TOGGLE_MULTISELECTION",id:i}),e.preventDefault()),S(e)&&(c||o({type:"RANGE_MULTISELECTION",id:i}),e.preventDefault()))})),t)}}function I(){return Object(d.useContext)(k)}},"iDm+":function(e,t,n){"use strict";n.d(t,"d",(function(){return k})),n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return C})),n.d(t,"f",(function(){return P})),n.d(t,"e",(function(){return D})),n.d(t,"g",(function(){return I}));var r=n("RIqP"),c=n.n(r),i=n("lSNA"),a=n.n(i),o=n("J4zp"),s=n.n(o),l=n("lDtu"),u=n("mYBN"),d=n("sEfC"),j=n.n(d),b=n("7tbW"),p=n.n(b),O=n("Vbab"),f=n("OgjY"),h=n("Ek05"),m=n("oyQV"),v=n("sslh"),g=n("YRxN"),y=n("dD6n");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t){for(var n,r=[],c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.onlyLastOccurence,r=void 0!==n&&n,c=l.c.is_spaceless_lang(h.a.getDateistLang()),i=c?"(^|\\s*)".concat(e):"(^|\\s+)".concat(e,"(?:$|(?=[\\s\\)\\]]+))");return r&&(i="".concat(i,"(?!.*").concat(i,")")),new RegExp(i,"gi")}(t=t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&"));null!==(n=c.exec(e));){var i=n[0].match(t);if(i&&void 0!==i.index){var a=n.index+i.index;r.push({start:a,end:n.index+n[0].length})}}return r}function _(e,t,n){var r=[e],c=e.split(" "),i=s()(c,2),a=i[0],o=i[1],l="";if(o){var u=o[0];l="".concat(a," ").concat(u,"\\."),r.push(o)}return l!==e&&l.length>0&&r.push(l),a!==e&&a.length>0&&r.push(a),String(t)===String(n)&&r.push(Object(m.a)(Object(O.d)("task_assignment","Me"))),r}var S=j()((function(e){var t,n,r=e.editor,c=e.options,i=e.storage;if(r.view.isDestroyed)return!0;var a=Object(y.c)({editor:r,options:c}),o=a.transaction,s=a.highlightedMatches;r.view.dispatch(o);var l=i.highlightedMatches===s,u=i.highlightedMatches;if(i.highlightedMatches=s,!c.onChange||!i.markdownSerializer)return!0;var d=c.getStoreState(),j=C({setOnlyContent:l,isDateistDisabled:d.isDateistDisabled,isPriorityDisabled:d.isPriorityDisabled,isLabelsDisabled:d.isLabelsDisabled,isAssigneeDisabled:d.isAssigneeDisabled,previousHighlightedMatches:u,editorState:r.state,initialDueDate:null!==(t=null===(n=i.initialTask)||void 0===n?void 0:n.due)&&void 0!==t?t:null,highlightedMatches:i.highlightedMatches,previousChange:i.previousChange,markdownSerializer:i.markdownSerializer});return i.previousChange=j,c.onChange(j),!0}),50,{leading:!0,trailing:!0});function C(e){var t=e.editorState,n=e.highlightedMatches,r=e.markdownSerializer,i=e.currentDate,a=e.initialDueDate,o=void 0===a?null:a,s=e.previousChange,l=void 0===s?null:s,d=e.previousHighlightedMatches,j=void 0===d?[]:d,b=e.isDateistDisabled,O=void 0!==b&&b,h=e.isPriorityDisabled,m=void 0!==h&&h,v=e.isLabelsDisabled,g=void 0!==v&&v,y=e.isAssigneeDisabled,x=void 0!==y&&y,k=e.setOnlyContent,_=void 0!==k&&k,S=t.tr,C=n.reduceRight((function(e,t){var n,r=t.start+1,a=S.doc.content.size>t.end?t.end+1:S.doc.content.size;if(S.delete(r,a),_)return null!=l?l:{};var s=w({},e);switch(t.type){case"collaborator":return w(w({},s),{},{responsible_uid:t.data.id});case"date":try{var u,d=null!==(u=function(e){var t=e.dateistResult,n=e.initialDueDate,r=e.currentDate,c=void 0===r?new Date:r;if(t.no_date)return null;if(!(n&&t.has_only_time&&!t.is_recurring&&!n.is_recurring))return f.a.fromDateist(t);var i,a=t.due_date,o=n.getTime()<c.getTime(),s=n.isSameDate(c),l=a.getHours()<c.getHours()||a.getHours()===c.getHours()&&a.getMinutes()<c.getMinutes();return i=o?l?n.postpone():c:s&&l?n.postpone():n,n.inheritDate({year:i.getFullYear(),month:i.getMonth(),day:i.getDate(),hours:a.getHours(),minutes:a.getMinutes(),seconds:0},{withTime:!0,timezone:n.timezone})}({dateistResult:t.data.dateistResult,initialDueDate:o,currentDate:i}))&&void 0!==u?u:"NO_DATE";return w(w({},s),{},{due:d})}catch(e){return w(w({},s),{},{due:null})}case"label":return w(w({},s),{},{labels:[].concat(c()(null!==(n=s.labels)&&void 0!==n?n:[]),[t.data.name])});case"priority":var j=1;switch(t.data.value){case 1:j=4;break;case 2:j=3;break;case 3:j=2;break;case 4:j=1}return w(w({},s),{},{priority:j});case"project":return w(w({},s),{},{project_id:t.data.id});case"section":return w(w({},s),{},{section_id:t.data.id});default:return s}}),{});C.labels&&(C.labels=p()(C.labels));var P=_?null:j.reduce((function(e,t){switch(t.type){case"collaborator":if(!x&&!C.responsible_uid)return w(w({},e),{},{responsible_uid:null});break;case"date":if(!O&&!C.due)return w(w({},e),{},{due:null});break;case"label":if(!g&&!C.labels)return w(w({},e),{},{labels:[]});break;case"priority":if(!m&&!C.priority)return w(w({},e),{},{priority:null});break;case"project":if(!C.project_id)return w(w({},e),{},{project_id:null});break;case"section":if(!C.section_id)return w(w({},e),{},{section_id:null})}return e}),{});return w(w(w({},C),P),{},{content:r.serialize(Object(u.o)(S.doc.content,t.schema))})}function P(e){return e.type.name===v.a.name||e.type.name===v.c.name||e.type.name===v.b.name}function D(e){var t=e.reduce((function(e,t){var n=e[t.type];if(n){var r=t.end<=n.end,c=t.start<n.end&&t.start>n.start;if(r||c)return e}return w(w({},e),{},a()({},t.type,t))}),{});return e.filter((function(e){return"label"===e.type||t[e.type]===e}))}function I(e){var t=e.content,n=e.projects,r=e.sections,c=e.labels;function i(e,t,n){return e.substring(0,t)+e.substring(n)}var a={content:t},o=Object(g.d)(a.content);if((null==o?void 0:o.length)>0){var s=o.pop();if(s){switch(null==s?void 0:s.id){case 4:a.priority=1;break;case 3:a.priority=2;break;case 2:a.priority=3;break;case 1:a.priority=4}a.content=i(a.content,s.start,s.end)}}var l=Object(g.a)(a.content).pop();l&&(a.due=f.a.fromDate(l.data.dateistResult.due_date),a.content=i(a.content,l.start,l.end));var u=Object(g.e)(a.content,n).pop();if(u&&"string"==typeof u.id){a.project_id=u.id,a.content=i(a.content,u.start,u.end);var d=Object(g.f)(a.content,r,[u.id]).pop();d&&"string"==typeof d.id&&(a.section_id=d.id,a.content=i(a.content,d.start,d.end))}var j=Object(g.b)(a.content,c),b=0;return a.labels=j.map((function(e){return a.content=i(a.content,e.start-b,e.end-b),b+=e.end-e.start,e.data.name})),a.content=a.content.trim(),a}},iWii:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r}));var r="top-menu-projects-list",c="top-menu-project-"},idbf:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("QS0n"),c=n("kazx"),i=n("GIsW"),a=n("HrhL"),o="_67vYS3K",s="WQcHCWm",l="I0d9ZtQ",u=n("nKUr");function d(e){var t=e.id,n=e.isExpanded,d=e.onToggleExpand,j=e.icon,b=e.button,p=e.title,O=e.linkTo,f=e.children,h=e["data-track"];return Object(u.jsxs)(a.a,{id:t,isExpanded:n,onToggleExpand:d,children:[Object(u.jsx)(a.c,{position:"relative",background:"aside",className:[o,"focus-marker-enabled-within"],"data-expansion-panel-header":!0,children:Object(u.jsxs)(c.a,{display:"flex",alignItems:"center",paddingLeft:"xsmall",paddingY:"xsmall",borderRadius:"standard",overflow:"hidden",className:O?l:void 0,children:[O?Object(u.jsxs)(c.a,{as:r.b,to:O,flexGrow:1,display:"flex",alignItems:"center",overflow:"hidden",children:[j,Object(u.jsx)(i.a,{size:"body",tone:"secondary",weight:"semibold",lineClamp:1,children:p})]}):Object(u.jsxs)(c.a,{flexGrow:1,display:"flex",alignItems:"center",children:[j,Object(u.jsx)(i.a,{size:"body",tone:"secondary",weight:"semibold",lineClamp:1,children:p})]}),Object(u.jsx)(c.a,{flexShrink:0,children:b}),Object(u.jsx)(c.a,{flexShrink:0,children:Object(u.jsx)(a.d,{variant:"secondary",toggleSide:"end",exceptionallySetClassName:s,title:p,"data-expansion-panel-toggle":!0,"data-track":h})})]})}),Object(u.jsx)(a.b,{children:f})]})}},ihLx:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var r=n("Vbab"),c={today:"date_shortcut_today",tomorrow:"date_shortcut_tomorrow",nextWeek:"date_shortcut_nextweek",nextWeekend:"date_shortcut_nextweekend",thisWeekend:"date_shortcut_thisweekend",laterThisWeek:"date_shortcut_laterthisweekend",inTheMorning:"date_shortcut_morning",postpone:"date_shortcut_postpone",noDate:"date_shortcut_nodate"};function i(){return[Object(r.a)("Sun"),Object(r.a)("Mon"),Object(r.a)("Tue"),Object(r.a)("Wed"),Object(r.a)("Thu"),Object(r.a)("Fri"),Object(r.a)("Sat")]}},ihri:function(e,t,n){"use strict";n.d(t,"b",(function(){return _})),n.d(t,"d",(function(){return S})),n.d(t,"a",(function(){return O}));var r=n("IJUe"),c=n("4eld"),i=n("ihLx"),a=n("lSNA"),o=n.n(a),s=n("UVeO"),l=n("nKUr");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e){return Object(l.jsx)("svg",d(d({width:24,height:24},e),{},{children:Object(l.jsx)("path",{fill:"gray",fillRule:"evenodd",d:"M8.535 14a4 4 0 1 1 6.93 0h-6.93zm.02-10.315a.5.5 0 0 1 .654.27l.765 1.848a.5.5 0 1 1-.923.383l-.766-1.848a.5.5 0 0 1 .27-.653zm6.89 0a.5.5 0 0 1 .27.653l-.766 1.848a.5.5 0 0 1-.923-.383l.765-1.847a.5.5 0 0 1 .653-.27zm4.87 4.87a.5.5 0 0 1-.27.654l-1.848.765a.5.5 0 0 1-.383-.923l1.848-.766a.5.5 0 0 1 .653.27zm-16.63 0a.5.5 0 0 1 .653-.27l1.848.766a.5.5 0 0 1-.383.923L3.956 9.21a.5.5 0 0 1-.27-.653zM9.5 17h5a.5.5 0 1 1 0 1h-5a.5.5 0 1 1 0-1zm-4-2h13a.5.5 0 1 1 0 1h-13a.5.5 0 1 1 0-1z"})}))}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(e){var t,n=e.type,r=e.size,c=void 0===r?"medium":r,i={"aria-hidden":!0,focusable:!1,size:c,width:"medium"===c?24:28,height:"medium"===c?24:28};switch(n){case"today":t=Object(l.jsx)(s.pc,p({className:"scheduler-suggestions-item-icon--today"},i));break;case"tomorrow":t=Object(l.jsx)(s.qc,p({className:"scheduler-suggestions-item-icon--tomorrow"},i));break;case"nextWeek":t=Object(l.jsx)(s.m,p({className:"scheduler-suggestions-item-icon--next-week"},i));break;case"laterThisWeek":var a=p({className:"scheduler-suggestions-item-icon--later-this-week"},i);t="large"===c?Object(l.jsx)(s.ib,p({},a)):Object(l.jsx)(s.hb,p({},a));break;case"nextWeekend":case"thisWeekend":var o=p({className:"scheduler-suggestions-item-icon--weekend"},i);t="large"===c?Object(l.jsx)(s.Bc,p({},o)):Object(l.jsx)(s.Ac,p({},o));break;case"noDate":t=Object(l.jsx)(s.t,p({},i));break;case"inTheMorning":t=Object(l.jsx)(j,p({},i));break;case"postpone":t=Object(l.jsx)(s.Sb,p({className:"scheduler-suggestions-item-icon--postpone"},i))}return t};var f=function(e){var t=e.currentDate,n=e.suggestion,a=e.onClick,o=n.date,s=n.label,u=n.type;return Object(l.jsxs)(c.a,{className:"scheduler-suggestions-item",onClick:function(){return a(u,o)},"data-track":"scheduler|".concat(i.b[u]),"data-action-hint":"scheduler-suggestion-".concat(u),children:[Object(l.jsx)("div",{className:"scheduler-suggestions-item-icon",children:Object(l.jsx)(O,{type:u})}),Object(l.jsx)("div",{className:"scheduler-suggestions-item-label",children:s}),function(){if(o){var e=Object(r.a)(o,{withYear:"auto",today:t});if("postpone"===u)return Object(l.jsx)("div",{className:"scheduler-suggestions-item-weekday",children:e});var n=o.getDay();return Object(l.jsx)("div",{className:"scheduler-suggestions-item-weekday",children:"nextWeek"===u||"nextWeekend"===u?e:Object(i.a)()[n]})}}()]})};var h=function(e){var t=e.currentDate,n=e.suggestions,r=e.onSuggestionSelect;return Object(l.jsx)("div",{className:"scheduler-suggestions",children:null==n?void 0:n.map((function(e){return Object(l.jsx)(f,{currentDate:t,suggestion:e,onClick:r},e.type)}))})},m=n("VPsy"),v=n("Ek05"),g=n("K6Df"),y=n("Vbab"),x=n("OgjY"),w=n("LYyr"),k=n("TIQF");function _(e){var t=e.items,n=e.today,c=e.weekStartDay,i=void 0===c?1:c,a=e.weekendStartDay,o=void 0===a?6:a,s=e.nextWeekDay,u=void 0===s?1:s,d=e.selectedDate,j=e.withPostponeDate,b=void 0!==j&&j,p=[];t.some((function(e){return!e.due||!e.due.isSameDate(n)}))&&p.push("today");var O=new Date;O.setDate(n.getDate()+1),t.some((function(e){return!e.due||!e.due.isSameDate(O)}))&&p.push("tomorrow");var f=n.getDay(),h=((o=Object(m.a)(o))+1)%7,_=new Date(n);return _.setDate(n.getDate()+2),Object(v.b)(f,o,h)||Object(v.b)(_.getDay(),o,h)||p.includes("today")&&p.includes("tomorrow")||p.push("laterThisWeek"),f===(o-1+7)%7||Object(v.b)(f,o,h)||p.push("thisWeekend"),f!==(o=Object(m.a)(o))&&f!==h||p.push("nextWeekend"),f!==((u=Object(m.a)(u))-1+7)%7&&p.push("nextWeek"),t.some((function(e){return!e.due||!e.due.is_recurring}))||p.push("postpone"),t.some((function(e){return e.due}))&&p.push("noDate"),p.map((function(e){return function(e){var t,n,c=e.type,i=e.weekStartDay,a=e.weekendStartDay,o=e.nextWeekDay,s=e.selectedDate,u=e.today,d=e.items,j=e.withPostponeDate,b=void 0!==j&&j,p=null!=s&&s.timezone_offset?Object(x.b)(u,-u.getTimezoneOffset(),-s.timezone_offset):new Date(u.getTime());if(!p)throw new Error("Suggested date is missing");p.setHours(23,59,59);var O=Object(m.a)(a),f=Object(m.a)(a+1);switch(c){case"today":t=n=Object(y.a)("Today");break;case"tomorrow":t=n=Object(y.a)("Tomorrow"),p.setDate(p.getDate()+1);break;case"laterThisWeek":t=n=Object(y.a)("Later this week"),p.setDate(p.getDate()+2);break;case"nextWeek":t=n=Object(y.d)("Scheduler","Next week"),p=Object(k.a)(p,o,i);break;case"thisWeekend":t=n=Object(y.a)("This weekend"),u.getDay()!==O&&u.getDay()!==f&&(p=Object(k.a)(p,O));break;case"nextWeekend":t=n=Object(y.a)("Next weekend"),u.getDay()!==O&&u.getDay()!==f||(p=Object(k.a)(p,O));break;case"inTheMorning":t=n=Object(y.a)("In the morning"),p.setDate(p.getDate()+1),p.setHours(9,0,0);break;case"postpone":if((p=d&&1===d.length&&d[0].due?d[0].due.postpone():null)&&b){var h=Object(r.a)(p,{withYear:"auto",today:u,withTime:!1});n=Object(w.a)(Object(y.a)("Postpone to {date}"),{date:h}),t=Object(l.jsx)(g.a,{string:Object(y.a)("Postpone to {date}"),mapping:{date:Object(l.jsx)("b",{children:h})}})}else t=n=Object(y.a)("Postpone");break;case"noDate":p=null,t=n=Object(y.a)("No Date")}return{type:c,date:p,label:t,labelPlain:n}}({type:e,weekStartDay:i,weekendStartDay:o,nextWeekDay:u,selectedDate:d,today:n,items:t,withPostponeDate:b})}))}function S(e,t,n){var r=e.type,c=e.date;if("postpone"===r){if(t.due)return t.due.postpone();throw new Error("postpone option should only appear for item with due")}if("noDate"===r)return null;if(!c||isNaN(c.getTime()))throw new Error("receive invalid date");var i={year:c.getFullYear(),month:c.getMonth(),day:c.getDate()};return n?n.inheritDate(i):t.due?t.due.inheritDate(i):x.a.fromDate(c)}t.c=h},ir2a:function(e,t,n){"use strict";n.d(t,"a",(function(){return kr}));var r=n("lSNA"),c=n.n(r),i=n("J4zp"),a=n.n(i),o=n("q1tI"),s=n("TRPC"),l=n("/MKj"),u=n("zhxZ"),d=n("kazx"),j=n("oDV5"),b=n("TSYQ"),p=n.n(b),O=n("vV6a"),f=n("xvbm"),h=n("TQFH"),m=n("3AAN"),v=n("p3jf"),g=n("/lEg"),y=n("A72/"),x=n("3JOJ"),w=n("gd9Y"),k=n("+HCy"),_=n("VKB9"),S=n("nD99"),C=n("Lj/6"),P=n("4rNB"),D=n("GgqS"),I=n("RsDw"),T=n("G3Y2"),E=n("0DC5"),A=n("Vbab"),N=n("maC2"),R=n("UVeO"),L=n("OvWs"),M=n("QJNN"),z=n("IHJC"),B=n("e3uP"),q=n("PuTw"),U="_4PSdYeT",K="allB1v5",F="JJSpvee",V="duajmEi",H="_3AZ-gHQ",Y="byJwD4t",W="fU6Qfx4",G="H8qYK09",Q=n("nKUr");function J(e){var t=e.parentTask,n=e.task,r=Object(q.c)(t.id),i=r.subTasks,a=r.status,o=Object(l.h)((function(e){return Object(N.f)(e,t.id)}));return"error"===a?Object(Q.jsx)(d.a,{marginTop:"large",children:Object(Q.jsx)(C.a,{tone:"critical",children:Object(A.a)("An error occurred while trying to load task navigation.")})}):Object(Q.jsxs)(d.a,{className:U,"data-testid":"task-detail-breadcrumbs",display:"flex",children:[Object(Q.jsx)(P.a,{content:Object(A.a)("Open parent task"),children:Object(Q.jsx)(D.a,{variant:"quaternary",size:"small",as:w.a,task:{id:t.id},view:"current",startIcon:Object(Q.jsx)(z.a,{checked:t.checked,disabled:!0,onChange:function(){return null},priority:t.priority,presentationOnly:!0}),exceptionallySetClassName:K,children:Object(Q.jsx)(B.a,{content:t.content,markdownMode:"text",className:F})})}),Object(Q.jsxs)(I.a,{children:[Object(Q.jsx)(P.a,{content:Object(A.a)("Open sub-tasks"),children:Object(Q.jsx)(I.b,{"aria-label":Object(A.a)("Open sub-tasks"),as:T.a,variant:"quaternary",startIcon:Object(Q.jsx)(M.a,{className:G}),endIcon:Object(Q.jsx)(R.s,{size:16}),size:"small",children:o.all})}),Object(Q.jsx)(I.e,{"aria-label":Object(A.a)("List of sub-tasks"),children:Object(Q.jsxs)(I.c,{label:Object(A.a)("Sub-tasks"),exceptionallySetClassName:V,children:["loading"===a?Object(Q.jsx)(d.a,{display:"flex",paddingY:"large",justifyContent:"center",children:Object(Q.jsx)(E.a,{"aria-label":Object(A.a)("Loading sub-tasks\u2026")})}):null,"success"===a&&null!=i&&i.length?i.map((function(e){return Object(Q.jsxs)(I.d,{as:w.a,view:"current",task:{id:e.id},exceptionallySetClassName:p()(H,c()({},W,e.checked)),children:[Object(Q.jsx)(z.a,{checked:n.id===e.id?n.checked:e.checked,disabled:!0,onChange:function(){return null},priority:n.id===e.id?n.priority:e.priority,presentationOnly:!0}),Object(Q.jsx)(B.a,{content:n.id===e.id?n.content:e.content,className:F}),n.id===e.id?Object(Q.jsx)(L.a,{className:Y,"aria-hidden":!0}):null]},e.id)})):null]})})]})]})}var X=n("pSXq"),Z=n("LAPZ"),$=n("18PS"),ee="xtmWYbJ";function te(e){var t=e.onOpenCommentEditor,n=e.user,r=e.userPlanLimits;return Object(Q.jsx)(Z.a,{userPlanLimits:r,fullScreen:!1,children:function(e){var r=e.uploadFiles;return Object(Q.jsx)(X.a,{onDrop:r,children:function(e){return e.isDragging?t():Object(Q.jsx)("div",{children:Object(Q.jsxs)(d.a,{className:ee,display:"flex",children:[Object(Q.jsx)(d.a,{marginRight:"medium",children:Object(Q.jsx)($.a,{user:n,size:"small"})}),Object(Q.jsx)(d.a,{display:"flex",flexDirection:"column",width:"full",children:Object(Q.jsx)("button",{type:"button",onClick:t,"data-testid":"open-comment-editor-button",children:Object(A.a)("Comment")})})]})})}})}})}var ne=n("CodD"),re=n("QS0n"),ce=n("GIsW"),ie=n("5I1w"),ae=n("c/jD"),oe=n("jN5i"),se=n("S+H7"),le=n("1tNa"),ue=n("lzDQ"),de=n("HrhL"),je=n("IXy1"),be=n("6O1D"),pe=n("egV3"),Oe="_45--vvX",fe="ZDTvwo1",he="-7uHzNp",me="Qt2esjE",ve="bNcnIwd",ge="VnUuCIS";function ye(e){var t=e.count;return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(ce.a,{weight:"semibold",size:"copy",as:"span",children:Object(A.a)("Comments")}),0!==t?Object(Q.jsxs)(Q.Fragment,{children:["\xa0",Object(Q.jsx)(ce.a,{as:"span",size:"caption",tone:"secondary",children:t})]}):null]})}function xe(e){var t=e.isMiniMode,n=e.task,r=e.project,i=e.user,s=e.onCommentAdded,u=Object(ne.k)().tab,j=Object(re.d)(),b=a()(j,1)[0].get("intent"),O=Object(l.g)(),f=Object(oe.b)().modalProps,h=Object(o.useState)(!0),m=a()(h,2),v=m[0],g=m[1],x=Object(o.useState)("reply"===b),w=a()(x,2),k=w[0],_=w[1],S=Object(o.useState)(!1),C=a()(S,2),P=C[0],D=C[1],I=Object(l.h)((function(e){return Object(ue.n)(e,n.id,ue.b)})),T=Object(l.h)(y.d),E=Object(l.h)(y.m),N=Object(l.h)(y.s),R=Object(l.h)((function(e){return Object(se.n)(e,n.project_id,!0)}));Object(je.a)(n,I.length);var L=Object(l.h)((function(e){return Object(le.c)(e,{type:ue.b,id:n.id})}));var M=Object(o.useRef)(null);function z(){g(!0),_(!0),setTimeout((function(){var e;null===(e=M.current)||void 0===e||e.scrollIntoView()}))}var B=Boolean(r.is_archived||r._unjoined);if(0===I.length&&B)return null;var q=k?Object(Q.jsx)(pe.a,{canAddComments:T,canUploadAttachments:E,collaborators:R,draft:L,isInNewTaskDetailsModal:!0,isProjectShared:r.shared,item:n,notes:I,onCloseWithoutSubmit:function(e){var t=e.text,n=e.parentType,r=e.parentId;O(Object(le.b)({text:t,parentType:n,parentId:r}))},onReturnToCollapsedState:function(){P||f.extension||_(!1)},onSubmit:function(e){var t=e.text,r=e.usersToNotify,c=e.files;(t||c&&c.length>0)&&(O(Object(ue.j)({parentId:n.id,type:ue.b,content:t,files:c,usersToNotify:r})),s&&setTimeout(s,0))},parentId:n.id,type:ue.b,user:i,userPlanLimits:N,onExtensionMenuOpen:function(){return D(!0)},onExtensionMenuClose:function(){return D(!1)}}):Object(Q.jsx)(te,{onOpenCommentEditor:z,user:i,userPlanLimits:N});return 0===I.length?Object(Q.jsxs)(d.a,{className:t?void 0:me,marginX:t?"large":void 0,paddingTop:"small",paddingBottom:"xlarge",children:[q,Object(Q.jsx)(be.f,{identifier:"TASK_ACTIONS_OPEN_COMMENT_FIELD",category:"modal",handler:z})]}):Object(Q.jsx)(d.a,{children:Object(Q.jsxs)(de.a,{id:"task-detail-comments-panel",isExpanded:v,onToggleExpand:function(){return g((function(e){return!e}))},children:[Object(Q.jsxs)(de.c,{marginLeft:"-medium",children:[Object(Q.jsx)(d.a,{paddingLeft:t?"xlarge":"large",children:Object(Q.jsx)(de.d,{title:Object(A.a)("Comments"),exceptionallySetClassName:ve,children:Object(Q.jsx)(ye,{count:I.length})})}),v||!t?Object(Q.jsx)(d.a,{marginLeft:"xlarge",paddingLeft:"large",children:Object(Q.jsx)(ie.a,{weight:"secondary"})}):null]}),Object(Q.jsxs)(de.b,{marginLeft:t?"medium":"small",paddingLeft:t?"small":void 0,children:[Object(Q.jsx)(ae.a,{item:n,type:ue.b,projectId:r.id,parentId:n.id,className:p()(Oe,c()({},ge,t)),isInNewTaskDetailsModal:!0,scrollToComments:"comments"===u||"reply"===b}),B?null:Object(Q.jsxs)(d.a,{paddingBottom:"large",position:"sticky",background:"default",className:[fe,c()({},he,!t)],children:[q,Object(Q.jsx)(be.f,{identifier:"TASK_ACTIONS_OPEN_COMMENT_FIELD",category:"modal",handler:z})]})]})]})})}var we=n("LYyr"),ke=n("B5oV"),_e=n("1/Z5"),Se=n("WhXB"),Ce=n("17x9"),Pe=n.n(Ce),De=n("WgXA"),Ie=n("oVv/"),Te=n("4eld"),Ee=n("RkX7"),Ae=n("eVCd");function Ne(e){var t=e.task,n=e.isProjectReadOnly,r=e.editButtonRef,c=e.onContentClick,i=e.onDescriptionClick,a=e.onTaskComplete,s=e.onTaskUncomplete,l=e.onSizeChange,u=void 0===l?function(){}:l,d=e.children,j=Object(o.useRef)(null),b=Object(o.useMemo)((function(){return Object(Ae.c)(t.content)}),[t.content]),O=Boolean(t.in_history||t.checked),f=Boolean(!!t.in_history||n),h=Object(ke.a)(t.content),m=p()("task-overview-main",{"task-overview-main--no-checkbox":h}),v=p()("task-overview","focus-marker-enabled-within",{"task-overview--completed":O}),g=Object(o.useCallback)((function(){Object(De.a)({id:t.id,sync_id:t.sync_id})}),[t.id,t.sync_id]),y=Object(o.useCallback)((function(){O?s(t):(a(t),Object(Ie.a)().catch((function(){})))}),[O,a,s,t]);return Object(be.n)({identifier:"TASK_ACTIONS_EDIT_TASK",category:"modal",handler:c,disabled:n}),Object(be.n)({identifier:"TASK_ACTIONS_COPY_LINK_TO_TASK",category:"modal",handler:g}),Object(be.n)({identifier:"TASK_ACTIONS_COMPLETE_TASK",category:"modal",handler:y,disabled:n||h}),Object(o.useEffect)((function(){requestAnimationFrame((function(){if(j.current){var e=j.current.getBoundingClientRect();u(e.height)}}))}),[u]),Object(Q.jsxs)("div",{className:v,children:[h?null:Object(Q.jsx)(z.a,{"aria-label":Object(we.a)(Object(A.a)("Checkbox for {task_name}"),{task_name:t.content}),checked:t.checked,priority:t.priority,onChange:function(e,n){if(e){var r=Boolean(null==n?void 0:n.shiftKey);a(t,{forceHistory:r})}else s(t)},disabled:n,"data-action-hint":"task-detail-view-complete"}),Object(Q.jsxs)("div",{ref:j,className:m,children:[Object(Q.jsxs)("div",{className:"task-overview-header",children:[Object(Q.jsxs)(Te.a,{"data-autofocus":!0,"data-action-hint":"task-detail-view-edit",className:"task-overview-content","aria-label":Object(A.a)("Task name"),"aria-describedby":"a11y_task_name",disabled:f,onClick:function(e){"A"!==e.target.tagName&&c(e)},as:"div",ref:r,children:[Object(Q.jsx)(Ee.a,{type:b.type,className:"task-overview-service-icon","aria-hidden":!0}),Object(Q.jsx)(B.a,{content:t.content}),Object(Q.jsx)(Se.a,{id:"a11y_task_name",children:Object(A.a)("Activate to edit the task name")})]}),Object(Q.jsxs)(Te.a,{"data-action-hint":"task-detail-view-edit",className:"task-overview-description","aria-label":Object(A.a)("Task description"),"aria-describedby":"a11y_task_description",disabled:f,onClick:function(e){"A"!==e.target.tagName&&i(e)},as:"div",children:[t.description?null:Object(Q.jsx)(R.D,{"aria-hidden":"true"}),Object(Q.jsx)(B.a,{content:t.description,markdownMode:"full",placeholder:Object(A.a)("Description")}),Object(Q.jsx)(Se.a,{id:"a11y_task_description",children:Object(A.a)("Activate to edit the task description")})]})]}),d]})]})}Ne.propTypes={children:Pe.a.node,task:Pe.a.object.isRequired,editButtonRef:Pe.a.object,isProjectReadOnly:Pe.a.bool.isRequired,onContentClick:Pe.a.func,onDescriptionClick:Pe.a.func,onTaskComplete:Pe.a.func,onTaskUncomplete:Pe.a.func,onSizeChange:Pe.a.func};var Re=Object(o.forwardRef)((function(e,t){var n=e.canUseLabels,r=e.project,c=e.reminders,i=e.task,a=e.user,o=e.editingStartMode,s=e.setEditingStartMode,l=Object(q.e)(),u=l.complete,j=l.update,b=l.uncomplete,p=Object(ke.a)(i.content),O=Boolean(r.is_archived||r._unjoined);function f(){s(null)}return null!=o?Object(Q.jsx)(d.a,{ref:t,className:["task-detail-editor-container",p?"noCheckbox":null],"data-testid":"task-detail-editor-container",height:"full",children:Object(Q.jsxs)(d.a,{display:"flex",height:"full",flexGrow:1,children:[p?null:Object(Q.jsx)(z.a,{"aria-label":Object(we.a)(Object(A.a)("Checkbox for {task_name}"),{task_name:i.content}),checked:i.checked,disabled:!0,onChange:function(){return null},priority:i.priority}),Object(Q.jsx)(d.a,{flexGrow:1,height:"full",maxWidth:"full",children:Object(Q.jsx)(_e.a,{mode:"task-details",canUseLabels:n,item:i,onCancel:f,onChange:function(){return null},onSubmit:function(e){j(i,e),f()},reminders:c,user:a,initialFocus:o,withQuickNote:!1,isEditing:!0,isTaskDetailEditor:!0})})]})}):Object(Q.jsx)("div",{ref:t,className:"task-detail-editor-container","data-testid":"task-overview-container",children:Object(Q.jsx)(Ne,{task:i,isProjectReadOnly:O,onContentClick:function(){return s("content")},onDescriptionClick:function(){return s("description")},onTaskComplete:u,onTaskUncomplete:b})})})),Le=n("pQ8y"),Me=n("PzWS"),ze=n("YDJs"),Be=n("1S3k"),qe=n("wOFH"),Ue=n("1zEf"),Ke=n("s6QN"),Fe=n("Zhs9"),Ve=n("awe3"),He=n("yYH5"),Ye=n("7SJp"),We=n("S0Ut"),Ge=n("TxzI"),Qe=n("IVjG"),Je=n("XKNl"),Xe=n("wrHN"),Ze=n("ivIA"),$e="zH4B5o8";function et(e){var t=e.task,n=e.project,r=e.onDismiss,c=Object(l.h)((function(e){return Object(se.q)(e,n.id)})),i=Object(l.h)((function(e){return Object(se.m)(e)})),a=c&&!n.is_archived&&null!=t.added_by_uid?i[t.added_by_uid]:null;return Object(Q.jsxs)(u.a,{isOpen:!0,height:"fitContent",onDismiss:r,"aria-labelledby":"task-detail-activity-log-header",children:[Object(Q.jsx)(u.f,{button:Object(Q.jsx)(u.d,{"aria-label":Object(A.a)("Close modal")}),children:Object(Q.jsx)(Je.a,{level:"2",id:"task-detail-activity-log-header",children:Object(A.a)("Task activity")})}),Object(Q.jsx)(u.c,{exceptionallySetClassName:$e,children:Object(Q.jsx)(Xe.a,{showErrorMsg:!0,children:Object(Q.jsx)(Ze.a,{item:t,creator:a,filters:{parent_item_id:t.id,include_parent_object:!0}})})})]})}var tt=n("K6Df"),nt=n("UTRX"),rt=n("qf/r"),ct=n("Ek05"),it=n("t4uw");function at(e){var t=e.task,n=function(e){var t,n=e.task,r=e.project,c=Object(l.h)((function(e){return Object(rt.n)(e,r.id)})),i=Object(l.h)(rt.i),a=c&&!r.is_archived&&null!=n.added_by_uid?i[n.added_by_uid]:null;return{creator:a,creatorName:null!=a&&a.full_name?Object(it.a)(a.full_name):null!==(t=null==a?void 0:a.email)&&void 0!==t?t:null}}({task:t,project:e.project}),r=n.creator,c=n.creatorName,i=function(e){var t="string"==typeof e.added_at?new Date(e.added_at):e.added_at;return{formattedDate:ct.a.format(t,!1,{with_time:!1}),formattedTime:t.toLocaleTimeString([],{hour:"numeric",minute:"numeric"})}}(t),a=i.formattedDate,o=i.formattedTime;return Object(Q.jsxs)(nt.b,{space:"medium",paddingX:"medium",paddingY:"small",children:[r?Object(Q.jsx)(nt.a,{width:"content",children:Object(Q.jsx)(d.a,{paddingX:"xsmall",children:Object(Q.jsx)($.a,{user:r,size:"xsmall"})})}):null,Object(Q.jsxs)(nt.a,{children:[c?Object(Q.jsx)(d.a,{marginBottom:"xsmall",children:Object(Q.jsx)(ce.a,{tone:"secondary",weight:"bold",size:"copy",style:{whiteSpace:"normal"},children:Object(Q.jsx)(tt.a,{string:Object(A.a)("Added by {user}"),mapping:{user:c}})})}):null,Object(Q.jsxs)(ce.a,{tone:"secondary",size:"copy",children:[null!=c?a:Object(Q.jsx)(tt.a,{string:Object(A.a)("Added on {date}"),mapping:{date:a}})," \xb7 ",o]})]})]})}function ot(e){var t,n,r=e.task,c=e.project,i=Object(q.e)(),s=i.archive,l=i.complete,u=i.duplicate,j=i.deleteTask,b=Object(w.k)(),p=Object(o.useState)(!1),O=a()(p,2),h=O[0],m=O[1],v=Boolean(r.in_history||r.checked),g=Boolean(c.is_archived||c._unjoined),y=Object(q.c)(r.id).subTasks,x=Object(f.c)("global.reset_subtasks"),k=Object(o.useRef)(null),S=Object(_.g)(Ve.c),C=S.isTipScheduled,P=S.markTipSeen,E=x&&C;function N(){s(r),Object(Ie.a)().catch((function(){}))}var L=Object(Qe.b)({task:r,onConfirm:function(){j(r),b({view:"current"})}});return Object(be.n)({identifier:"TASK_ACTIONS_DELETE_TASK",category:"modal",handler:L,disabled:g}),Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)(I.a,{placement:"bottom-end",children:[Object(Q.jsx)(I.b,{as:T.a,variant:"quaternary",icon:Object(Q.jsx)(R.rb,{}),"aria-label":Object(A.a)("More actions"),ref:k}),Object(Q.jsxs)(I.e,{"aria-label":Object(A.a)("More actions"),children:[Object(Q.jsx)(at,{task:r,project:c}),Object(Q.jsx)("hr",{}),x&&!v&&null!==(t=r.due)&&void 0!==t&&t.is_recurring&&!g?Object(Q.jsxs)(I.c,{label:Object(Q.jsxs)(d.a,{alignItems:"center",display:"flex",justifyContent:"spaceBetween",width:"full",children:[Object(Q.jsx)(ce.a,{size:"copy",weight:"semibold",children:Object(A.a)("Recurring task options")}),Object(Q.jsx)("a",{href:Ue.e,target:"_blank",rel:"noopener noreferrer","aria-label":Object(A.a)("Recurring tasks help"),children:Object(Q.jsx)(d.a,{display:"flex",children:Object(Q.jsx)(ce.a,{tone:"secondary",children:Object(Q.jsx)(R.R,{"aria-hidden":!0})})})})]}),children:[Object(Q.jsxs)(I.d,{onSelect:function(){return l(r,{completeSubItems:!1})},children:[Object(Q.jsx)(We.a,{"aria-hidden":!0}),Object(A.a)("Complete")]}),null!=y&&y.length?Object(Q.jsxs)(I.d,{onSelect:function(){return l(r,{completeSubItems:!0})},children:[Object(Q.jsx)(R.x,{"aria-hidden":!0}),Object(A.a)("Complete & reset sub-tasks")]}):null,Object(Q.jsxs)(I.d,{onSelect:N,children:[Object(Q.jsx)(R.w,{"aria-hidden":!0}),Object(A.a)("Complete forever")]}),Object(Q.jsx)("hr",{})]}):null,Object(Q.jsxs)(I.d,{onSelect:function(){Object(De.a)({id:r.id,sync_id:r.sync_id})},"aria-label":Object(A.a)("Copy link to task"),children:[Object(Q.jsx)(Ge.a,{"aria-hidden":"true"}),Object(Q.jsx)(d.a,{flexGrow:1,children:Object(Q.jsx)(ce.a,{size:"copy",children:Object(A.a)("Copy link to task")})}),Object(Q.jsx)(be.e,{identifier:"TASK_ACTIONS_COPY_LINK_TO_TASK"})]}),g?null:Object(Q.jsxs)(I.d,{onSelect:function(){return u(r)},children:[Object(Q.jsx)(R.A,{"aria-hidden":"true"}),Object(A.a)("Duplicate task")]}),x||v||null===(n=r.due)||void 0===n||!n.is_recurring||g?null:Object(Q.jsxs)(I.d,{onSelect:N,children:[Object(Q.jsx)(R.e,{"aria-hidden":"true"}),Object(A.a)("Complete forever")]}),g?null:Object(Q.jsxs)(I.d,{onSelect:function(){qe.a.showItemEmail(r.id)},children:[Object(Q.jsx)(R.J,{"aria-hidden":"true"}),Object(A.a)("Add comments via email")]}),g?null:Object(Q.jsxs)(I.d,{onSelect:function(){return m(!0)},children:[Object(Q.jsx)(Ye.a,{"aria-hidden":"true"}),Object(A.a)("View task activity")]}),Object(Q.jsxs)(I.d,{onSelect:function(){return Signals.sendSignal("open_print_mode")},children:[Object(Q.jsx)(R.Ub,{"aria-hidden":"true"}),Object(A.a)("Print task")]}),g?null:Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("hr",{}),Object(Q.jsx)(Ke.c,{contextMenuData:Object(Fe.b)(r),contextType:"task",modern:!0}),Object(Q.jsx)("hr",{})]}),g?null:Object(Q.jsxs)(I.d,{onSelect:L,"aria-label":Object(A.a)("Delete task\u2026"),children:[Object(Q.jsx)(R.C,{"aria-hidden":"true"}),Object(Q.jsx)(d.a,{flexGrow:1,children:Object(Q.jsx)(ce.a,{size:"copy",children:Object(A.a)("Delete task\u2026")})}),Object(Q.jsx)(be.e,{identifier:"TASK_ACTIONS_DELETE_TASK"})]})]})]}),E&&null!=k&&k.current?Object(Q.jsxs)(He.b,{isShown:!0,placement:"bottom",referenceElement:null==k?void 0:k.current,children:[Object(Q.jsx)(He.a.TooltipHeader,{icon:"\u2728",title:Object(A.a)("Completing a recurring task")}),Object(Q.jsx)(He.a.TooltipBody,{children:Object(A.a)("Select how you want to complete a recurring task with sub-tasks (change the default in Settings / General).")}),Object(Q.jsxs)(He.a.TooltipFooter,{children:[Object(Q.jsx)(He.a.TooltipConfirmButton,{tooltip:Ve.c}),Object(Q.jsx)(D.a,{variant:"primary",href:"https://todoist.com/help/articles/6819183940124",openInNewTab:!0,onClick:function(){P()},children:Object(A.a)("Learn more")})]})]}):null,h?Object(Q.jsx)(et,{task:r,project:c,onDismiss:function(){return m(!1)}}):null]})}var st="ug13G75",lt="XpAO-99",ut="AQwyAAR",dt="Xl+51gC";function jt(e){var t=e.onScrollToTop,n=e.project,r=e.section,c=e.task,i=Object(q.e)(),a=i.complete,o=i.uncomplete,s=Object(ke.a)(c.content);return Object(Q.jsxs)(d.a,{display:"flex",alignItems:"center","data-testid":"task-detail-scrolled-header",children:[s?null:Object(Q.jsx)(z.a,{"aria-label":Object(we.a)(Object(A.a)("Checkbox for {task_name}"),{task_name:c.content}),checked:c.checked,onChange:function(e){e?a(c):o(c)},priority:c.priority}),Object(Q.jsxs)(d.a,{alignItems:"flexStart",className:st,display:"flex",flexDirection:"column",justifyContent:"center",maxWidth:"full",paddingLeft:"small",paddingRight:"small",children:[Object(Q.jsx)(P.a,{content:Object(A.a)("Back to top"),children:Object(Q.jsx)(ce.a,{as:"button",onClick:t,size:"copy",weight:"semibold",tone:c.checked?"secondary":"normal",exceptionallySetClassName:c.checked?lt:void 0,children:Object(Q.jsx)(B.a,{content:c.content,markdownMode:"text"})})}),Object(Q.jsxs)(Me.a,{exceptionallySetClassName:ut,children:[Object(Q.jsx)(ce.a,{size:"caption",tone:"secondary",lineClamp:1,children:Object(Q.jsx)(tt.a,{string:Object(A.a)("in {project_name}"),mapping:{project_name:Object(Q.jsx)(w.a,{className:dt,title:n.name,view:{type:"project",projectId:n.id},children:n.name})}})}),r?Object(Q.jsxs)(Q.Fragment,{children:["/\xa0",Object(Q.jsx)(ce.a,{size:"caption",tone:"secondary",lineClamp:1,children:Object(Q.jsx)(w.a,{className:dt,title:r.name,view:{type:"project",projectId:n.id},children:r.name})})]}):null]})]})]})}var bt={taskDetailHeader:"FejMLOm",headerLink:"m4WjXkL",projectAndSectionContainer:"_5i5tzAW",taskDetailHeaderEnter:"b3fCBlE",taskDetailHeaderEnterActive:"AAAcGOU",taskDetailHeaderExit:"YOdZaEt",taskDetailHeaderExitActive:"_8WmFKrq"};function pt(e){var t,n=e.mainContentScrolled,r=e.onScrollToTop,c=e.project,i=e.section,s=e.task,j=Object(l.h)((function(e){return Object(se.q)(e,c.id)})),b=Object(l.h)((function(e){return e.mainView.type===O.n})),p=Object(w.k)(),f=Object(ze.d)(),m=f.activeListForNavigation,v=f.setActiveListForNavigation,g=f.setSiblingsByListId,y=f.siblingsByListId,x=Object(o.useState)(!1),k=a()(x,2),_=k[0],S=k[1];_||(g({}),S(!0));var C=Object(o.useMemo)((function(){return m||(y?Object.keys(y).find((function(e){return y[e][s.id]})):void 0)}),[m,y,s.id]),P=Object(o.useState)(),D=a()(P,2),I=D[0],E=D[1],N=Object(o.useState)(),L=a()(N,2),M=L[0],z=L[1],B=Object(o.useState)(""),q=a()(B,2),U=q[0],K=q[1],F=Object(o.useState)(""),V=a()(F,2),H=V[0],Y=V[1],W=Object(l.h)(h.C),G=Object(o.useMemo)((function(){return b&&W?Object.keys(W).sort():void 0}),[b,W]);Object(o.useEffect)((function(){var e,t,n,r=y&&C?null===(e=y[C])||void 0===e?void 0:e[s.id]:void 0;if(null!=r&&r.nextSiblingId)K(m),E(r.nextSiblingId);else if(G&&null!==(t=s.due)&&void 0!==t&&t.date){var c=G.indexOf(String(s.due.date))+1,i=G[c],a=W[i]?W[i][0].id:void 0;K(i),E(a)}else if(C){var o=Object.keys(y),l=o.indexOf(C)+1,u=o[l],d=u?Object.keys(y[u]).find((function(e){return void 0===y[u][e].previousSiblingId})):void 0;K(u),E(d)}if(null!=r&&r.previousSiblingId)Y(m),z(r.previousSiblingId);else if(G&&null!==(n=s.due)&&void 0!==n&&n.date){var j=G.indexOf(String(s.due.date))-1,b=G[j],p=W[b]?W[b][0].id:void 0;Y(b),z(p)}else if(C){var O=Object.keys(y),f=O.indexOf(C)-1,h=O[f],v=h?Object.keys(y[h]).find((function(e){return void 0===y[h][e].nextSiblingId})):void 0;Y(h),z(v)}}),[m,b,C,v,y,null===(t=s.due)||void 0===t?void 0:t.date,s.id,W,G]);var J=Object(o.useCallback)((function(){if(U&&v(U),I)return p({task:{id:I},replace:!0})}),[I,p,U,v]),X=Object(o.useCallback)((function(){if(H&&v(H),M)return p({task:{id:M},replace:!0})}),[M,p,H,v]);return Object(be.n)({identifier:"TASK_ACTIONS_NEXT_TASK",category:"modal",handler:J}),Object(be.n)({identifier:"TASK_ACTIONS_PREVIOUS_TASK",category:"modal",handler:X}),Object(o.useEffect)((function(){return function(){v("")}}),[v]),Object(Q.jsxs)(u.f,{exceptionallySetClassName:bt.taskDetailHeader,withDivider:!0,button:Object(Q.jsxs)(d.a,{display:"flex",flexDirection:"row",children:[Object(Q.jsx)(T.a,{"aria-label":Object(A.a)("Previous task"),icon:Object(Q.jsx)(R.gb,{}),disabled:!M,onClick:X,tooltip:Object(Q.jsx)(be.g,{identifier:"TASK_ACTIONS_PREVIOUS_TASK"}),variant:"quaternary"}),Object(Q.jsx)(T.a,{"aria-label":Object(A.a)("Next task"),icon:Object(Q.jsx)(R.fb,{}),disabled:!I,onClick:J,tooltip:Object(Q.jsx)(be.g,{identifier:"TASK_ACTIONS_NEXT_TASK"}),variant:"quaternary"}),Object(Q.jsx)(d.a,{marginLeft:"small",children:Object(Q.jsx)(ot,{task:s,project:c})}),Object(Q.jsx)(d.a,{marginLeft:"small",children:Object(Q.jsx)(u.d,{"aria-label":Object(A.a)("Close modal")})})]}),children:[Object(Q.jsx)(Le.a,{in:n,timeout:200,classNames:{enter:bt.taskDetailHeaderEnter,enterActive:bt.taskDetailHeaderEnterActive,exit:bt.taskDetailHeaderHeaderExit,exitActive:bt.taskDetailHeaderExitActive},children:n?Object(Q.jsx)(jt,{onScrollToTop:r,project:c,section:i,task:s}):Object(Q.jsx)(Q.Fragment,{})}),Object(Q.jsx)(Le.a,{in:!n,timeout:200,classNames:{enter:bt.taskDetailHeaderEnter,enterActive:bt.taskDetailHeaderEnterActive,exit:bt.taskDetailHeaderHeaderExit,exitActive:bt.taskDetailHeaderExitActive},children:n?Object(Q.jsx)(Q.Fragment,{}):Object(Q.jsxs)(Me.a,{exceptionallySetClassName:bt.projectAndSectionContainer,"data-testid":"task-detail-default-header",children:[Object(Q.jsxs)(w.a,{className:bt.headerLink,title:c.name,view:{type:"project",projectId:c.id},hash:"#task-".concat(s.id),children:[Object(Q.jsx)(R.Vb,{project:c,isShared:j,size:"small"}),Object(Q.jsx)(ce.a,{size:"caption",lineClamp:1,children:c.name})]}),i?Object(Q.jsxs)(Q.Fragment,{children:["\xa0/\xa0",Object(Q.jsxs)(w.a,{className:bt.headerLink,title:i.name,view:{type:"project",projectId:c.id},hash:"#section-".concat(i.id),children:[Object(Q.jsx)(Be.a,{size:"16","aria-hidden":"true"}),Object(Q.jsx)(ce.a,{size:"caption",lineClamp:1,children:i.name})]})]}):null]})})]})}var Ot=n("UDQ1"),ft=n("QILm"),ht=n.n(ft),mt="_37usHr7",vt="_3RuHnaq",gt="IHkax9F",yt=["children","hasValue","exceptionallySetClassName"];function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kt=Object(o.forwardRef)((function(e,t){var n=e.children,r=e.hasValue,i=void 0!==r&&r,a=e.exceptionallySetClassName,o=ht()(e,yt);return Object(Q.jsx)(T.a,wt(wt({},o),{},{ref:t,variant:"quaternary",exceptionallySetClassName:p()(vt,a,c()({},gt,!i)),children:n}))})),_t="_9KUWmzz",St="PkhZiTa";function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dt(e){var t=e.task,n=e.disabled,r=void 0!==n&&n||Boolean(t.checked),c=Object(q.e)().update,i=Object(l.h)((function(e){return e.user})),a=Object(l.h)((function(e){return Object(se.n)(e,t.project_id,!0)})),o=t.responsible_uid===i.id?i:null==a?void 0:a.find((function(e){return e.id===t.responsible_uid})),s=o?Object(it.a)(o.full_name):t.responsible_uid?Object(A.a)("Someone"):Object(A.a)("Assign a person");function u(e){e.preventDefault(),c(t,{responsible_uid:null})}return Object(Q.jsx)(Ot.a,{onChange:function(e){var n=e.target;c(t,{responsible_uid:null==n?void 0:n.value})},projectId:t.project_id,tooltip:Ot.b,value:o?o.id:null,children:function(e){var t=e.buttonProps,n=e.toggleDropdown;return Object(Q.jsxs)(Q.Fragment,{children:[r?null:Object(Q.jsx)(be.f,{category:"modal",handler:n,identifier:"TASK_ACTIONS_ASSIGN_TASK"}),Object(Q.jsx)(kt,Pt(Pt({},t),{},{disabled:r,exceptionallySetClassName:o?_t:void 0,hasValue:null!=o,startIcon:o?Object(Q.jsx)($.a,{user:o,size:"xsmall"}):Object(Q.jsx)(R.Jb,{}),endIcon:o?Object(Q.jsx)(R.F,{onClick:u}):void 0,tooltip:r?void 0:Object(Q.jsx)(be.g,{identifier:"TASK_ACTIONS_ASSIGN_TASK"}),children:s}))]})}})}var It=n("gVGk"),Tt=n("+ger"),Et=n("I2PJ"),At=n("02O9"),Nt={labelListContainer:"R8xxhYl",expandedLabelListContainer:"YVosVqv",withLabelsIcon:"qdJSGk8",addLabelButton:"p8Ez3ul",showMoreButton:"YkIifIZ"};function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mt(e){var t=e.task,n=e.labels,r=e.disabled,i=void 0!==r&&r||Boolean(t.checked),s=Object(o.useRef)(null),l=Object(o.useState)(!1),u=a()(l,2),j=u[0],b=u[1],p=Object(o.useState)(!1),O=a()(p,2),f=O[0],h=O[1],m=Object(q.e)().update;function v(e){var n=e.target;if(t){var r="string"==typeof n.value?[n.value]:n.value;m(t,{labels:r})}}function g(e){return Object(Q.jsx)(Et.a,{disabled:i,onChange:v,value:t.labels,children:function(t){var n=t.buttonProps,r=t.toggleDropdown;return Object(Q.jsxs)(Q.Fragment,{children:[i?null:Object(Q.jsx)(be.f,{category:"modal",handler:r,identifier:"TASK_ACTIONS_CHANGE_LABELS"}),Object(o.cloneElement)(e,Lt({},n))]})}})}return Object(o.useEffect)((function(){h(!!s.current&&s.current.scrollHeight>69)}),[n,s]),Object(o.useEffect)((function(){function e(){h(!!s.current&&s.current.scrollHeight>69)}return window.addEventListener("resize",e,!1),function(){return window.removeEventListener("resize",e,!1)}}),[s]),t.labels.length?Object(Q.jsxs)(d.a,{display:"flex",paddingX:"large",paddingY:"small",children:[Object(Q.jsx)(R.bb,{"aria-hidden":!0,className:Nt.withLabelsIcon}),Object(Q.jsxs)(d.a,{display:"flex",flexDirection:"column",paddingX:"medium",height:"full",maxWidth:"full",children:[Object(Q.jsx)(d.a,{className:[Nt.labelListContainer,c()({},Nt.expandedLabelListContainer,j)],ref:s,height:"full",maxWidth:"full",children:Object(It.u)(t.labels,n).map((function(e){var r=n[e]||{name:e,color:Tt.a};return Object(Q.jsx)(d.a,{className:Nt.labelPillContainer,display:"inlineFlex",marginBottom:"xsmall",marginRight:"xsmall",maxWidth:"full",children:Object(Q.jsx)(At.a,{label:r,task:t,canRemove:!i})},e)}))}),f?Object(Q.jsx)(T.a,{variant:"tertiary",onClick:function(){return b(!j)},exceptionallySetClassName:Nt.showMoreButton,children:j?Object(A.a)("Show less"):Object(A.a)("Show more")}):null,Object(Q.jsx)(d.a,{marginX:"-small",children:g(Object(Q.jsx)(T.a,{variant:"quaternary",size:"small",startIcon:Object(Q.jsx)(R.d,{}),tooltip:i?void 0:Object(Q.jsx)(be.g,{identifier:"TASK_ACTIONS_CHANGE_LABELS"}),children:Object(A.a)("Add")}))})]})]}):g(Object(Q.jsx)(kt,{startIcon:Object(Q.jsx)(R.bb,{}),tooltip:i?void 0:Object(Q.jsx)(be.g,{identifier:"TASK_ACTIONS_CHANGE_LABELS"}),children:Object(A.a)("Add labels")}))}var zt=n("nALT"),Bt=n("YrBN");function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kt(e){var t=e.task,n=e.disabled,r=void 0!==n&&n||Boolean(t.checked),c=Object(q.e)().update;return Object(Q.jsx)(Bt.a,{onSelect:function(e){c(t,{priority:e})},priority:t.priority,children:function(e){var n=e.buttonProps,c=e.toggleDropdown;return Object(Q.jsxs)(Q.Fragment,{children:[r?null:Object(Q.jsx)(be.f,{category:"modal",handler:c,identifier:"TASK_ACTIONS_CHANGE_PRIORITY"}),Object(Q.jsxs)(kt,Ut(Ut({},n),{},{disabled:r,hasValue:!0,startIcon:Object(Q.jsx)(zt.a,{priority:5-t.priority}),tooltip:r?void 0:Object(Q.jsx)(be.g,{identifier:"TASK_ACTIONS_CHANGE_PRIORITY"}),children:[Object(A.a)("Priority")," ",5-t.priority]}))]})}})}var Ft=n("Wo0o"),Vt=n("hMw4"),Ht=n("gXw9"),Yt="XW6k+R+",Wt="ZDsLUZ4",Gt="dL9aaoB";function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xt(e){var t=e.task,n=e.project,r=e.section,c=e.isProjectShared,i=e.disabled,a=void 0!==i&&i,o=Object(q.e)().move,s=a||Boolean(t.checked);return Object(Q.jsx)(Ht.a,{selectedOption:{projectId:t.project_id,sectionId:t.section_id},onSelect:function(e){var n=e.projectId,r=e.sectionId;n===t.project_id&&r===t.section_id?o(t,{project_id:n,section_id:null}):o(t,{project_id:n,section_id:r})},selectionScope:"projects-and-sections",workspaceScope:{type:"project",id:t.project_id},renderToggleButton:function(e){var t=e.buttonProps,i=e.toggleDropdown;return Object(Q.jsxs)(kt,Jt(Jt({},t),{},{hasValue:!0,"aria-label":Object(A.a)("Select a project"),disabled:s,startIcon:Object(Q.jsx)(Vt.a,{project:n,isShared:c,size:"medium"}),tooltip:s?void 0:Object(Q.jsx)(be.g,{identifier:"TASK_ACTIONS_CHANGE_PROJECT"}),children:[s?null:Object(Q.jsx)(be.f,{category:"modal",identifier:"TASK_ACTIONS_CHANGE_PROJECT",handler:i}),Object(Q.jsxs)("div",{className:Yt,children:[Object(Q.jsx)(Ft.a,{className:Wt,text:n.name}),null!=r&&r.name?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("div",{className:Gt,children:"/"}),Object(Q.jsx)(Ft.a,{className:Wt,text:r.name})]}):null]})]}))}})}var Zt=n("RIqP"),$t=n.n(Zt),en=n("9d0M"),tn=n("mxZy"),nn="HR4YBnh",rn="D2svq3c";function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){var t=e.task,n=e.reminders,r=e.disabled,i=void 0!==r&&r,a=Object(q.e)().update,s=i||Boolean(t.checked);function l(e){a(t,{reminders:[].concat($t()(n),[e])})}function u(e){a(t,{reminders:n.filter((function(t){return t!==e}))})}function j(e){return Object(Q.jsx)(en.a,{item:t,onReminderAdd:l,onReminderDelete:u,reminders:n,hideList:!0,children:function(t){return Object(o.cloneElement)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))}})}return n.length>0&&!t.checked?Object(Q.jsxs)(d.a,{display:"flex",paddingX:"large",alignItems:"flexStart",paddingY:"small",children:[Object(Q.jsx)(d.a,{display:"flex",alignItems:"center",className:nn,children:Object(Q.jsx)(R.bc,{"aria-hidden":!0})}),Object(Q.jsxs)(d.a,{className:rn,display:"flex",flexDirection:"column",flexGrow:1,paddingLeft:"small",width:"full",children:[Object(Q.jsx)(tn.a,{task:t,reminders:n,onDelete:u,mode:"mini"}),Object(Q.jsx)(d.a,{marginX:"-small",children:j(Object(Q.jsx)(T.a,{variant:"quaternary",size:"small",startIcon:Object(Q.jsx)(R.d,{}),children:Object(A.a)("Add")}))})]})]}):j(Object(Q.jsx)(kt,{startIcon:Object(Q.jsx)(R.bc,{}),disabled:s,children:Object(A.a)("Add reminders")}))}var on=n("DAmx"),sn=n("fCkL"),ln=n("lDtu"),un=n("OgjY"),dn=n("92A6"),jn=n("GVTX"),bn=n("v2vH"),pn=n("f5nZ"),On=n("rVw9"),fn=["task","forceShowCalendarIcon","size"];function hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vn=Object(o.forwardRef)((function(e,t){var n=e.task,r=e.forceShowCalendarIcon,c=void 0!==r&&r,i=e.size,a=void 0===i?"normal":i,o=ht()(e,fn),s=n.due?n.due instanceof un.a?n.due:un.a.fromDate(new Date(n.due.date),{withTime:!0}):null,l=Object(jn.a)(1e3),u=function(e){var t=e.dueDate,n=e.currentTime;if(!t)return null;var r=ln.b.day_diff(n,t.toDate());return ct.a.humanizeDayDiff(r,t.toDate())}({dueDate:s,currentTime:l}),d=s||c?Object(Q.jsx)(bn.a,{className:p()("task-due-date-button",Object(dn.a)(s,l)),size:"small"===a?"16":"24"}):void 0,j=s?Object(Q.jsx)(On.a,{task:n}):Object(Q.jsx)(be.g,{identifier:"TASK_ACTIONS_SCHEDULE_TASK"});return Object(Q.jsx)(T.a,mn(mn({variant:"quaternary",size:a,startIcon:d,tooltip:j,ref:t},o),{},{children:s?Object(Q.jsxs)(Q.Fragment,{children:[u,s.is_recurring?Object(Q.jsx)(pn.a,{style:{transform:"translate(3px, 3px)"}}):null]}):Object(A.a)("Due date")}))})),gn=["isExpanded"];function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wn(e){var t=e.task,n=e.disabled,r=void 0!==n&&n||Boolean(t.checked),i=null!=t.due,a=Object(q.e)().update;var s=Object(o.useCallback)((function(e){null==e||e.stopPropagation(),a(t,{due:null})}),[t,a]);return Object(Q.jsx)(sn.a,{selectedItems:[t],selectedDate:t.due,placement:"bottom-start",onDateSelect:function(e){a(t,{due:e})},renderReferenceElement:function(e){var n,a=e.isExpanded,o=ht()(e,gn);return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(vn,xn({task:t,variant:"quaternary",width:"full",align:"start",disabled:r,exceptionallySetClassName:p()(vt,(n={},c()(n,_t,i),c()(n,gt,!i),n)),endIcon:i?Object(Q.jsx)(on.a,{onClick:s}):void 0,forceShowCalendarIcon:!0,"aria-expanded":a},o)),r?null:Object(Q.jsx)(be.f,{category:"modal",identifier:"TASK_ACTIONS_SCHEDULE_TASK",handler:o.onClick}),i&&!r?Object(Q.jsx)(be.f,{category:"modal",identifier:"TASK_ACTIONS_REMOVE_DUE_DATE",handler:s}):null]})}})}function kn(e){var t=e.labels,n=e.project,r=e.reminders,c=e.section,i=e.task,a=e.disabled,o=void 0!==a&&a,s=Boolean(n.is_archived||n._unjoined),u=Object(l.h)((function(e){return Object(se.q)(e,n.id)}));return Object(Q.jsxs)(j.a,{dividers:"secondary",exceptionallySetClassName:mt,"data-testid":"task-details-mini-content",children:[Object(Q.jsx)(Xt,{task:i,section:c,project:n,isProjectShared:u,disabled:o||s}),u&&!s?Object(Q.jsx)(Dt,{task:i,disabled:o}):null,s?null:Object(Q.jsx)(wn,{task:i,disabled:o}),Object(Q.jsx)(Kt,{task:i,disabled:o||s}),Object(Q.jsx)(Mt,{task:i,labels:t,disabled:o||s}),s?null:Object(Q.jsx)(an,{task:i,reminders:r,disabled:o})]})}var _n=n("PCrL"),Sn=n("CeWW"),Cn="oHQRp5h",Pn="yy6rPNZ";function Dn(e){var t=e.label,n=e.children;return Object(Q.jsxs)(d.a,{role:t?"group":void 0,"aria-label":t||void 0,children:[t?Object(Q.jsx)(ce.a,{tone:"secondary",exceptionallySetClassName:Cn,"aria-hidden":!0,children:t}):null,Object(Q.jsx)("div",{className:t?Pn:void 0,children:n})]})}function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function En(e){var t=e.task,n=e.disabled,r=void 0!==n&&n||Boolean(t.checked),c=Object(q.e)().update,i=Object(l.h)((function(e){return e.user})),a=Object(l.h)((function(e){return Object(se.n)(e,t.project_id,!0)})),o=t.responsible_uid===i.id?i:null==a?void 0:a.find((function(e){return e.id===t.responsible_uid}));function s(e){e.preventDefault(),c(t,{responsible_uid:null})}return Object(Q.jsx)(Dn,{label:o?Object(A.a)("Assignee"):null,children:Object(Q.jsx)(Ot.a,{onChange:function(e){var n=e.target;c(t,{responsible_uid:null==n?void 0:n.value})},projectId:t.project_id,value:o?o.id:null,children:function(e){var t=e.buttonProps,n=e.toggleDropdown;return Object(Q.jsxs)(d.a,{marginX:"-small",children:[r?null:Object(Q.jsx)(be.f,{category:"modal",handler:n,identifier:"TASK_ACTIONS_ASSIGN_TASK"}),Object(Q.jsx)(T.a,Tn(Tn({},t),{},{variant:"quaternary",size:"small",width:"full",align:"start",disabled:r,startIcon:o?Object(Q.jsx)($.a,{user:o,size:"xsmall",exceptionallySetClassName:"custom_user_avatar_size"}):void 0,endIcon:o?Object(Q.jsx)(on.a,{onClick:s}):Object(Q.jsx)(Sn.a,{}),exceptionallySetClassName:o?_t:void 0,tooltip:r?void 0:Object(Q.jsx)(be.g,{identifier:"TASK_ACTIONS_ASSIGN_TASK"}),children:o?Object(it.a)(o.full_name):Object(A.a)("Assignee")}))]})}})})}function An(e){var t=e.task,n=e.project;return Object(Q.jsx)("div",{"data-item-actions-root":"","data-item-id":t.id,"data-item-content":t.content,"data-item-project-id":n.id,"data-item-project-name":n.name})}var Nn={labelListContainer:"AVQXE4i"};function Rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mn(e){var t=e.task,n=e.labels,r=e.disabled,c=void 0!==r&&r,i=Object(q.e)().update,a=t.labels.length>0,o=c||Boolean(t.checked);return Object(Q.jsxs)(j.a,{space:"xsmall",children:[Object(Q.jsx)(Et.a,{disabled:o,onChange:function(e){var n=e.target,r="string"==typeof n.value?[n.value]:n.value;i(t,{labels:r})},value:t.labels,children:function(e){var t=e.buttonProps,n=e.toggleDropdown;return Object(Q.jsxs)(d.a,{marginX:"-small",children:[o?null:Object(Q.jsx)(be.f,{category:"modal",handler:n,identifier:"TASK_ACTIONS_CHANGE_LABELS"}),Object(Q.jsx)(T.a,Ln(Ln({},t),{},{variant:"quaternary",size:"small",width:"full",align:"start",endIcon:Object(Q.jsx)(Sn.a,{}),tooltip:o?void 0:Object(Q.jsx)(be.g,{identifier:"TASK_ACTIONS_CHANGE_LABELS"}),children:Object(A.a)("Labels")}))]})}}),a?Object(Q.jsx)(d.a,{className:Nn.labelListContainer,children:Object(It.u)(t.labels,n).map((function(e){var r=n[e]||{name:e,color:Tt.a};return Object(Q.jsx)(d.a,{className:Nn.labelPillContainer,display:"inlineFlex",marginBottom:"xsmall",marginRight:"xsmall",maxWidth:"full",children:Object(Q.jsx)(At.a,{label:r,task:t,canRemove:!o})},e)}))}):null]})}function zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qn(e){var t=e.task,n=e.disabled,r=void 0!==n&&n||Boolean(t.checked),c=Object(q.e)().update;return Object(Q.jsx)(Dn,{label:Object(A.a)("Priority"),children:Object(Q.jsx)(Bt.a,{onSelect:function(e){c(t,{priority:e})},priority:t.priority,children:function(e){var n=e.buttonProps,c=e.toggleDropdown;return Object(Q.jsxs)(d.a,{marginX:"-small",children:[r?null:Object(Q.jsx)(be.f,{category:"modal",handler:c,identifier:"TASK_ACTIONS_CHANGE_PRIORITY"}),Object(Q.jsx)(T.a,Bn(Bn({},n),{},{startIcon:Object(Q.jsx)(zt.a,{priority:5-t.priority,size:"16"}),endIcon:Object(Q.jsx)(R.q,{}),exceptionallySetClassName:_t,variant:"quaternary",size:"small",width:"full",align:"start",disabled:r,tooltip:r?void 0:Object(Q.jsx)(be.g,{identifier:"TASK_ACTIONS_CHANGE_PRIORITY"}),children:"P".concat(5-t.priority)}))]})}})})}var Un="Iz3tZqW",Kn="z3lsAU6",Fn="VimA8D5";function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yn(e){var t=e.task,n=e.project,r=e.section,c=e.isProjectShared,i=e.disabled,a=void 0!==i&&i||Boolean(t.checked),o=Object(q.e)().move;return Object(Q.jsx)(Dn,{label:Object(A.a)("Project"),children:Object(Q.jsx)(Ht.a,{selectedOption:{projectId:t.project_id,sectionId:t.section_id},onSelect:function(e){var n=e.projectId,r=e.sectionId;n===t.project_id&&r===t.section_id?o(t,{project_id:n,section_id:null}):o(t,{project_id:n,section_id:r})},selectionScope:"projects-and-sections",workspaceScope:{type:"project",id:t.project_id},renderToggleButton:function(e){var t=e.buttonProps,i=e.toggleDropdown;return Object(Q.jsxs)(d.a,{marginX:"-small",children:[a?null:Object(Q.jsx)(be.f,{category:"modal",identifier:"TASK_ACTIONS_CHANGE_PROJECT",handler:i}),Object(Q.jsx)(T.a,Hn(Hn({},t),{},{"aria-label":Object(A.a)("Select a project"),variant:"quaternary",size:"small",width:"full",align:"start",disabled:a,startIcon:Object(Q.jsx)(Vt.a,{project:n,isShared:c,size:"small"}),endIcon:Object(Q.jsx)(R.q,{}),exceptionallySetClassName:_t,tooltip:a?void 0:Object(Q.jsx)(be.g,{identifier:"TASK_ACTIONS_CHANGE_PROJECT"}),children:Object(Q.jsxs)("div",{className:Un,children:[Object(Q.jsx)(Ft.a,{className:Kn,text:n.name}),null!=r&&r.name?Object(Q.jsx)("div",{className:Fn,children:"/"}):null,null!=r&&r.name?Object(Q.jsx)(Ft.a,{className:Kn,text:r.name}):null]})}))]})}})})}function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qn(e){var t=e.reminders,n=e.task,r=e.disabled,c=void 0!==r&&r,i=Object(q.e)().update,a=c||Boolean(n.checked);function o(e){i(n,{reminders:t.filter((function(t){return t!==e}))})}return Object(Q.jsxs)("div",{children:[Object(Q.jsx)(en.a,{disabled:a,item:n,onReminderAdd:function(e){i(n,{reminders:[].concat($t()(t),[e])})},onReminderDelete:o,reminders:t,hideList:!0,children:function(e){return Object(Q.jsx)(d.a,{marginX:"-small",children:Object(Q.jsx)(T.a,Gn(Gn({},e),{},{variant:"quaternary",size:"small",width:"full",align:"start",disabled:a,endIcon:Object(Q.jsx)(R.d,{}),children:Object(A.a)("Reminders")}))})}}),Object(Q.jsx)(tn.a,{task:n,reminders:t,onDelete:o})]})}var Jn=["isExpanded"];function Xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $n(e){var t=e.task,n=e.disabled,r=void 0!==n&&n,i=Object(q.e)().update,a=null!=t.due,s=r||Boolean(t.checked);var l=Object(o.useCallback)((function(e){null==e||e.stopPropagation(),i(t,{due:null})}),[t,i]);return Object(Q.jsx)(Dn,{label:a?Object(A.a)("Due date"):null,children:Object(Q.jsx)(sn.a,{selectedItems:[t],selectedDate:t.due,placement:"bottom-start",onDateSelect:function(e){i(t,{due:e})},renderReferenceElement:function(e){var n=e.isExpanded,r=ht()(e,Jn);return Object(Q.jsxs)(d.a,{marginX:"-small",children:[Object(Q.jsx)(vn,Zn({task:t,variant:"quaternary",size:"small",width:"full",align:"start",exceptionallySetClassName:p()(St,c()({},_t,a)),disabled:s,endIcon:a?Object(Q.jsx)(on.a,{onClick:l}):Object(Q.jsx)(Sn.a,{}),"aria-expanded":n},r)),s?null:Object(Q.jsx)(be.f,{category:"modal",identifier:"TASK_ACTIONS_SCHEDULE_TASK",handler:r.onClick}),a&&!s?Object(Q.jsx)(be.f,{category:"modal",identifier:"TASK_ACTIONS_REMOVE_DUE_DATE",handler:l}):null]})}})})}var er="vDN8Sum",tr="JJkJw4i";function nr(e){var t=e.task,n=e.project,r=e.section,c=e.labels,i=e.reminders,s=e.disabled,u=void 0!==s&&s,b=Boolean(n.is_archived||n._unjoined),p=Object(l.h)((function(e){return Object(se.q)(e,n.id)})),O=Object(_.g)(Ve.g),f=O.isTipScheduled,h=O.markTipSeen,m=Object(o.useState)(!0),v=a()(m,2),g=v[0],y=v[1],x=f&&g;return Object(Q.jsxs)(d.a,{className:er,background:"aside",display:"flex",flexDirection:"column",justifyContent:"spaceBetween",height:"full",paddingX:"large",paddingTop:"medium",paddingBottom:"large",overflow:"auto","data-testid":"task-details-sidebar",children:[Object(Q.jsxs)(j.a,{space:"small",dividers:"secondary",paddingX:"small",children:[Object(Q.jsx)(Yn,{task:t,project:n,section:r,isProjectShared:p,disabled:u||b}),p&&!b?Object(Q.jsx)(En,{task:t,disabled:u}):null,b?null:Object(Q.jsx)($n,{task:t,disabled:u}),Object(Q.jsx)(qn,{task:t,disabled:u||b}),Object(Q.jsx)(Mn,{task:t,labels:c,disabled:u||b}),b?null:Object(Q.jsx)(Qn,{task:t,reminders:i,disabled:u}),Object(Q.jsx)(An,{task:t,project:n})]}),x?Object(Q.jsx)(d.a,{display:"flex",background:"selected",borderRadius:"full",padding:"small",children:Object(Q.jsxs)(nt.b,{width:"full",children:[Object(Q.jsxs)(nt.a,{width:"auto",children:[Object(Q.jsx)(ce.a,{children:Object(Q.jsx)(tt.a,{string:Object(A.a)("\u270d\ud83c\udffc New: Select text to apply formatting options like <strong>bold</strong>, <em>italic</em>, <underline>links</underline>, and more."),mapping:{underline:Object(Q.jsx)("span",{style:{textDecoration:"underline"}})}})}),Object(Q.jsx)(ce.a,{children:Object(Q.jsx)(tt.a,{string:Object(A.a)("<a>Learn more</a>"),mapping:{a:Object(Q.jsx)(_n.a,{href:"https://todoist.com/help/articles/205195102",openInNewTab:!0})}})})]}),Object(Q.jsx)(nt.a,{width:"content",children:Object(Q.jsx)(T.a,{variant:"quaternary",exceptionallySetClassName:tr,"aria-label":Object(A.a)("Dismiss"),icon:Object(Q.jsx)(R.F,{}),onClick:function(){y(!1),h()}})})]})}):null]})}var rr=n("MPi4"),cr=n("xaIB"),ir=n("KRPs"),ar=n("wjpq"),or="rhBN4zt",sr="_2yBbPNM",lr="OlfzmTI",ur="oRy7JJm";function dr(e){var t=e.isMiniMode,n=void 0!==t&&t,r=e.canUseLabels,c=e.canAddSubtasks,i=e.onEditorClose,s=e.onSubmit,l=e.parentId,u=e.project,j=e.section,b=e.user,p=function(){var e=Object(o.useState)(!1),t=a()(e,2),n=t[0],r=t[1],c=Object(o.useCallback)((function(){r(!0)}),[]),i=Object(o.useCallback)((function(){r(!1)}),[]);return{isEditing:n,startEditing:c,stopEditing:i}}(),O=p.isEditing,f=p.startEditing,m=p.stopEditing,v=Object(q.e)().add,g=Object(ar.a)({taskFields:Object(h.n)(b),onAddTask:function(e){e.parent_id=l,y(e)}});function y(e){null==s||s(),v(e)}return u.is_archived||u._unjoined?null:Object(Q.jsx)(d.a,{className:n?ur:void 0,children:Object(Q.jsxs)(d.a,{display:"flex",className:or,children:[O?Object(Q.jsx)(_e.a,{item:{project_id:u.id,section_id:null==j?void 0:j.id},canUseLabels:r,onCancel:function(){m(),null==i||i()},onSubmit:y,parentId:l,user:b,onMultilinePaste:g}):null,n&&c&&!O?Object(Q.jsx)(kt,{onClick:f,startIcon:Object(Q.jsx)(R.d,{}),children:Object(A.a)("Add sub-task")}):null,n||!c||O?null:Object(Q.jsx)(d.a,{marginLeft:"-small",children:Object(Q.jsx)(T.a,{variant:"quaternary",size:"small",startIcon:Object(Q.jsx)(R.d,{}),onClick:f,children:Object(A.a)("Add sub-task")})}),c&&!O?Object(Q.jsx)(be.f,{identifier:"ADD_TASK_BOTTOM",category:"modal",handler:f}):null]})})}var jr=n("kiTS"),br="SHlftzF";function pr(e){var t=e.completedSubTasksCount,n=e.subTasksCount;if(0===t&&0===n)return null;var r=Math.floor(t/n*100);return Object(Q.jsx)("div",{className:br,children:Object(Q.jsx)(jr.PieChart,{"aria-hidden":"true",startAngle:-90,data:[{value:r,color:"#666666"}],totalValue:100})})}function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hr(e){var t=e.canUseLabels,n=e.isMiniMode,r=void 0!==n&&n,i=e.project,s=e.section,u=e.task,j=e.user,b=Object(o.useState)(!0),p=a()(b,2),O=p[0],f=p[1],h=Object(o.useState)(!1),m=a()(h,2),v=m[0],g=m[1],y=Object(l.h)((function(e){return Object(N.f)(e,u.id)})),x=Object(q.c)(u.id).subTasks,w=Object(rr.a)("task-details-show-completed-sub-tasks",!0),k=a()(w,2),_=k[0],S=k[1],C=Boolean(i.is_archived||i._unjoined),P=!C&&y.completed>0&&O,D=!C&&y.all>0,I=!C&&!u.checked&&0===y.all,E=y.completed>0||x.length>0,R=!C&&(null==u.indent||u.indent<5);return Object(Q.jsxs)(Q.Fragment,{children:[I?Object(Q.jsx)(dr,{isMiniMode:r,canUseLabels:t,onSubmit:function(){return g(!0)},parentId:u.id,project:i,section:s,user:j,canAddSubtasks:R}):null,E?Object(Q.jsx)(d.a,{children:Object(Q.jsxs)(de.a,{id:"task-detail-subtasks-panel",isExpanded:O,onToggleExpand:function(){return f((function(e){return!e}))},children:[Object(Q.jsxs)(de.c,{marginLeft:"-medium",children:[Object(Q.jsxs)(nt.b,{flexGrow:1,alignY:"center",paddingLeft:r?"xlarge":"large",children:[Object(Q.jsx)(nt.a,{width:"auto",children:Object(Q.jsx)(de.d,{title:Object(A.a)("Sub-tasks"),"aria-describedby":"sub-task-count-label",exceptionallySetClassName:lr,children:Object(Q.jsx)(mr,fr({showCount:D},y))})}),Object(Q.jsx)(nt.a,{width:"content",children:P?Object(Q.jsx)(T.a,{variant:"quaternary",size:"small","aria-label":_?Object(A.a)("Hide completed sub-tasks"):Object(A.a)("Show completed sub-tasks"),onClick:function(){return S(!_)},children:_?Object(A.a)("Hide completed"):Object(A.a)("Show completed")}):null})]}),O||!r?Object(Q.jsx)(d.a,{marginLeft:"xlarge",paddingLeft:"large",children:Object(Q.jsx)(ie.a,{weight:"secondary"})}):null]}),Object(Q.jsx)(de.b,{marginLeft:r?"medium":"small",paddingLeft:r?"small":void 0,children:Object(Q.jsx)(Xe.a,{showErrorMsg:!0,children:Object(Q.jsx)(ir.a,{children:Object(Q.jsx)(d.a,{className:[sr,c()({},ur,r)],children:Object(Q.jsx)(cr.a,{item:u,items:x,project:i,section:s,prefetchSubtasks:!1,showCompleted:_,showEditorOnInitialization:v})})})})})]})}):null]})}function mr(e){var t=e.showCount,n=e.all,r=e.completed;return Object(Q.jsxs)(d.a,{display:"flex",alignItems:"center",children:[Object(Q.jsx)(ce.a,{weight:"semibold",size:"copy",as:"span",children:Object(A.a)("Sub-tasks")}),t&&r>0?Object(Q.jsxs)(Q.Fragment,{children:["\xa0",Object(Q.jsx)(pr,{completedSubTasksCount:r,subTasksCount:n})]}):null,t?Object(Q.jsxs)(Q.Fragment,{children:["\xa0",Object(Q.jsxs)(ce.a,{"aria-label":"".concat(r," of ").concat(n," sub-tasks complete"),as:"span",id:"sub-task-count-label",size:"caption",tone:"secondary",children:[r,"/",n]})]}):null]})}var vr="mC9LTvj",gr="_67oDgq-",yr="SDboQs9",xr="hZYAVoy",wr="_27BY-WK";function kr(e){var t=e.taskId,n=e.syncId,r=e.withBackgroundPage,i=Object(w.k)(),b=Object(k.f)(),C=Object(o.useState)(null),P=a()(C,2),D=P[0],I=P[1],T=null!=D,E=Object(q.d)({taskId:t,syncId:n}).task,A=Object(q.a)(null==E?void 0:E.project_id).project,N=Object(q.b)(null==E?void 0:E.section_id).section,R=Object(l.h)((function(e){return e.user})),L=Object(l.h)((function(e){return Object(v.b)(t,e)})),M=Object(l.h)(m.c),z=Object(l.h)(y.p),B=Object(l.h)((function(e){return E?Object(x.a)(E.id)?E.id:Object(g.b)(E.id,e):void 0})),U=Object(l.h)((function(e){return null!=E&&E.parent_id?Object(h.u)(e,E.parent_id):null})),K=Object(_.h)().width,F=Object(o.useMemo)((function(){return K<=O.a}),[K]),V=F?"large":void 0,H=Object(o.useRef)(null),Y=Object(s.a)({root:H.current,threshold:.75}),W=Y.observe,G=Y.inView,X=Object(o.useCallback)((function(e){null==e||e.preventDefault(),H.current&&(r&&Object(f.c)("frontend.unique_links")?b():i({view:"current",search:""}))}),[i,H,r,b]),Z=Object(o.useCallback)((function(e){var t=e.target;"Escape"===e.key&&"BODY"===(null==t?void 0:t.tagName)&&X(e)}),[X]);function $(e){var t=H.current;t&&(t.scrollTop="top"===e?0:t.scrollHeight)}return Object(o.useEffect)((function(){return document.addEventListener("keydown",Z,{capture:!0}),function(){document.removeEventListener("keydown",Z,{capture:!0})}}),[Z]),E&&A?Object(Q.jsxs)(u.a,{isOpen:!0,onDismiss:X,height:"expand",exceptionallySetClassName:p()(vr,c()({},gr,F)),"aria-label":E.content,autoFocus:!1,"data-testid":"task-details-modal",children:[Object(Q.jsx)(pt,{mainContentScrolled:!G,onScrollToTop:function(){return $("top")},project:A,section:N,task:E}),Object(Q.jsxs)(d.a,{display:"flex",flexDirection:"row",height:"full","data-item-content":E.content,"data-item-id":E.id,"data-item-detail-root":"","data-item-project-id":A.id,"data-item-project-name":A.name,className:yr,children:[Object(Q.jsx)(d.a,{"data-testid":"task-main-content-container",className:c()({},wr,F),overflow:"auto",background:"default",width:"full",paddingTop:"large",paddingX:"large",ref:H,children:Object(Q.jsxs)(j.a,{space:"large",children:[Object(Q.jsxs)(j.a,{space:"small",paddingX:V,children:[U?Object(Q.jsx)(J,{task:E,parentTask:U}):null,Object(Q.jsx)(Re,{ref:W,canUseLabels:z,reminders:L,project:A,task:E,user:R,editingStartMode:D,setEditingStartMode:I})]}),F?Object(Q.jsx)(kn,{labels:M,project:A,reminders:L,section:N,task:E,disabled:T}):null,F?Object(Q.jsx)("div",{"data-item-actions-root":"","data-item-id":E.id,"data-item-content":E.content,"data-item-project-id":A.id,"data-item-project-name":A.name}):null,F?Object(Q.jsx)("hr",{className:xr}):null,Object(Q.jsx)(S.a,{category:"modal",within:H.current,children:Object(Q.jsx)(hr,{canUseLabels:z,isMiniMode:F,project:A,section:N,task:E,user:R})}),F?Object(Q.jsx)("hr",{className:xr}):null,Object(Q.jsx)(xe,{isMiniMode:F,project:A,task:E,user:R,onCommentAdded:function(){return $("bottom")}})]})}),F?null:Object(Q.jsx)(d.a,{flexShrink:0,children:Object(Q.jsx)(nr,{labels:M,project:A,section:N,reminders:L,task:E,disabled:T})})]},B)]}):null}},jMFI:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("NoME"),c=n("4+6U"),i=n("Vbab"),a=n("Ek05"),o=n("IJUe");function s(e,t,n){var s=Object(c.a)(e),l=Object(c.a)(t),u=Object(r.a)(s,l),d=function(e){switch(e){case 0:return Object(i.a)("Today");case 1:return Object(i.a)("Tomorrow");case-1:return Object(i.a)("Yesterday");default:return null}}(u),j=n?a.a.getWeekDay(s.getDay()):null!=d?d:a.a.getWeekDay(s.getDay()),b=Object(o.a)(s,{withTime:!1,withWeekday:!1,withYear:u>=365});return n&&d?"".concat(b," \u2027 ").concat(d," \u2027 ").concat(j):"".concat(b," \u2027 ").concat(j)}},jlRT:function(e,t,n){"use strict";var r=n("KrOB");n.d(t,"a",(function(){return r.a}))},jqHE:function(e,t,n){"use strict";n.d(t,"a",(function(){return Lt}));var r=n("RIqP"),c=n.n(r),i=n("lSNA"),a=n.n(i),o=n("J4zp"),s=n.n(o),l=n("q1tI"),u=n("GYl5"),d=n("K6Df"),j=n("kazx"),b=n("PzWS"),p=n("G3Y2"),O=n("ava8"),f=n("8zPl"),h=n("n6bU"),m=n("qOqX"),v=n("TSYQ"),g=n.n(v),y=n("sEfC"),x=n.n(y),w=n("Y+p1"),k=n.n(w),_=n("17x9"),S=n.n(_),C=n("Vbab"),P=n("xvbm"),D=n("TQFH"),I=n("3JOJ"),T=n("mX6p"),E=n("MQ6n"),A=n("UVeO"),N=n("IVjG"),R=n("uzpC"),L=n("v44V"),M=n("V7BD"),z=n("RkX7"),B=n("/MKj"),q=n("gVGk"),U=n("XOeF"),K=n("ImH7"),F=n("W8MJ"),V=n.n(F),H=n("lwsE"),Y=n.n(H),W=n("mYBN"),G=n("b/sn"),Q=n("RZq6"),J=n("eVCd"),X=V()((function e(t){var n=this;Y()(this,e),this.editor=t,a()(this,"destroy",(function(){n.editor.view.dom.removeEventListener("drop",n.drop)})),a()(this,"drop",(function(e){if(e.dataTransfer){var t=Object(J.b)(e.dataTransfer);t&&n.editor.commands.insertMarkdownContent(t)}})),t.view.dom.addEventListener("drop",this.drop)})),Z=W.b.create({name:"apple-mail-drop",addProseMirrorPlugins:function(){var e=this.editor;return[new G.d({key:new G.e("apple-mail-drop"),view:function(){return new X(e)},props:{handleDrop:function(e,t){return!!t.dataTransfer&&(!!Object(J.b)(t.dataTransfer)&&(Object(Q.c)("[Content Editor] Apple Mail drop custom view can be dropped in favour of `handleDrop`"),!0))}}})]}}),$=n("byeC"),ee=n("z7iz"),te=n("UrOp"),ne=n.n(te),re=n("vV6a"),ce=n("iDm+"),ie=n("sslh"),ae=n("YRxN"),oe=n("dD6n"),se=W.b.create({name:"naturalLanguage",addStorage:function(){return{highlightedMatches:[],initialTask:null,previousChange:null,paused:!1,updating:!1,markdownSerializer:null}},addExtensions:function(){return[ie.a,ie.c,ie.b]},onBeforeCreate:function(){var e,t,n=this.options.getStoreState().task,r=null!==(e=null==n?void 0:n.labels)&&void 0!==e?e:[];if(this.storage.initialTask=n,0!==r.length){var i=$.a.fromSchema(this.editor.schema).parse((new DOMParser).parseFromString(null===(t=this.editor.options.content)||void 0===t?void 0:t.slice(),"text/html").body).toJSON(),a=i.content[0];"paragraph"===a.type&&(r.forEach((function(e){var t;a.content=[{type:"text",text:"".concat(re.d).concat(e),marks:[{type:ie.a.name}]},{type:"text",text:" "}].concat(c()(null!==(t=a.content)&&void 0!==t?t:[]))})),this.editor.options.content=i)}},onCreate:function(){var e,t=this,n=this.options.getStoreState(),r=n.projects,c=n.labels,i=n.user,a=n.collaborators,o=n.sections,s=n.project,l=n.task,u=n.isAssigneeDisabled,d=n.isLabelsDisabled,j=n.isPriorityDisabled,b=n.isDateistDisabled,p=null!==(e=null==l?void 0:l.labels)&&void 0!==e?e:[],O=this.editor.getText(),f=Object(ae.c)({projects:r,labels:c,user:i,collaborators:a,sections:o,content:O,project:s,isAssigneeDisabled:u,isLabelsDisabled:d,isPriorityDisabled:j,isDateistDisabled:b}).map((function(e,t){return{match:e,isIgnored:t>=p.length}})),h=this.editor.state.tr;h.setMeta("addToHistory",!1).setMeta("preventUpdate",!0),f.forEach((function(e){var n=e.match,r=e.isIgnored,c=n.start+1,i=n.end+1;r||t.storage.highlightedMatches.push(n),h.addMark(c,i,r?Object(W.p)(ie.b.name,t.editor.state.schema).create({id:n.id}):Object(W.p)(ie.a.name,t.editor.state.schema).create({id:n.id,isInserted:!1}))})),this.storage.markdownSerializer=Object(ee.b)(this.editor.state.schema),this.editor.view.dispatch(h)},onUpdate:function(){var e,t,n,r=this.editor,c=this.options,i=this.storage;if(!i.paused&&!i.updating){i.updating||(i.updating=!0);var a=null!==(e=Object(ce.b)({editor:r,options:c,storage:i}))&&void 0!==e&&e;if(c.onChange&&i.markdownSerializer&&!a){var o=c.getStoreState(),s=o.isDateistDisabled,l=o.isPriorityDisabled,u=o.isLabelsDisabled,d=o.isAssigneeDisabled,j=Object(ce.a)({setOnlyContent:!0,isDateistDisabled:s,isPriorityDisabled:l,isLabelsDisabled:u,isAssigneeDisabled:d,editorState:r.state,initialDueDate:null!==(t=null===(n=i.initialTask)||void 0===n?void 0:n.due)&&void 0!==t?t:null,highlightedMatches:i.highlightedMatches,previousHighlightedMatches:i.highlightedMatches,previousChange:i.previousChange,markdownSerializer:i.markdownSerializer});i.updating=!1,i.previousChange=j,c.onChange(j)}else i.updating=!1}},addCommands:function(){var e=this;return{pauseNaturalLanguageParsing:function(){return function(){return e.storage.paused=!0,!0}},unpauseNaturalLanguageParsing:function(){return function(t){var n=t.commands;return e.storage.paused=!1,n.forceNaturalLanguageUpdate()}},insertNaturalLanguageMatch:function(e){return function(t){var n=t.commands,r=t.state,c=t.tr;return Object(oe.b)({state:r,id:e.id,matchString:e.matchedString,start:e.start,end:e.end,transaction:c}),n.focus()}},forceNaturalLanguageUpdate:function(){return function(t){var n;return t.tr.setMeta("preventDispatch",!0),null===(n=Object(W.n)(se,"onUpdate",e))||void 0===n||n(),!0}},refreshNaturalLanguageLabelHighlightedMatches:function(){return function(t){var n,r=t.commands,i=t.state,a=t.tr,o=e.options.getStoreState(),s=o.task,l=o.labels,u=null!==(n=null==s?void 0:s.labels)&&void 0!==n?n:[],d=e.storage.highlightedMatches.reduce((function(e,t){return"label"===t.type?[t].concat(c()(e)):e}),[]),j=ne()(u,d,(function(e,t){return t.data.name===e}));return ne()(d,u,(function(e,t){return e.data.name===t})).forEach((function(e){a.delete(e.start+1,e.end+2)})),j.forEach((function(e){var t=Object(q.j)(e,{labels:l});t&&Object(oe.b)({state:i,id:t.id,matchString:"@".concat(t.name),start:a.selection.$to.end(),transaction:a})})),r.focus()}},refreshNaturalLanguageProjectAndSectionHighlightedMatches:function(){return function(t){var n,r,c,i=t.commands,a=t.state,o=t.tr;if(null===(null===(n=e.storage.previousChange)||void 0===n?void 0:n.project_id))return i.focus();for(var s=e.options.getStoreState(),l=s.task,u=s.projects,d=s.sections,j=l.project_id?null==u?void 0:u[l.project_id]:null,b=l.section_id?null==d?void 0:d[l.section_id]:null,p=null,O=null,f=e.storage.highlightedMatches.length-1;f>=0;f--){var h=e.storage.highlightedMatches[f];("project"===h.type&&h.data.id!==(null==j?void 0:j.id)||"section"===h.type&&h.data.id!==(null==b?void 0:b.id))&&o.delete(h.start+1,h.end+2),p="project"===h.type?h:p,O="section"===h.type?h:O}return j&&(null===(r=p)||void 0===r?void 0:r.id)!==j.id&&Object(oe.b)({state:a,id:j.id,matchString:"#".concat(j.name),start:o.selection.$to.end(),transaction:o}),b&&(null===(c=O)||void 0===c?void 0:c.id)!==b.id&&Object(oe.b)({state:a,id:b.id,matchString:"/".concat(b.name),start:o.selection.$to.end(),transaction:o}),i.focus()}}}}}),le=n("qtEu"),ue=n("mVx/"),de=n.n(ue);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=W.b.create({name:"PasteMultilineText",addProseMirrorPlugins:function(){var e=this.editor,t=this.options,n=Object(ee.b)(e.schema);return[new G.d({key:new G.e("pasteMultilineText"),props:{handlePaste:function(r,c,i){var a;if(!(null===(a=c.clipboardData)||void 0===a?void 0:a.getData("text/plain")))return!1;var o=function e(t){var n=[],r=[];return t.forEach((function(t){if("paragraph"!==t.type.name){if("hardBreak"===t.type.name)return n.push($.c.from(r)),void(r=[]);r.push(t)}else{var c=e(t.content);n=n.concat(c)}})),r.length&&n.push($.c.from(r)),n}(i.content).map((function(t){return n.serialize(Object(W.o)(t,e.schema))}));if(1===o.length){var s=o[0];if(!t.onSinglelinePaste)return e.commands.insertMarkdownContent(s),!0;var l=t.onSinglelinePaste(s);return e.commands.insertMarkdownContent(l),!0}if(!t.onMultilinePaste)return e.commands.insertMarkdownContent(o.join(" ")),!0;var u=t.getStoreState(),d=u.projects,j=u.labels,b=u.user,p=u.collaborators,O=u.sections,f=u.project,h=u.task,m=o.map((function(t){var r=Object(le.b)(e.schema).serialize(t),c=$.a.fromSchema(e.schema).parse((new DOMParser).parseFromString(r,"text/html").body),i=c.textContent,a=Object(ae.c)({content:i,projects:d,project:f,labels:j,user:b,collaborators:p,sections:O}),o=de()(a,(function(e){return"project"===e.type&&e.id!==(null==f?void 0:f.id)}));"project"===(null==o?void 0:o.type)&&(a=Object(ae.c)({content:i,projects:d,project:o.data,labels:j,user:b,collaborators:p,sections:O}));var s=Object(ce.a)({markdownSerializer:n,editorState:G.b.create({doc:c}),highlightedMatches:Object(ce.e)(a)}),l=be(be({},h),s);return s.project_id&&s.project_id!==h.project_id&&!s.section_id&&h.section_id&&(l.section_id=null),l}));return t.onMultilinePaste(m,(function(){e.chain().focus().insertMarkdownContent(o.join(" ")).run()})),!0}}})]}}),Oe=n("yO+r"),fe=n("QILm"),he=n.n(fe),me=n("ZqqJ"),ve=n("KJOU"),ge=n("b5oN"),ye=n("VFEO"),xe=n("S+H7"),we=n("gmEJ"),ke=n("36qN"),_e=n("DoMW"),Se=n("wkB0"),Ce=n("t4uw"),Pe=n("gXw9"),De=n("18PS"),Ie=n("yZ7J"),Te="lJVmQL1",Ee=n("nKUr"),Ae=Object(l.forwardRef)((function(e,t){var n=e.children,r=e.selectItem,c=Object(Ie.f)().state,i=null==c?void 0:c.first(),a=Object(h.a)(i);return Object(l.useEffect)((function(){c&&i!==a&&c.move(i)}),[i,a,c]),Object(l.useImperativeHandle)(t,(function(){return{onKeyDown:function(e){var t=e.event;if(!c)return!1;var n=c.activeId,i=c.move,a=c.up,o=c.down;if("ArrowUp"===t.key)return i(a()),!0;if("ArrowDown"===t.key)return i(o()),!0;if("Enter"===t.key||"Tab"===t.key){var s=c.items.find((function(e){return e.id===n}));return r(null==s?void 0:s.value),!0}return!1}}}),[r,c]),Object(Ee.jsx)(Ie.e,{className:Te,"data-testid":"content-editor-suggestions-dropdown",children:Object(Ee.jsx)(j.a,{display:"flex",flexDirection:"column",children:n})})})),Ne=Object(l.forwardRef)((function(e,t){var n=e.children,r=e.selectItem;return Object(Ee.jsx)(Ie.a,{visible:!0,autoSelect:!0,children:Object(Ee.jsx)(Ae,{ref:t,selectItem:r,children:n})})})),Re=n("e9+e"),Le="FW93LEa",Me="_3xF6W11";function ze(e){var t=e.id,n=e.label,r=e.subtitle,c=e.icon,i=e.inert,a=void 0!==i&&i,o=e.indent,s=void 0===o?1:o,l=e.selectItem,u=Object(Ee.jsx)(Re.a,{label:n,subtitle:r,icon:c,indent:s,isSelected:!1,onMouseDown:function(e){e.preventDefault()}});if(a)return Object(Ee.jsx)(j.a,{className:[Le,Me],children:u});var d=t.toString();return Object(Ee.jsx)(Ie.c,{value:d,className:Le,onClick:l?function(){return l(d)}:void 0,focusOnHover:!0,children:u})}var Be=Object(l.forwardRef)((function(e,t){var n=e.command,r=e.items,c=Object(l.useCallback)((function(e){if(e){var t=r.find((function(t){return t.value.toString()===e}));t&&n(t)}}),[r,n]);return Object(Ee.jsx)(Ne,{ref:t,selectItem:c,children:r.map((function(e){var t,n,r;return Object(Ee.jsx)(ze,{id:e.value,label:e.name,icon:Object(Ee.jsx)(De.a,{user:{email:null!==(t=e.email)&&void 0!==t?t:"",full_name:null!==(n=e.full_name)&&void 0!==n?n:"",image_id:null!==(r=e.image_id)&&void 0!==r?r:""},size:"xsmall"}),selectItem:c},e.value)}))})})),qe=n("yXPU"),Ue=n.n(qe),Ke=n("o0o1"),Fe=n.n(Ke),Ve=n("GIsW"),He=n("+ger"),Ye=n("LYyr");function We(e){return"id"in e?e.id:e.name}function Ge(e){var t=e.query,n=e.items,r=e.createDescription,c=e.notFoundDescription,i=e.onCreate;return Object(Ee.jsx)(Ie.c,{className:Le,onClick:i,children:Object(Ee.jsx)(j.a,{paddingY:"xsmall",paddingX:"large",onMouseDown:function(e){e.preventDefault()},children:0===n.length?Object(Ee.jsxs)(b.a,{space:"xsmall",children:[Object(Ee.jsx)(Ve.a,{size:"copy",children:c}),Object(Ee.jsx)(Ve.a,{size:"copy",weight:"bold",children:"".concat(Object(C.a)("Create")," ").concat(t)})]}):Object(Ee.jsx)(Ve.a,{size:"copy",children:"".concat(r," ").concat(t)})})})}function Qe(e){var t=e.stateItems,n=e.onCreated,r=e.onClose,c=Object(l.useState)(null),i=s()(c,2),a=i[0],o=i[1],u=Object(l.useRef)(t);return Object(l.useEffect)((function(){a&&u.current!==t&&n(a)}),[n,a,t]),Object(l.useCallback)(function(){var e=Ue()(Fe.a.mark((function e(n){var c;return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.current=t,e.next=3,n();case 3:if(null!==(c=e.sent)){e.next=7;break}return r(),e.abrupt("return");case 7:o(c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,t])}function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze=Object(l.forwardRef)((function(e,t){var n=e.command,r=e.items,i=e.query,a=e.task,o=e.onClose,s=Object(B.g)(),u=Object(B.h)((function(e){var t;return null!==(t=Object(q.n)(e))&&void 0!==t?t:1})),d=Object(B.h)((function(e){return e.labels})),b=Object(Se.a)(i),p=""!==i&&!r.some((function(e){return e.name===b})),O=Object(l.useMemo)((function(){var e=null==a?void 0:a.labels;if(!e)return{nonDuplicatedLabels:r,showDuplicatedLabelMessage:!1};var t=r.reduce((function(t,n){return e.some((function(e){return e===n.name}))?b===n.name?Xe(Xe({},t),{},{queryMatchesDuplicated:!0}):t:Xe(Xe({},t),{},{nonDuplicatedLabels:[].concat(c()(t.nonDuplicatedLabels),[n])})}),{nonDuplicatedLabels:[],queryMatchesDuplicated:!1}),n=t.nonDuplicatedLabels,o=t.queryMatchesDuplicated;return{nonDuplicatedLabels:n,showDuplicatedLabelMessage:""!==i&&o&&0===n.length}}),[r,i,b,null==a?void 0:a.labels]),f=O.nonDuplicatedLabels,h=O.showDuplicatedLabelMessage,m=Object(l.useCallback)(function(){var e=Ue()(Fe.a.mark((function e(){var t;return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s(Object(q.d)({name:b,item_order:u,is_favorite:!1}))){e.next=3;break}return e.abrupt("return",Promise.resolve(null));case 3:return e.abrupt("return",Promise.resolve(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),[s,u,b]),v=Qe({stateItems:d,onClose:o,onCreated:n}),g=Object(l.useCallback)((function(e){if(e){var t=f.find((function(t){return We(t).toString()===e}));t&&n(t)}else v(m)}),[n,m,v,f]);return Object(Ee.jsxs)(Ne,{ref:t,selectItem:g,children:[f.map((function(e){var t=We(e);return Object(Ee.jsx)(ze,{id:t,label:e.name,icon:Object(Ee.jsx)(A.ab,{style:{color:He.d("color"in e?e.color:void 0)}}),selectItem:g},t)})),h?Object(Ee.jsx)(j.a,{paddingY:"small",paddingX:"medium",children:Object(Ee.jsx)(Ve.a,{tone:"secondary",size:"caption",children:Object(Ye.a)(Object(C.a)("Label @{label_name} is already included"),{label_name:b})})}):null,p?Object(Ee.jsx)(Ge,{query:b,items:r,createDescription:Object(C.a)("Create label"),notFoundDescription:Object(C.a)("Label not found."),onCreate:function(){return v(m)}}):null]})})),$e=n("nALT"),et=Object(l.forwardRef)((function(e,t){var n=e.command,r=e.items,c=Object(l.useCallback)((function(e){if(e){var t=r.find((function(t){return t.value.toString()===e}));t&&n(t)}}),[n,r]);return Object(Ee.jsx)(Ne,{ref:t,selectItem:c,children:r.map((function(e){return Object(Ee.jsx)(ze,{id:e.value,label:e.name,icon:Object(Ee.jsx)($e.a,{priority:e.value}),selectItem:c},e.value)}))})})),tt=n("R/7U"),nt=n("Q05W");function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var it=Object(l.forwardRef)((function(e,t){var n=e.command,r=e.items,c=e.query,i=e.onClose,a=Object(B.g)(),o=Object(B.h)((function(e){return Object(U.p)(e)+1})),s=Object(B.h)((function(e){return e.projects})),u=Object(B.h)((function(e){return e.user})),d=""===c,j=!d&&!r.some((function(e){return e.label===c})),b=Object(B.h)(K.f),p=Object(l.useCallback)(function(){var e=Ue()(Fe.a.mark((function e(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Object(U.f)({name:c,child_order:o}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),[a,o,c]),O=Qe({stateItems:s,onClose:i,onCreated:function(e){n({type:"project",label:e.name,value:String(e.id),project:e,workspace:"personal",isShared:!1,indent:1})}}),f=Object(l.useCallback)((function(e){var t=r.find((function(t){return t.value===e}));t?n(t):O(p)}),[n,p,O,r]);return Object(Ee.jsxs)(Ne,{ref:t,selectItem:f,children:[r.map((function(e){if("workspace"===e.type){var t=e.value,n=e.workspace,r="personal"===n?Object(C.a)("Personal"):n.name;return Object(Ee.jsx)(ze,{inert:!0,id:t,label:r,icon:"personal"===n?Object(Ee.jsx)(De.a,{user:u,size:"xsmall"}):Object(Ee.jsx)(tt.a,{src:n.logo_small,size:"small"})},t)}var c=e.value,i=e.project,a=e.indent;if("section"===e.type){var o=e.section;return Object(Ee.jsx)(ze,{id:c,label:o.name,subtitle:d?void 0:i.name,icon:Object(Ee.jsx)(nt.a,{}),indent:a,selectItem:f},c)}var s=e.workspace,l="personal"===s?Object(C.a)("Personal"):s.name;return Object(Ee.jsx)(ze,{id:i.id,label:i.name,subtitle:d||!b?void 0:l,icon:Object(Ee.jsx)(A.Vb,{project:ct(ct({},i),{},{inbox_project:!1}),isShared:e.isShared}),indent:a,selectItem:f},i.id)})),j?Object(Ee.jsx)(Ge,{query:c,items:r,createDescription:Object(C.a)("Create project"),notFoundDescription:Object(C.a)("Project not found."),onCreate:function(){return O(p)}}):null]})}));function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var st=Object(l.forwardRef)((function(e,t){var n=e.command,r=e.items,c=e.project,i=e.query,a=e.onClose,o=Object(B.g)(),s=Object(B.h)((function(e){return e.sections})),u=Object(B.h)((function(e){return c?Object(we.j)(c.id,e)+1:0})),d=Object(B.h)((function(e){var t;return Object(xe.q)(e,null===(t=r[0])||void 0===t?void 0:t.project_id)})),b=""===i.trim(),p=0===r.length&&b,O=!b&&!r.some((function(e){return e.name===i})),f=Object(l.useCallback)(function(){var e=Ue()(Fe.a.mark((function e(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,o(Object(we.e)({name:i,project_id:c.id,section_order:u+1}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),[o,c,i,u]),h=Qe({stateItems:s,onClose:a,onCreated:n}),m=Object(l.useCallback)((function(e){var t=r.find((function(t){return t.id===e}));t?n(t):h(f)}),[n,f,h,r]);return Object(Ee.jsxs)(Ne,{ref:t,selectItem:m,children:[c&&(r.length||p)?Object(Ee.jsx)(ze,{id:c.id,label:c.name,icon:Object(Ee.jsx)(A.Vb,{project:ot(ot({},c),{},{inbox_project:!1}),isShared:d}),inert:!0}):null,r.map((function(e){return Object(Ee.jsx)(ze,{id:e.id,label:e.name,icon:Object(Ee.jsx)(nt.a,{}),selectItem:m,indent:2},e.id)})),p?Object(Ee.jsx)(j.a,{paddingY:"small",paddingX:"medium",children:Object(Ee.jsx)(Ve.a,{tone:"secondary",size:"caption",children:Object(C.a)("This project doesn't have any sections")})}):null,O?Object(Ee.jsx)(Ge,{query:i,items:r,createDescription:Object(C.a)("Create section"),notFoundDescription:Object(C.a)("Section not found."),onCreate:function(){return h(f)}}):null]})})),lt=["task","project"];function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(e){var t=e.type,n=e.triggerChar,r=e.editor,c=e.options;function i(e){return{editor:r,allowedPrefixes:[" "],allow:function(e){var t=e.state,n=e.range;return!Object(W.q)(n.from,n.to,t.doc).some((function(e){return e.mark.type.name===ie.a.name}))},render:function(){var n,i,a=!1,o=!1;function s(){!a&&i&&(r.commands.unpauseNaturalLanguageParsing(),i.hide(),a=!0)}function l(e,t){return o=t.length>0,!(!e.includes(" ")||0!==t.length)&&(s(),!0)}return{onStart:function(o){if(!l(o.query,o.items)){var u=c.getStoreState(),d=u.project,j=u.task;r.commands.pauseNaturalLanguageParsing(),n=new me.d(e,{props:dt(dt({},o),{},{type:t,task:j,project:d,onKeyDown:function(e){var t,n;"Escape"===e.key&&(s(),null===(t=o.editor)||void 0===t||t.commands.focus());"Backspace"===e.key&&(null===(n=o.editor)||void 0===n||n.commands.focus())},onClose:function(){s(),o.editor.commands.focus()}}),editor:o.editor}),o.decorationNode&&(i=Object(ge.b)(o.decorationNode,{getReferenceClientRect:function(){return o.editor.options.element.getBoundingClientRect()},appendTo:function(){return document.body},content:n.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",maxWidth:"",popperOptions:{modifiers:[{enabled:!0,fn:function(e){var t=e.instance,n=e.state,r="".concat(n.rects.reference.width,"px");n.styles.popper.width!==r&&(n.styles.popper.width=r,t.update().catch(Q.b))},name:"sameWidth",phase:"beforeWrite",requires:["computeStyles"]}]},onCreate:function(){a=!1},onClickOutside:function(e,t){t.preventDefault()}}))}},onUpdate:function(e){l(e.query,e.items)||n&&"updateProps"in n&&n.updateProps(e)},onKeyDown:function(e){var t,r,c,a=(null===(t=i)||void 0===t?void 0:t.state.isVisible)||!1;return e.event.key===ye.a.ESCAPE&&a?(e.event.stopPropagation(),s(),!0):!(e.event.key===ye.a.ENTER&&!a&&!o)&&Boolean(null===(r=n)||void 0===r||null===(c=r.ref)||void 0===c?void 0:c.onKeyDown(e))},onExit:function(){var e,t;a||r.commands.unpauseNaturalLanguageParsing(),null===(e=i)||void 0===e||e.destroy(),null===(t=n)||void 0===t||t.destroy()}}}}}switch(t){case"label":return Object(ve.a)(dt(dt({},i(Ze)),{},{pluginKey:new G.e("label-suggestions"),char:n,items:function(e){var t=e.query,n=c.getStoreState(),r=n.labels;if(n.isLabelsDisabled)return[];var i=Object(Se.a)(t);return Object(q.k)({labels:r},i)},command:function(e){var t=e.editor,n=e.range,r=e.props,c=We(r);t.commands.insertNaturalLanguageMatch({id:c,start:n.from,end:n.to,matchedString:"@".concat(r.name),type:"label",data:{id:c,name:r.name}})}}));case"project":return Object(ve.a)(dt(dt({},i(it)),{},{pluginKey:new G.e("project-suggestions"),char:n,allowSpaces:!0,items:function(e){var t,n=e.query,r=c.getStoreState(),i=r.task,a=r.project,o=he()(r,lt),s=null!==(t=null==i?void 0:i.project_id)&&void 0!==t?t:null==a?void 0:a.id,l=s?{type:"project",id:s}:"all";return Object(Pe.b)({searchText:n,selectionScope:"projects-and-sections",workspaceScope:l},o)},command:function(e){var t=e.editor,n=e.range,r=e.props;if("workspace"!==r.type){var c="section"===r.type,i=r.project,a="#".concat(i.name),o=t.chain().insertNaturalLanguageMatch({id:i.id,start:n.from,end:n.to,matchedString:"#".concat(i.name),type:"project",data:i});if(c){var s=n.from+a.length+1;o.insertNaturalLanguageMatch({id:r.section.id,start:s,end:s,matchedString:"/".concat(r.section.name),type:"section",data:r.section})}o.run()}}}));case"priority":return Object(ve.a)(dt(dt({},i(et)),{},{pluginKey:new G.e("priority-suggestions"),char:n,items:function(e){var t=e.query;if(c.getStoreState().isPriorityDisabled)return[];var n=[4,3,2,1].map((function(e){var t=5-e;return{name:Object(C.a)("Priority %s").replace("%s",t.toString()),value:t}}));return""===t?n:Object(ke.a)(t,n)},command:function(e){var t=e.editor,n=e.range,r=e.props.value;t.commands.insertNaturalLanguageMatch({id:r,start:n.from,end:n.to,matchedString:"!!".concat(r),type:"priority",data:{value:r}})}}));case"section":return Object(ve.a)(dt(dt({},i(st)),{},{pluginKey:new G.e("section-suggestions"),char:n,allowSpaces:!0,items:function(e){var t=e.query;if(t.startsWith(" "))return[];var n=c.getStoreState(),r=n.project,i=n.sections;if(!r)return[];var a=Object(we.i)(r.id)({sections:i});return""===t?a:Object(we.h)(t,{sections:Object(_e.a)(a)})},command:function(e){var t=e.editor,n=e.range,r=e.props;t.commands.insertNaturalLanguageMatch({id:r.id,start:n.from,end:n.to,matchedString:"/".concat(r.name),type:"section",data:r})}}));case"collaborator":return Object(ve.a)(dt(dt({},i(Be)),{},{pluginKey:new G.e("collaborator-suggestions"),char:n,items:function(e){var t=e.query,n=c.getStoreState(),r=n.collaborators,i=n.project,a=n.user;if(n.isAssigneeDisabled||!i||!Object(xe.q)({collaborators:r},i.id))return[];var o=Object(xe.l)({collaborators:r,user:a})[i.id].filter((function(e){return a.id!==e.id})).map((function(e){return dt(dt({},e),{},{name:Object(Ce.a)(e.full_name),value:Object(Ce.a)(e.full_name)})}));return o.unshift({id:a.id,email:a.email,full_name:a.full_name,timezone:a.tz_info.timezone,image_id:a.image_id,name:"".concat(Object(C.d)("task_assignment","Me")," (").concat(Object(Ce.a)(a.full_name),")"),value:Object(C.d)("task_assignment","Me")}),""===t?o:o.filter((function(e){return e.full_name.toLowerCase().includes(t.toLowerCase())||e.name.toLowerCase().includes(t.toLowerCase())}))},command:function(e){var t=e.editor,n=e.range,r=e.props;t.commands.insertNaturalLanguageMatch({id:r.id,start:n.from,end:n.to,matchedString:"+".concat(r.value),type:"collaborator",data:r})}}))}}var bt=W.b.create({name:"suggestions",priority:Oe.c+1,addProseMirrorPlugins:function(){var e=this.editor,t=this.options;return[jt({editor:e,options:t,type:"label",triggerChar:"@"}),jt({editor:e,options:t,type:"label",triggerChar:"%"}),jt({editor:e,options:t,type:"project",triggerChar:"#"}),jt({editor:e,options:t,type:"project",triggerChar:"\u2116"}),jt({editor:e,options:t,type:"priority",triggerChar:"!!"}),jt({editor:e,options:t,type:"section",triggerChar:"/"}),jt({editor:e,options:t,type:"collaborator",triggerChar:"+"})]}});function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft=Object(l.forwardRef)((function(e,t){var n=e.autoFocus,r=e.collaborators,c=e.content,i=e.labels,a=e.workspaces,o=e.projects,s=e.project,d=e.sections,j=e.task,b=e.user,p=e["aria-invalid"],v=e["aria-errormessage"],g=e.isAssigneeDisabled,y=e.isDateistDisabled,x=e.isPriorityDisabled,w=e.isLabelsDisabled,_=e.onChange,S=e.onFocus,P=e.onEnter,D=e.onSinglelinePaste,I=e.onMultilinePaste,T=Object(l.useRef)(c),E=Object(l.useRef)(null),A=Object(B.h)(K.f),N=Object(O.a)((function(){return{workspaces:a,projects:o,labels:i,user:b,collaborators:r,sections:d,project:s,task:j,isAssigneeDisabled:g,isDateistDisabled:y,isPriorityDisabled:x,isLabelsDisabled:w,isTeamsEnabled:A}})),R=Object(l.useCallback)((function(e){_&&(/^\\+\*\s/.test(e.content)&&(e=Ot(Ot({},e),{},{content:e.content.substring(1)})),null==_||_(e))}),[_]),L=Object(l.useMemo)((function(){return[f.a.configure({typography:!1,blockquote:!1,bulletList:!1,codeBlock:!1,heading:!1,horizontalRule:!1,strike:!1,listItem:!1,orderedList:!1,image:!1,pasteMarkdown:!1,pasteSinglelineText:!1,link:{openOnClick:!1}}),se.configure({getStoreState:N,onChange:R}),bt.configure({getStoreState:N}),Z,pe.configure({getStoreState:N,onSinglelinePaste:D,onMultilinePaste:I})]}),[N,R,I,D]),z=Object(l.useMemo)((function(){var e=T.current;return e&&/^\\*\*\s/.test(e)?"\\".concat(e):e}),[]),q=Object(u.useEvent)((function(e){return"Enter"===e.key&&!e.isComposing&&(null==P||P(e),!0)}));Object(l.useImperativeHandle)(t,(function(){return E.current?Ot(Ot({},E.current),{},{insertAtCursor:function(e){var t;return null===(t=E.current)||void 0===t?void 0:t.insertAtCursor(e)},focus:function(){var e;return null===(e=E.current)||void 0===e?void 0:e.focus()}}):null}),[]),Object(m.a)((function(){var e,t=null===(e=E.current)||void 0===e?void 0:e.getEditor();t&&t.commands.forceNaturalLanguageUpdate()}),[r,i,o,d,b,g,y,x,w]);var U=Object(h.a)(j.labels);return Object(m.a)((function(){var e,t=null===(e=E.current)||void 0===e?void 0:e.getEditor();t&&!k()(U,j.labels)&&t.commands.refreshNaturalLanguageLabelHighlightedMatches()}),[U,j.labels]),Object(m.a)((function(){var e,t=null===(e=E.current)||void 0===e?void 0:e.getEditor();t&&t.commands.refreshNaturalLanguageProjectAndSectionHighlightedMatches()}),[j.project_id,j.section_id]),Object(Ee.jsx)(M.a,{ref:E,autoFocus:n,className:"no-focus-marker",content:z,"aria-label":Object(C.a)("Task name"),"aria-invalid":p,"aria-errormessage":v,placeholder:Object(C.a)("Task name"),extensions:L,onFocus:S,onKeyDown:q})}));var ht=Object(B.c)((function(e,t){var n;return{collaborators:e.collaborators,labels:Object(q.f)(e),project:Object(U.k)(e,null!==(n=t.task.project_id)&&void 0!==n?n:null),workspaces:e.workspaces,projects:e.projects,sections:e.sections,user:e.user}}),null,null,{forwardRef:!0})(ft),mt=n("4rNB"),vt=n("4eld"),gt=n("Wo0o"),yt=n("m6DX"),xt=n("Ba5u"),wt="kaK9EO7",kt="IA8sfLT",_t="MlQPkal",St="CPkTPtw",Ct="KxR0vvm",Pt="XZD7aYt",Dt="dFTrVuF",It="GjN0JRk";function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function At(e){var t=e.taskId,n=e.projectId,r=e.sectionId,c=e.iconSize,i=void 0===c?"small":c,a=e.onProjectSectionSelect,o=Object(P.c)("frontend.quick_add_customization"),s=Object(B.h)((function(e){return Object(U.k)(e,n)})),u=Object(B.h)((function(e){return Object(we.s)(e,r)})),d=Object(B.h)((function(e){return!!n&&Object(xe.q)(e,n)})),j=Object(C.a)("Select a project"),O=Boolean(null==u?void 0:u.name),f=(null==u?void 0:u.name)||"",h=Object(l.useCallback)((function(e){var t=e.buttonProps;return Object(Ee.jsx)(mt.a,{content:Object(Ee.jsx)(yt.a,{title:j,shortcut:re.o}),children:Object(Ee.jsx)(p.a,Et(Et({},t),{},{"aria-label":j,exceptionallySetClassName:wt,variant:"quaternary",children:s?Object(Ee.jsxs)(b.a,{exceptionallySetClassName:kt,alignY:"center",space:"xsmall",children:[Object(Ee.jsx)(A.Vb,{project:s,isShared:d,size:i}),Object(Ee.jsx)(gt.a,{className:_t,text:s.name}),O?Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)(A.ic,{"aria-hidden":!0}),Object(Ee.jsx)(A.dc,{"aria-hidden":!0}),Object(Ee.jsx)(xt.a,{className:_t,source:f})]}):null,Object(Ee.jsx)(A.r,{"aria-hidden":!0})]}):Object(C.a)("Project is not selected")}))})}),[j,O,i,d,s,f]),m=Object(l.useCallback)((function(e){var t=e.buttonProps;return Object(Ee.jsx)(vt.a,Et(Et({},t),{},{className:g()("icon_pill",Ct),"aria-label":j,title:j,shortcut:re.o,children:Object(Ee.jsxs)("div",{className:St,children:[s?Object(Ee.jsx)(A.Vb,{className:It,project:s,isShared:d,size:i}):null,Object(Ee.jsx)("div",{className:Pt,children:s?Object(Ee.jsx)(gt.a,{text:s.name}):Object(C.a)("Project is not selected")}),null!=u&&u.name?Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)("span",{className:Dt,children:"/"}),Object(Ee.jsx)("div",{className:Pt,children:Object(Ee.jsx)(xt.a,{source:u.name})})]}):null]})}))}),[j,i,d,s,u]);return Object(Ee.jsx)(Pe.a,{selectedOption:n?{projectId:n,sectionId:r}:null,selectionScope:"projects-and-sections",workspaceScope:t?{type:"project",id:n}:"all",onSelect:a,renderToggleButton:o?h:m})}function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lt(e){var t,n,r=e.item,i=void 0===r?{}:r,a=e.reminders,o=void 0===a?[]:a,v=e.forwardedRef,y=e.user,w=e.canUseLabels,_=e.parentId,S=e.onCancel,B=void 0===S?function(){}:S,q=e.onChange,U=e.onKeyDown,K=void 0===U?function(){}:U,F=e.onMultilinePaste,V=e.onSubmit,H=void 0===V?function(){}:V,Y=e.withCancelButton,W=void 0===Y||Y,G=(e.withQuickNote,e.initialFocus),Q=void 0===G?"content":G,X=e.mode,$=void 0===X?"normal":X,ee=e.isEditing,te=void 0!==ee&&ee,ne=e.isTaskDetailEditor,re=void 0!==ne&&ne,ce=e.isQuickAddEditor,ie=void 0!==ce&&ce,ae=e.isBoardViewActive,oe=void 0!==ae&&ae;var se=Object(P.c)("frontend.quick_add_customization"),le=Object(l.useState)(""),ue=s()(le,2),de=ue[0],je=ue[1],be=Object(l.useState)(!1),pe=s()(be,2),Oe=pe[0],fe=pe[1],he=Object(l.useRef)(null),me=Object(l.useRef)(null),ve=Object(l.useRef)(null),ge=Object(l.useRef)(null),ye=Object(l.useState)((function(){return"description"===Q?me:he})),xe=s()(ye,2),we=xe[0],ke=xe[1],_e=Object(l.useState)(i),Se=s()(_e,1)[0],Ce=Object(l.useState)((function(){return Object(J.c)(Se.content)})),Pe=s()(Ce,2),De=Pe[0],Ie=Pe[1],Te=function(e){var t=Object(l.useState)(e),n=s()(t,2),r=n[0],c=n[1],i=Object(l.useRef)(r);return[r,Object(l.useCallback)((function(e){i.current=e,c(e)}),[]),i]}((function(){return Rt(Rt(Rt({},Object(D.n)(y)),Se),{},{reminders:o,content:De.content},_?{parent_id:_}:null)})),Ae=s()(Te,3),Ne=Ae[0],Re=Ae[1],Le=Ae[2],Me=Object(l.useState)(null),ze=s()(Me,2),Be=ze[0],qe=ze[1],Ue=Object(l.useState)(null),Ke=s()(Ue,2),Fe=Ke[0],Ve=Ke[1],He=Object(l.useState)(null),Ye=s()(He,2),We=Ye[0],Ge=Ye[1],Qe=Object(h.a)(i);Object(E.b)({when:Oe&&te});var Je=Object(l.useMemo)((function(){return[f.a.configure({typography:!1,strike:!1,image:!1,link:{openOnClick:!1}}),Z]}),[]);function Xe(){return Rt(Rt({},Ne),{},{content:Object(J.d)(Ne.content,De)})}function Ze(){var e,t=Xe(),n=t.content.trim().length,r=null===(e=t.description)||void 0===e?void 0:e.trim().length;return{contentTextLength:n,descriptionTextLength:r,isContentLengthAboveLimit:n>500,isDescriptionLengthAboveLimit:r>16384}}function $e(){var e=Ze(),t=e.contentTextLength,n=e.isContentLengthAboveLimit,r=e.isDescriptionLengthAboveLimit;return t>0&&!n&&!r&&null!=Ne.project_id}var et=Object(O.a)((function(e){var t=Rt(Rt({},Ne),e);null===t.project_id&&(t.project_id=Se.project_id||y.inbox_project_id,void 0===e.section_id&&(t.section_id=Se.section_id)),e.project_id&&Ne.project_id!==e.project_id&&void 0===e.section_id&&(t.section_id=null),null===t.parent_id&&(t.parent_id=Se.parent_id),!Fe&&null===t.due&&Se.due&&(t.due=Se.due),Fe||"NO_DATE"!==t.due||(t.due=null),We||null!==t.priority||(t.priority=Se.priority||1),!Be&&null===t.responsible_uid&&Se.responsible_uid&&(t.responsible_uid=Se.responsible_uid),k()(Le.current,t)?fe(!1):fe(!0);var n,r,c,i,a,o,s,l,u,d={content:Se.content,due:Se.due,labels:Se.labels,priority:Se.priority,project_id:Se.project_id,responsible_uid:Se.responsible_uid,section_id:Se.section_id};n=e,r=d,s=Object.keys(n).filter((function(e){return null!==n[e]})).some((function(e){return!k()(n[e],r[e])})),l=null!==n.due&&(null==n||null===(c=n.due)||void 0===c||null===(i=c.getDate)||void 0===i?void 0:i.call(c))!==(null==r||null===(a=r.due)||void 0===a||null===(o=a.getDate)||void 0===o?void 0:o.call(a)),u=null!==n.priority&&n.priority!==r.priority,fe(!!(s||l||u)),Re(t)})),tt=Object(u.useEvent)((function(e){Re(Rt(Rt({},Ne),{},{description:e})),fe(!k()(Se.description,e))})),nt=Object(l.useMemo)((function(){return x()((function(e){var t=e.getMarkdown;tt(t())}),100,{leading:!0})}),[tt]),rt=Object(l.useCallback)((function(){ke(he)}),[]),ct=Object(l.useCallback)((function(){ke(me)}),[]),it=Object(u.useEvent)((function(e){return!(!e.ctrlKey&&!e.metaKey||"Enter"!==e.key||e.isComposing)&&(mt(e),!0)})),at=Object(u.useEvent)((function(e){var t=Ze(),n=t.contentTextLength,r=t.descriptionTextLength;if(e.length<=500||n>0||r>0)return e;var c=e.lastIndexOf(" ",500),i=e.substring(0,c),a=e.substring(c);return a.length>0&&je(a.trim()),i})),ot=Object(u.useEvent)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null==F||F.apply(void 0,t)}));function st(e){e.preventDefault(),$e()&&H(Xe(),e,we.current===he.current?"title":"description")}var lt=Object(l.useCallback)((function(e){var t,n,r,c,i,a;if(we.current===he.current)return null===(i=he.current)||void 0===i?void 0:i.getEditorElement().contains(e.target);if(we.current===me.current)return null===(a=me.current)||void 0===a?void 0:a.getEditorElement().contains(e.target);var o=null!==(t=null===(n=we.current)||void 0===n||null===(r=n.getEditorRef)||void 0===r?void 0:r.call(n).editor)&&void 0!==t?t:we.current;return null!==(c=null==o?void 0:o.contains(e.target))&&void 0!==c&&c}),[we]);function ut(e){var t;Ve(!0),null===(null==Se?void 0:Se.due)&&null!==e||(null==Se||null===(t=Se.due)||void 0===t?void 0:t.getDate())!==(null==e?void 0:e.getDate())?fe(!0):fe(!1),Re(Rt(Rt({},Ne),{},{due:e})),vt()}function dt(e){var t=e.projectId,n=e.sectionId;t===Ne.project_id&&n===Ne.section_id?Re(Rt(Rt({},Ne),{},{section_id:null})):Re(Rt(Rt({},Ne),{},{project_id:t,section_id:n})),vt()}function jt(e){var t=e.target;qe(!0),Se.responsible_uid!==t.value?fe(!0):fe(!1),Re(Rt(Rt({},Ne),{},{responsible_uid:t.value})),vt()}function bt(e){k()(Le.current.labels,e)?fe(!1):fe(!0),Re(Rt(Rt({},Ne),{},{labels:e})),vt()}function pt(e){Ge(!0),(null==Se?void 0:Se.priority)!==e?fe(!0):fe(!1),Ge(!0),Re(Rt(Rt({},Ne),{},{priority:e})),vt()}function Ot(e){var t;null!==(t=Le.current.reminders)&&void 0!==t&&t.includes(e)?fe(!1):fe(!0),Re(Rt(Rt({},Ne),{},{reminders:[].concat(c()(Ne.reminders||[]),[e])}))}function ft(e){var t,n;null!==(t=Le.current)&&void 0!==t&&null!==(n=t.reminders)&&void 0!==n&&n.includes(e)?fe(!0):fe(!1),Re(Rt(Rt({},Ne),{},{reminders:Ne.reminders.filter((function(t){return t!==e}))}))}function mt(e){null==q||q(Le.current),st(e)}function vt(){setTimeout((function(){var e,t;we!==me?null===(e=we.current)||void 0===e||e.focus():null===(t=we.current)||void 0===t||t.getEditor().commands.focus("end")}),0)}var gt=Object(l.useMemo)((function(){return Be?Ne.responsible_uid:Se.responsible_uid}),[Be,Se.responsible_uid,Ne.responsible_uid]);return Object(m.a)((function(){null==q||q(Rt(Rt({},Ne),{},{content:Object(J.d)(Ne.content,De)}))}),[De,Ne,q]),Object(l.useEffect)((function(){Qe&&i.id!==Qe.id&&Object(I.a)(Qe.id)&&Object(T.a)(i.id)&&Re(Rt(Rt({},Ne),{},{id:i.id}))}),[i,Ne,Qe,Re]),Object(l.useEffect)((function(){v&&(v.current.insertText=function(e){var t,n=Object(J.c)(e);Ie(n),null===(t=he.current)||void 0===t||t.insertAtCursor(n.content)},v.current.focusContentInput=function(){var e;null===(e=he.current)||void 0===e||e.focus()})}),[v]),Object(l.useEffect)((function(){var e;"description"===Q&&(null===(e=me.current)||void 0===e||e.getEditor().commands.focus("end"))}),[Q]),Object(m.a)((function(){0!==de.length&&me.current&&me.current.getEditor().chain().focus().insertMarkdownContent(de).run()}),[de]),Object(Ee.jsxs)("form",{ref:v,className:"task_editor focus-marker-enabled-within",onKeyDown:function(e){if("Escape"===e.key)return e.preventDefault(),void B();e.ctrlKey&&77===e.keyCode&&e.preventDefault(),(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&(e.preventDefault(),we.current!==he.current&&we.current!==me.current&&mt(e)),lt(e)&&K(e)},children:[Object(Ee.jsxs)("div",{className:"task_editor__editing_area",onClick:function(e){var t,n,r,c,i=(null===(t=he.current)||void 0===t?void 0:t.toolbarsRefs.some((function(t){var n;return null===(n=t.current)||void 0===n?void 0:n.contains(e.target)})))||(null===(n=me.current)||void 0===n?void 0:n.toolbarsRefs.some((function(t){var n;return null===(n=t.current)||void 0===n?void 0:n.contains(e.target)}))),a=(null==ve||null===(r=ve.current)||void 0===r?void 0:r.contains(e.target))||(null==ge||null===(c=ge.current)||void 0===c?void 0:c.contains(e.target));lt(e)||a||i||vt()},children:[Object(Ee.jsxs)("div",{className:"task_editor__input_fields",children:[Object(Ee.jsxs)("div",{className:g()("task_editor__content_field","no-focus-marker",{"task_editor__content_field--large-text":re||ie}),children:[Object(Ee.jsx)(z.a,{type:De.type,className:"task_editor__content_field__extension"}),Object(Ee.jsx)(ht,{ref:he,autoFocus:"content"===Q,content:De.content,task:Ne,"aria-invalid":Ze().isContentLengthAboveLimit,"aria-errormessage":"a11y_task_name_over_limit",isAssigneeDisabled:Be,isDateistDisabled:Fe,isPriorityDisabled:We,isLabelsDisabled:!w,onFocus:rt,onChange:et,onEnter:mt,onSinglelinePaste:at,onMultilinePaste:ot})]}),Object(Ee.jsxs)(j.a,{display:"flex",children:["task-details"!==$||Ne.description?null:Object(Ee.jsx)(j.a,{className:"task_editor__description_field_icon",children:Object(Ee.jsx)(A.D,{"aria-hidden":"true"})}),Object(Ee.jsx)(M.a,{ref:me,autoFocus:"description"===Q,className:g()("task_editor__description_field","no-focus-marker",{"task_editor__description_field--empty":"task-details"===$&&!Ne.description}),content:i.description,"aria-errormessage":"a11y_task_description_over_limit","aria-label":Object(C.a)("Description"),placeholder:Object(C.a)("Description"),extensions:Je,onFocus:ct,onKeyDown:it,minRows:2,onUpdate:nt})]})]}),function(){var e=Ze(),t=e.contentTextLength,n=e.descriptionTextLength,r=e.isContentLengthAboveLimit,c=e.isDescriptionLengthAboveLimit;function i(){return Object(Ee.jsx)("div",{id:"a11y_task_name_over_limit",className:"task_editor__length_limit_error",children:Object(Ee.jsx)(d.a,{string:Object(C.a)("Task name character limit: {nameLength} / {nameLengthLimit}"),mapping:{nameLength:t,nameLengthLimit:500}})})}function a(){return Object(Ee.jsx)("div",{id:"a11y_task_description_over_limit",className:"task_editor__length_limit_error",children:Object(Ee.jsx)(d.a,{string:Object(C.a)("Task description character limit: {descriptionLength} / {descriptionLengthLimit}"),mapping:{descriptionLength:n,descriptionLengthLimit:16384}})})}return(r||c)&&Object(Ee.jsxs)(Ee.Fragment,{children:[we.current===he.current?r?i():a():null,we.current==me.current?c?a():i():null]})}(),"normal"===$?Object(Ee.jsx)(Ee.Fragment,{children:se?Object(Ee.jsx)(j.a,{marginBottom:ie?void 0:"medium",children:Object(Ee.jsx)(L.b,{item:Ne,isBoardViewActive:oe,onAssigneeSelect:jt,onDueDateSelect:ut,onLabelsSelect:bt,onPrioritySelect:pt,onReminderAdd:Ot,onReminderClose:vt,onReminderDelete:ft,onReminderDeleteAll:function(){k()(Le.current.reminders,[])?fe(!1):fe(!0),Re(Rt(Rt({},Ne),{},{reminders:[]}))},quickAddMoreActionsMenuRef:ge,richTextContentInputRef:he,ref:ve})}):Object(Ee.jsxs)("div",{className:"task_editor__extra_fields",children:[Object(Ee.jsxs)("div",{className:"task_editor__extra_fields__pills",children:[Object(Ee.jsx)(R.a,{item:Ne,onSelect:ut,showTooltip:!1}),Object(Ee.jsx)(At,{taskId:null!==(t=null==Se?void 0:Se.id)&&void 0!==t?t:null,projectId:Ne.project_id,sectionId:Ne.section_id,onProjectSectionSelect:dt})]}),Object(Ee.jsx)(N.a,{labels:Ne.labels,item:i,projectId:Ne.project_id,user:y,reminders:Ne.reminders,priority:Ne.priority,showKeyboardShortcuts:!0,withQuickNote:!1,quickNote:Ne.note,assignee:gt,onAssigneeSelect:jt,onReminderAdd:Ot,onReminderDelete:ft,onReminderClose:vt,onLabelsSelect:bt,onPrioritySelect:pt,onQuickNoteChange:function(e){Re(Rt(Rt({},Ne),{},{note:e}))},onQuickNoteClose:vt,onComposerAppend:function(e){var t,n,r,c,i=" ".concat(e);if(null!==(t=we.current)&&void 0!==t&&null!==(n=t.editor)&&void 0!==n&&n.pasteAtCursor)null===(c=we.current)||void 0===c||c.editor.pasteAtCursor(i);else if(null!==(r=we.current)&&void 0!==r&&r.insertAtCursor){var a;null===(a=we.current)||void 0===a||a.insertAtCursor(i)}else tt(i)}})]})}):null]}),Object(Ee.jsxs)(j.a,{className:"task_editor__footer",display:"flex",width:"full",marginTop:"small",justifyContent:"spaceBetween",children:[se&&ie?Object(Ee.jsx)(j.a,{marginRight:"medium",children:Object(Ee.jsx)(At,{taskId:null!==(n=null==Se?void 0:Se.id)&&void 0!==n?n:null,projectId:Ne.project_id,sectionId:Ne.section_id,onProjectSectionSelect:dt})}):null,Object(Ee.jsxs)(b.a,{"data-testid":"task-editor-action-buttons",exceptionallySetClassName:"task_editor__footer__action-buttons",space:"medium",children:[W?Object(Ee.jsx)(p.a,{onClick:B,variant:"secondary",children:Object(C.a)("Cancel")}):null,Object(Ee.jsx)(p.a,{disabled:!$e(),onClick:st,type:$e()?"submit":"button",variant:"primary","data-testid":"task-editor-submit-button",children:null!=Se&&Se.id?Object(C.a)("Save"):Object(C.a)("Add task")})]})]})]})}Lt.propTypes={item:S.a.object,reminders:S.a.array,forwardedRef:S.a.object,user:S.a.object.isRequired,canUseLabels:S.a.bool,parentId:S.a.string,withCancelButton:S.a.bool,withQuickNote:S.a.bool,initialFocus:S.a.oneOf(["content","description"]),onCancel:S.a.func,onChange:S.a.func,onKeyDown:S.a.func,onMultilinePaste:S.a.func,onSubmit:S.a.func,mode:S.a.oneOf(["normal","task-details"]),isEditing:S.a.bool,isTaskDetailEditor:S.a.bool,isQuickAddEditor:S.a.bool,isBoardViewActive:S.a.bool}},k9f2:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return f.a})),n.d(t,"c",(function(){return f.b}));var r=n("lSNA"),c=n.n(r),i=n("J4zp"),a=n.n(i),o=n("QILm"),s=n.n(o),l=n("q1tI"),u=n("/MKj"),d=n("TSYQ"),j=n.n(d),b=n("TQFH"),p=n("AnGN"),O=n("rAR9"),f=n("2OfN"),h="_2OEKsQ6",m="iydsj+G",v=n("nKUr"),g=["projectId"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=Object(l.forwardRef)((function(e,t){var n=e.projectId,r=s()(e,g),i=Object(O.b)().activeTaskId,o=Object(u.g)(),d=Object(l.useState)(!1),y=a()(d,2),w=y[0],k=y[1],_=null!=i,S=Object(l.useCallback)((function(e){_&&p.isSafari&&(k(!0),e.stopPropagation())}),[_,k]),C=Object(l.useCallback)((function(e){_&&p.isSafari&&(k(!1),e.stopPropagation())}),[_,k]),P=Object(l.useCallback)((function(e){i&&n&&(e.stopPropagation(),o(Object(b.F)({id:i,project_id:n})))}),[i,o,n]);return Object(v.jsx)(f.b,x(x({},r),{},{className:j()(r.className,m,c()({},h,_)),ref:t,showDragOverState:w||r.showDragOverState,onMouseUp:P,onMouseEnter:p.isSafari?S:void 0,onMouseLeave:p.isSafari?C:void 0}))}))},kMIb:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n("TSYQ"),c=n.n(r),i=n("gd9Y"),a=n("4eld"),o=n("++xj"),s=n("nKUr"),l="SidebarListItem",u="SidebarListItem--selected",d="SidebarListItem__icon",j="SidebarListItem__button",b="SidebarListItem__content",p="SidebarListItem__actions";function O(e){var t=e.linkTo,n=e.className,r=e.hoverActions,O=e.onEdit,f=e.onContextMenu,h=e.onMenuClick,m=e.children,v=e.leftIcon,g=e.color,y=e.menuButtonLabel;return Object(s.jsxs)(i.b,{view:t,className:function(e){var t=e.isActive;return c()(l,n,t?u:null)},onContextMenu:f,onClick:function(e){e.altKey&&(e.preventDefault(),O())},children:[Object(s.jsx)("span",{className:d,style:{color:g},children:v}),Object(s.jsx)("span",{className:b,children:m}),Object(s.jsx)("span",{className:p,children:r}),h?Object(s.jsx)(a.a,{onClick:function(e){e.preventDefault(),h(e)},className:j,title:y,"aria-label":y,children:Object(s.jsx)(o.a,{})}):null]})}},"kR/q":function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var r=n("RIqP"),c=n.n(r),i=n("q1tI"),a=n("/MKj"),o=n("Vbab"),s=n("RZq6"),l=n("S+H7"),u=n("3AAN"),d=n("ImH7"),j=n("CZSy"),b=n("j3q4"),p=n("4MLW"),O=n("aSh9"),f=n("lSNA"),h=n.n(f),m=n("QILm"),v=n.n(m),g=n("bt/X"),y=n.n(g),x=n("m0B0"),w=n("OljV"),k=["null"],_=["null"],S=["null"];function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=n("5wkU"),I=[];function T(e){var t=e.tasks,n=e.viewOptions,r=Object(a.h)(l.m),f=Object(a.h)(d.n),m=Object(a.h)((function(e){return e.projects})),g=Object(a.h)((function(e){return e.workspaces})),C=Object(a.h)(O.i),T=Object(a.h)(u.a);return Object(i.useMemo)((function(){if(null!=n&&n.grouped_by){if(!t)return I;switch(n.grouped_by){case j.i:var e=function(e){return{grouped:y()(e,"priority")}}(t),i=[],a=p.b;for(var l in e.grouped){var u=void 0;switch(l){case"4":u=Object(o.a)("Priority 1");break;case"3":u=Object(o.a)("Priority 2");break;case"2":u=Object(o.a)("Priority 3");break;case"1":default:u=Object(o.a)("Priority 4")}var d=e.grouped[l];i.push({key:l,header:u,tasks:d,taskListType:a,defaultFields:{priority:d[0].priority}})}return i.sort((function(e,t){return t.key.localeCompare(e.key)}));case j.e:var O=function(e){var t=y()(e,"responsible_uid");return{nonGrouped:t.null,grouped:v()(t,k)}}(t),E=[],A=p.b;for(var N in O.grouped){var R,L,M,z=O.grouped[N],B=N===(null===(R=f.id)||void 0===R?void 0:R.toString())?Object(o.d)("task_assignment","Me"):null===(L=r[parseInt(N,10)])||void 0===L?void 0:L.full_name;if(B)E.push({key:N,header:B,tasks:z,taskListType:A,defaultFields:{responsible_uid:z[0].responsible_uid}});else Object(s.b)("No corresponding collaborator found: ".concat(N)),O.nonGrouped?(M=O.nonGrouped).push.apply(M,c()(z)):O.nonGrouped=z}return E.sort((function(e,t){return e.key===t.key?0:e.key===f.id.toString()?-9999:t.key===f.id.toString()?9999:e.key.localeCompare(t.key)})),O.nonGrouped&&(E=[].concat(c()(E),[{key:null,header:Object(o.a)("Not assigned"),taskListType:A,tasks:O.nonGrouped}])),E;case j.g:var q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=y()(e,(function(e){return e.due?!Object(x.a)(t,e.due)&&e.due.getTime()<t.getTime()?"overdue":Object(w.a)(e.due,{dateOnly:!0}):null})),r=n.null,c=v()(n,_);return{nonGrouped:r,grouped:c}}(t),U=[],K=p.a;for(var F in q.grouped)"overdue"!==F?U.push(Object(D.a)(F,q.grouped[F])):U.push(Object(D.b)(q.grouped[F]));return U.sort((function(e,t){return e.key===t.key?0:"overdue"===e.key?-9999:"overdue"===t.key?9999:e.key.localeCompare(t.key)})),q.nonGrouped&&(U=[].concat(c()(U),[{key:null,header:Object(o.a)("No due date"),tasks:q.nonGrouped,taskListType:K}])),U;case j.d:var V=function(e){var t=y()(e,(function(e){return Object(w.a)(e.added_at,{dateOnly:!0})}));return{nonGrouped:t.null,grouped:v()(t,S)}}(t),H=[],Y=p.a;for(var W in V.grouped){var G=Object(b.a)(W);H.push({key:W,header:G,tasks:V.grouped[W],taskListType:Y})}return H.sort((function(e,t){return e.header===t.header?0:e.header.getTime()<t.header.getTime()?-1:1})),H;case j.h:var Q=function(e){return e.reduce((function(e,t){return t.labels.length||(e=P(P({},e),{},{nonGrouped:e.nonGrouped?[].concat(c()(e.nonGrouped),[t]):[t]})),t.labels.forEach((function(n){e=P(P({},e),{},{grouped:P(P({},e.grouped),{},h()({},n,e.grouped[n]?[].concat(c()(e.grouped[n]),[t]):[t]))})})),e}),{grouped:{}})}(t),J=[],X=p.c;for(var Z in Q.grouped)J.push({key:Z,header:Z,tasks:Q.grouped[Z],taskListType:X,defaultFields:{labels:[Z]}});return J.sort((function(e,t){return T(e.key,t.key)})),Q.nonGrouped&&(J=[].concat(c()(J),[{key:null,header:Object(o.a)("No label"),taskListType:X,tasks:Q.nonGrouped}])),J;case j.j:var $=function(e){return{grouped:y()(e,(function(e){return e.project_id}))}}(t),ee=[],te=p.b;for(var ne in $.grouped){var re=m?m[ne]:null,ce=$.grouped[ne];re&&ee.push({key:ne,header:re.name,tasks:ce,taskListType:te,defaultFields:{project_id:ce[0].project_id}})}return ee.sort((function(e,t){return C(e.tasks[0],t.tasks[0])}));case j.k:var ie=function(e,t){return{grouped:y()(e,(function(e){var n=e.project_id,r=null==t?void 0:t[n];return(null==r?void 0:r.workspace_id)||"Personal"}))}}(t,m),ae=[],oe=p.b;for(var se in ie.grouped){var le,ue,de=ie.grouped[se],je="Personal"===se?Object(o.a)("Personal"):null!==(le=null==g||null===(ue=g[se])||void 0===ue?void 0:ue.name)&&void 0!==le?le:se;ae.push({key:se,header:je,tasks:de,taskListType:oe,defaultFields:{project_id:"Personal"===se?f.inbox_project_id:void 0}})}return ae.sort((function(e,t){return"Personal"===e.key?-1:"Personal"===t.key?1:e.header.localeCompare(t.header)}))}}}),[r,m,g,T,C,t,f.id,f.inbox_project_id,null==n?void 0:n.grouped_by])}},kUdr:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n("/MKj"),c=n("peh1"),i=n("maC2"),a=n("lSNA"),o=n.n(a),s=n("Vbab"),l=n("xvbm"),u=n("SgJ6"),d=n("U5fO"),j=n("KDcA"),b=n("UVeO"),p=n("31T5"),O=n("NeBj"),f=n("GS7h"),h=n("Akve"),m=n("6O1D"),v=n("k9f2"),g=n("iWii"),y={inboxIcon:"Dd3PmF2g5h93YIf1bCDdiA==",teamInboxIcon:"Ek+RE6IAlt5Ns1JwxZKLtg==",todayIcon:"ONBJEQtK++jnfUWJ3V90Dw==",completedIcon:"dzOJIBuASPuCiFETMKkM4Q==",upcomingViewIcon:"SWWJ2mDmoJ5jpYGsCY5nBA==",filtersLabelsIcon:"yeJ7DFSh0CB61w0UHm64kQ=="},x=n("nKUr");function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=Object(c.createSelector)(i.g,i.d,i.c,(function(e){return e.user}),(function(e,t,n,r){return{todayCount:e,overdueCount:t,user:r,inboxCount:n[r.inbox_project_id],teamInboxCount:r.team_inbox_id?n[r.team_inbox_id]:0}})),S=Object(r.c)(_)((function(e){var t=e.user,n=e.overdueCount,c=e.todayCount,i=e.inboxCount,a=e.teamInboxCount,o=Object(l.c)("global.completed_view"),w=Object(l.c)("frontend.dnd_everywhere"),_=Object(r.h)(u.b),S=Object(r.h)(u.c),C=t.id,P=t.inbox_project_id,D=t.team_inbox_id,I=Object.values(S).some((function(e){return!0===e})),T=c+n;if(!I)return null;var E=w?d.a:v.a;return Object(x.jsx)(j.c,{type:"TASK_DROPAREA",droppableId:g.b,combineEnabledFor:"TASK",forceRoot:!0,children:function(e){var t=e.innerRef,r=e.droppableProps;return Object(x.jsxs)(v.b,k(k({ref:t,"aria-label":Object(s.a)("Main filters"),"data-testid":"top-sidebar-nav-items",id:"top-menu"},r),{},{children:[S.inbox?Object(x.jsx)(j.b,{draggableId:"".concat(g.a).concat(P),index:0,type:"TASK_DROPAREA",disableDrag:!0,children:function(e,t){var n=e.innerRef,r=e.draggableProps,c=t.combineTargetFor;return Object(x.jsx)(E,k({projectId:P,label:Object(s.a)("Inbox"),icon:Object(x.jsx)(b.U,{className:y.inboxIcon}),count:i,showTaskCount:_,linkTo:{type:"project",projectId:P},tooltipContent:Object(x.jsx)(m.g,{identifier:"GO_TO_INBOX"}),tooltipPosition:"right",id:"filter_inbox",className:y.legacyDndDropTarget,"data-id":P,"data-track":"navigation|inbox",showDragOverState:Boolean(c),ref:n},r))}}):null,D&&S.team_inbox?Object(x.jsx)(j.b,{draggableId:"".concat(g.a).concat(D),index:1,type:"TASK_DROPAREA",disableDrag:!0,children:function(e,t){var n=e.innerRef,r=e.draggableProps,c=t.combineTargetFor;return Object(x.jsx)(E,k({projectId:D,label:Object(s.a)("Team Inbox"),icon:Object(x.jsx)(b.nc,{className:y.teamInboxIcon}),count:a,showTaskCount:_,linkTo:{type:"project",projectId:D},tooltipContent:Object(x.jsx)(m.g,{identifier:"GO_TO_TEAM_INBOX"}),tooltipPosition:"right",id:"filter_team_inbox",className:y.legacyDndDropTarget,"data-id":D,"data-track":"navigation|team_inbox",showDragOverState:Boolean(c),ref:n},r))}}):null,S.today?Object(x.jsx)(v.c,{label:Object(s.a)("Today"),icon:Object(x.jsx)(f.a,{className:y.todayIcon}),count:T,showTaskCount:_,overdue:n>0,linkTo:{type:"today"},tooltipContent:Object(x.jsx)(m.g,{identifier:"GO_TO_TODAY"}),tooltipPosition:"right",id:"filter_today","data-track":"navigation|today"}):null,S.upcoming?Object(x.jsx)(v.c,{label:Object(s.a)("Upcoming"),icon:Object(x.jsx)(h.a,{className:y.upcomingViewIcon}),linkTo:{type:"upcoming"},tooltipContent:Object(x.jsx)(m.g,{identifier:"GO_TO_UPCOMING"}),tooltipPosition:"right",id:"filter_upcoming","data-track":"navigation|upcoming"}):null,null!=S&&S.filters_and_labels?Object(x.jsx)(v.c,{label:Object(s.a)("Filters & Labels"),icon:Object(x.jsx)(O.a,{className:y.filtersLabelsIcon}),linkTo:{type:"filters-labels"},tooltipContent:Object(x.jsx)(m.g,{identifier:"GO_TO_FILTERS_LABELS"}),tooltipPosition:"right",id:"filters_labels","data-track":"navigation|filters-labels"}):null,o&&S.completed?Object(x.jsx)(v.c,{label:Object(s.a)("Completed"),icon:Object(x.jsx)(p.a,{className:y.completedIcon}),linkTo:{type:"activity",eventType:"item:completed",userId:String(C)},tooltipContent:Object(x.jsx)(m.g,{identifier:"GO_TO_COMPLETED"}),tooltipPosition:"right",id:"completed","data-track":"navigation|completed"}):null]}))}})}))},m6DX:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("lSNA"),c=n.n(r),i=n("QILm"),a=n.n(i),o=n("kazx"),s=n("17x9"),l=n.n(s),u="_1a9vFIn",d=n("nKUr"),j=["title","shortcut"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){return e.map((function(e,t){return Object(d.jsx)("kbd",{children:e},t)}))}function f(e){var t=e.title,n=void 0===t?null:t,r=e.shortcut,c=a()(e,j);return"string"==typeof r&&(r=[r]),Object(d.jsxs)(o.a,p(p({},c),{},{children:[n,Object(d.jsx)("span",{"data-testid":"shortcut-keys",className:u,children:r.variants?r.variants.map(O).reduce((function(e,t,n){return e.push(t),n!==r.variants.length-1&&e.push(", "),e}),[]):O(r)})]}))}f.propTypes={title:l.a.string,shortcut:l.a.oneOfType([l.a.arrayOf(l.a.string.isRequired),l.a.string,l.a.shape({variants:l.a.arrayOf(l.a.arrayOf(l.a.string.isRequired).isRequired).isRequired})]).isRequired}},mxZy:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return y}));var r=n("/MKj"),c=n("lDtu"),i=n("kazx"),a=n("GIsW"),o=n("G3Y2"),s=n("Vbab"),l=n("qf/r"),u=n("Ek05"),d=n("DAmx"),j=n("18PS"),b=n("yrCE"),p=n("5rmi"),O="UPckhyK",f=n("nKUr"),h=null;function m(e){var t,n;if("location"===e.type)return("on_enter"===e.loc_trigger?Object(s.a)("Arriving: {location}"):Object(s.a)("Departing: {location}")).replace("{location}",e.name);if("relative"===e.type&&null!=e.minute_offset){var r=(t=e.minute_offset,null==h&&(h={0:Object(s.a)("0 min"),10:Object(s.a)("10 min"),30:Object(s.a)("30 min"),45:Object(s.a)("45 min"),60:Object(s.a)("1 hour"),120:Object(s.a)("2 hours"),180:Object(s.a)("3 hours"),1440:Object(s.a)("1 day"),2880:Object(s.a)("2 days"),4320:Object(s.a)("3 days"),10080:Object(s.a)("1 week")}),null!=t&&null!==(n=h[t])&&void 0!==n?n:null);return null!=r?Object(s.a)("%s before").replace("%s",r):Object(s.c)("reminder","1 min before","{n} min before",e.minute_offset)}if("absolute"===e.type&&e.due.is_recurring)return e.due.string;var i=e.due.toDate();return u.a.humanizeDayDiff(c.b.day_diff(new Date,i),i)}function v(e){var t=e.reminder,n=e.isSharedProject,r=e.users;return n?Object(f.jsx)(j.a,{user:r[t.notify_uid],size:"xsmall"}):"location"===t.type?Object(f.jsx)(p.a,{"aria-hidden":!0}):Object(f.jsx)(b.a,{"aria-hidden":!0})}function g(e){var t=e.reminder,n=e.onDelete,r=e.isSharedProject,c=e.users,l=e.mode,u=m(t),j=c[t.notify_uid],b=u;if(r&&j){var h=Object(s.a)("Assigned to: {user}").replace("{user}",j.full_name);b="".concat(u,", ").concat(h)}return Object(f.jsxs)(i.a,{as:"li","aria-label":b,display:"flex",alignItems:"center",maxWidth:"full",className:O,children:["normal"===l||r?Object(f.jsx)(i.a,{display:"flex",alignItems:"center",justifyContent:"center",marginRight:"small",children:Object(f.jsx)(v,{reminder:t,isSharedProject:r,users:c})}):null,Object(f.jsxs)(i.a,{width:"full",display:"flex",alignItems:"center",overflow:"hidden",children:[Object(f.jsx)(a.a,{lineClamp:1,size:"caption",children:u}),"mini"===l&&"location"===t.type?Object(f.jsx)(p.a,{}):null]}),Object(f.jsx)(i.a,{flexShrink:0,children:Object(f.jsx)(o.a,{variant:"quaternary",size:"small",onClick:function(){return n(t)},"aria-label":Object(s.a)("Delete reminder"),icon:Object(f.jsx)(d.a,{})})})]})}function y(e){var t=e.task,n=e.reminders,c=e.onDelete,a=e.mode,o=void 0===a?"normal":a,s=Object(r.h)((function(e){return Object(l.n)(e,t.project_id)})),u=Object(r.h)(l.i);return 0===n.length?null:Object(f.jsx)(i.a,{as:"ul",marginRight:"-small",children:n.map((function(e,t){return Object(f.jsx)(g,{reminder:e,onDelete:c,isSharedProject:s,users:u,mode:o},e.id||t)}))})}},myFE:function(e,t,n){"use strict";var r=n("/MKj"),c=n("A72/"),i=n("VNk9"),a=n("kazx"),o=n("17x9"),s=n.n(o),l=n("Vbab"),u=n("LYyr"),d=n("wQhe"),j=n("S+H7"),b=n("lzDQ"),p=n("IJUe"),O=n("gd9Y"),f=n("7HK4"),h=n("Wo0o"),m=n("UVeO"),v=n("u5z3"),g=n("cdNT"),y=n("18PS"),x=n("nKUr");function w(e){var t=e.searchString,n=Object(r.h)(Object(b.q)(t));return 0===n.length?Object(x.jsx)(f.k,{withAction:!1,headerText:Object(u.a)(Object(l.a)("No matches for \u201c{search_term}\u201d"),{search_term:t})}):Object(x.jsx)("ul",{className:"note_search_list",children:n.map((function(e){return Object(x.jsx)(k,{note:e},e.id)}))})}function k(e){var t=e.note,n=Object(O.k)(),c=!t.item_id,i=Object(r.h)((function(e){return Object(j.o)(t.posted_uid,e)})),a=Object(r.h)((function(e){return c?null:e.items[t.item_id]})),o=Object(r.h)((function(e){return e.projects[a?a.project_id:t.project_id]})),s=Object(r.h)((function(e){return!!o&&Object(j.q)(e,o.id)}));if(!o)return null;return Object(x.jsx)("li",{children:Object(x.jsxs)("button",{onClick:function(){n(c?{subPath:"/project/".concat(o.id,"/comments"),hash:"#comment-".concat(t.id)}:{task:{id:a.id},hash:"#comment-".concat(t.id)})},children:[Object(x.jsx)("div",{className:"avatar_container",children:Object(x.jsx)(y.a,{user:i,size:"large"})}),Object(x.jsxs)("div",{className:"content",children:[a?Object(x.jsx)("h6",{className:"task_title",children:Object(x.jsx)(h.a,{text:a.content,withLinks:!0})}):null,Object(x.jsxs)("div",{children:[Object(x.jsx)(g.a,{content:t.content}),Object(x.jsx)(v.a,{attachment:t.file_attachment})]}),Object(x.jsxs)("div",{className:"meta_info",children:[Object(x.jsx)("span",{className:"time",children:Object(p.a)(new Date(t.posted_at))}),Object(x.jsxs)(O.a,{view:{type:"project",projectId:o.id},className:"project_item",children:[Object(x.jsx)(h.a,{className:"project_item__name",text:o.name}),Object(x.jsx)(m.Vb,{className:"project_item__color",project:o,isShared:s})]})]})]})]})})}w.propTypes={searchString:s.a.string},k.propTypes={note:s.a.object.isRequired};var _=n("lSNA"),S=n.n(_),C=n("J4zp"),P=n.n(C),D=n("q1tI"),I=n("xweI"),T=n.n(I),E=n("P/G1"),A=n.n(E),N=n("rbFA"),R=n("xvbm"),L=n("RZq6"),M=n("TQFH"),z=n("ImH7"),B=n("DoMW"),q=n("4eld"),U=n("qiGY"),K=n("9nbe"),F=n("20r1"),V=n("9l1k"),H=n("KRPs"),Y=n("4MLW");function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=Object(D.memo)((function(e){var t=e.completed,n=Object(D.useState)((function(){return Object(B.a)(t)})),c=P()(n,2),i=c[0],a=c[1],o=Object(r.g)(),s=Object(r.h)((function(e){return e.projects||{}})),l=Object(r.h)((function(e){return e.user})),u=Object(r.h)((function(e){return e.labels})),d=Object(r.h)((function(e){return e.collaborators})),j=Object(r.h)(z.f)&&Object(R.c)("frontend.teams_search"),b=T()(A()(i).filter((function(e){return s[e.project_id]})),["project_id","completed_at"]);function p(e,t){var n=i[e];if(t)return L.d.captureInfoLog("Search: Tried to complete a task from completed task results"),o(Object(M.p)(e,{completeRecurring:!0})),void a(G(G({},i),{},S()({},e,G(G({},n),{},{checked:t}))));var r=G({},i);delete r[e],a(r),o(Object(M.J)(n.id,[n]))}return Object(x.jsx)("ul",{className:"items completed_item_list",children:b.map((function(e){return Object(x.jsx)(K.a,{item:e,indent:1,project:s[e.project_id],labels:u,reminders:[],user:l,collaborators:d,showWorkspace:j,showProject:!0,onCheckedChange:p,isParentCollapsed:!1},e.id)}))})}));function J(e){var t=e.query,n=e.canAccessCompletedView,c=Object(r.h)(Object(M.w)(t)),i=Object(r.h)((function(e){return e.mapping.sections.byRemoteId})),a=Object(r.h)(z.f)&&Object(R.c)("frontend.teams_search"),o=Object(U.c)("/completed/search",{params:{query:t}}),s=o.state,d=o.fetch,j=o.reset,b=Object(D.useMemo)((function(){return"resolved"!==s.status?[]:s.value.items.filter((function(e){return e.checked&&!c.some((function(t){return t.id===e.id}))})).map((function(e){var t;return G(G({},Object(M.m)(e)),{},{section_id:null!==(t=i[e.section_id])&&void 0!==t?t:e.section_id})}))}),[c,s,i]),p=Object(D.useMemo)((function(){var e,t,n;if("rejected"===s.status){var r=s.error;return"STATUS: ".concat(null!==(e=null==r?void 0:r.http_code)&&void 0!==e?e:"??"," ERROR_ID: ").concat(null!==(t=null==r||null===(n=r.error_extra)||void 0===n?void 0:n.event_id)&&void 0!==t?t:"??")}}),[s]);function O(){n?d():N.c()}return Object(D.useEffect)((function(){j()}),[t,j]),0===c.length?Object(x.jsxs)("div",{className:"item_search",children:["idle"===s.status||"pending"===s.status?Object(x.jsx)(f.k,{headerText:Object(u.a)(Object(l.a)("No matches for \u201c{search_term}\u201d"),{search_term:t}),withAction:!0,loading:"pending"===s.status,onButtonClick:O}):null,"rejected"===s.status?Object(x.jsx)(f.k,{headerText:Object(l.a)("An unknown error happened while searching. Please wait a few minutes and try again."),errorCode:"rejected"===s.status?p:void 0,withAction:!0,onButtonClick:O}):null,"resolved"===s.status&&0===b.length?Object(x.jsx)(f.k,{headerText:Object(u.a)(Object(l.a)("No completed tasks matching for \u201c{search_term}\u201d"),{search_term:t}),withAction:!1}):null,"resolved"===s.status&&b.length>0?Object(x.jsx)(Q,{completed:b}):null]}):Object(x.jsxs)(F.a,{className:"item_search",children:[Object(x.jsx)(H.b,{type:Y.f,tasks:c,allowAdd:!1,showWorkspace:a,showProject:!0}),"idle"===s.status?Object(x.jsx)(q.a,{className:"completed_search_btn",onClick:O,children:Object(l.a)("Search completed tasks...")}):null,"pending"===s.status?Object(x.jsx)("div",{className:"spinner_holder",children:Object(x.jsx)(V.a,{})}):null,"resolved"===s.status&&0===b.length?Object(x.jsx)("p",{children:Object(u.a)(Object(l.a)("No completed tasks matching for \u201c{search_term}\u201d"),{search_term:t})}):null,"resolved"===s.status&&b.length>0?Object(x.jsx)(Q,{completed:b}):null,"rejected"===s.status?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"error_msg",children:[Object(x.jsx)("p",{children:Object(l.a)("An unknown error happened while searching. Please wait a few minutes and try again.")}),Object(x.jsx)("code",{children:p})]}),Object(x.jsx)(q.a,{className:"completed_search_btn",onClick:O,children:Object(l.a)("Search completed tasks...")})]}):null]})}function X(e){var t=e.searchString,n=e.canAccessCompletedView,r=Object(u.a)(Object(l.a)("Results for \u201c{search_term}\u201d"),{search_term:t});return Object(x.jsxs)("div",{className:"search_view__container",children:[Object(x.jsx)(d.a,{title:r,disableEditing:!0,largeBottomMargin:!0}),Object(x.jsx)("div",{className:"search_view__results",children:Object(x.jsxs)(i.d,{variant:"neutral",children:[Object(x.jsxs)(i.b,{"aria-label":Object(l.a)("Search results"),children:[Object(x.jsx)(i.a,{id:"tasks",children:Object(l.a)("Tasks")}),Object(x.jsx)(i.a,{id:"comments",children:Object(l.a)("Comments")})]}),Object(x.jsx)(i.c,{id:"tasks",render:"lazy",children:Object(x.jsx)(a.a,{paddingTop:"large",children:Object(x.jsx)(J,{query:t,canAccessCompletedView:n})})}),Object(x.jsx)(i.c,{id:"comments",render:"lazy",children:Object(x.jsx)(w,{searchString:t})})]})})]})}X.propTypes={searchString:s.a.string,canAccessCompletedView:s.a.bool};t.a=Object(r.c)((function(e){return{canAccessCompletedView:Object(c.b)(e)}}))(X)},n9v8:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return O}));var r,c=n("q1tI");function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e){return c.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24"},e),r||(r=c.createElement("path",{fill:"currentColor",d:"M17 7.714L12.714 12 17 16.286l-.714.714L12 12.714 7.714 17 7 16.286 11.286 12 7 7.714 7.714 7 12 11.286 16.286 7z"})))}var o;n.p;function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e){return c.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24"},e),o||(o=c.createElement("path",{fill:"currentColor",d:"M17 7v10H7V7h10zm-1 1H8v8h8V8z"})))}var u;n.p;function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function j(e){return c.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24"},e),u||(u=c.createElement("path",{fill:"currentColor",d:"M7 11h10v1H7z"})))}var b;n.p;function p(){return(p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e){return c.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24"},e),b||(b=c.createElement("path",{fill:"currentColor",d:"M14 10H8v6h6v-6zm1 4h1V8h-6v1h5v5zm0 3H7V9h2V7h8v8h-2v2z"})))}n.p},nD99:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return u}));var r=n("q1tI"),c=n("nKUr"),i=Object(r.createContext)({category:"global",within:document});function a(e){var t=e.category,n=e.within,a=e.children,o=Object(r.useMemo)((function(){return{category:t,within:n||document}}),[t,n]);return Object(c.jsx)(i.Provider,{value:o,children:a})}function o(){return Object(r.useContext)(i)}var s=n("6O1D"),l=n("dAW7");function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disabled,n=void 0!==t&&t,c=o(),i=c.within,a=c.category,u=Object(l.i)(),d=u.onAddBottom,j=u.onAddTop,b=Object(r.useCallback)((function(e){var t,n=document.activeElement&&(document.activeElement.closest("[data-task-list-id]")||document.activeElement.closest("[data-section-id]"));if(n){var r,c,a=n.getAttribute("data-task-list-id");if(!a&&!(a=null!==(r=null===(c=n.querySelector("[data-task-list-id]"))||void 0===c?void 0:c.getAttribute("data-task-list-id"))&&void 0!==r?r:null))return;e(a,{fromShortcut:!0})}else{var o=null===(t=i.querySelectorAll("[data-task-list-id]")[0])||void 0===t?void 0:t.getAttribute("data-task-list-id");o&&e(o,{fromShortcut:!0})}}),[i]),p=Object(r.useCallback)((function(){return b(j)}),[b,j]),O=Object(r.useCallback)((function(){return b(d)}),[b,d]);Object(s.n)({identifier:"ADD_TASK_TOP",category:a,disabled:n,handler:p}),Object(s.n)({identifier:"ADD_TASK_BOTTOM",category:a,disabled:n,handler:O})}},okMy:function(e,t,n){"use strict";var r=n("lSNA"),c=n.n(r),i=n("J4zp"),a=n.n(i),o=n("QILm"),s=n.n(o),l=n("q1tI"),u=n("TSYQ"),d=n.n(u),j=n("17x9"),b=n.n(j),p=n("nKUr"),O=["className","checked","onChange"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){var t=e.className,n=e.checked,r=e.onChange,c=s()(e,O),i=Object(l.useState)(!1),o=a()(i,2),u=o[0],j=o[1];return Object(p.jsxs)("div",{className:d()("reactist_switch",t,{"reactist_switch--checked":n,"focus-marker":u}),children:[Object(p.jsx)("input",h(h({type:"checkbox",checked:n,onChange:r},c),{},{onFocus:function(e){c.onFocus&&c.onFocus(e),j(!0)},onBlur:function(e){c.onBlur&&c.onBlur(e),j(!1)}})),Object(p.jsx)("span",{className:"reactist_switch--handle"})]})}m.propTypes={className:b.a.string,checked:b.a.bool.isRequired,onChange:b.a.func.isRequired,onFocus:b.a.func,onBlur:b.a.func};var v=m;t.a=v},pmBd:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("zhxZ"),c=n("XKNl"),i=n("Vbab"),a=n("nKUr");function o(e){var t=e.isOpen,n=e.header,o=e.body,s=e.action,l=e.onClose;return Object(a.jsxs)(r.a,{isOpen:t,onDismiss:l,"aria-label":n,children:[Object(a.jsx)(r.f,{button:Object(a.jsx)(r.d,{"aria-label":Object(i.a)("Close modal")}),children:Object(a.jsx)(c.a,{level:"1",children:n})}),Object(a.jsx)(r.c,{children:o}),s?Object(a.jsx)(r.b,{children:s}):null]})}},qmfr:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r,c=n("q1tI");function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e){return c.createElement("svg",i({width:20,height:17,viewBox:"0 0 20 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=c.createElement("path",{d:"M17.953 4.046c.012.176.012.353.012.53 0 5.422-4.128 11.675-11.675 11.675v-.003A11.616 11.616 0 010 14.408a8.24 8.24 0 006.073-1.7 4.109 4.109 0 01-3.834-2.85 4.09 4.09 0 001.853-.07A4.104 4.104 0 01.8 5.766v-.052c.57.318 1.21.494 1.863.514a4.108 4.108 0 01-1.27-5.48 11.646 11.646 0 008.456 4.288 4.108 4.108 0 016.993-3.742 8.234 8.234 0 002.606-.997 4.118 4.118 0 01-1.804 2.27A8.16 8.16 0 0020 1.92a8.337 8.337 0 01-2.047 2.126z",fill:"#1D9BF0"})))}n.p},r1Mk:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var r=n("lSNA"),c=n.n(r),i=n("/MKj"),a=n("S+H7"),o=n("lzDQ"),s=n("gd9Y"),l=n("zhxZ"),u=n("VNk9"),d=n("kazx"),j=n("wrHN"),b=n("c/jD"),p=n("Vbab"),O=n("ivIA"),f=n("6O1D"),h=n("17x9"),m=n.n(h),v=n("nKUr");function g(e){var t=e.label,n=e.count,r=void 0===n?0:n,c=e.hasMore,i=void 0!==c&&c;return Object(v.jsxs)(v.Fragment,{children:[t,r>0?" ":null,r>0?Object(v.jsxs)("small",{children:[r,i?"+":null]}):null]})}g.propTypes={label:m.a.node.isRequired,count:m.a.number,hasMore:m.a.bool};var y=g,x=n("PuTw"),w=n("4eld"),k=n("Wo0o"),_=n("UVeO"),S=n("hMw4");function C(e){var t=e.isShared,n=e.project,r=e.onClose;return Object(v.jsxs)("div",{className:"project_detail_header",children:[Object(v.jsxs)(w.a,{className:"project_detail_parent_info",onClick:r,children:[Object(v.jsx)("div",{className:"project_detail_parent_icon",children:Object(v.jsx)(S.b,{isShared:t,project:n})}),Object(v.jsx)(k.a,{className:"project_detail_parent_name",text:n.name})]}),Object(v.jsx)(w.a,{onClick:r,className:"project_detail_close","aria-label":Object(p.a)("Close"),children:Object(v.jsx)(_.v,{})})]})}function P(e){var t=e.projectId,n=e.tab,r=e.notesCount,c=e.hasMoreNotes,i=e.onDismiss,a=e.isShared;Object(f.n)({identifier:"DISMISS",category:"global",handler:i});var s=Object(x.a)(t).project;if(!s)return null;var h=Boolean(s._unjoined||s.is_archived),m=Object(v.jsx)(j.a,{showErrorMsg:!0,children:Object(v.jsx)(b.a,{item:s,type:o.c,parentId:s.id,projectId:s.id,scrollToComments:!h})});return Object(v.jsx)(l.a,{isOpen:!0,onDismiss:i,exceptionallySetClassName:"project_detail_modal",exceptionallySetOverlayClassName:"project_detail_modal_overlay",height:"expand",children:Object(v.jsxs)(j.a,{onErrorCaught:i,children:[Object(v.jsx)(C,{isShared:a,project:s,onClose:i}),h?m:Object(v.jsxs)(u.d,{variant:"neutral",defaultSelectedId:n,children:[Object(v.jsxs)(u.b,{"aria-label":Object(p.a)("Project detail"),children:[Object(v.jsx)(u.a,{id:"comments",children:Object(v.jsx)(y,{label:Object(p.a)("Comments"),count:r,hasMore:c})}),Object(v.jsx)(u.a,{id:"activity",children:Object(p.a)("Activity")})]}),Object(v.jsx)(u.c,{id:"comments",render:"lazy",children:Object(v.jsx)(d.a,{flexGrow:1,children:m})}),Object(v.jsx)(u.c,{id:"activity",render:"lazy",children:Object(v.jsx)(j.a,{showErrorMsg:!0,children:Object(v.jsx)(O.a,{filters:{parent_project_id:s.id,include_child_objects:!1}})})})]})]})})}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=Object(i.c)((function(e,t){var n=t.projectId;return{isShared:Object(a.q)(e,n),notesCount:Object(o.o)(e,n).length,hasMoreNotes:Object(o.g)(e,n)}}))((function(e){var t=Object(s.k)();return Object(v.jsx)(P,I(I({},e),{},{onDismiss:function(){return t({view:"current"})}}))}))},rAR9:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var r=n("J4zp"),c=n.n(r),i=n("q1tI"),a=n("nKUr"),o=Object(i.createContext)({activeTaskId:null});function s(e){var t=e.children,n=Object(i.useState)(null),r=c()(n,2),s=r[0],l=r[1],u=Object(i.useMemo)((function(){return{activeTaskId:s,setActiveTaskId:l}}),[s,l]);return Object(a.jsx)(o.Provider,{value:u,children:t})}function l(){return Object(i.useContext)(o)}},rVw9:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n("/MKj"),c=n("lDtu"),i=n("Vbab"),a=n("p3jf"),o=n("LYyr"),s=n("IJUe"),l=n("UOyc"),u=n("c7SM"),d=n("nKUr");function j(e){var t=e.task,n=Object(r.h)((function(e){return Object(a.b)(t.id,e)}));if(!t.due&&0===n.length)return null;if(!t.due)return Object(d.jsx)("div",{className:"task_due_date_tooltip",children:Object(d.jsx)(l.a,{item:t,reminders:n})});var j=function(e){if(!e.due)return null;var t=c.b.day_diff(new Date,e.due);return t>0?Object(o.a)(Object(i.b)("{num} day left","{num} days left",t),{num:t}):t<0?(t=Math.abs(t),Object(o.a)(Object(i.b)("{num} day ago","{num} days ago",t),{num:t})):null}(t),b=Object(s.a)(t.due,{withWeekday:!0,withTime:t.due.with_time});return Object(d.jsxs)("div",{className:"task_due_date_tooltip",children:[b,j?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("br",{}),Object(d.jsx)("small",{children:j})]}):null,t.due.is_recurring?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("br",{}),Object(d.jsx)("small",{children:t.due.string})]}):null,Object(d.jsx)(l.a,{item:t,reminders:n}),t.due?Object(d.jsx)(u.a,{date:t.due}):null]})}},rcvD:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("RIqP"),c=n.n(r),i=n("TSYQ"),a=n.n(i),o=n("Q63H"),s=n("RCeW"),l=n("nKUr");function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emoji",n=Object(o.parse)(e,{assetType:"svg",buildUrl:function(e){return"https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/"+e+".svg"}}).filter((function(e){return e.url.length>0}));if(!n.length)return e;var r=0,i=n.reduce((function(n,i){var o=e.substring(r,i.indices[0]);o&&(n=[].concat(c()(n),[o]));var u=Object(s.a)();return n=[].concat(c()(n),[Object(l.jsx)("span",{className:a()(t,{twemoji:u}),children:u?Object(l.jsx)("img",{className:"emoji",alt:i.text,src:i.url}):Object(l.jsx)("span",{className:"emoji",children:i.text})},r)]),r=i.indices[1],n}),[]),u=e.substring(r,e.length);return u?[].concat(c()(i),[u]):i}},sdTq:function(e,t,n){"use strict";n.d(t,"a",(function(){return Tn}));var r=n("lSNA"),c=n.n(r),i=n("J4zp"),a=n.n(i),o=n("q1tI"),s=n("/MKj"),l=n("kazx"),u=n("n6bU"),d=n("wqDb"),j=n("Vbab"),b=n("qf/r"),p=n("HLc3"),O=n("TQFH"),f=n("lzDQ"),h=n("XOeF"),m=n("ImH7"),v=n("SoKn"),g=n("oHMr"),y=n("AnGN"),x=n("gd9Y"),w=n("pSXq"),k=n("7HK4"),_=n("VKB9"),S=n("IZ74"),C=n("20r1"),P=n("9l1k"),D=n("PuTw"),I=n("cTnB"),T=n("b3nZ"),E=n("QILm"),A=n.n(E),N=n("zeUM"),R=n("k0om"),L=n("mxou"),M=n("bT2Y"),z=n("PRk6"),B=n("A72/"),q=n("aSPn"),U=n("RIqP"),K=n.n(U),F=(n("OBDP"),n("c32n")),V=n("xvbm"),H=n("p3jf"),Y=n("/lEg"),W=n("o5ZH"),G=n("3JOJ"),Q=n("BRNq"),J=n("+XWA"),X=n("/THY"),Z=n("fYSs"),$=n("HRQR"),ee=n("Mne8"),te=n("DSWm"),ne=n("nKTi"),re=n("72E/"),ce=n("KDcA"),ie=n("LSfl"),ae=n("SaSE"),oe=n("6O1D"),se=n("1/Z5"),le=n("4MLW"),ue=n("jMFI"),de=n("X0ZH"),je=n("kR/q"),be=n("eYn1"),pe=n("wtTU"),Oe=n("UVeO"),fe=n("hPpn"),he=n("nKUr");function me(e){var t=e.onClick;return Object(he.jsxs)("button",{className:"board_add_section_button",onClick:t,children:[Object(he.jsx)(fe.a,{className:"board_add_section_button__icon"}),Object(he.jsx)(Oe.c,{className:"board_add_section_button__icon_filled"}),Object(he.jsx)("span",{className:"board_add_section_button__label",children:Object(j.a)("Add section")})]})}var ve=n("wjpq"),ge=n("dbRB"),ye=n("VXWU"),xe=n.n(ye),we=n("DoMW"),ke=n("eVCd"),_e=["child_order"];function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e){var t,n=e.projectId,r=e.editorState,i=e.editorValue,o=e.tasksBySectionIdWithoutSubTasks,s=e.viewOptions,l=r&&Object(ae.j)(r.treeListId,{shouldParseInt:!1}),u=null!==(t=null==l?void 0:l.sectionId)&&void 0!==t?t:null,d=o[null!=u?u:"null"],j=Object(we.a)(d),b=Object.entries(j).reduce((function(e,t){var n=a()(t,2),r=n[0],i=n[1],o=i.indent,s=i.child_order;return Ce(Ce({},e),{},c()({},r,{order:s,indent:o||1}))}),{}),p=Object(ke.a)(i,r,xe()("parent_id",d),j,1,b,d,n,u,null),O=p.fields,f=p.note,h=p.reminders;if(s){O.child_order;return{fields:A()(O,_e),note:f,reminders:h}}return{fields:O,note:f,reminders:h}}function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Te=function(e){var t=e.projectId,n=e.editorState,r=e.tasksBySectionIdWithoutSubTasks,c=e.viewOptions,i=e.onTaskUpdate,a=e.onTaskAdd,s=e.onResetEditorState,l=Object(u.a)(n),d=Object(u.a)(c),j=Object(u.a)(r),b=Object(o.useRef)(void 0),p=Object(o.useCallback)((function(e){b.current=e}),[]),O=function(){if(l&&n&&l.key!==n.key&&b.current){if(Object(ae.i)(l.mode)&&Object(ae.i)(n.mode)&&l.treeListId===n.treeListId)return;var e=Pe({projectId:t,tasksBySectionIdWithoutSubTasks:r,editorState:l,editorValue:b.current,viewOptions:c}),o=e.fields,s=e.note,u=e.reminders;if(!Object(ve.b)(o))return;if(l.mode===ae.e)return function(){return i(o,u,null)};var d=Ie({note:s,reminders:u},o);return function(){return a(d)}}}();return Object(o.useEffect)((function(){O&&O()}),[O]),Object(o.useEffect)((function(){(null==l?void 0:l.key)!==(null==n?void 0:n.key)&&(b.current=void 0)}),[null==n?void 0:n.key,null==l?void 0:l.key]),Object(o.useEffect)((function(){if(n&&b.current&&j&&!Object(ge.a)(d,c)){var e=Pe({projectId:t,tasksBySectionIdWithoutSubTasks:j,editorState:n,editorValue:b.current,viewOptions:c}),r=e.fields,o=e.note,l=e.reminders;Object(ve.b)(r)?(n.mode===ae.e?i(r,l,null):a(Ie({note:o,reminders:l},r)),s()):s()}}),[d,c,n,t,r,i,a,s,j]),{handleEditorChange:p}};var Ee=function(e){var t=e.projectId,n=e.sortedSections,r=e.archivedSections,c=e.setSectionFormPos,i=e.setNewSectionPos,a=e.onSectionAdd,s=e.onSectionRemove;return{handleSectionAdd:function(e,r){var o=null===r?null:n.find((function(e){return e.id===r}))||null,s=null===o?1:o.section_order+1;a({name:e,project_id:t,section_order:s}),c(void 0),null==i||i(s)},handleSectionUnarchiveDelete:Object(o.useCallback)((function(e){var n={completedSections:r&&r.filter((function(t){return t.section.id!==e}))};s({id:t,type:"projects",data:n})}),[r,s,t])}};var Ae=function(e){var t=e.projectId,n=e.editorState,r=e.completedTasks,c=e.completedSectionTasks,i=e.archivedSections,a=e.tasksBySectionIdWithoutSubTasks,s=e.viewOptions,l=e.newTaskIdRef,u=e.onTaskCheckedChange,d=e.onTaskAdd,j=e.onTaskUpdate,b=e.onResetEditorState,p=Object(o.useCallback)((function(e,t,n){if(t)u(e,t,n);else{var a,o=r&&r.map((function(e){return e.item}))||[],s=Object.values(c||{}).map((function(e){return e.completedItems.map((function(e){return e.item}))})).concat(o).flat().find((function(t){return t.id===e})),l=null==i||null===(a=i.find((function(e){return e.section.id===(null==s?void 0:s.section_id)})))||void 0===a?void 0:a.section;s&&u(e,t,n,[s],l)}}),[u,r,c,i]),O=Object(o.useCallback)((function(e){if((null==n?void 0:n.mode)===ae.e){var r=Pe({projectId:t,tasksBySectionIdWithoutSubTasks:a,editorState:n,editorValue:e,viewOptions:s}),c=r.fields,i=r.reminders;j(c,i,null)}b()}),[n,b,t,a,s,j]);return{handleCheckedChange:p,handleTaskAdd:Object(o.useCallback)((function(e){var t=d(e)||{};l.current=t.id}),[d,l]),handleTaskSubmit:O}};function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Le=function(e){var t,n,r,i=e.clock,l=e.projectId,u=e.sections,d=e.tasksBySectionId,b=e.projectTasks,p=e.user,O=e.reminders,f=e.showCompleted,m=e.completedTasks,v=e.completedSectionTasks,g=e.viewOptions,y=e.canUseLabels,x=e.onTaskCheckedChange,w=e.onTaskUpdate,_=e.onTaskArchive,S=e.onTaskDelete,C=e.onTaskDuplicate,P=e.onTaskLinkCopy,D=e.onTaskMoveToProject,I=e.onTaskAdd,T=e.onSectionAdd,E=e.onSectionRemove,A=e.setFullEditorView,N=e.sectionFormPos,R=e.setSectionFormPos,L=Object(o.useState)(!1),M=a()(L,2),z=M[0],B=M[1],q=Object(o.useRef)(null),U=Object(o.useRef)(null),Oe=Object(V.c)("frontend.boards_drag_preview"),fe=Object(o.useState)(void 0),ve=a()(fe,2),ge=ve[0],ye=ve[1],xe=Object(o.useContext)(ae.f),we=xe.onResetEditorState,ke=xe.editorState,_e=xe.onAddBottom,Se=xe.onAddTop,Ce=xe.onEditItem,Pe=xe.onTempIdResolval,De=Object(s.h)((function(e){var t=null==ke?void 0:ke.id;if(e.tempIds&&t)return e.tempIds[t]})),Ie=Object(s.h)((function(e){var t=null==ke?void 0:ke.id;if(void 0!==t)return Object(G.a)(t)?t:Object(Y.b)(t,e)})),Ne=Object(de.a)({viewOptions:g}),Le=Object(be.a)({listType:le.e,viewOptions:g}),Me=Object(o.useMemo)((function(){return null==b?void 0:b.filter((function(e){return null===e.parent_id&&(!Ne||Ne(e))}))}),[b,Ne]),ze=Object(je.a)({tasks:Me,viewOptions:g}),Be=Object(o.useMemo)((function(){return ze?ze.reduce((function(e,t){var n=t.key,r=t.tasks;return Re(Re({},e),{},c()({},null!=n?n:"null",r.sort(Le)))}),{null:[]}):Object.entries(d).reduce((function(e,t){var n=a()(t,2),r=n[0],i=n[1].filter((function(e){return Ne?null===e.parent_id&&Ne(e):null===e.parent_id}));return Re(Re({},e),{},c()({},null!=r?r:"null",i.sort(Le)))}),{null:[]})}),[Le,d,Ne,ze]),qe=Object(o.useMemo)((function(){return u.sort((function(e,t){return e.section_order-t.section_order}))}),[u]),Ue=null==ke?void 0:ke.mode,Ke=Object(o.useMemo)((function(){var e;return Ue!==ae.a&&Ue!==ae.d||!ke?null:null!==(e=Object(ae.j)(ke.treeListId,{shouldParseInt:!ze}).sectionId)&&void 0!==e?e:"null"}),[ke,Ue,ze]),Fe=Object(ee.b)("project",l).count,Ve=Object(s.h)((function(e){return Object(h.k)(e,l)})),He=null!=Ve&&Boolean(Ve.is_archived||Ve._unjoined),Ye=f&&(Fe>0||m&&m.length>0),We=Boolean(null===(t=Be.null)||void 0===t?void 0:t.length)||Ye,Ge=ze?0===Object.keys(ze).length:0===qe.length&&0===(null===(n=Be.null)||void 0===n?void 0:n.length),Qe=qe.length?qe[qe.length-1].id:null;if(ze){var Je,Xe=null!==(Je=ze[0])&&void 0!==Je&&Je.disableAdd?ze[1]:ze[0];r=Xe&&Xe.key||"null"}else r=We||Ge?"null":qe[0].id;var Ze=Object(s.h)((function(e){var t,n,r;return null==e||null===(t=e.completedItems)||void 0===t||null===(n=t.projects)||void 0===n||null===(r=n[l])||void 0===r?void 0:r.completedSections})),$e=Object(o.useRef)(null);Object(ie.a)({dragElementRef:$e});var et=Object(o.useMemo)((function(){return ze?void 0:qe.find((function(e){var t=e.id;return(Ue===ae.a||Ue===ae.e)&&(Ke===t||Be[t].some((function(e){return e.id===(null==ke?void 0:ke.id)||e.id===Ie})))}))}),[ze,qe,Ue,Ke,Be,null==ke?void 0:ke.id,Ie]),tt=Object(o.useMemo)((function(){return ze?ze.find((function(e){var t=e.key;return(null==ke?void 0:ke.treeListId)===Object(ae.h)(l,t,null)})):void 0}),[ze,ke,l]),nt=Object(W.a)(g),rt=Object(o.useCallback)((function(e){var t,n=ze?Object.entries(Be).find((function(t){var n=a()(t,2);n[0];return n[1].some((function(t){return t.id===e.id}))})):null,r=Object(ae.h)(e.project_id,null!==(t=null==n?void 0:n[0])&&void 0!==t?t:e.section_id,null);Ce(r,e.id)}),[Ce,ze,Be]),ct=Object(o.useCallback)((function(e){if(null===e||"undefined"===e)return we();var t=Object(ae.h)(l,e,null);return _e(t)}),[_e,we,l]),it=Object(o.useCallback)((function(e){if(null===e||"undefined"===e)return we();var t=Object(ae.h)(l,e,null);return Se(t,!0)}),[Se,we,l]),at=Object(o.useCallback)((function(e){var t,n=e.key;if(ke&&n){var r=null!==(t=Object(ae.j)(ke.treeListId,{shouldParseInt:!ze}).sectionId)&&void 0!==t?t:"null",c=Be[r];if("ArrowDown"===n&&(e.ctrlKey||e.metaKey)){var i;if(e.preventDefault(),ke.mode===ae.d){var a=c[0];return Ce(ke.treeListId,a.id)}if(!ke.id)return;var o=c.findIndex((function(e){return e.id===ke.id}));if(void 0===o)return;var s=null===(i=c[o+1])||void 0===i?void 0:i.id;if(!s){var l;if(!(!0!==(null==ze||null===(l=ze.find((function(e){return e.key===r})))||void 0===l?void 0:l.disableAdd)))return;return _e(ke.treeListId)}return Ce(ke.treeListId,s)}if("ArrowUp"===n&&(e.ctrlKey||e.metaKey)){var u,d;e.preventDefault();var j=null===(u=c[c.length-1])||void 0===u?void 0:u.id;if([ae.a,ae.c,ae.b].includes(ke.mode)&&j)return Ce(ke.treeListId,j);if(!ke.id)return;var b=c.findIndex((function(e){return e.id===ke.id}));if(void 0===b)return;var p=null===(d=c[b-1])||void 0===d?void 0:d.id;if(!p){var O;if(!(!0!==(null==ze||null===(O=ze.find((function(e){return e.key===r})))||void 0===O?void 0:O.disableAdd)))return;return Se(ke.treeListId)}return Ce(ke.treeListId,p)}}}),[ke,_e,Se,Ce,Be,ze]),ot=Object(o.useCallback)((function(){R(void 0)}),[R]),st=Object(o.useCallback)((function(){B(!0)}),[B]),lt=Object(o.useCallback)((function(){B(!1)}),[B]),ut=Ee({projectId:l,sortedSections:qe,archivedSections:Ze,setSectionFormPos:R,setNewSectionPos:ye,onSectionAdd:T,onSectionRemove:E}),dt=ut.handleSectionAdd,jt=ut.handleSectionUnarchiveDelete,bt=Ae({projectId:l,editorState:ke,completedTasks:m,completedSectionTasks:v,archivedSections:Ze,tasksBySectionIdWithoutSubTasks:Be,viewOptions:g,newTaskIdRef:q,onTaskCheckedChange:x,onTaskAdd:I,onTaskUpdate:w,onResetEditorState:we}),pt=bt.handleCheckedChange,Ot=bt.handleTaskAdd,ft=bt.handleTaskSubmit,ht=Object(o.useMemo)((function(){if(ze)return ze;var e=qe.map((function(e){return{key:e.id,tasks:Be[e.id]}}));return We?[{key:"null",tasks:Be.null}].concat(K()(e)):e}),[ze,qe,Be,We]);Object(J.a)(ht);var mt=Te({projectId:l,editorState:ke,tasksBySectionIdWithoutSubTasks:Be,viewOptions:g,onTaskAdd:I,onTaskUpdate:w,onResetEditorState:we}).handleEditorChange;Object(o.useEffect)((function(){return A(!0),function(){return A(!1)}}),[A]),Object(o.useEffect)((function(){return we(),we}),[Ge,we]),Object(o.useEffect)((function(){ze||!Ge||He||R(null)}),[Ge,R,ze,He]),Object(o.useEffect)((function(){U.current&&(U.current.scrollIntoView(),U.current=null,q.current=null)})),Object(o.useEffect)((function(){null!=De&&Pe(De)}),[De,Pe]),Object(o.useEffect)((function(){We||lt()}),[We,lt]);var vt=Object(o.useCallback)((function(e){null==e||e.preventDefault(),ct(r)}),[ct,r]),gt=Object(o.useCallback)((function(e){null==e||e.preventDefault(),it(r)}),[it,r]);function yt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.sectionId,c=Ue===ae.e&&((null==ke?void 0:ke.id)===e.id||De===e.id)&&(!tt||(null==tt?void 0:tt.key)===r||null===(null==tt?void 0:tt.key)&&"null"===r),i=c&&Ie?Ie:e.id,a=Boolean(e._archived||e._unjoined);return Object(he.jsx)(ce.b,{type:"TASK",draggableId:"".concat(Q.b).concat(e.id),index:t,disableDrag:Boolean(c)||nt||a,children:function(t){var n=t.innerRef,a=t.draggableProps;return c?Object(he.jsx)("div",Re(Re({},a),{},{ref:n,className:"board_view__inline_task_editor",children:Object(he.jsx)(se.a,{user:p,item:e,isBoardViewActive:!0,canUseLabels:y,onSubmit:ft,onCancel:we,onChange:mt,onKeyDown:at,withQuickNote:!1,reminders:Object(H.f)({reminders:O})[e.id]},i)})):Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(ne.a,Re(Re({},a),{},{ref:n,task:e,taskId:e.id,shouldShowSection:nt,onCheckedChange:pt,onEditClick:rt,onUpdate:w,onArchive:_,onDelete:S,onDuplicate:C,onLinkCopy:P,onMoveToProject:D,listId:r})),e.id===q.current?Object(he.jsx)("div",{ref:U}):null]})}},i)}function xt(e){return Object(he.jsx)(ne.a,{task:e,taskId:e.id,onCheckedChange:pt,onEditClick:rt,onUpdate:w,onArchive:_,onDelete:S,onDuplicate:C,onLinkCopy:P,onMoveToProject:D},e.id)}if(Object(oe.o)(),Object(oe.n)({identifier:"ADD_TASK_BOTTOM",category:"global",handler:vt,disabled:He}),Object(oe.n)({identifier:"ADD_TASK_TOP",category:"global",handler:gt,disabled:He}),g&&N!==Qe&&(!Me||0===Me.length))return Object(he.jsx)("div",{className:"board_view__sections",children:Object(he.jsx)(k.m,{})});var wt=g&&!nt?"droppable":"inline",kt=!(He||ze&&N!==Qe);return Object(he.jsx)(ce.c,{type:"SECTION",scrollableType:"TASK",droppableId:Q.c,direction:"horizontal",onBeforeCapture:ot,useClone:Oe,combineEnabledFor:"TASK",children:function(e,t){var n=e.innerRef,r=e.placeholder,c=e.droppableProps,a=t.draggingFromThisWith;return Object(he.jsxs)("div",Re(Re({className:"board_view__sections",ref:function(e){n(e),$e.current=e},"data-board-dragging":z,"data-testid":"project-board-view"},c),{},{children:[We&&!ze?Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(ce.c,{type:"TASK",droppableId:Q.d,onBeforeCapture:st,onDragEnd:lt,useClone:Oe,forceRoot:!0,dropzone:wt,children:function(e){var t=e.innerRef,n=e.placeholder,r=e.droppableProps;return Object(he.jsxs)(te.a,{className:"board_view__section_board",sectionName:Object(j.a)("(No Section)"),isArchived:He,tasksCount:Be.null.length,taskContainerElementProps:r,sectionElementProps:{"data-is-dropzone":"droppable"===wt,"data-is-active":r["data-droppable-is-active"]},showTaskEditor:"null"===Ke,taskEditorKey:null==ke?void 0:ke.key,onActiveEditorChange:ct,onTaskEditorChange:mt,onTaskEditorKeydown:at,sectionId:"null",projectId:l,user:p,onTaskAdd:Ot,fullHeightMode:z,ref:function(e){t(null==e?void 0:e.getTaskContainerRef())},editorState:ke,children:[Be.null.map((function(e,t){return yt(e,t,{sectionId:"null"})})),n(Object(he.jsx)($.a,{type:"task"})),f?Object(he.jsxs)(he.Fragment,{children:[null==m?void 0:m.map((function(e){return xt(e.item)})),Object(he.jsx)(ee.a,{type:"project",id:l})]}):null]})}}),!He&&!a&&null!==N&&qe.length>0?Object(he.jsx)(X.a,{onClick:function(){return R(null)}}):null,null===N&&qe.length?Object(he.jsx)("div",{className:"board_view__add_section-form",children:Object(he.jsx)(pe.a,{onSubmit:function(e){return dt(e,null)},onCancel:function(){return R(void 0)}})}):null]}):null,ze?ze.map((function(e){var t=e.key||"null",n="string"!=typeof e.header?Object(ue.a)(Object(F.a)(e.header,{representation:"date"}),i):e.header,r=Be[t];return Object(he.jsx)(te.a,{className:"board_view__section_board",sectionName:n,isArchived:He,tasksCount:r.length,showTaskEditor:Ke===t,taskEditorKey:null==ke?void 0:ke.key,defaultAddFields:e.defaultFields,actions:e.taskListType===le.d?Object(he.jsx)(re.a,{items:r}):void 0,onActiveEditorChange:ct,onTaskEditorChange:mt,onTaskEditorKeydown:at,sectionId:t,projectId:l,user:p,fullHeightMode:z,onTaskAdd:e.disableAdd?void 0:Ot,setNewSectionPos:ye,newSectionPos:ge,editorState:ke,children:r.map((function(e,n){return yt(e,n,{sectionId:t})}))},t)})):qe.map((function(e,t){var n=null==et?void 0:et.id,r=Boolean(e._archived||e._unjoined),c=!r&&!a&&!z&&N!==e.id&&t+1!==qe.length,i=!r&&t+1!==qe.length&&N===e.id;return Object(he.jsxs)(o.Fragment,{children:[Object(he.jsx)(ce.b,{type:"SECTION",draggableId:"".concat(Q.a).concat(e.id),index:t,disableDrag:e.id===n||r,children:function(t,n){var r=t.innerRef,c=t.outerRef,i=t.draggableProps,a=n.combineTargetFor;return Object(he.jsx)(ce.c,{type:"TASK",droppableId:"".concat(Q.e).concat(e.id),onBeforeCapture:st,onDragEnd:lt,useClone:Oe,forceRoot:!0,dropzone:Object(W.d)(g)?"droppable":"inline",children:function(t){var n,o=t.innerRef,s=t.placeholder,u=t.droppableProps;return Object(he.jsxs)(te.a,{className:"board_view__section_board",sectionName:e.name,isArchived:He,tasksCount:Be[e.id].length,showTaskEditor:Ke===e.id,taskEditorKey:null==ke?void 0:ke.key,onActiveEditorChange:ct,onTaskEditorChange:mt,onTaskEditorKeydown:at,sectionId:e.id,projectId:l,user:p,onTaskAdd:Ot,ref:function(e){e&&(o(e.getTaskContainerRef()),r(e.getSectionHeaderRef()),c.current=e.getSectionColumnRef())},sectionElementProps:Re(Re({},i),{},{"data-is-dropzone":"droppable"===wt,"data-is-active":u["data-droppable-is-active"],"data-is-combining":Boolean(a)}),taskContainerElementProps:u,fullHeightMode:z,setNewSectionPos:ye,newSectionPos:ge,editorState:ke,children:[Be[e.id].map((function(t,n){return yt(t,n,{sectionId:e.id})})),s(Object(he.jsx)($.a,{type:"task"})),f?null==v||null===(n=v[e.id])||void 0===n?void 0:n.completedItems.map((function(e){return xt(e.item)})):null,f?Object(he.jsx)(ee.a,{type:"section",id:e.id}):null]},e.id)}})}}),c?Object(he.jsx)(X.a,{onClick:function(){return R(e.id)}}):null,i?Object(he.jsx)("div",{className:"board_view__add_section-form",children:Object(he.jsx)(pe.a,{onSubmit:function(t){dt(t,e.id)},onCancel:function(){return R(void 0)}})}):null]},e.id)})),r(Object(he.jsx)($.a,{type:"section"})),f?null==Ze?void 0:Ze.map((function(e){var t,n=e.section,r=e.completed;return Object(he.jsxs)(te.a,{className:"board_view__section_board",sectionName:n.name,tasksCount:r.sections[n.id]?r.sections[n.id].completed_items:0,sectionId:n.id,projectId:l,user:p,fullHeightMode:z,isArchived:!0,onSectionUnarchive:jt,onSectionDelete:jt,editorState:ke,children:[null==v||null===(t=v[n.id])||void 0===t?void 0:t.completedItems.map((function(e){return xt(e.item)})),Object(he.jsx)(ee.a,{type:"section",id:n.id})]},n.id)})):null,f?Object(he.jsx)(Z.a,{projectId:l}):null,kt?Object(he.jsx)("div",{className:"board_view__add_section",children:N===Qe?Object(he.jsx)(pe.a,{onSubmit:function(e){dt(e,Qe)},onCancel:function(){return R(void 0)}}):Object(he.jsx)(me,{onClick:function(){return R(Qe)}})}):null]}))}})},Me=["note","reminders"],ze=Object(q.a)((function(e){return Object(R.l)(e)})),Be=Object(q.a)((function(e){return Object(z.b)(e)}));var qe=Object(s.c)((function(e,t){var n,r,c,i,a,o=t.projectId;return{clock:e.clock,reminders:e.reminders,completedTasks:null!==(n=null==e||null===(r=e.completedItems)||void 0===r||null===(c=r.projects[o])||void 0===c?void 0:c.completedItems)&&void 0!==n?n:null,completedSectionTasks:null!==(i=null==e||null===(a=e.completedItems)||void 0===a?void 0:a.sections)&&void 0!==i?i:null,viewOptions:Object(v.a)(e,{view:"project",projectId:o}),canUseLabels:Object(B.p)(e),tasksBySectionId:ze(o)(e),sections:Be(o)(e),projectTasks:Object(R.d)(e)[o]}}),(function(e){var t=Object(S.a)(e);return{onTaskCheckedChange:t.onCheckedChange,onTaskUpdate:t.onUpdate,onTaskArchive:t.onArchive,onTaskDelete:t.onDelete,onTaskDuplicate:t.onDuplicate,onTaskLinkCopy:t.onLinkCopy,onTaskMoveToProject:t.onMoveToProject,onTaskAdd:function(e){var n=e.note,r=e.reminders,c=A()(e,Me);return t.onAdd(c,n,r)},onSectionAdd:function(t){e(Object(M.k)(t))},onSectionRemove:function(t){e(Object(N.i)(t))},setFullEditorView:function(t){e({type:L.a,payload:t})}}}))(Le),Ue=n("TuXZ"),Ke=n("gVGk"),Fe=n("gmEJ"),Ve=n("iAHV"),He=n("7lOM"),Ye=n("TSYQ"),We=n.n(Ye),Ge=n("WNVR"),Qe=n("vYfw"),Je=n("Cz95"),Xe=n("KRPs"),Ze=n("ARXc"),$e=n("17x9"),et=n.n($e),tt=n("LYyr"),nt=n("bTbL"),rt=n("TcCo"),ct=n("Wwa4"),it=n("0Myy"),at=n("4eld"),ot=n("Ba5u"),st=n("zgOj");function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dt(e){var t=e.section,n=e.itemCount,r=e.onCollapseChange,c=e.onRename,i=e.onDelete,s=e.onArchive,u=e.onUnarchive,d=e.withCollapser,b=void 0===d||d,p=e.withDnD,O=void 0===p||p,f=e.disabled,h=void 0!==f&&f,m=Object(o.useState)(!1),v=a()(m,2),g=v[0],y=v[1];var x=Object(it.b)({id:"section-".concat(t.id)});return Object(he.jsx)("header",ut(ut({},x),{},{children:g?Object(he.jsx)(pe.a,{section:t,onSubmit:function(e){y(!1),c(e)},onCancel:function(){return y(!1)}}):Object(he.jsxs)(he.Fragment,{children:[!O&&!b||h?null:Object(he.jsxs)("div",{className:We()("section_head__overflow_actions",{"section_head__overflow_actions--wide":O&&b}),children:[O?Object(he.jsx)("span",{className:"section_dnd_handle drag_and_drop_handler",children:Object(he.jsx)(Oe.H,{})}):null,b?Object(he.jsx)("div",{className:"collapser",onClick:function(){Object(ct.a)([".section_head_menu",".section_head_menu_list",".modal_overlay"],event)||r({collapsed:!t.collapsed})},children:Object(he.jsx)(Oe.n,{})}):null]}),Object(he.jsxs)(l.a,{flexGrow:"1",className:"section_head__title_box",children:[Object(he.jsx)(at.a,{className:"section_head__title","aria-label":Object(tt.a)(Object(j.a)("Edit section {name}"),{name:t.name}),onClick:function(){c&&y(!0)},disabled:h,children:Object(he.jsx)(ot.a,{source:t.name})}),n>0?Object(he.jsx)("small",{children:n}):null]}),h?null:Object(he.jsx)("div",{className:"section_head__actions",children:Object(he.jsx)(st.a,{section:t,itemCount:n,onRename:function(){return y(!0)},onArchive:s,onUnarchive:u,onDelete:i})})]})}))}dt.propTypes={section:et.a.object.isRequired,itemCount:et.a.number.isRequired,onRename:et.a.func,onCollapseChange:et.a.func.isRequired,onDelete:et.a.func,onArchive:et.a.func,onUnarchive:et.a.func,withCollapser:et.a.bool,withDnD:et.a.bool,disabled:et.a.bool};var jt=Object(o.memo)(dt);function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e){var t=e.showCompleted,n=e.completedInfo,r=e.labels,c=e.project,i=e.user,s=e.collaborators,l=e.onItemDelete,u=e.onItemLinkCopy,d=e.onItemCheckedChange,j=e.hintState,b=void 0===j?{}:j,p=e.fetchArchivedSections,O=e.updateHint,f=Object(o.useState)(!1),h=a()(f,2),m=h[0],v=h[1],g=Object(o.useState)(null),y=a()(g,2),x=y[0],w=y[1],k=Object(o.useRef)({}),_=Object(o.useMemo)((function(){return b.completedSections||[]}),[b.completedSections]),S=!1!==b.showSectionsHint,C=Object(o.useCallback)((function(){w(null),v(!0);var e={project_id:n.project_id};b.cursor&&(e.cursor=b.cursor),p({completedInfo:n,sections:_,hintState:b}).then((function(){v(!1)}),(function(){w(!0),v(!1)}))}),[n,p,b,_]);if(!t)return null;if(0===_.length&&(!n||0===n.archived_sections))return null;var P=_.map((function(e){var t,a=e.section,o=e.completed,j=a.collapsed,b=function(){var e={completedSections:_.filter((function(e){return e.section!==a}))};O({id:n.project_id,type:"projects",data:e})},p=o.sections[a.id],f=p&&p.completed_items||0,h=f>0,m=We()("section","section__archived",{section__collapsed:Boolean(j)});return Object(he.jsx)("li",{children:Object(he.jsxs)("div",{className:m,children:[Object(he.jsx)(jt,{onDelete:b,onUnarchive:b,withDnD:!1,withCollapser:Boolean(h),onCollapseChange:function(){var e={completedSections:_.map((function(e){return e.section===a?pt(pt({},e),{},{section:pt(pt({},a),{},{collapsed:!j})}):e}))};O({id:n.project_id,type:"projects",data:e});var t=k.current[a.id];t&&t()},section:a,itemCount:f}),p?Object(he.jsx)("ul",{className:"items",children:Object(he.jsx)(nt.a,{completedSection:a,onChangeStatus:b,isCollapsed:j,labels:r,project:c,completedInfo:p,user:i,collaborators:s,type:"sections",itemId:a.id,onDelete:l,onCheckedChange:d,onLinkCopy:u,fetchOnExpand:!0,setFetch:(t=a.id,function(e){k.current[t]=e})})}):null]})},a.id)})),D=(b&&b.total||n.archived_sections)-_.length,I=S&&D>0&&!isNaN(D)?Object(he.jsxs)("li",{className:"moreItemsHint",onClick:C,children:[Object(he.jsx)("div",{className:"moreItemsHint_icon",children:m||b.updating?Object(he.jsx)(rt.b,{}):Object(he.jsx)(Oe.O,{})}),Object(he.jsx)("div",{children:ft({error:x,isLoading:m,archivedSectionsNumber:D,updating:b.updating})})]}):null;return Object(he.jsxs)(he.Fragment,{children:[P,I]})}function ft(e){var t=e.error,n=e.isLoading,r=e.updating,c=e.archivedSectionsNumber;return t?Object(j.a)("Something went wrong! Please try again."):n?Object(j.a)("Fetching sections\u2026"):r?Object(j.a)("Updating archived info\u2026"):Object(tt.a)(_n("+1 archived section","+{num} archived sections",c),{num:c})}Ot.propTypes={showCompleted:et.a.bool.isRequired,completedInfo:et.a.object,labels:et.a.object.isRequired,project:et.a.object.isRequired,onItemDelete:et.a.func.isRequired,onItemLinkCopy:et.a.func.isRequired,collaborators:et.a.object.isRequired,user:et.a.object.isRequired,onItemCheckedChange:et.a.func.isRequired,hintState:et.a.shape({completedSections:et.a.array,showSectionsHint:et.a.bool,cursor:et.a.object,total:et.a.number,updating:et.a.bool}),updateHint:et.a.func,fetchArchivedSections:et.a.func};var ht={updateHint:Ze.g,fetchArchivedSections:Ze.c},mt=Object(s.c)((function(e,t){var n=t.completedInfo&&t.completedInfo.project_id;return{hintState:Object(Ze.f)(e,{type:"projects",id:n})}}),ht)(Ot);function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yt=Object(s.c)((function(e,t){var n=t.project;return{viewOptions:Object(v.a)(e,{view:"project",projectId:n.id})}}))((function(e){var t,n=e.section,r=e.items,c=e.project,i=e.viewOptions,a=e.showCompleted,s=e.showSubTasks,l=e.onSectionUpdate,u=e.onAddSectionBelowClick,d=n?{"data-section-id":n.id}:void 0,b=null!==(t=null==n?void 0:n.name)&&void 0!==t?t:Object(j.a)("Tasks without a section"),p=!c.is_archived&&!c._unjoined,O=We()("section",{section__default:!n,section__collapsed:(null==n?void 0:n.collapsed)&&p}),f=Object(o.useCallback)((function(e){n&&l({id:n.id,name:e})}),[l,n]),h=Object(o.useCallback)((function(e){var t=e.collapsed;n&&l({id:n.id,collapsed:t})}),[l,n]);return Object(he.jsxs)("li",gt(gt({},d),{},{children:[Object(he.jsxs)("section",{"aria-label":b,className:O,children:[n?Object(he.jsx)(jt,{section:n,itemCount:r.length,onRename:f,onCollapseChange:h,disabled:!p}):Object(he.jsx)("header",{className:"section_head",children:Object(he.jsxs)("div",{className:"section_head__title",children:[Object(he.jsx)(ot.a,{source:b}),r.length>0?Object(he.jsx)("small",{children:r.length}):null]})}),Object(he.jsx)(Xe.b,{type:le.e,tasks:r,"data-section-list-id":n?n.id:"null",project:c,section:n,showCompleted:a,allowAddAbove:!Object(W.d)(i),allowAddBelow:!Object(W.d)(i),allowIndentChange:!Object(W.d)(i),showDragHandle:!Object(W.d)(i)||!Object(W.a)(i),showSubTasks:s,viewOptions:i})]}),p?Object(he.jsx)(at.a,{className:"hover_action_button",onClick:function(){return u(n?n.id:null)},children:Object(j.a)("Add section")}):null]}))})),xt=n("ej5t"),wt=n("mXAr"),kt=n("Nhxs"),_t=n("rAR9");var St=function(e,t){var n=Object(o.useRef)(),r=Object(s.h)((function(t){return Object(v.a)(t,{view:"project",projectId:e})})),c=Object(s.h)((function(e){return e.items})),i=Object(W.a)(r),a=Object(_t.b)().setActiveTaskId;Object(kt.a)({itemSelector:"[data-section-list-id] [data-item-id]",handleSelector:".item_dnd_handle",scrollSelector:["#content","#".concat("left_menu")],disabled:i,onDragStart:Object(o.useCallback)((function(e,t){n.current=Object(wt.a)({item:e,dragItem:t,listIdAttr:"data-section-list-id",itemIdAttr:"data-item-id",maxIndent:5,dropzone:r?"droppable":"inline"}),n.current.handleDragStart();var c=e.getAttribute("data-item-id"),i=c?Object(xt.a)(c):null;i&&(null==a||a(i))}),[a,r]),onDragging:Object(o.useCallback)((function(e){var t,r;e.target instanceof Element&&e.target.closest("#".concat("left_menu"))?null==n||null===(r=n.current)||void 0===r||r.handleDragLeave():null==n||null===(t=n.current)||void 0===t||t.handleDragging()}),[]),onDragEnd:Object(o.useCallback)((function(o){var s,l,u;if(setTimeout((function(){null==a||a(null)}),0),o.target instanceof Element&&o.target.closest("#".concat("left_menu"))){var d;null==n||null===(d=n.current)||void 0===d||d.handleDragEnd()}else{var j=null==n||null===(s=n.current)||void 0===s?void 0:s.handleDragEnd();if(c&&j){var b=j.dragItemId,p=j.dropListId,O=j.orders,f=O.findIndex((function(e){return e.id===b})),h=O[f].indent,m="null"===p?null:Object(xt.a)(p);if(!r||i){var v;if(1===h)v={id:Object(xt.a)(b),parent_id:null,section_id:m,project_id:e};else for(var g=f;g>=0;g--)if(O[g].indent<h){v={id:Object(xt.a)(b),parent_id:Object(xt.a)(O[g].id),section_id:m,project_id:e};break}var y=f+1,x=null!==(l=null===(u=O[y])||void 0===u?void 0:u.indent)&&void 0!==l?l:null,w=null;if(x>=h){for(;x&&x!==h;){var k,_;x=null!==(k=null===(_=O[y+=1])||void 0===_?void 0:_.indent)&&void 0!==k?k:null}var S=x?c[O[y].id]:null;w=S?null==S?void 0:S.child_order:null}if(null===w){for(var C,P,D=f-1,I=null!==(C=null===(P=O[D])||void 0===P?void 0:P.indent)&&void 0!==C?C:null;I&&I!==h;){var T,E;I=null!==(T=null===(E=O[D-=1])||void 0===E?void 0:E.indent)&&void 0!==T?T:null}var A=I?c[O[D].id]:null;w=A?A.child_order+1:1}t(v,{id:Object(xt.a)(b),to:w})}else t({id:Object(xt.a)(b),section_id:m,project_id:e})}}}),[i,t,e,a,c,r])})},Ct=n("Sj2Y");var Pt=function(e){Object(Ct.a)({listIdAttr:"data-project-list-id",itemIdAttr:"data-section-id",handleSelector:".section_dnd_handle",scrollSelector:"#content",onSort:Object(o.useCallback)((function(t){var n=t.orders.map((function(e){return{id:Object(xt.a)(e.id),section_order:e.item_order}}));e(n)}),[e])})};function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tt=Object(o.forwardRef)((function(e,t){var n=e.projectId,r=e.sectionFormPos,i=e.setSectionFormPos,s=e.showCompleted,l=e.collaborators,u=e.completed,d=e.labels,j=e.user,b=e.viewOptions,p=e.project,O=e.itemsBySid,f=e.projectItems,h=e.projectSections,m=e.onItemCheckedChange,v=e.onItemDelete,g=e.onItemLinkCopy,y=e.onItemMoveAndReorder,x=e.onSectionAdd,w=e.onSectionUpdate,_=e.onSectionReorder,S=Object(Ve.l)().active,C=Object(de.a)({viewOptions:b}),P=Object(o.useMemo)((function(){return[null].concat(K()(h.map((function(e){return e.id}))))}),[h]),D=!s||function(e,t){var n=null==e?void 0:e.projects[t];return!n||!n.archived_sections&&!n.completed_items}(u,n),I=null==p?void 0:p.is_archived,T=Object(o.useState)(O),E=a()(T,2),A=E[0],N=E[1];St(n,y),Pt(_);var R=Object(o.useMemo)((function(){return f&&C?f.filter(C):f}),[f,C]),L=Object(je.a)({tasks:R,viewOptions:b}),M=[],z=Object(o.useMemo)((function(){return L?L.reduce((function(e,t){var n,r=null!==(n=t.key)&&void 0!==n?n:"null";return It(It({},e),{},c()({},r,t.tasks))}),{}):C?P.reduce((function(e,t){var n=null!=t?t:"null";return It(It({},e),{},c()({},n,A[n].filter(C)))}),{}):A}),[L,A,P,C]),B=0===h.length&&0===A.null.length&&void 0===r&&D&&!I,q=!B&&b&&r!==P[P.length-1]&&(!R||0===R.length);if(Object(He.a)((function(){N(O)}),[O],[!S,A!==O]),!p)return null;if(q)return Object(he.jsx)(k.m,{});M=L?L.map((function(e){var t;return e.taskListType===le.d?Object(he.jsx)(Ge.a,{rootItems:e.tasks,"data-day-list-id":e.taskListType,showProject:!1,showSectionOnly:!0,viewOptions:b,isListItem:!0},e.key):Object(he.jsx)(Je.a,{header:e.header,isListItem:!0,children:Object(he.jsx)(Xe.b,{type:e.taskListType,tasks:z[null!==(t=e.key)&&void 0!==t?t:"null"],project:p,showCompleted:s,showSectionOnly:!0,defaultAddFields:e.defaultFields,allowAdd:!e.disableAdd,viewOptions:b})},e.key)})):P.map((function(e){var t,n=null!==(t=z[null!=e?e:"null"])&&void 0!==t?t:[];return Object(he.jsx)(yt,{showCompleted:s,showSubTasks:!C,project:p,items:n,section:h.find((function(t){return t.id===e}))||void 0,onSectionUpdate:w,onAddSectionBelowClick:i},e)}));var U=L&&void 0!==r?L.length:P.findIndex((function(e){return e===r}));if(-1!==U){var F=Object(he.jsx)("li",{children:Object(he.jsx)("div",{className:"section",children:Object(he.jsx)(pe.a,{onSubmit:function(e){if(i(void 0),L)return x({name:e,section_order:h[h.length-1]?h[h.length-1].section_order+1:1,project_id:n});var t=h.find((function(e){return e.id===r})),c=null!==r&&t?t.section_order+1:Number.NEGATIVE_INFINITY;x({name:e,section_order:c,project_id:n})},onCancel:function(){i(void 0)}})})},"section_form_".concat(U));M.splice(U+1,0,F)}var H=We()("section_list",void 0===r?null:"section_add_active"),Y=Object(V.c)("frontend.dnd_everywhere"),W=Y?Qe.b:o.Fragment,G=Y?{projectId:p.id,sectionIds:P,filteredItemsBySid:A,setFilteredItemsBySid:N}:null;return Object(he.jsx)(W,It(It({},G),{},{children:Object(he.jsx)("div",{className:"list_editor view_content","data-testid":"project-list-view",ref:t,children:Object(he.jsxs)("ul",{className:H,"data-project-list-id":p.id,children:[M,B?Object(he.jsx)(k.g,{projectId:p.id}):null,Object(he.jsx)(mt,{user:j,collaborators:l,onItemCheckedChange:m,onItemDelete:v,onItemLinkCopy:g,labels:d,project:p,completedInfo:null==u?void 0:u.projects[p.id],showCompleted:s})]})})}))})),Et=Object(q.a)((function(e){return Object(R.l)(e)})),At=Object(q.a)((function(e){return Object(z.b)(e)}));var Nt=Object(s.c)((function(e,t){var n=t.projectId;return{collaborators:e.collaborators,completed:e.completed,labels:Object(Ke.f)(e),tempIds:e.tempIds,user:e.user,viewOptions:Object(v.a)(e,{view:"project",projectId:n}),itemsBySid:Et(n)(e),projectSections:At(n)(e),projectItems:Object(R.d)(e)[n],project:Object(h.k)(e,n)}}),(function(e){var t=Object(S.a)(e);return{onItemCheckedChange:t.onCheckedChange,onItemDelete:t.onDelete,onItemLinkCopy:t.onLinkCopy,onItemMoveAndReorder:function(t,n){Object(d.a)("project_list_view","reorder","task"),e(Object(Ue.y)(t,n))},onSectionAdd:function(t){e(Object(Fe.e)(t))},onSectionUpdate:function(t){e(Object(Fe.q)(t))},onSectionReorder:function(t){Object(d.a)("project_list_view","reorder","section"),e(Object(Fe.n)(t,!0))}}}),null,{forwardRef:!0})(Tt),Rt=n("K6Df"),Lt=n("RsDw"),Mt=n("UTRX"),zt=n("GIsW"),Bt=n("G3Y2"),qt=n("vV6a"),Ut=n("dLxo"),Kt=n("kmjL"),Ft=n("sDGk"),Vt=n("/uLG"),Ht=n("1AH3"),Yt=n("icNd"),Wt=n("/7zm"),Gt=n("EQPz"),Qt=n("wQhe"),Jt=n("9+eD"),Xt=n("UAt+"),Zt=n("MXpG"),$t=n("eEl8"),en=n("szTl"),tn=n("BDxM"),nn=n("CodD"),rn=n("ibRB"),cn=n("LsxX"),an=n("wOFH"),on=n("s6QN"),sn=n("Zhs9"),ln=n("awe3"),un=n("mVlx"),dn=n("yYH5"),jn=n("S0Ut"),bn=n("TxzI"),pn=n("1IDz"),On=n("BWk0"),fn=n("Tc49"),hn=n("GpCm"),mn=n("6M/T"),vn=(n("VLUi"),["dispatch"]);function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xn=Object(s.c)((function(e){return{allCollaborators:e.collaborators.all}}),(function(e,t){var n=t.project;return{onSortByPriority:function(){e(Object(O.I)(n.id,Object(cn.e)(cn.d,cn.a)))},onSortByDate:function(){e(Object(O.I)(n.id,Object(cn.e)(cn.b,cn.d,cn.a)))},onSortByName:function(){e(Object(O.I)(n.id,Object(cn.e)(cn.c,cn.d,cn.a)))},onDuplicate:function(){e(Object(h.h)(n.id))},onShowMailItem:function(){an.a.showProjectEmail(n.id)},onShowProjectCalendar:function(){an.a.showCalFeed(n.id)},dispatch:e}}),(function(e,t,n){var r=e.allCollaborators,c=t.dispatch,i=A()(t,vn),a=n.project;if(!n.isProjectShared)return yn(yn({},n),i);var o,s=(o=r,function(e,t){var n=null!=e.responsible_uid?o[e.responsible_uid]:null,r=null!=t.responsible_uid?o[t.responsible_uid]:null;return n||r?r?n?n.full_name===r.full_name?0:n.full_name>r.full_name?-1:1:1:-1:0});return yn(yn(yn({},n),i),{},{onSortByAssignee:function(){c(Object(O.I)(a.id,Object(cn.e)(Object(cn.e)(s,cn.d,cn.a))))}})}))((function(e){var t=e.project,n=e.showCompleted,r=e.isProjectShared,c=e.onAddSection,i=e.onShowMailItem,l=e.onShowProjectCalendar,u=e.onToggleCompleted,d=e.onDuplicate,b=e.onProjectEdit,p=e.onProjectArchive,O=e.onProjectDelete,f=e.projectViewMenuRef,h=Object(hn.d)(),m=Object(nn.j)(),v=Object(nn.k)().taskId,g=Object(x.j)(),y=Object(o.useRef)(null),w=Object(o.useState)(!1),k=a()(w,2),S=k[0],C=k[1],P=Object(_.b)().copyToClipboard,D=n?Object(j.a)("Hide completed"):Object(j.a)("Show completed"),I=n?pn.a:jn.a,T=Object(s.h)((function(e){return e.stats.completed_count})),E=Object(mn.b)().showCompletedTasks,A=r?Object(j.a)("Leave project"):Object(j.a)("Delete project"),N=r?Oe.jb:Oe.C,R=!t.inbox_project&&!t.team_inbox;function L(){C(!0)}function M(){C(!1)}function z(e){C(!1),e()}Object(o.useImperativeHandle)(f,(function(){return{open:L}}));var B=Object(_.g)(ln.j),q=B.isTipScheduled,U=B.markTipSeen,K=q&&3===T&&!E&&!v&&g;return Object(o.useEffect)((function(){K&&Object(rn.a)({event:"tooltip_view_completed"})}),[K]),Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(at.a,{ref:y,onClick:function(){return C(!S)},"aria-label":Object(j.d)("a11y","Project options menu"),title:Object(j.a)("More project actions"),tooltip:Object(he.jsx)(oe.i,{identifier:"PROJECT_VIEW_OPEN_PROJECT_ACTIONS"}),children:Object(he.jsx)(Oe.rb,{})}),K&&null!=y&&y.current?Object(he.jsxs)(dn.b,{isShown:!0,placement:"bottom",referenceElement:null==y?void 0:y.current,children:[Object(he.jsx)(dn.a.TooltipHeader,{icon:Object(he.jsx)("div",{className:"tooltip-completed-task",children:Object(he.jsx)(Oe.o,{"aria-hidden":!0})}),title:Object(j.a)("Show completed tasks")}),Object(he.jsx)(dn.a.TooltipBody,{children:Object(j.a)("Click the three-dots icon for the option to display your completed tasks.")}),Object(he.jsxs)(dn.a.TooltipFooter,{children:[Object(he.jsx)(dn.a.TooltipConfirmButton,{tooltip:"onboarding_completed"}),Object(he.jsx)(Bt.a,{variant:"primary",onClick:function(){C(!0),Object(rn.a)({event:"tooltip_action_completed"}),U()},children:Object(j.a)("Open menu")})]})]}):null,Object(he.jsx)(hn.c,yn(yn({},h.props),{},{renderReferenceElement:y.current||void 0,isShown:S,onClose:M,withArrow:!1,zIndex:!1,children:Object(he.jsxs)(fn.c,{className:"project_view_menu","aria-label":Object(j.d)("a11y","task edit menu"),children:[null!=b?Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(fn.a,{text:Object(j.a)("Edit project"),icon:Object(he.jsx)(Oe.I,{}),onClick:function(){return z(b)}}),Object(he.jsx)(fn.e,{})]}):null,Object(he.jsx)(fn.a,{text:Object(j.a)("Add section"),icon:Object(he.jsx)(fe.a,{}),onClick:function(){return z(c)},shortcut:Object(he.jsx)(oe.e,{identifier:"PROJECT_ADD_SECTION"})}),Object(he.jsx)(fn.e,{}),Object(V.c)("frontend.unique_links")?Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(fn.a,{text:Object(j.a)("Copy project link"),icon:Object(he.jsx)(bn.a,{}),onClick:function(){P(Object(un.a)(t)),M()}}),Object(he.jsx)(fn.e,{})]}):null,Object(he.jsx)(fn.a,{text:Object(j.a)("Import from template"),icon:Object(he.jsx)(Oe.G,{}),onClick:function(){z((function(){return m("/app/project/".concat(t.id,"/import"))}))}}),Object(he.jsx)(fn.a,{text:Object(j.a)("Export as a template"),icon:Object(he.jsx)(On.a,{}),onClick:function(){z((function(){return m("/app/project/".concat(t.id,"/export"))}))}}),Object(he.jsx)(fn.e,{}),R?Object(he.jsx)(fn.a,{text:Object(j.a)("Duplicate project"),icon:Object(he.jsx)(Oe.A,{}),onClick:function(){return z(d)}}):null,Object(he.jsx)(fn.a,{text:Object(j.a)("Email tasks to this project"),icon:Object(he.jsx)(Oe.mb,{}),onClick:function(){return z(i)}}),Object(he.jsx)(fn.a,{text:Object(j.a)("Project calendar feed"),icon:Object(he.jsx)(Oe.kb,{}),onClick:function(){return z(l)}}),Object(he.jsx)(fn.e,{}),Object(he.jsx)(fn.a,{text:D,icon:Object(he.jsx)(I,{}),onClick:function(){return z(u)}}),Object(he.jsx)(fn.e,{}),Object(he.jsx)(on.c,{onClose:function(){return z((function(){}))},contextMenuData:Object(sn.a)(t),contextType:"project"}),null!=p||null!=O?Object(he.jsx)(fn.e,{}):null,null!=p?Object(he.jsx)(fn.a,{text:Object(j.a)("Archive project"),icon:Object(he.jsx)(Oe.e,{}),onClick:function(){return z(p)}}):null,null!=O?Object(he.jsx)(fn.a,{text:A,icon:Object(he.jsx)(N,{}),onClick:function(){return z(O)}}):null]})}))]})})),wn=["id"];function kn(e){var t=e.project,n=e.showCompleted,r=e.observeHeaderDimensions,c=e.viewOptionsMenuRef,i=e.onSetShowCompleted,l=e.onSetSectionFormPos,u=Object(o.useRef)(),d=Object(s.g)(),O=Object(x.k)(),f=Object(o.useState)(!1),h=a()(f,2),g=h[0],w=h[1],k=Object(s.h)(m.n),_=t.id===k.team_inbox_id||t.id===k.inbox_project_id,S=Object(s.h)((function(e){return Object(Kt.h)(e,t.id).length})),C=Object(s.h)((function(e){return Object(Kt.c)(e,t.id)})),P=Object(s.h)((function(e){return Object(v.a)(e,{view:"project",projectId:t.id})})),D=Object(o.useMemo)((function(){return Object(z.b)(t.id)}),[t.id]),I=Object(s.h)(D),T=Object(o.useMemo)((function(){return[null].concat(K()(I.map((function(e){return e.id}))))}),[I]),E=Object(o.useMemo)((function(){return Object(b.b)()}),[]),N=Object(s.h)((function(e){return E(e,t.id)})),R=N.length,L=Object(s.h)(p.e),M=null!=t.workspace_id,B=Object(s.h)((function(e){return Object(b.n)(e,t.id)})),q=Boolean(t.is_archived||t._unjoined),U=!y.isPrintMode&&"board"===t.view_style,F=Boolean(t.inbox_project||t.team_inbox||q),V=!t.inbox_project&&!q,H=!q,Y=!t.is_archived&&!M,W=Object(Jt.a)(),G=W.observeHeaderDimensions,Q=W.isMiniMode,J=Object(o.useCallback)((function(){w(!0)}),[]),X=Object(o.useCallback)((function(){w(!1)}),[]);var Z=Object(o.useCallback)((function(){L||d(Object(Ft.t)(t.id,{view_style:U?"list":"board"}))}),[L,d,t.id,U]),$=Object(Wt.c)({title:Object(j.a)("Reset sorting?"),confirmLabel:Object(j.d)("confirm action","Ok"),onConfirm:function(){d(Object(Vt.a)({view:"project",projectId:t.id})),i((function(e){return!e}))},message:Object(j.a)("Showing completed tasks will reset your current sorting options.")}),ee=Object(o.useCallback)((function(){if(P&&!n)return $();i((function(e){return!e}))}),[$,i,n,P]);var te=Object(Wt.c)({confirmLabel:B?Object(j.a)("Archive for me"):Object(j.a)("Archive"),onConfirm:function(){d(Object(Ft.m)(t.id)),O({view:{type:"inbox"},replace:!0})},title:Object(j.a)("Archive project?"),message:Object(he.jsx)(Rt.a,{string:B?Object(j.a)("Are you sure you want to archive {projectName}? It won\u2019t be archived for other project members."):Object(j.a)("Are you sure you want to archive {projectName}?"),mapping:{projectName:Object(he.jsx)("strong",{children:t.name})}})}),ne=Object(Wt.c)({confirmLabel:B?Object(j.a)("Leave"):Object(j.a)("Delete"),onConfirm:function(){d(Object(Ft.r)(t.id)),O({view:{type:"inbox"},replace:!0})},title:B?Object(j.a)("Leave project?"):Object(j.a)("Delete project?"),message:Object(he.jsx)(Rt.a,{string:B?Object(j.a)("Are you sure you want to leave {projectName}?"):Object(j.a)("Are you sure you want to delete {projectName}?"),mapping:{projectName:Object(he.jsx)("strong",{children:t.name})}})}),re=Object(o.useCallback)((function(){var e=T[T.length-1];l(e)}),[l,T]),ce=Object(o.useCallback)((function(){var e,t;null==u||null===(e=u.current)||void 0===e||null===(t=e.open)||void 0===t||t.call(e)}),[u]),ie=Object(o.useCallback)((function(){Object(en.c)(t.id,O)}),[O,t.id]);return Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(oe.a,{projectId:t.id,isProjectReadOnly:q,isProjectShared:B,handleShareOptionClick:ie,handleProjectActionsClick:ce,handleAddSection:re,handleShowCompleted:ee,handleToggleViewStyle:Z,handleProjectEdit:_?void 0:J,handleProjectDeleteOrLeave:_?void 0:ne,handleProjectArchive:_?void 0:te}),Object(he.jsx)(Qt.a,{title:t.name,disableEditing:F,onRename:function(e){d(Object(Ft.t)(t.id,{name:e}))},maxLength:qt.q,ref:function(e){r(e),G(e)},actions:Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)($t.a,{noteParent:t,noteType:Ut.g,notesCount:S,hasMore:C,isMiniMode:Q}),V?Object(he.jsx)(Cn,{collaboratorCount:R,isMiniMode:Q,onClick:ie,project:t}):null,H?Object(he.jsx)(tn.a,{isBoardViewActive:U,ref:c,viewInfo:{view:"project",projectId:t.id},collaboratorIds:N,isMiniMode:Q,onToggleViewStyle:Z}):null,Y?Object(he.jsx)(xn,{projectViewMenuRef:u,project:t,showCompleted:n,isProjectShared:B,onToggleCompleted:ee,onAddSection:re,onProjectEdit:_?void 0:J,onProjectArchive:_?void 0:te,onProjectDelete:_?void 0:ne}):null,M?Object(he.jsxs)(Lt.a,{children:[Object(he.jsx)(Lt.b,{as:at.a,"aria-label":Object(j.d)("a11y","Project options menu"),title:Object(j.a)("More project actions"),tooltip:Object(he.jsx)(oe.i,{identifier:"PROJECT_VIEW_OPEN_PROJECT_ACTIONS"}),children:Object(he.jsx)(Oe.rb,{})}),Object(he.jsx)(Yt.a,{project:t,isCompleteTasksShown:n,onToggleCompleted:ee,onAddSection:re,context:"project"})]}):null,g?Object(he.jsx)(Gt.a,{project:t,onProjectUpdate:function(e){var t=e.id,n=A()(e,wn);d(Object(Ft.t)(t,n))},onModalClose:X,navigateTo:O}):null]}),children:q?Object(he.jsx)(Sn,{project:t}):null})]})}function Sn(e){var t=e.project,n=Object(s.g)(),r=Object(o.useState)(!1),c=a()(r,2),i=c[0],u=c[1];if(!Boolean(t._unjoined||t.is_archived))return null;return Object(he.jsx)(l.a,{background:"aside",border:"secondary",borderRadius:"full",padding:"small",marginX:"-small",marginBottom:"medium",children:Object(he.jsxs)(Mt.b,{space:"medium",alignY:"center",children:[Object(he.jsx)(Mt.a,{width:"content","aria-hidden":!0,style:{lineHeight:0},children:t.is_archived?Object(he.jsx)(Xt.a,{}):Object(he.jsx)(Zt.a,{})}),Object(he.jsx)(Mt.a,{children:Object(he.jsx)(zt.a,{children:t.is_archived?Object(j.a)("This project is archived"):Object(j.a)("You\u02bcre previewing this project")})}),Object(he.jsx)(Mt.a,{width:"content",children:Object(he.jsx)(Bt.a,{variant:"primary",onClick:function(){u(!0),t.is_archived?n(Object(Ft.s)(t)):t._unjoined&&n(Object(Ht.e)({projectId:t.id}))},loading:i,children:t.is_archived?Object(j.a)("Unarchive project"):Object(j.a)("Join project")})})]})})}function Cn(e){var t=e.collaboratorCount,n=e.isMiniMode,r=void 0!==n&&n,c=e.onClick,i=e.project,a=Object(o.useRef)(null),s=0===t?Object(j.a)("Share"):t;return Object(he.jsxs)(he.Fragment,{children:[Object(he.jsxs)(at.a,{ref:a,"aria-label":Object(j.a)("Share options"),title:t>0||r?"":Object(j.a)("Share"),onClick:c,tooltip:Object(he.jsx)(oe.g,{identifier:"PROJECT_VIEW_SHARE_PROJECT"}),children:[0===t?Object(he.jsx)(Oe.Jb,{}):Object(he.jsx)(Oe.Kb,{}),r&&0===t?null:Object(he.jsx)("span",{className:"action_label",children:s})]}),null!=i&&i.workspace_id?Object(he.jsx)(en.b,{project:i,referenceElement:a.current||void 0}):null]})}function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function In(e){var t=e.projectId,n=Object(x.k)(),r=Object(s.g)(),c=Object(o.useState)(!1),i=a()(c,2),l=i[0],k=i[1],P=Object(o.useState)(void 0),D=a()(P,2),E=D[0],A=D[1],N=Object(s.h)((function(e){return Object(h.k)(e,t)})),R=Object(s.h)(m.n),L=Object(s.h)((function(e){return Object(v.a)(e,{view:"project",projectId:t})})),M=Object(u.a)(L),z=Object(s.h)(p.e),B=Object(s.h)((function(e){return Object(b.n)(e,t)})),q=!y.isPrintMode&&"board"===(null==N?void 0:N.view_style),U=!q,K=null==N?void 0:N.is_archived,F=Object(o.useRef)(null),V=Object(o.useMemo)((function(){return Object(b.b)()}),[]),H=Object(s.h)((function(e){return V(e,t)}));Object(I.a)({collaboratorIds:H,viewOptions:L,viewInfo:{view:"project",projectId:t}}),Object(o.useEffect)((function(){null===M&&L&&k(!1)}),[M,L]);var Y=Object(_.f)({namePrefix:"view-header",rootCssSelector:"#content"}),W=Y.observeHeaderDimensions,G=Y.observeContentDimensions,Q=Y.observeContentInView,J=Y.stickyProps,X=Object(o.useRef)(null);X.current&&(G(X.current),Q(X.current));var Z=Object(o.useMemo)((function(){return Object(S.a)(r)}),[r]).onAdd,$=Object(o.useCallback)((function(e){var c=e[0];if(c.name.endsWith(".csv")||c.name.endsWith(".txt"))n({subPath:"import",state:{file:c}});else{var i=Z(Dn(Dn({},Object(O.n)()),{},{content:c.name,project_id:t})),a=new window.GFile;a.file=c,a.temporaryId=Math.random(),a.upload(),r(Object(f.j)({parentId:i.id,content:"",type:f.b,usersToNotify:[],files:[a]}))}}),[r,n,Z,t]),ee=Object(o.useRef)(Object.values(Object(O.D)(t)(g.default.getState())).reduce((function(e,t){return e+t.filter((function(e){return null===e.parent_id})).length}),0));return Object(o.useEffect)((function(){var e=B?"shared_project":"private_project";U?Object(d.a)("project_list_view","enter",e,ee.current):q&&Object(d.a)("project_board_view","enter",e,ee.current)}),[U,q,B]),N?Object(he.jsx)(w.a,{onDrop:$,canDrop:!z&&!K,children:function(e){var t=e.isDragging;return Object(he.jsxs)("div",Dn(Dn({className:"project_view project_editor_instance current_editor","data-project-id":N.id},U&&J),{},{children:[t&&!z?Object(he.jsx)("div",{className:"project_view__drop_zone",children:Object(he.jsx)("p",{className:"project_view__drop_zone__inner",children:Object(j.a)("Add file as task / Import from template")})}):null,Object(he.jsx)(kn,{project:N,showCompleted:l,onSetShowCompleted:k,observeHeaderDimensions:W,viewOptionsMenuRef:F,onSetSectionFormPos:A}),Object(he.jsxs)(C.a,{children:[Object(he.jsx)(T.a,{viewInfo:{view:"project",projectId:N.id},className:U?"list_view_options_status":"board_view__view_options_status",collaboratorIds:H,onCustomSortingClick:function(){var e;null===(e=F.current)||void 0===e||e.click()}}),U?Object(he.jsx)(Nt,{projectId:N.id,showCompleted:l,sectionFormPos:E,setSectionFormPos:A,ref:X}):null,q?Object(he.jsx)(qe,{user:R,projectId:N.id,sectionFormPos:E,setSectionFormPos:A,showCompleted:l}):null]})]}))}}):null}function Tn(e){var t=e.projectId,n=Object(D.a)(t),r=n.error,c=n.project;return r||c?r?Object(he.jsx)(k.i,{}):Object(he.jsx)(In,{projectId:t}):Object(he.jsx)(l.a,{width:"full",height:"full",display:"flex",alignItems:"center",justifyContent:"center",children:Object(he.jsx)(P.a,{"aria-label":Object(j.a)("Loading\u2026")})})}},sslh:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return b}));var r=n("lSNA"),c=n.n(r),i=n("mYBN"),a=n("b/sn"),o="jS4Enl3LCjFfkydgeUQ-Iw==",s=n("dD6n");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var u=i.d.create({inclusive:!1,addAttributes:function(){return{id:{parseHTML:function(e){return e.getAttribute("data-match-id")},renderHTML:function(e){return e.id?{"data-match-id":e.id}:{}}},isInserted:{default:!1,parseHTML:function(e){return e.getAttribute("data-match-inserted")},renderHTML:function(e){return e.isInserted?{"data-match-inserted":e.isInserted}:{}}}}},renderHTML:function(e){var t=e.HTMLAttributes;return["span",Object(i.x)(t,{"data-testid":"natural-language-match"}),0]}}),d=u.extend({name:"naturalLanguageHighlighted",excludes:"_",renderHTML:function(e){var t=e.HTMLAttributes;return["span",Object(i.x)(t,{class:o,"data-highlighted-match":!0,"data-testid":"natural-language-match"}),0]},addKeyboardShortcuts:function(){var e=this;return{Backspace:function(){return e.editor.commands.command((function(e){var t=e.tr,n=e.state,r=n.selection,c=r.anchor;return!!r.empty&&(Object(s.a)({state:n,start:c-1,end:c,transaction:t}),t.steps.length>0)}))}}},addProseMirrorPlugins:function(){var e=this.name;return[new a.d({key:new a.e("naturalLanguageHighlightedClick"),props:{handleClick:function(t,n,r){if(Object(i.l)(t.state,e).id&&r.target.hasAttribute("data-match-id")){var c=Object(s.a)({state:t.state,start:n-1,end:n+1});t.dispatch(c)}}}})]}}),j=u.extend({name:"naturalLanguageInactive"}),b=u.extend({name:"naturalLanguageIgnored",inclusive:!1,addAttributes:function(){var e,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},null===(e=this.parent)||void 0===e?void 0:e.call(this));return delete t.isInserted,t}})},szTl:function(e,t,n){"use strict";n.d(t,"a",(function(){return fe})),n.d(t,"b",(function(){return Ge})),n.d(t,"c",(function(){return Je}));var r=n("q1tI"),c=n("/MKj"),i=n("Vbab"),a=n("RZq6"),o=n("XOeF"),s=n("ImH7"),l=n("gd9Y"),u=n("SCoO"),d=n("J4zp"),j=n.n(d),b=n("RIqP"),p=n.n(b),O=n("lSNA"),f=n.n(O),h=n("zhxZ"),m=n("XKNl"),v=n("VNk9"),g=n("oDV5"),y=n("kazx"),x=n("S+H7"),w=n("gnfN"),k=n("7HK4"),_=n("Mm+M"),S=n("UTRX"),C=n("ibCP"),P=n("G3Y2"),D=n("sUUx"),I=n("GIsW"),T=n("PzWS"),E=n("yZ7J"),A=n("TmrD"),N=n("18PS"),R=n("K6Df"),L=n("Q7mD"),M=n("TSYQ"),z=n.n(M),B=n("u1De"),q=n("CFVL"),U=n("2Ze5"),K=n("/7zm"),F=n("UVeO"),V="I2Hu1JdQgPR95GSu1cGDHQ==",H="RCqGUuFXnxTAR1qp4G-dbg==",Y="+zZcyFAOKyuZm8Jmu6oiVg==",W="_278nCTwsfDLepAkR6h7DVA==",G="ebB0LMMSXUKxa2KPPGyHQA==",Q="+iHHT-ZRDCXOJp7HDA14iw==",J="oODj1Z0yWbJzU0t1fXTK0g==",X="_2ZGZ6s0AdJ62ebBFf9sWSA==",Z=n("nKUr");function $(e){var t=e.user,n=e.project,r=e.collaborators,c=e.projectCollaborators,i=e.readOnlyCollaborators,a=e.selected,o=e.removable,s=e.onItemClick,l=e.onCollaboratorRemove,u=e.onUserLeave,d=Object(x.p)(n.id,{collaborators:r,user:t}).map((function(e){return e.id}));return Object(Z.jsxs)(g.a,{"data-testid":"collaborators-list",children:[c.map((function(e){return Object(Z.jsx)(ee,{user:e,project:n,self:e.id===t.id,pending:d.includes(e.id),selected:null==a?void 0:a.includes(e.email),removable:void 0===o?!n.team_inbox:o,onItemClick:s,onCollaboratorRemove:l,onUserLeave:u},e.id)})),null==i?void 0:i.map((function(e){return Object(Z.jsx)(ee,{user:e,project:n,self:e.id===t.id,pending:d.includes(e.id),selected:!0,readOnly:!0},e.id)}))]})}function ee(e){var t,n=e.user,r=e.project,c=e.self,a=e.pending,o=e.selected,s=e.comboboxOption,u=e.removable,d=e.readOnly,j=e.onItemClick,b=e.onCollaboratorRemove,p=e.onUserLeave,O=c?Object(i.d)("collaborator_list","Me"):Object(U.a)(n.full_name),h=Object(l.k)(),m=Object(K.c)({message:Object(Z.jsx)(R.a,{string:Object(i.a)("Are you sure you want to remove {user}?"),mapping:{user:n.full_name||n.email}}),confirmLabel:"Ok",onConfirm:function(){"function"==typeof b&&b(n.id,r.id)}}),v=Object(K.c)({message:Object(i.a)("Are you sure you want to leave this project? This will delete it from your account."),confirmLabel:"Ok",onConfirm:function(){"function"==typeof p&&(p(r.id),h({view:{type:"inbox"},replace:!0}))}});return Object(Z.jsx)(y.a,{"aria-selected":o&&!d,padding:"small",className:z()(H,(t={},f()(t,G,s),f()(t,W,d),t)),style:{cursor:j||s?"pointer":"default"},onClick:j?function(){return j(n)}:void 0,children:Object(Z.jsxs)(S.b,{alignY:"center",children:[Object(Z.jsx)(S.a,{width:"content",children:Object(Z.jsx)(N.a,{user:n,size:"small"})}),Object(Z.jsx)(S.a,{width:"auto",children:Object(Z.jsxs)(g.a,{paddingLeft:"small",children:[Object(Z.jsxs)(T.a,{space:"small",children:[Object(Z.jsx)(I.a,{tone:"secondary",children:s?Object(Z.jsx)(E.d,{text:O}):O}),a?Object(Z.jsx)(L.a,{variant:"color",children:Object(i.a)("Pending")}):null]}),Object(Z.jsx)(I.a,{tone:"secondary",children:s?Object(Z.jsx)(E.d,{text:n.email}):n.email})]})}),u&&m?Object(Z.jsx)(S.a,{exceptionallySetClassName:Y,width:"content",children:Object(Z.jsx)(P.a,{variant:"quaternary","aria-label":c?Object(i.a)("Leave this project"):Object(i.a)("Remove collaborator"),onClick:c?v:m,icon:c?Object(Z.jsx)(B.a,{}):Object(Z.jsx)(q.a,{})})}):null,o?Object(Z.jsx)(S.a,{width:"content",children:Object(Z.jsx)(F.p,{className:X})}):null]})})}var te="bTGxEfl",ne="DkbQfBe";function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e){var t=e.project,n=e.collaborators,a=e.projectCollaborators,o=void 0===a?[]:a,s=Boolean(t.workspace_id),l=Object(c.g)(),u=Object(r.useState)({inputValue:"",isVisible:!1}),d=j()(u,2),b=d[0],p=d[1],O=b.inputValue.toLocaleLowerCase().split(",").map((function(e){return e.trim()})),f=O.every((function(e){return Object(A.a)(e)})),h=O[O.length-1],m=Object(x.g)(n,h),v=o.some((function(e){return O.includes(e.email.trim().toLocaleLowerCase())}));return Object(Z.jsx)(_.a,{onEscape:function(e){b.isVisible&&(e.preventDefault(),e.stopPropagation())},propagateEscape:!0,children:Object(Z.jsxs)(y.a,{children:[Object(Z.jsxs)(S.b,{space:"small",alignY:"bottom",children:[Object(Z.jsx)(S.a,{width:"auto",children:Object(Z.jsx)(E.a,{autoSelect:!0,visible:b.isVisible,gutter:4,onValueChange:function(e){p({inputValue:e,isVisible:!0})},children:Object(Z.jsxs)(y.a,{position:"relative",children:[Object(Z.jsx)(E.b,{as:C.a,value:b.inputValue,onFocus:function(){return p(ce(ce({},b),{},{isVisible:!0}))},onBlur:function(){return p(ce(ce({},b),{},{isVisible:!1}))},label:s?"":Object(i.a)("Email or Name"),"aria-label":s?Object(i.d)("ProjectShare","Add members by name or email"):void 0,placeholder:s?Object(i.d)("ProjectShare","Add members by name or email"):Object(i.a)("Email or Name")}),b.isVisible&&m.length>0?Object(Z.jsx)(E.e,{"aria-label":Object(i.a)("List of existent collaborators"),className:s?te:V,children:m.map((function(e){return Object(Z.jsx)(E.c,{className:s?ne:void 0,onClick:function(){return t=e.email,n=O.splice(0,O.length-1).concat(t).join(","),void p({inputValue:n,isVisible:!1});var t,n},children:s?Object(Z.jsx)(ae,{user:e},e.id):Object(Z.jsx)(ee,{user:e,project:t,comboboxOption:!0},e.id)},e.id)}))}):null]})})}),Object(Z.jsx)(S.a,{width:"content",children:Object(Z.jsx)(P.a,{variant:"primary",disabled:!f||v,onClick:function(){p(ce(ce({},b),{},{inputValue:"",isVisible:!1})),O.forEach((function(e){t.workspace_id?l(Object(x.c)(t,e)):l(Object(x.b)(t.id,e))}))},children:Object(i.a)("Invite")})})]}),v?Object(Z.jsx)(y.a,{paddingBottom:"small",children:Object(Z.jsx)(D.a,{tone:"critical",children:Object(i.a)("User is already part of the project")})}):null]})})}function ae(e){var t=e.user;return Object(Z.jsx)(y.a,{padding:"small",children:Object(Z.jsxs)(S.b,{alignY:"center",children:[Object(Z.jsx)(S.a,{width:"content",children:Object(Z.jsx)(N.a,{user:t,size:"small"})}),Object(Z.jsx)(S.a,{width:"auto",children:Object(Z.jsxs)(g.a,{paddingLeft:"small",children:[Object(Z.jsx)(I.a,{size:"copy",weight:"semibold",children:Object(Z.jsx)(E.d,{text:t.full_name})}),Object(Z.jsx)(T.a,{space:"small",children:Object(Z.jsx)(I.a,{size:"caption",tone:"secondary",children:Object(Z.jsx)(E.d,{text:t.email})})})]})})]})})}var oe=n("ej5t");function se(e){var t=e.user,n=e.project,c=e.projects,i=e.collaborators,a=e.goToCollaboratorsTab,s=Object(o.B)({projects:c,collaborators:i},[Object(oe.a)(n.id)]),l=Object(r.useState)(null),u=j()(l,2),d=u[0],b=u[1];if(0===s.length)return Object(Z.jsx)(k.j,{tab:"invite_from_project"});if(!d){var p=s.map((function(e){return Object(Z.jsx)(le,{project:e,onClick:function(){return b(e.id)}},e.id)}));return Object(Z.jsx)(g.a,{"data-testid":"projects-list",children:p})}var O=Object(o.k)({projects:c},d);return O?Object(Z.jsx)(ue,{user:t,projectId:n.id,selectedProject:O,collaborators:i,goBack:function(){return b(null)},goToCollaboratorsTab:a}):null}function le(e){var t=e.project,n=e.onClick;return Object(Z.jsx)(y.a,{padding:"small",className:Q,onClick:n,children:Object(Z.jsxs)(S.b,{alignY:"center",children:[Object(Z.jsx)(S.a,{width:"content",children:Object(Z.jsx)(F.Vb,{project:t,isShared:!0})}),Object(Z.jsx)(S.a,{width:"auto",children:Object(Z.jsx)(y.a,{paddingLeft:"small",children:Object(Z.jsx)(I.a,{tone:"secondary",children:t.name})})})]})})}function ue(e){var t=e.user,n=e.projectId,a=e.selectedProject,o=e.collaborators,s=e.goBack,l=e.goToCollaboratorsTab,u=Object(c.g)(),d=Object(x.t)({collaborators:o},n,a.id),b=Object(x.s)({collaborators:o},n,a.id),O=Object(r.useState)([]),f=j()(O,2),h=f[0],m=f[1],v=0!==h.length&&h.length===d.length;return Object(Z.jsxs)(g.a,{children:[a?Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(y.a,{"aria-selected":v,padding:"small",className:J,onClick:function(){m(v?[]:d.map((function(e){return e.email})))},children:Object(Z.jsxs)(S.b,{alignY:"center",children:[Object(Z.jsx)(S.a,{width:"content",children:Object(Z.jsx)(F.Ib,{})}),Object(Z.jsx)(S.a,{width:"auto",children:Object(Z.jsx)(y.a,{paddingLeft:"small",children:Object(Z.jsx)(I.a,{tone:"secondary",children:Object(i.a)("Everyone")})})}),v?Object(Z.jsx)(S.a,{width:"content",children:Object(Z.jsx)(F.p,{className:X})}):null]})}),Object(Z.jsx)($,{user:t,project:a,collaborators:o,projectCollaborators:d,readOnlyCollaborators:b,selected:h,removable:!1,onItemClick:function(e){var t=e.email;h.includes(t)?m(h.filter((function(e){return e!==t}))):m([].concat(p()(h),[t]))}})]}):null,Object(Z.jsxs)(S.b,{paddingTop:"large",align:"right",children:[Object(Z.jsx)(S.a,{width:"content",children:Object(Z.jsx)(y.a,{paddingRight:"small",children:Object(Z.jsx)(P.a,{variant:"secondary",exceptionallySetClassName:"reactist_button--secondary",onClick:s,children:Object(i.a)("Back")})})}),Object(Z.jsx)(S.a,{width:"content",children:Object(Z.jsx)(P.a,{variant:"primary",exceptionallySetClassName:"reactist_button--primary",disabled:0===h.length,onClick:function(){h.map((function(e){return u(Object(x.b)(n,e))})),m([]),s(),l()},children:Object(i.a)("Invite")})})]})]})}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e){var t=Object(l.k)();return Object(Z.jsxs)(h.a,{width:"small",isOpen:!0,onDismiss:function(){t({view:"current"})},children:[Object(Z.jsx)(h.f,{withDivider:!0,children:Object(Z.jsx)(m.a,{level:1,children:Object(i.a)("Share options")})}),Object(Z.jsx)(h.c,{children:Object(Z.jsx)(pe,je({},e))})]})}function pe(e){var t=e.project,n=Object(c.h)((function(e){return Object(x.n)(e,t.id,!0)})),r=Object(c.h)((function(e){return e})),i=r.user,a=r.projects,o=r.collaborators;return t.team_inbox?Object(Z.jsx)($,{user:i,project:t,collaborators:o,projectCollaborators:n}):Object(Z.jsx)(Oe,{user:i,project:t,projects:a,collaborators:o})}function Oe(e){var t=e.user,n=e.project,a=e.projects,s=e.collaborators,l=Object(c.g)(),u=Object(x.k)({user:t,collaborators:s}),d=[].concat(p()(Object(x.p)(n.id,{collaborators:s,user:t})),[Object(w.a)(t)],p()(Object(x.h)(n.id,{collaborators:s,user:t}))),b=1===d.length&&d.some((function(e){return e.id===t.id})),O=Object(r.useState)("collaborators"),f=j()(O,2),h=f[0],m=f[1];return Object(Z.jsxs)(v.d,{variant:"neutral",selectedId:h,onSelectedIdChange:m,children:[Object(Z.jsxs)(v.b,{"aria-label":Object(i.a)("Invite collaborators"),children:[Object(Z.jsx)(v.a,{id:"collaborators",children:Object(i.a)("Collaborators")}),Object(Z.jsx)(v.a,{id:"invitefromproject",children:Object(i.a)("Invite From Project")})]}),Object(Z.jsx)(v.c,{id:"collaborators",render:"lazy",children:Object(Z.jsxs)(g.a,{paddingTop:"medium",space:"medium",children:[Object(Z.jsx)(ie,{collaborators:u,projectCollaborators:d,project:n}),b?Object(Z.jsx)(k.j,{tab:"collaborators"}):Object(Z.jsx)($,{user:t,project:n,collaborators:s,projectCollaborators:d,onCollaboratorRemove:function(e,t){l(Object(x.a)(e,t))},onUserLeave:function(e){l(Object(o.x)(e)),Signals.sendSignal("refresh_interface")}})]})}),Object(Z.jsx)(v.c,{id:"invitefromproject",render:"lazy",children:Object(Z.jsx)(y.a,{paddingTop:"large",children:Object(Z.jsx)(se,{user:t,project:n,projects:a,collaborators:s,goToCollaboratorsTab:function(){m("collaborators")}})})})]})}function fe(){var e=Object(l.l)("projectId").id,t=Object(c.h)((function(t){return Object(o.k)(t,e)})),n=Object(c.h)(s.n)||{},d=Object(l.k)();return Object(r.useEffect)((function(){t||d({view:"current"})}),[t,d]),Object(r.useEffect)((function(){var e=n.verification_status;e||Object(a.c)("ProjectShare: Unverified user attempted to share",{user:{id:n.id,email:n.email,verification_status:n.verification_status}}),"blocked"!==e&&"unverified"!==e||(alert(Object(i.a)("Project sharing is not available for unverified accounts.")),d({view:"current"}))}),[d,n.id,n.email,n.verification_status]),t?t.inbox_project?Object(Z.jsx)(u.a,{onConfirm:function(){return d({view:"current"})},onCancel:function(){return d({view:"current"})},isOpen:!0,confirmLabel:Object(i.a)("Ok"),children:Object(i.a)("It's not possible to share the inbox project. Please share a regular project.")}):t.workspace_id?null:Object(Z.jsx)(be,{project:t}):null}var he=n("GYl5"),me=n("GgqS"),ve=n("LvDl"),ge=n("mVlx"),ye=n("VKB9"),xe=n("TxzI"),we=n("kYI+"),ke=n("GpCm"),_e=n("fsMz"),Se=n("G5Ko"),Ce=n("R/7U"),Pe=n("a4tM"),De="ce3bQFM",Ie="AiHyB8D",Te="i7wJkP4";function Ee(e){var t=e.workspaceId;return Object(Z.jsxs)(y.a,{className:De,children:[Object(Z.jsx)(I.a,{weight:"bold",children:Object(i.d)("ProjectShare","Access")}),Object(Z.jsxs)(g.a,{"data-testid":"access-settings",dividers:"secondary",paddingTop:"xsmall",children:[t?Object(Z.jsx)(Ae,{workspaceId:t}):null,Object(Z.jsx)(Ne,{})]})]})}function Ae(e){var t=e.workspaceId,n=Object(c.h)((function(e){return Object(Se.d)(e,t)})),r=Object(c.h)((function(e){return Object(_e.c)(e,t).length}));return n?Object(Z.jsx)(y.a,{paddingY:"small",paddingLeft:"small",children:Object(Z.jsxs)(S.b,{alignY:"center",children:[Object(Z.jsx)(S.a,{width:"content","aria-hidden":!0,children:Object(Z.jsx)(y.a,{className:Te,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"standard",children:Object(Z.jsx)(Ce.a,{src:n.logo_medium,size:"small"})})}),Object(Z.jsx)(S.a,{width:"auto",children:Object(Z.jsxs)(g.a,{paddingLeft:"small",children:[Object(Z.jsx)(I.a,{size:"copy",weight:"semibold",children:Object(Z.jsx)(R.a,{string:Object(i.d)("ProjectShare",'Everyone at "{workspaceName}"'),mapping:{workspaceName:n.name}})}),Object(Z.jsx)(T.a,{space:"small",children:Object(Z.jsx)(I.a,{size:"caption",tone:"secondary",children:Object(Z.jsx)(R.a,{string:Object(i.c)("ProjectShare","{count} member","{count} members",r),mapping:{count:r}})})})]})}),Object(Z.jsx)(S.a,{width:"content",children:Object(Z.jsx)(y.a,{paddingRight:"medium",children:Object(Z.jsx)(I.a,{size:"copy",weight:"semibold",tone:"secondary",children:Object(i.d)("ProjectShare","Full access")})})})]})}):null}function Ne(){return Object(Z.jsx)(y.a,{paddingY:"small",paddingLeft:"small",children:Object(Z.jsxs)(S.b,{alignY:"center",children:[Object(Z.jsx)(S.a,{width:"content","aria-hidden":!0,children:Object(Z.jsx)(y.a,{background:"highlight",className:Ie,display:"flex",justifyContent:"center",alignItems:"center",children:Object(Z.jsx)(Pe.a,{})})}),Object(Z.jsx)(S.a,{width:"auto",children:Object(Z.jsx)(g.a,{paddingLeft:"small",children:Object(Z.jsx)(I.a,{size:"copy",weight:"semibold",children:Object(i.d)("ProjectShare","Only people invited")})})}),Object(Z.jsx)(S.a,{width:"content",children:Object(Z.jsx)(y.a,{paddingRight:"medium",children:Object(Z.jsx)(I.a,{size:"copy",weight:"semibold",tone:"secondary",children:Object(i.d)("ProjectShare","Can access")})})})]})})}var Re=n("1AH3"),Le="ZTqDvNS";function Me(e){var t=e.user,n=e.project,r=e.collaborators,c=Object(x.p)(n.id,{collaborators:r,user:t}),a=Object(x.h)(n.id,{collaborators:r,user:t}),o=Object(w.a)(t);return Object(Z.jsxs)(y.a,{children:[Object(Z.jsx)(I.a,{weight:"bold",children:Object(i.d)("ProjectShare","Members")}),Object(Z.jsxs)(g.a,{"data-testid":"collaborators-list",dividers:"secondary",paddingTop:"xsmall",role:"list",children:[Object(Z.jsx)(ze,{user:o,isCurrentUser:!0,primaryAction:Object(Z.jsx)(qe,{projectId:n.id,workspaceId:n.workspace_id})},t.id),a.map((function(e){return Object(Z.jsx)(ze,{user:e,primaryAction:Object(Z.jsx)(Be,{collaborator:e,projectId:n.id})},e.id)})),c.map((function(e){return Object(Z.jsx)(ze,{user:e,isPending:!0,primaryAction:Object(Z.jsx)(Be,{collaborator:e,projectId:n.id})},e.id)}))]})]})}function ze(e){var t=e.user,n=e.primaryAction,r=e.isCurrentUser,c=void 0!==r&&r,a=e.isPending,o=void 0!==a&&a,s=e.isGuest,l=void 0!==s&&s;return Object(Z.jsx)(y.a,{paddingY:"small",paddingLeft:"small",role:"listitem",children:Object(Z.jsxs)(S.b,{alignY:"center",children:[Object(Z.jsx)(S.a,{width:"content",children:Object(Z.jsx)(N.a,{user:t,size:"small"})}),Object(Z.jsx)(S.a,{width:"auto",children:Object(Z.jsxs)(g.a,{paddingLeft:"small",children:[Object(Z.jsxs)(I.a,{size:"copy",weight:"semibold",children:[t.full_name," ",c?"(".concat(Object(i.a)("You"),")"):null]}),Object(Z.jsxs)(T.a,{exceptionallySetClassName:Le,children:[Object(Z.jsx)(I.a,{size:"caption",tone:"secondary",lineClamp:1,children:t.email}),l?Object(Z.jsx)(I.a,{size:"caption",tone:"secondary",lineClamp:1,children:Object(i.d)("ProjectShare","Guest")}):null,o?Object(Z.jsx)(I.a,{size:"caption",tone:"secondary",lineClamp:1,children:Object(i.a)("Pending")}):null]})]})}),n?Object(Z.jsx)(S.a,{width:"content",children:n}):null]})})}function Be(e){var t=e.collaborator,n=e.projectId,r=Object(c.g)(),a=Object(K.c)({message:Object(Z.jsx)(R.a,{string:Object(i.a)("Are you sure you want to remove {user}?"),mapping:{user:t.full_name||t.email}}),confirmLabel:"Ok",onConfirm:function(){r(Object(x.a)(t.id,n))}});return Object(Z.jsx)(P.a,{variant:"quaternary",onClick:a,children:Object(i.d)("ProjectShare","Remove")})}function qe(e){var t=e.projectId,n=e.workspaceId,r=Object(l.k)(),a=Object(c.g)(),s=Object(K.c)({message:Object(i.a)("Are you sure you want to leave this project? This will delete it from your account."),confirmLabel:"Ok",onConfirm:function(){a(n?Object(Re.f)({projectId:t}):Object(o.x)(t)),r({view:{type:"inbox"},replace:!0}),Signals.sendSignal("refresh_interface")}});return Object(Z.jsx)(P.a,{variant:"quaternary",onClick:s,children:Object(i.d)("ProjectShare","Leave project")})}var Ue=n("O5tY"),Ke=[];var Fe="XkKoi2v",Ve="Fojkl8U",He="rZzrGY4",Ye="VCFFU3g",We="_82QCGhk";function Ge(e){var t=e.referenceElement,n=e.project,a=Boolean(n.workspace_id),o=Object(c.h)((function(e){return e.user})),s=Object(c.h)((function(e){return e.collaborators})),u=Object(x.k)({user:o,collaborators:s}),d=Object(x.n)({user:o,collaborators:s},n.id),j=function(e){var t=Object(c.h)((function(t){return e?Object(_e.c)(t,e):Ke})),n=Object(c.h)((function(t){return e?Object(_e.d)(t,e):void 0})),i=!n||"ERROR"===n,a=Object(c.g)();return Object(r.useEffect)((function(){e&&i&&a(Object(Ue.f)({workspaceId:e}))}),[e,i,a]),t}(n.workspace_id),b=Object(r.useMemo)((function(){return j.map(Qe)}),[j]),p=Object(l.k)(),O=Object(l.j)(),f=Object(r.useMemo)((function(){return a?Object(ve.differenceBy)(b,d,(function(e){return e.id})).filter((function(e){return e.id!==o.id})):Object(ve.uniqBy)(b.concat(u),"email").filter((function(e){return e.id!==o.id}))}),[b,d,u,o.id,a]),h=Object(he.useEvent)((function(){p({view:"current"})})),m="/share"===(null==O?void 0:O.subPath)&&Boolean(t),v=Object(ye.b)().copyToClipboard,w=Object(he.useEvent)((function(){v(Object(ge.a)(n))}));return Object(Z.jsx)(ke.c,{renderReferenceElement:t,placement:"bottom",withArrow:!1,isShown:m,onClose:h,className:Ve,overlayClassName:Fe,modifiers:[ke.b],allowEventPropagation:!0,withFocusLockAutofocus:!1,children:Object(Z.jsxs)(y.a,{className:He,background:"default",borderRadius:"full",display:"flex",flexDirection:"column",tabIndex:-1,children:[Object(Z.jsx)(y.a,{padding:"large",children:Object(Z.jsx)(ie,{project:n,collaborators:f,projectCollaborators:d})}),Object(Z.jsxs)(g.a,{space:"medium",paddingX:"large",exceptionallySetClassName:Ye,children:[Object(Z.jsx)(Ee,{workspaceId:n.workspace_id}),Object(Z.jsx)(Me,{user:o,project:n,collaborators:s})]}),Object(Z.jsxs)(y.a,{padding:"large",display:"flex",alignItems:"center",justifyContent:"spaceBetween",className:We,children:[Object(Z.jsx)(me.a,{variant:"quaternary",startIcon:Object(Z.jsx)(we.a,{}),href:"https://todoist.com/help/articles/sharing-projects-and-collaborating",openInNewTab:!0,children:Object(i.d)("ProjectShare","Learn about sharing")}),Object(Z.jsx)(P.a,{variant:"secondary",startIcon:Object(Z.jsx)(xe.a,{}),onClick:w,children:Object(i.a)("Copy link")})]})]})})}function Qe(e){return{id:e.user_id,email:e.user_email,full_name:e.full_name,timezone:e.timezone,image_id:e.image_id}}function Je(e,t){t({view:{type:"project",projectId:e},subPath:"/share"})}},tX4P:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r,c,i,a=n("q1tI");function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e){return a.createElement("svg",o({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.createElement("mask",{id:"facebook-color-filled_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:18,height:18},r||(r=a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.001.001H18v17.89H0V0z",fill:"#fff"}))),c||(c=a.createElement("g",{mask:"url(#facebook-color-filled_svg__a)"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 9a9 9 0 10-10.406 8.89v-6.288H5.309V9h2.285V7.017c0-2.255 1.343-3.501 3.4-3.501.984 0 2.014.176 2.014.176v2.214h-1.135c-1.118 0-1.467.694-1.467 1.406V9h2.496l-.399 2.602h-2.097v6.289C14.71 17.216 18 13.492 18 9z",fill:"#1877F2"}))),i||(i=a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.503 11.602l.4-2.602h-2.497V7.312c0-.712.349-1.406 1.467-1.406h1.135V3.692s-1.03-.176-2.015-.176c-2.056 0-3.4 1.246-3.4 3.501V9H5.31v2.602h2.285v6.289a9.067 9.067 0 002.812 0V11.6h2.097",fill:"#fff"})))}n.p},v44V:function(e,t,n){"use strict";n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return Re}));var r=n("lSNA"),c=n.n(r),i=n("/MKj"),a=n("Vbab"),o=n("S+H7"),s=n("t4uw"),l=n("UVeO"),u=n("UDQ1"),d=n("18PS"),j=n("QILm"),b=n.n(j),p=n("q1tI"),O=n("kazx"),f=n("GIsW"),h=n("G3Y2"),m=n("4rNB"),v=n("m6DX"),g="_7mOB4eH",y="Bk3otk8",x="_7BwfDu4",w="Czvoedn",k="_6rs3ItF",_=n("nKUr"),S=["icon","placeholder","presentation","shortcut","text","tooltip","tooltipRemove","showLabels","onRemove"];function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=Object(p.forwardRef)((function(e,t){var n=e.icon,r=e.placeholder,c=e.presentation,i=void 0!==c&&c,a=e.shortcut,o=e.text,s=e.tooltip,u=e.tooltipRemove,d=void 0===u?"":u,j=e.showLabels,p=void 0!==j&&j,C=e.onRemove,D=b()(e,S);function I(e){var t;null===(t=D.onClick)||void 0===t||t.call(D,e)}function T(e){var t;null===(t=D.onKeyDown)||void 0===t||t.call(D,e)}function E(e){e.stopPropagation(),null==C||C()}function A(){var e=!i&&void 0!==o&&o!==r;return Object(_.jsxs)(O.a,P(P(P({},D),i?{"data-presentation":"true"}:{onClick:I,onKeyDown:T}),{},{className:g,role:"button",ref:t,children:[Object(_.jsxs)(O.a,{className:y,display:"flex",alignItems:"center",children:[n?Object(_.jsx)(f.a,{tone:"secondary",exceptionallySetClassName:x,children:n}):null,p?Object(_.jsx)(f.a,{size:"copy",tone:"secondary",exceptionallySetClassName:w,children:null!=o?o:r}):null]}),e?Object(_.jsx)(h.a,{"aria-label":d,exceptionallySetClassName:k,variant:"quaternary",icon:Object(_.jsx)(l.E,{}),onClick:E}):null]}))}return!i&&s?Object(_.jsx)(m.a,{content:a?Object(_.jsx)(v.a,{title:s,shortcut:a}):s,children:A()}):A()}));function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=e.assignee,n=e.projectId,r=e.showLabels,c=e.onAssigneeSelect,j=Object(i.h)((function(e){return t?Object(o.o)(t,e):void 0})),b=j?Object(_.jsx)(d.a,{user:j,size:"xxsmall"}):Object(_.jsx)(l.Lb,{}),p=j?Object(s.a)(j.full_name):void 0;function O(){c({target:{value:null}})}return Object(_.jsx)(u.a,{projectId:n,value:null==j?void 0:j.id,onChange:function(e){c(e)},children:function(e){var t=e.buttonProps;return Object(_.jsx)(D,T(T({},t),{},{"aria-label":Object(a.a)("Assign person"),icon:b,placeholder:Object(a.a)("Assignee"),text:p,shortcut:"+",tooltip:Object(a.a)("Assign person"),tooltipRemove:Object(a.a)("Remove assignee"),showLabels:!!j||r,onRemove:O}))}})}var A=n("W8Il"),N=n("92A6"),R=n("hzT6"),L=n("fCkL");function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e){var t=e.item,n=e.showLabels,r=e.onDueDateSelect;function c(){r(null)}return Object(_.jsx)(L.a,{selectedItems:[t],selectedDate:t.due,placement:"bottom-start",onDateSelect:r,renderReferenceElement:function(e){return Object(_.jsx)(D,z(z({},e),{},{"aria-label":Object(a.a)("Set due date"),icon:Object(_.jsx)(A.a,{className:Object(N.a)(t.due)}),placeholder:Object(a.a)("Due date"),text:t.due?Object(_.jsx)(R.a,{date:t.due,showDue:!0,showTime:!0,autoUpdateInterval:1e3}):void 0,tooltip:Object(a.a)("Set due date"),tooltipRemove:Object(a.a)("Remove due date"),showLabels:!!t.due||n,onRemove:c}))}})}var q=n("Muja"),U=n("gVGk"),K=n("+ger"),F=n("I2PJ");function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e){var t=e.selectedLabels,n=e.showLabels,r=e.onLabelsSelect,o=Object(i.h)((function(e){return Object(U.e)(e)})),s=null==o?void 0:o.find((function(e){return(null==t?void 0:t[0])===e.name})),u=c()({},"--action-chip-button-color",K.d(null==s?void 0:s.color));function d(e){var n=e.target;Object(q.a)(t,n.value)||r(n.value)}function j(){r(t.filter((function(e){return e!==t[0]})))}function b(){r([])}return t.length?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(F.a,{value:t,onChange:d,children:function(e){var n=e.buttonProps;return Object(_.jsx)(D,H(H({},n),{},{"aria-label":Object(a.a)("Add label(s)"),"data-action-hint":"task-actions-add-labels",style:u,icon:Object(_.jsx)(l.eb,{}),text:t[0],shortcut:"@",tooltip:Object(a.a)("Add label"),tooltipRemove:Object(a.a)("Remove label"),showLabels:!0,onRemove:j}))}}),t.length>1?Object(_.jsx)(F.a,{value:t,onChange:d,children:function(e){var n=e.buttonProps;return Object(_.jsx)(D,H(H({},n),{},{"aria-label":Object(a.a)("Add label(s)"),"data-action-hint":"task-actions-add-labels",icon:Object(_.jsx)(l.eb,{}),text:(t.length-1).toString(),shortcut:"@",tooltip:Object(a.a)("Add label"),tooltipRemove:Object(a.a)("Remove all labels"),showLabels:!0,onRemove:b}))}}):null]}):Object(_.jsx)(F.a,{value:t,onChange:d,children:function(e){var t=e.buttonProps;return Object(_.jsx)(D,H(H({},t),{},{"aria-label":Object(a.a)("Add labels"),"data-action-hint":"task-actions-add-labels",icon:Object(_.jsx)(l.cb,{}),placeholder:Object(a.a)("Labels"),shortcut:"@",tooltip:Object(a.a)("Add label"),showLabels:n}))}})}var W=n("RsDw"),G=n("1myf"),Q=n("vV6a"),J=n("xg3b"),X=n("+HCy"),Z=n("++xj"),$=n("4vAh"),ee=n("wRGw"),te=n("HvrJ"),ne=n("9d0M"),re="shZYcKl",ce="N6RijzB",ie="A+LS2wb";function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se=Object(p.forwardRef)((function(e,t){var n=e.inactiveUiQuickAddFeatures,r=e.item,c=e.onDueDateSelect,s=e.onInsertNaturalLanguageCharacter,u=e.onPrioritySelect,d=e.onReminderAdd,j=e.onReminderDelete,b=Object(i.h)((function(e){return Object(o.q)(e,r.project_id)})),h=Object(i.h)((function(e){return e.user.start_day})),v=Object(i.h)((function(e){return e.user.weekend_start_day})),g=Object(i.h)((function(e){return e.user.next_week})),y=Object(p.useMemo)((function(){return Object(G.a)(r.reminders,[function(e){return"location"===e.type?e.name:e.due.date}])}),[r.reminders]),x=Object(p.useRef)(null),w=Object(p.useRef)(null),k=Object(p.useRef)(null);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(W.a,{children:[Object(_.jsx)(W.b,{ref:k,as:D,icon:Object(_.jsx)(Z.a,{}),"aria-label":Object(a.a)("More actions")}),Object(_.jsxs)(W.e,{"aria-label":Object(a.a)("More actions"),exceptionallySetClassName:ie,ref:t,children:[n.includes("date")?Object(_.jsx)(te.a,{item:r,weekStartDay:h,weekendStartDay:v,nextWeekDay:g,onSelect:c,customMoreButton:Object(_.jsx)(m.a,{content:Object(a.a)("More"),children:Object(_.jsx)("button",{"aria-label":Object(a.a)("More dates"),className:"icon_scheduler",onClick:function(){var e;return null==w||null===(e=w.current)||void 0===e?void 0:e.onClick()},role:"menuitem",children:Object(_.jsx)(l.qb,{"aria-hidden":!0})})})}):null,n.includes("priority")?Object(_.jsx)(ee.a,{selected:r.priority,onSelect:function(e){return u(e)}}):null,n.includes("date")||n.includes("priority")?Object(_.jsx)("hr",{}):null,b&&n.includes("assignee")?Object(_.jsxs)(W.d,{onSelect:function(){return s(Q.b)},children:[Object(_.jsx)(l.Jb,{"aria-hidden":!0}),Object(_.jsx)(O.a,{flexGrow:1,children:Object(_.jsx)(f.a,{size:"copy",children:Object(a.a)("Assignee")})}),Object(_.jsx)(f.a,{size:"caption",tone:"secondary",children:Q.b})]}):null,n.includes("label")?Object(_.jsxs)(W.d,{onSelect:function(){return s(Q.d)},children:[Object(_.jsx)(l.bb,{"aria-hidden":!0}),Object(_.jsx)(O.a,{flexGrow:1,children:Object(_.jsx)(f.a,{size:"copy",children:Object(a.a)("Labels")})}),Object(_.jsx)(f.a,{size:"caption",tone:"secondary",children:Q.d})]}):null,n.includes("reminder")?Object(_.jsxs)(W.d,{onSelect:function(){var e;return null==x||null===(e=x.current)||void 0===e?void 0:e.onClick()},children:[Object(_.jsx)($.a,{"aria-hidden":!0}),Object(a.a)("Reminders")]}):null,Object(_.jsxs)(W.d,{onSelect:function(){return s(Q.o)},children:[Object(_.jsx)(l.tb,{"aria-hidden":!0}),Object(_.jsx)(O.a,{flexGrow:1,children:Object(_.jsx)(f.a,{size:"copy",children:Object(a.a)("Move to project")})}),Object(_.jsx)(f.a,{size:"caption",tone:"secondary",children:Q.o})]}),Object(_.jsx)("hr",{}),Object(_.jsx)(J.a,{modern:!0,composerType:"task"}),Object(_.jsx)("hr",{}),Object(_.jsx)(W.d,{to:"/app/settings/quick-customization",as:X.e,exceptionallySetClassName:re,children:Object(a.a)("Edit task actions")})]})]}),Object(_.jsx)(ne.a,{item:r,onClose:function(){var e;return null==k||null===(e=k.current)||void 0===e?void 0:e.focus()},onReminderAdd:d,onReminderDelete:j,reminders:y,children:function(e){return x.current=e,Object(_.jsx)("div",oe(oe({},e),{},{className:ce}))}}),Object(_.jsx)(L.a,{selectedDate:r.due,selectedItems:[r],onDateSelect:c,renderReferenceElement:function(e){return w.current=e,Object(_.jsx)("div",oe(oe({},e),{},{className:ce}))}})]})})),le=n("nALT"),ue=n("YrBN");function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e){var t=e.priority,n=e.showLabels,r=e.onPrioritySelect;function c(){r(1)}return Object(_.jsx)(ue.a,{priority:t,onSelect:r,"data-priority":5-t,children:function(e){var r=e.buttonProps;return Object(_.jsx)(D,je(je({},r),{},{"aria-label":Object(a.a)("Set priority"),"data-action-hint":"task-actions-priority-picker",icon:Object(_.jsx)(le.a,{priority:5-t,size:"16"}),placeholder:Object(a.a)("Priority"),shortcut:{variants:[["p1"],["p2"],["p3"],["p4"]]},text:1===t?Object(a.a)("Priority"):Object(a.a)("P%s").replace("%s","".concat(5-t)),tooltip:Object(a.a)("Set priority"),tooltipRemove:Object(a.a)("Remove priority"),showLabels:1!==t||n,onRemove:c}))}})}var pe=n("cl+s"),Oe=n("mxZy"),fe=n("yrCE"),he=n("5rmi");function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e){var t=e.item,n=e.showLabels,r=e.onReminderAdd,c=e.onReminderClose,i=e.onReminderDelete,o=e.onReminderDeleteAll;var s=Object(p.useMemo)((function(){return Object(G.a)(t.reminders,[function(e){return"location"===e.type?e.name:e.due.date}])}),[t.reminders]);function l(){i(t.reminders[0])}function u(){o()}return s.length?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ne.a,{item:t,reminders:s,withArrow:!1,onReminderAdd:r,onReminderClose:c,onReminderDelete:i,children:function(e){return Object(_.jsx)(D,ve(ve({},e),{},{"aria-label":Object(a.a)("Add reminder(s)"),"data-action-hint":"task-actions-reminders",icon:(t=s[0],"location"===t.type?Object(_.jsx)(he.a,{}):Object(_.jsx)(pe.a,{})),text:Object(Oe.b)(s[0]),tooltip:Object(a.a)("Add reminder"),tooltipRemove:Object(a.a)("Remove reminder"),showLabels:!0,onRemove:l}));var t}}),s.length>1?Object(_.jsx)(ne.a,{item:t,reminders:s,withArrow:!1,onReminderAdd:r,onReminderClose:c,onReminderDelete:i,children:function(e){return Object(_.jsx)(D,ve(ve({},e),{},{"aria-label":Object(a.a)("Add reminder(s)"),"data-action-hint":"task-actions-reminders",icon:Object(_.jsx)(pe.a,{}),text:(s.length-1).toString(),tooltipRemove:Object(a.a)("Remove all reminders"),tooltip:Object(a.a)("Add reminder"),showLabels:!0,onRemove:u}))}}):null]}):Object(_.jsx)(ne.a,{item:t,reminders:s,withArrow:!1,onReminderAdd:r,onReminderClose:c,onReminderDelete:i,children:function(e){return Object(_.jsx)(D,ve(ve({},e),{},{"aria-label":Object(a.a)("Add reminders"),"data-action-hint":"task-actions-reminders",icon:Object(_.jsx)(fe.a,{}),placeholder:Object(a.a)("Reminders"),tooltip:Object(a.a)("Add reminders"),showLabels:n}))}})}var ye=n("J4zp"),xe=n.n(ye),we=n("RIqP"),ke=n.n(we),_e=n("GgqS"),Se=n("tmq0"),Ce=n("xvbm"),Pe=n("SgJ6"),De=n("awe3"),Ie=n("yYH5"),Te=n("VKB9"),Ee="LGR27FZ",Ae="_35Vp3az",Ne="Y5OOYlp",Re=Object(p.forwardRef)((function(e,t){var n=e.item,r=e.isBoardViewActive,c=e.onAssigneeSelect,o=e.onDueDateSelect,s=e.onLabelsSelect,l=e.onPrioritySelect,u=e.onReminderAdd,d=e.onReminderClose,j=e.onReminderDelete,b=e.onReminderDeleteAll,h=e.quickAddMoreActionsMenuRef,m=e.richTextContentInputRef,v=Object(i.h)(Pe.d),g=v.showLabels,y=v.quickAddFeatures,x=!r&&g,w=Object(p.useMemo)((function(){return y.reduce((function(e,t){var r=t.name,c=t.shown,i=!1;switch(r){case"date":i=Boolean(n.due)||c;break;case"assignee":i=Boolean(n.responsible_uid)||c;break;case"priority":i=1!==n.priority||c;break;case"label":i=n.labels.length>0||c;break;case"reminder":i=n.reminders.length>0||c}return{active:[].concat(ke()(e.active),ke()(i?[r]:[])),inactive:[].concat(ke()(e.inactive),ke()(i?[]:[r]))}}),{active:[],inactive:[]})}),[n.due,n.labels,n.priority,n.reminders,n.responsible_uid,y]),k=Object(p.useState)(!1),S=xe()(k,2),C=S[0],P=S[1],D=Object(Te.g)(De.b),I=D.isTipScheduled,T=D.markTipSeen,A=Object(Se.a)(null,(function(){P(Object(Ce.c)("frontend.quick_add_customization")&&Boolean(I))})),N=Object(p.useCallback)((function(e){var t,n=null===(t=m.current)||void 0===t?void 0:t.getEditor();if(n){var r=n.state.doc.content.size-1,c=n.isEmpty?"":" ";n.chain().insertContentAt(r,"".concat(c).concat(e)).focus("end").run()}}),[m]);function R(){P(!1),T()}return Object(_.jsxs)(O.a,{display:"flex",flexWrap:"wrap",className:Ee,ref:t,children:[w.active.map((function(e){switch(e){case"date":return Object(_.jsx)(B,{item:n,showLabels:x,onDueDateSelect:o},e);case"assignee":return Object(_.jsx)(E,{assignee:n.responsible_uid,projectId:n.project_id,showLabels:x,onAssigneeSelect:c},e);case"priority":return Object(_.jsx)(be,{priority:n.priority,showLabels:x,onPrioritySelect:l},e);case"label":return Object(_.jsx)(Y,{selectedLabels:n.labels,showLabels:x,onLabelsSelect:s},e);case"reminder":return Object(_.jsx)(ge,{item:n,showLabels:x,onReminderAdd:u,onReminderClose:d,onReminderDelete:j,onReminderDeleteAll:b},e);default:return null}})),Object(_.jsx)(O.a,{ref:A,children:Object(_.jsx)(se,{inactiveUiQuickAddFeatures:w.inactive,item:n,onDueDateSelect:o,onInsertNaturalLanguageCharacter:N,onPrioritySelect:l,onReminderAdd:u,onReminderDelete:j,ref:h})}),C?Object(_.jsxs)(Ie.b,{isShown:!0,placement:"bottom",variant:"clean",className:Ae,referenceElement:A.current,children:[Object(_.jsxs)(O.a,{display:"flex",flexDirection:"row",width:"full",justifyContent:"spaceBetween",className:Ne,children:[Object(_.jsx)(f.a,{tone:"secondary",children:Object(a.a)("\u26a1\ufe0f New: Pick your Quick Add options.")}),Object(_.jsx)(Ie.a.TooltipDismissButton,{tooltip:De.b,onClick:R})]}),Object(_.jsx)(_e.a,{href:"/app/settings/quick-customization",variant:"primary",onClick:R,children:Object(a.a)("Customize")})]}):null]})}))},vzEX:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"f",(function(){return b})),n.d(t,"j",(function(){return p})),n.d(t,"g",(function(){return O})),n.d(t,"h",(function(){return h}));var r=n("J4zp"),c=n.n(r),i=new RegExp("[".concat(",").concat("|","]")),a=null,o="!assigned",s="assigned to: me",l="assigned to:",u="invalid";function d(e,t){if(!e)return{type:a,ids:null};var n=f(e);return null===n?e.includes("workspace:")?{type:a,ids:null}:j(e,t):j(c()(n,2)[1],t)}function j(e,t){if(e===u)return{type:u,ids:null};if(e===o)return{type:o,ids:null};if(e===s)return{type:s,ids:null};if(e==="".concat(l," "))return{type:l,ids:[]};if(!e.includes(l))return{type:a,ids:null};var n=e.split(i),r=!1,c=n.map((function(e){return e.trim()})).map((function(e){if(!e.startsWith(l))return null;var n=e.replace("".concat(l," "),"");for(var c in t){var i=t[c];if(i.email===n)return i.id}return r=!0,null})).filter((function(e){return null!==e}));return r?{type:u,ids:null}:{type:l,ids:c}}function b(e,t,n,r){return h(function(e,t,n,r){var i=function(e,t,n){switch(e){case s:case o:return e;case l:return t&&t.map((function(e){return n[e]?"".concat(l," ").concat(n[e].email):null})).filter(Boolean).join(",")||a;case a:default:return a}}(e,t,n);if(!r)return i;var u=f(r);if(null===u)return r.includes("workspace:")?i?"(".concat(i,") & (").concat(r,")"):r:i;var d=c()(u,3)[2];return i?"(".concat(i,") & (").concat(d,")"):d}(e,t,n,r))}function p(e){var t=[],n={};if(!e)return{query:null,selectedWorkspaces:n};var r=f(e);if(null===r)return e.includes("workspace:")?(e.split(i).forEach((function(e){var r=/workspace:\s?(.+)\s?/.exec(e);if(null!==r){var c=r[1];n[c]=!0}else t.push(e)})),{query:null,selectedWorkspaces:n}):{query:e,selectedWorkspaces:n};var a=c()(r,3),o=a[1];return a[2].split(i).forEach((function(e){var r=/workspace:\s?(.+)\s?/.exec(e);if(null!==r){var c=r[1];n[c]=!0}else t.push(e)})),{query:o,selectedWorkspaces:n}}function O(e){return e.map((function(e){return"workspace: ".concat(e)})).join(",")}function f(e){return/\((.+)\)\s?&\s?\((.+)\)/.exec(e)}function h(e){return null===e?null:null===f(e)?e.replaceAll("|",","):e.replaceAll(",","|")}},wtTU:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n("J4zp"),c=n.n(r),i=n("q1tI"),a=n("17x9"),o=n.n(a),s=n("Vbab"),l=n("4eld"),u=n("nKUr"),d={name:"",id:null};function j(e){var t=e.section,n=void 0===t?d:t,r=e.onSubmit,a=e.onCancel,o=Object(i.useState)(n.name),j=c()(o,2),b=j[0],p=j[1],O=0===b.trim().length,f=null==n.id?Object(s.a)("Add section"):Object(s.a)("Save");function h(e){e.preventDefault(),O||r(b.trim())}return Object(u.jsxs)("form",{className:"section_form",onSubmit:h,children:[Object(u.jsx)("input",{autoFocus:!0,className:"name",type:"text",value:b,placeholder:Object(s.a)("Name this section"),"aria-label":Object(s.a)("Name this section"),onChange:function(e){return p(e.target.value)},onKeyDown:function(e){"Escape"===e.key&&a()}}),Object(u.jsxs)("div",{className:"actions",children:[Object(u.jsx)(l.a,{type:"submit",className:"ist_button ist_button_red",onClick:h,disabled:O,children:f}),Object(u.jsx)(l.a,{className:"cancel_link",onClick:a,children:Object(s.a)("Cancel")})]})]})}j.propTypes={section:o.a.object,onSubmit:o.a.func.isRequired,onCancel:o.a.func.isRequired}},xceo:function(e,t,n){"use strict";n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return Y}));var r=n("J4zp"),c=n.n(r),i=n("q1tI"),a=n("/MKj"),o=n("zhxZ"),s=n("XKNl"),l=n("0DC5"),u=n("GIsW"),d=n("oDV5"),j=n("G3Y2"),b=n("Qr05"),p=n("ibCP"),O=n("kazx"),f=n("sUUx"),h=n("Vbab"),m=n("RZq6"),v=n("4PH6"),g=n("rn5O"),y=n("8GRe"),x=n("7ptE"),w=n("gd9Y"),k=n("qiGY"),_=n("rbFA"),S=n("kbOS"),C=n("A72/");function P(){var e=Object(w.l)("projectId").id,t=Object(a.h)((function(t){return Object(S.d)(t,e)})),n=Object(w.k)(),r=Object(a.h)((function(e){return Object(C.r)(e)})),c=Object(i.useCallback)((function(){return n({view:"current"})}),[n]),o=Object(i.useMemo)((function(){return r&&void 0!==t}),[r,t]),s=Object(i.useCallback)((function(){o||(c(),r||_.b.showTemplate())}),[o,c,r]);return{canOpen:o,close:c,closeIfUnauthorized:s}}var D=n("nKUr"),I=window.location.origin;function T(){var e=Object(w.l)("projectId").id,t=Object(i.useState)(!0),n=c()(t,2),r=n[0],a=n[1],d=Object(i.useState)(""),j=c()(d,2),b=j[0],p=j[1],O=Object(k.c)("/templates/export_as_url",{method:"POST",body:{project_id:e,use_relative_dates:Number(r).toString()}}),f=O.state,v=O.fetch,g=P(),y=g.canOpen,x=g.close,_=g.closeIfUnauthorized;return Object(i.useEffect)(_,[_]),Object(i.useEffect)((function(){if("rejected"===f.status&&""===b){var e=f.error;try{e.json().then((function(e){return p(e.error)})).catch((function(e){throw e}))}catch(e){Object(m.b)(e)}}}),[b,f]),y?Object(D.jsxs)(o.a,{width:"small",isOpen:!0,onDismiss:x,"aria-label":Object(h.a)("Export as a template"),children:[Object(D.jsx)(o.f,{button:Object(D.jsx)(o.d,{"aria-label":Object(h.a)("Close modal")}),children:Object(D.jsx)(s.a,{level:"1",children:Object(h.a)("Export as a template")})}),Object(D.jsx)(o.c,{children:"pending"===f.status?Object(D.jsx)(l.a,{"aria-label":Object(h.a)("Loading\u2026")}):"resolved"===f.status?Object(D.jsx)(A,{fileUrl:f.value.file_url}):"rejected"===f.status?Object(D.jsx)(u.a,{children:b}):Object(D.jsx)(E,{projectId:e.toString(),relativeDates:r,setRelativeDates:a,handleExportAsCsv:function(e,t){var n=new URL("".concat(I).concat(Object(k.b)("/export/project_as_file")));n.searchParams.append("project_id",e),n.searchParams.append("use_relative_dates",Number(t).toString());var r=window.open(n.toString(),"_blank","noopener noreferrer");r&&(r.opener=null),x()},handleExportAsUrl:function(){v()}})})]}):null}function E(e){var t=e.projectId,n=e.relativeDates,r=e.setRelativeDates,c=e.handleExportAsCsv,i=e.handleExportAsUrl;return Object(D.jsxs)(d.a,{space:"xlarge",children:[Object(D.jsx)(u.a,{children:Object(h.a)("Please pick the template type:")}),Object(D.jsxs)(d.a,{space:"medium",children:[Object(D.jsx)(j.a,{variant:"primary",style:{width:"auto"},onClick:function(){return c(t,n)},startIcon:Object(D.jsx)(g.a,{}),children:Object(h.a)("Export as CSV file")}),Object(D.jsx)(j.a,{variant:"primary",style:{width:"auto"},onClick:i,startIcon:Object(D.jsx)(y.a,{}),children:Object(h.a)("Export as shareable URL")})]}),Object(D.jsx)(d.a,{space:"small",children:Object(D.jsx)(b.a,{label:Object(h.a)("Use relative dates"),checked:n,onChange:function(){return r(!n)},hint:Object(h.a)("Relative means \u201cTomorrow\u201d will get turned into \u201c+1 day\u201d")})})]})}function A(e){var t=e.fileUrl,n=Object(a.g)(),r=Object(i.useState)(!1),o=c()(r,2),s=o[0],l=o[1],u=new URL(I+Object(k.b)("/import/project_from_url"));return u.searchParams.append("t_url",t),Object(D.jsxs)(d.a,{space:"small",children:[Object(D.jsx)(p.a,{label:Object(h.a)("Copy the URL"),readOnly:!0,defaultValue:u.toString()}),s?Object(D.jsx)(f.a,{tone:"critical",children:Object(h.a)("Could not copy. Please do it manually.")}):Object(D.jsx)(O.a,{children:Object(D.jsx)(j.a,{variant:"tertiary",onClick:function(){return e=u.toString(),void Object(x.a)(e).then((function(){return n(Object(v.h)(Object(h.a)("Copied!")))})).catch((function(){l(!0)}));var e},children:Object(h.a)("Copy to clipboard")})})]})}var N=n("lSNA"),R=n.n(N),L=n("pMk8"),M=n("qJlv"),z=n("CodD"),B=n("K6Df"),q=n("PCrL"),U=n("TSYQ"),K=n.n(U),F=n("1zEf"),V="m4zX44IUh-30KFXn82iOKA==",H="zgy3cgho2JdIMJgOV9+wxg==";function Y(){var e=Object(w.l)("projectId").id,t=Object(i.useState)(null),n=c()(t,2),r=n[0],a=n[1],l=Object(i.useRef)(null),b=Object(z.h)(),p=Object(k.d)("/templates/import_into_project",{params:{project_id:e}}),f=c()(p,4),m=f[0],v=f[1],g=f[2],y=f[3],x=m.status,_=P(),S=_.canOpen,C=_.close,I=_.closeIfUnauthorized,T=Object(L.a)((function(){return{accept:M.b.FILE,drop:U,collect:function(e){return{canDrop:e.canDrop()}}}})),E=c()(T,2),A=E[0].canDrop,N=E[1];function U(e){var t=e.files;t[0]&&a(t[0])}return Object(i.useEffect)(I,[I]),Object(i.useEffect)((function(){var e=b.state,t=null==e?void 0:e.file;t&&a(t)}),[b]),Object(i.useEffect)((function(){if(r&&"idle"===x){var e=new FormData;e.append("file_name",r.name),e.append("file_size",r.size.toString()),e.append("file_type",r.type),e.append("file",r),g(e)}}),[r,g,x]),Object(i.useEffect)((function(){"resolved"===x&&C()}),[C,x]),S?Object(D.jsxs)(o.a,{width:"small",isOpen:!0,onDismiss:C,"aria-label":Object(h.a)("Import from template"),children:[Object(D.jsx)(o.f,{button:Object(D.jsx)(o.d,{"aria-label":Object(h.a)("Close modal")}),children:Object(D.jsx)(s.a,{level:"1",children:Object(h.a)("Import from template")})}),Object(D.jsx)(o.c,{children:Object(D.jsxs)(d.a,{space:"large",children:["idle"===x?Object(D.jsx)("div",{ref:N,"data-testid":"dropzone",children:Object(D.jsx)(O.a,{paddingY:"xxlarge",className:K()(V,R()({},H,A)),children:Object(D.jsxs)(d.a,{space:"large",align:"center",children:[Object(D.jsx)(u.a,{children:Object(h.a)("Drag and drop a CSV file")}),Object(D.jsx)(j.a,{size:"small",variant:"tertiary",onClick:function(e){var t;e.stopPropagation(),l.current&&(l.current.value="",null===(t=l.current)||void 0===t||t.click())},"aria-label":Object(h.a)("Upload template file"),children:Object(h.a)("Upload from your computer")}),Object(D.jsx)("input",{ref:l,type:"file",name:Object(h.a)("Template file"),onChange:function(e){var t,n,r=null===(t=e.currentTarget)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0];r&&a(r)},"aria-label":Object(h.a)("Template file"),hidden:!0})]})})}):"rejected"===x?Object(D.jsx)(G,{error:m.error,retry:function(){a(null),y()}}):"pending"===x&&r?Object(D.jsx)(W,{fileName:r.name,progress:v}):null,Object(D.jsx)(u.a,{tone:"secondary",children:Object(D.jsx)(B.a,{string:Object(h.a)("Import tasks from a template, use this to create a new project by duplicating an existing one.<br /><br />Your CSV file must be UTF-8 encoded. <a>Learn more.</a>"),mapping:{a:Object(D.jsx)(q.a,{openInNewTab:!0,href:F.n,"aria-label":Object(h.a)("Learn more about importing tasks from a template")})}})})]})})]}):null}function W(e){var t=e.fileName,n=e.progress;return Object(D.jsxs)(d.a,{align:"center",space:"small",paddingY:"xlarge","aria-live":"polite","aria-busy":"true",children:[Object(D.jsx)(l.a,{"aria-label":Object(h.a)("Uploading"),size:"medium"}),Object(D.jsx)(u.a,{tone:"secondary",size:"caption",children:"".concat(t,"... ").concat(n,"%")})]})}function G(e){var t=e.error,n=e.retry,r=t instanceof Error?t.message:t.error_tag,c=Object(h.a)("Something went wrong. Please try again.");switch(r){case"OFFLINE":c=Object(h.a)("We are unable to reach Todoist servers at the moment. Please check your Internet connection or try again later.");break;case"BAD_REQUEST":c=Object(h.a)("The file you uploaded is not a valid Todoist template.")}return Object(D.jsxs)(d.a,{space:"medium",padding:"xxlarge",align:"center",children:[Object(D.jsx)(u.a,{tone:"secondary",children:c}),Object(D.jsx)(j.a,{size:"small",variant:"secondary",onClick:n,"aria-label":Object(h.a)("Retry"),children:Object(h.a)("Retry")})]})}},xefA:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r,c=n("q1tI");function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e){return c.createElement("svg",i({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.5 14.293V4.5a.5.5 0 00-1 0v9.793l-2.146-2.146a.5.5 0 10-.708.707l3 3a.5.5 0 00.708 0l3-3a.5.5 0 00-.708-.707L12.5 14.293zM19.53 19c.26 0 .47-.224.47-.5s-.21-.5-.47-.5H4.47c-.26 0-.47.224-.47.5s.21.5.47.5h15.06z",fill:"currentColor"})))}n.p},yrCE:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r,c=n("q1tI");function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e){return c.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.414 4.706l.094.093a.5.5 0 01-.707.708l-.094-.094a2 2 0 010-2.829l.379-.378a2 2 0 012.764-.062.5.5 0 01-.676.738 1 1 0 00-1.381.03l-.379.38a1 1 0 000 1.414zm9.412-1.824a1 1 0 011.381.03l.379.38a1 1 0 010 1.414l-.094.093a.5.5 0 10.707.708l.094-.094a2 2 0 000-2.829l-.379-.378a2 2 0 00-2.764-.062.5.5 0 10.676.738zm-.042 9.108A5.482 5.482 0 018 13.499a5.482 5.482 0 01-3.784-1.509l-1.362 1.362a.5.5 0 11-.708-.707l1.408-1.408a5.5 5.5 0 118.892 0l1.408 1.408a.5.5 0 01-.707.707l-1.363-1.362zM8 12.499a4.5 4.5 0 110-9 4.5 4.5 0 010 9zM8 5v3h2a.5.5 0 110 1H7.5a.5.5 0 01-.5-.5V5a.5.5 0 111 0z",fill:"currentColor"})))}n.p},"zO8/":function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s}));var r=n("Ek05"),c=[0,500,2500,5e3,7500,1e4,2e4,5e4],i=7;function a(e){return c.reduce((function(t,n,r){return e>=n?r:t}),-1)}function o(e,t){return(e=new Date(e)).setSeconds(59),e=r.a.format(e,!1,{with_year:!0}),(t=new Date(t)).setSeconds(59),e+" - "+(t=r.a.format(t,!1,{with_year:!0}))}function s(e){return""===e.start||""==e.end}},zgOj:function(e,t,n){"use strict";var r=n("lSNA"),c=n.n(r),i=n("J4zp"),a=n.n(i),o=n("q1tI"),s=n("/MKj"),l=n("Vbab"),u=n("gmEJ"),d=n("4eld"),j=n("/7zm"),b=n("UVeO"),p=n("Tc49"),O=n("GpCm"),f=n("gXw9"),h=n("h8yO"),m=n("nKUr");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.a=Object(s.c)(null,(function(e,t){var n=t.section.id;return{onDelete:function(){var r;null===(r=t.onDelete)||void 0===r||r.call(t),e(Object(u.m)(n))},onArchive:function(){var r;null===(r=t.onArchive)||void 0===r||r.call(t),e(Object(u.f)(n))},onUnarchive:function(){var n;null===(n=t.onUnarchive)||void 0===n||n.call(t),e(Object(u.p)(t.section))},onMoveToProject:function(r){r!==t.section.project_id&&e(Object(u.k)({id:n,project_id:r}))},onDuplicate:function(t){e(Object(u.g)(t))}}}))((function(e){var t,n=e.section,r=e.itemCount,i=e.onRename,s=e.onDelete,u=e.onArchive,g=e.onMoveToProject,y=e.onUnarchive,x=e.onDuplicate,w=Object(o.useState)(null),k=a()(w,2),_=k[0],S=k[1],C=Object(o.useState)(!1),P=a()(C,2),D=P[0],I=P[1],T=Object(o.useState)(!1),E=a()(T,2),A=E[0],N=E[1],R=n.is_archived?Object(m.jsxs)(p.c,{className:"section_head_menu_list","aria-label":Object(l.d)("a11y","section menu"),children:[Object(m.jsx)(p.a,{text:Object(l.a)("Unarchive section"),icon:Object(m.jsx)(b.e,{}),onClick:function(){S(null),y()}}),Object(m.jsx)(p.a,{text:Object(l.a)("Delete section"),icon:Object(m.jsx)(b.C,{}),onClick:function(){S(null),I(!0)}})]}):Object(m.jsxs)(p.c,{className:"section_head_menu_list","aria-label":Object(l.d)("a11y","section menu"),children:[Object(m.jsx)(p.a,{text:Object(l.a)("Edit section"),icon:Object(m.jsx)(b.I,{}),onClick:(t=i,function(){S(null),t.apply(void 0,arguments)})}),Object(m.jsx)(f.a,{selectionScope:"projects-only",workspaceScope:{type:"project",id:n.project_id},selectedOption:{projectId:n.project_id},onSelect:function(e){var t=e.projectId;return g(t)},position:"left",withArrow:!0,renderToggleButton:function(e){var t=e.buttonProps;return Object(m.jsx)(p.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({text:Object(l.a)("Move section"),icon:Object(m.jsx)(b.tb,{})},t))}}),Object(m.jsx)(p.a,{text:Object(l.a)("Archive section"),icon:Object(m.jsx)(b.e,{}),onClick:function(){S(null),N(!0)}}),Object(m.jsx)(p.a,{text:Object(l.a)("Duplicate section"),icon:Object(m.jsx)(b.A,{}),onClick:function(){S(null),x(n.id)}}),Object(m.jsx)(p.a,{text:Object(l.a)("Delete section"),icon:Object(m.jsx)(b.C,{}),onClick:function(){S(null),I(!0)}})]});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.a,{className:"section_head_menu",onClick:function(e){(e.target instanceof HTMLElement||e.target instanceof SVGElement)&&S(e.target)},"aria-label":Object(l.d)("a11y","section menu"),children:Object(m.jsx)(b.rb,{})}),Object(m.jsx)(O.c,{renderReferenceElement:null===_?void 0:_,isShown:Boolean(_),withArrow:!1,onClose:function(){return S(null)},zIndex:!1,children:R}),Object(m.jsx)(j.a,{isOpen:D,confirmLabel:Object(l.a)("Delete"),onConfirm:s,onCancel:function(){return I(!1)},children:Object(m.jsx)("span",{children:r<=0?Object(m.jsx)(h.a,{text:Object(l.a)("Are you sure you want to delete {section}?"),keyval:{section:Object(m.jsx)("b",{children:n.name})}}):Object(m.jsx)(h.a,{text:Object(l.b)("Delete {section} with its 1 task?","Delete {section} with its {n} tasks?",r),keyval:{section:Object(m.jsx)("b",{children:n.name}),n:Object(m.jsx)("b",{children:r})}})})}),Object(m.jsx)(j.a,{isOpen:A,confirmLabel:Object(l.a)("Archive"),onConfirm:u,onCancel:function(){return N(!1)},children:Object(m.jsx)("span",{children:r<=0?Object(m.jsx)(h.a,{text:Object(l.a)("Are you sure you want to archive {section}?"),keyval:{section:Object(m.jsx)("b",{children:n.name})}}):Object(m.jsx)(h.a,{text:Object(l.b)("Archive {section} with its 1 task?","Archive {section} with its {n} tasks?",r),keyval:{section:Object(m.jsx)("b",{children:n.name}),n:Object(m.jsx)("b",{children:r})}})})})]})}))}},[[1,1,2,5,6,4,8,9,12,10,11,66,21,19,20,22]]]);
//# sourceMappingURL=app~060beeb2.7af6687151f8e7d57724a67d2032c0f8.js.map